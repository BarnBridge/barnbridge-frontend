{"version":3,"sources":["hooks/useLeftTime.tsx","modules/smart-alpha/contracts/smartAlphaContract.ts","components/custom/tooltip/index.tsx","modules/smart-alpha/contracts/loupeContract.ts","../node_modules/@ant-design/icons-svg/es/asn/LoadingOutlined.js","../node_modules/@ant-design/icons/es/icons/LoadingOutlined.js","components/chart/index.tsx","modules/smart-alpha/hooks/next-epoch-estimate.ts","modules/smart-alpha/components/trade/index.tsx","modules/smart-alpha/components/trade/s.module.scss","modules/smart-alpha/components/transactions.tsx","components/chart/s.module.scss","components/input/index.tsx","components/input/s.module.scss","modules/smart-alpha/views/pool-view/previous-epochs/s.module.scss","modules/smart-alpha/views/pool-view/queue-state/s.module.scss","modules/smart-alpha/views/pool-view/s.module.scss","modules/smart-alpha/views/pool-view/pool-performance.tsx","modules/smart-alpha/views/pool-view/previous-epochs/index.tsx","modules/smart-alpha/views/pool-view/queue-state/index.tsx","modules/smart-alpha/views/pool-view/tokens-price.tsx","modules/smart-alpha/views/pool-view/index.tsx"],"names":["useLeftTime","options","optsRef","useRef","current","useState","isStarted","setStarted","isRunning","setRunning","getLeftTime","useCallback","end","Math","max","valueOf","Date","now","useInterval","leftTime","onTick","stopInterval","onEnd","delay","startInterval","useEffect","onStart","useMemo","start","stop","onStop","pause","resume","UseLeftTime","props","windowState","useGeneral","useReload","reload","leftTimeRef","value","isVisible","children","ABI","createAbiItem","SMART_ALPHA_DECIMALS","PriceOracleContract","address","this","call","then","BigNumber","from","Web3Contract","SmartAlphaContract","epoch","currentEpoch","epoch1Start","epochDuration","epochSeniorLiquidity","epochJuniorLiquidity","epochDownsideProtectionRate","epochUpsideExposureRate","epochEntryPrice","epochSeniorTokenPrice","epochJuniorTokenPrice","queuedJuniorsUnderlyingIn","queuedJuniorsUnderlyingOut","queuedJuniorTokensBurn","queuedSeniorsUnderlyingIn","queuedSeniorsUnderlyingOut","queuedSeniorTokensBurn","estimateCurrentSeniorTokenPrice","estimateCurrentJuniorTokenPrice","feesAccrued","priceOracleContract","priceOracle","undefined","nextEpochStart","getUnixTime","epochsGap","plus","epochTotalLiquidityRate","div","toNumber","eq","scaleBy","multipliedBy","minus","unscaleBy","a","batch","method","priceOracleAddress","Number","setCallProvider","callProvider","getPrice","emit","UPDATE_DATA","oracleSymbol","isEthAsset","result","amount","gasPrice","send","InfoTooltip","className","style","title","name","size","flexShrink","AbiTuple","LoupeContract","price","smartAlphaAddress","userAddress","LoadingOutlined","ref","React","AntdIcon","_objectSpread","icon","LoadingOutlinedSvg","displayName","renderLegend","payload","s","legend","map","entry","idx","legendItem","color","Chart","data","x","y","loading","areaUniqIds","Array","length","items","nanoid","hasRightYAxis","some","item","yAxisId","chartRef","yDomainLeft","domain","isArray","min","yAxisMap","state","isFunction","left","dataMin","dataMax","spinning","type","width","height","areaId","id","gradientTransform","offset","stopColor","vertical","strokeDasharray","stroke","dataKey","key","axisLine","tickLine","tickMargin","minTickGap","tickFormatter","format","ticks","orientation","domainRight","areaItem","fill","strokeWidth","labelFormatter","tooltipTitle","content","p","titleFormat","dataFormat","label","date","tooltip","tooltipItems","tooltipItem","tooltipName","tooltipValue","renderTooltip","itemFormat","itemsFormat","useNextEpochEstimate","saAddress","config","useConfig","getOrCreateContract","useContractFactory","loupeContract","loupeAddress","contracts","sa","loupe","nextEpochEstimates","setNextEpochEstimates","getEstimateNextEpoch","nextEpochSeniorLiquidityRate","totalLiquidity","nextEpochJuniorLiquidityRate","nextEpochUpsideLeverage","nextEpochDownsideLeverage","TradeLinks","pool","tranches","list","tranche","Tranche","poolToken","getToken","useTokens","symbol","tradePoolsLinks","poolName","link","href","token","bubble1Name","bubble2Name","outline","arrowIcon","console","error","junior","senior","hasTradeOption","Object","keys","includes","module","exports","transactionTypeLabelMap","JUNIOR_ENTRY","JUNIOR_REDEEM_TOKENS","JUNIOR_EXIT","JUNIOR_REDEEM_UNDERLYING","SENIOR_ENTRY","SENIOR_REDEEM_TOKENS","SENIOR_EXIT","SENIOR_REDEEM_UNDERLYING","JTOKEN_SEND","JTOKEN_RECEIVE","STOKEN_SEND","STOKEN_RECEIVE","filtersOptions","defaultValue","itemRender","tokenOpts","entries","TransactionsTable","poolAddress","accountAddress","page","pageSize","transactionType","filters","setFilters","prevFilters","useFetchTransactions","limit","columns","heading","render","getAsset","poolTokenSymbol","oracleToken","oracleAssetSymbol","whiteSpace","tokenAddress","weight","tokenSymbol","isIncome","isUser","checkIsIncome","formatUSD","amountInUSD","formatToken","amountInQuoteAsset","decimals","tokenName","variation","shortenAddr","transactionHash","blockTimestamp","getColumns","onChange","prevState","total","meta","count","text","Input","before","dimension","rest","inputId","isSearch","htmlFor","classNames","inputWrapper","searchIcon","input","inputSearch","TrancheFilterTypeKey","trancheTabs","epochTabs","EpochFilterTypeKey","last","PoolPerformance","trancheFilter","setTrancheFilter","epochFilter","setEpochFilter","useFetchPoolPerformance","tabs","activeKey","onClick","compact","PreviousEpochs","useParams","search","setSearch","useFetchPreviousEpochs","loaded","loadNewer","loadOlder","hasNewer","hasOlder","load","handleSearchChange","useDebounce","val","paddingLeft","placeholder","e","target","Epoch","highlighted","String","isFirst","isLast","startDate","endDate","upsideLeverage","upsideExposureRate","seniorLiquidity","juniorLiquidity","downsideLeverage","row","timeline","timelineLineTop","hasNeighbors","hasMore","timelineNumber","timelineLineBottom","card","tag","time","dateTime","toJSON","listGroup","formatNumber","formatPercent","downsideProtectionRate","juniorTokenPriceStart","juniorProfits","seniorTokenPriceStart","seniorProfits","entryPrice","QueueState","smartAlphaContract","section","sectionHeader","sectionBody","TokensPrice","PeriodTabsKey","day","periodFilter","setPeriodFilter","useFetchTokenPrice","formatTick","Intl","NumberFormat","notation","PoolView","history","useHistory","location","useLocation","network","useNetwork","useFetchPool","wallet","useWallet","queueStateVisible","setQueueStateVisible","previousEpochVisible","setPreviousEpochVisible","epochAdvancing","setEpochAdvancing","displayTradeLinks","setDisplayTradeLinks","afterInit","contract","onUpdateData","loadCommon","push","margin","entryPriceDecimals","getEntryPriceDecimals","epochUpsideLeverage","epochDownsideLeverage","handleEpochAdvance","advanceEpoch","to","iconPosition","iconRotate","activeNetwork","pathname","isMobile","account","cards","epochCard","epochCardPrimary","epochCardTitleWrap","epochCardTitle","epochCardHeader","epochCardHeaderItem","epochCardDlRow","isUsdAsset","progress","epochSeniorLiquidityRate","epochJuniorLiquidityRate","epochCardSecondary","epochProgress","epochProgressLineBefore","epochProgressCurrent","epochSpinner","epochProgressLineMiddle","tillNextEpoch","epochProgressNext","epochProgressLineAfter","requireEpochAdvance","disabled","isActive","getFormattedDuration","closeHandler","fullscreen"],"mappings":"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","file":"static/js/sa-pool-view.9b9f7fb1.chunk.js","sourcesContent":["import React, { FC, ReactNode, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport useInterval from '@rooks/use-interval';\n\nimport { useGeneral } from 'components/providers/generalProvider';\nimport { useReload } from 'hooks/useReload';\n\nexport type UseLeftTimeOptions = {\n  end?: number | Date;\n  delay?: number;\n  onStart?: (left: number) => void;\n  onStop?: (left: number) => void;\n  onTick?: (left: number) => void;\n  onEnd?: () => void;\n};\n\nexport type UseLeftTimeReturn = {\n  isStarted: boolean;\n  isRunning: boolean;\n  start: () => void;\n  stop: () => void;\n  pause: () => void;\n  resume: () => void;\n};\n\nexport function useLeftTime(options: UseLeftTimeOptions): UseLeftTimeReturn {\n  const optsRef = useRef(options);\n  optsRef.current = options;\n\n  const [isStarted, setStarted] = useState(false);\n  const [isRunning, setRunning] = useState(false);\n\n  const getLeftTime = useCallback(() => {\n    if (!optsRef.current.end) {\n      return undefined;\n    }\n\n    return Math.max(optsRef.current.end.valueOf() - Date.now(), 0);\n  }, []);\n\n  const [startInterval, stopInterval] = useInterval(\n    () => {\n      const leftTime = getLeftTime();\n      optsRef.current.onTick?.(leftTime ?? 0);\n\n      if (leftTime === 0) {\n        setStarted(false);\n        stopInterval();\n        optsRef.current.onEnd?.();\n      }\n    },\n    options.delay ?? 1_000,\n    false,\n  );\n\n  useEffect(() => {\n    if (!options.end || Date.now() < options.end) {\n      setStarted(true);\n      startInterval();\n      optsRef.current.onStart?.(getLeftTime() ?? 0);\n    }\n\n    return () => {\n      setStarted(false);\n      stopInterval();\n    };\n  }, [options.end]);\n\n  return useMemo(() => {\n    return {\n      isStarted,\n      isRunning,\n      start: () => {\n        setStarted(true);\n        setRunning(true);\n        startInterval();\n        optsRef.current.onStart?.(getLeftTime() ?? 0);\n      },\n      stop: () => {\n        setRunning(false);\n        setStarted(false);\n        stopInterval();\n        optsRef.current.onStop?.(getLeftTime() ?? 0);\n      },\n      pause: () => {\n        setRunning(false);\n        stopInterval();\n      },\n      resume: () => {\n        setRunning(true);\n        startInterval();\n      },\n    };\n  }, [isRunning, stopInterval, startInterval]);\n}\n\nexport type UseLeftTimeProps = UseLeftTimeOptions & {\n  children: (leftTime: number) => ReactNode;\n};\n\nexport const UseLeftTime: FC<UseLeftTimeProps> = props => {\n  const { windowState } = useGeneral();\n  const [reload] = useReload();\n  const leftTimeRef = useRef<number | undefined>();\n\n  const { isStarted, isRunning, pause, resume } = useLeftTime({\n    ...props,\n    onStart: value => {\n      leftTimeRef.current = value;\n      reload();\n      props.onStart?.(value);\n    },\n    onStop: value => {\n      leftTimeRef.current = value;\n      reload();\n      props.onStop?.(value);\n    },\n    onTick: value => {\n      leftTimeRef.current = value;\n      reload();\n      props.onTick?.(value);\n    },\n  });\n\n  useEffect(() => {\n    if (!isStarted) {\n      return;\n    }\n\n    if (!isRunning && windowState.isVisible) {\n      resume();\n    }\n\n    if (isRunning && !windowState.isVisible) {\n      pause();\n    }\n  }, [windowState.isVisible, isStarted, isRunning]);\n\n  return <>{props.children(leftTimeRef.current ?? 0)}</>;\n};\n","import BigNumber from 'bignumber.js';\nimport getUnixTime from 'date-fns/getUnixTime';\nimport { AbiItem } from 'web3-utils';\nimport Web3Contract, { createAbiItem } from 'web3/web3Contract';\n\nimport { isEthAsset } from 'components/providers/tokensProvider';\n\nconst ABI: AbiItem[] = [\n  // call\n  createAbiItem('epoch', [], ['uint256']),\n  createAbiItem('getCurrentEpoch', [], ['uint256']),\n  createAbiItem('epoch1Start', [], ['uint256']),\n  createAbiItem('epochDuration', [], ['uint256']),\n\n  createAbiItem('epochSeniorLiquidity', [], ['uint256']),\n  createAbiItem('epochJuniorLiquidity', [], ['uint256']),\n  createAbiItem('epochDownsideProtectionRate', [], ['uint256']),\n  createAbiItem('epochUpsideExposureRate', [], ['uint256']),\n  createAbiItem('epochEntryPrice', [], ['uint256']),\n  createAbiItem('getEpochSeniorTokenPrice', [], ['uint256']),\n  createAbiItem('getEpochJuniorTokenPrice', [], ['uint256']),\n  createAbiItem('estimateCurrentSeniorTokenPrice', [], ['uint256']),\n  createAbiItem('estimateCurrentJuniorTokenPrice', [], ['uint256']),\n\n  createAbiItem('queuedJuniorsUnderlyingIn', [], ['uint256']),\n  createAbiItem('queuedJuniorsUnderlyingOut', [], ['uint256']),\n  createAbiItem('queuedJuniorTokensBurn', [], ['uint256']),\n  createAbiItem('queuedSeniorsUnderlyingIn', [], ['uint256']),\n  createAbiItem('queuedSeniorsUnderlyingOut', [], ['uint256']),\n  createAbiItem('queuedSeniorTokensBurn', [], ['uint256']),\n\n  createAbiItem('feesAccrued', [], ['uint256']),\n  createAbiItem('priceOracle', [], ['address']),\n\n  createAbiItem('seniorEntryQueue', ['address'], ['uint256', 'uint256']),\n  createAbiItem('seniorExitQueue', ['address'], ['uint256', 'uint256']),\n  createAbiItem('juniorEntryQueue', ['address'], ['uint256', 'uint256']),\n  createAbiItem('juniorExitQueue', ['address'], ['uint256', 'uint256']),\n\n  // send\n  createAbiItem('depositJunior', ['uint256'], []),\n  createAbiItem('exitJunior', ['uint256'], []),\n  createAbiItem('redeemJuniorTokens', [], []),\n  createAbiItem('redeemJuniorUnderlying', [], []),\n  createAbiItem('depositSenior', ['uint256'], []),\n  createAbiItem('exitSenior', ['uint256'], []),\n  createAbiItem('redeemSeniorTokens', [], []),\n  createAbiItem('redeemSeniorUnderlying', [], []),\n  createAbiItem('transferFees', [], []),\n  createAbiItem('advanceEpoch', [], []),\n];\n\nexport const SMART_ALPHA_DECIMALS = 18;\n\nclass PriceOracleContract extends Web3Contract {\n  constructor(address: string) {\n    super([createAbiItem('getPrice', [], ['uint256'])], address, 'SA Price Oracle');\n  }\n\n  getPrice(): Promise<BigNumber | undefined> {\n    return this.call('getPrice').then(value => BigNumber.from(value));\n  }\n}\n\nclass SmartAlphaContract extends Web3Contract {\n  // common\n  epoch: number | undefined;\n  currentEpoch: number | undefined;\n  epoch1Start: number | undefined;\n  epochDuration: number | undefined;\n  epochSeniorLiquidity: BigNumber | undefined;\n  epochJuniorLiquidity: BigNumber | undefined;\n  epochDownsideProtectionRate: BigNumber | undefined;\n  epochUpsideExposureRate: BigNumber | undefined;\n  epochEntryPrice: BigNumber | undefined;\n  epochSeniorTokenPrice: BigNumber | undefined;\n  epochJuniorTokenPrice: BigNumber | undefined;\n  queuedJuniorsUnderlyingIn: BigNumber | undefined;\n  queuedJuniorsUnderlyingOut: BigNumber | undefined;\n  queuedJuniorTokensBurn: BigNumber | undefined;\n  queuedSeniorsUnderlyingIn: BigNumber | undefined;\n  queuedSeniorsUnderlyingOut: BigNumber | undefined;\n  queuedSeniorTokensBurn: BigNumber | undefined;\n  estimateCurrentSeniorTokenPrice: BigNumber | undefined;\n  estimateCurrentJuniorTokenPrice: BigNumber | undefined;\n  feesAccrued: BigNumber | undefined;\n  priceOracleContract: PriceOracleContract | undefined;\n  priceOracle: BigNumber | undefined;\n\n  constructor(address: string) {\n    super(ABI, address, 'Smart Alpha');\n  }\n\n  // computed\n  get nextEpochStart(): number | undefined {\n    if (this.currentEpoch === undefined || this.epochDuration === undefined || this.epoch1Start === undefined) {\n      return undefined;\n    }\n\n    return this.epoch1Start + this.currentEpoch * this.epochDuration;\n  }\n\n  get tillNextEpoch(): number | undefined {\n    const nextEpochStart = this.nextEpochStart;\n\n    if (nextEpochStart === undefined) {\n      return undefined;\n    }\n\n    return Math.max(0, nextEpochStart - getUnixTime(Date.now()));\n  }\n\n  get epochsGap(): number | undefined {\n    if (this.epoch === undefined || this.currentEpoch === undefined) {\n      return undefined;\n    }\n\n    return this.currentEpoch - this.epoch;\n  }\n\n  get requireEpochAdvance(): boolean {\n    const epochsGap = this.epochsGap;\n    return epochsGap !== undefined && epochsGap > 0;\n  }\n\n  get epochTotalLiquidityRate(): BigNumber | undefined {\n    if (!this.epochSeniorLiquidity || !this.epochJuniorLiquidity) {\n      return undefined;\n    }\n\n    return this.epochSeniorLiquidity.plus(this.epochJuniorLiquidity);\n  }\n\n  get epochSeniorLiquidityRate(): number | undefined {\n    if (!this.epochSeniorLiquidity || !this.epochTotalLiquidityRate) {\n      return undefined;\n    }\n\n    return this.epochSeniorLiquidity.div(this.epochTotalLiquidityRate).toNumber();\n  }\n\n  get epochJuniorLiquidityRate(): number | undefined {\n    if (!this.epochJuniorLiquidity || !this.epochTotalLiquidityRate) {\n      return undefined;\n    }\n\n    return this.epochJuniorLiquidity.div(this.epochTotalLiquidityRate).toNumber();\n  }\n\n  get epochUpsideLeverage(): BigNumber | undefined {\n    if (!this.epochSeniorLiquidity || !this.epochJuniorLiquidity || !this.epochUpsideExposureRate) {\n      return undefined;\n    }\n\n    if (this.epochJuniorLiquidity.eq(0)) {\n      return new BigNumber(1).scaleBy(SMART_ALPHA_DECIMALS);\n    }\n\n    return this.epochSeniorLiquidity\n      .div(this.epochJuniorLiquidity)\n      .multipliedBy(new BigNumber(1).minus(this.epochUpsideExposureRate.unscaleBy(SMART_ALPHA_DECIMALS)!))\n      .plus(1)\n      .scaleBy(SMART_ALPHA_DECIMALS);\n  }\n\n  get epochDownsideLeverage(): BigNumber | undefined {\n    if (!this.epochSeniorLiquidity || !this.epochJuniorLiquidity) {\n      return undefined;\n    }\n\n    if (this.epochJuniorLiquidity.eq(0)) {\n      return new BigNumber(1).scaleBy(SMART_ALPHA_DECIMALS);\n    }\n\n    return this.epochSeniorLiquidity.div(this.epochJuniorLiquidity).plus(1).scaleBy(SMART_ALPHA_DECIMALS);\n  }\n\n  async loadCommon() {\n    const [\n      epoch,\n      currentEpoch,\n      epoch1Start,\n      epochDuration,\n      epochSeniorLiquidity,\n      epochJuniorLiquidity,\n      epochDownsideProtectionRate,\n      epochUpsideExposureRate,\n      epochEntryPrice,\n      epochSeniorTokenPrice,\n      epochJuniorTokenPrice,\n      queuedJuniorsUnderlyingIn,\n      queuedJuniorsUnderlyingOut,\n      queuedJuniorTokensBurn,\n      queuedSeniorsUnderlyingIn,\n      queuedSeniorsUnderlyingOut,\n      queuedSeniorTokensBurn,\n      estimateCurrentSeniorTokenPrice,\n      estimateCurrentJuniorTokenPrice,\n      priceOracleAddress,\n    ] = await this.batch([\n      { method: 'epoch' },\n      { method: 'getCurrentEpoch' },\n      { method: 'epoch1Start' },\n      { method: 'epochDuration' },\n      { method: 'epochSeniorLiquidity' },\n      { method: 'epochJuniorLiquidity' },\n      { method: 'epochDownsideProtectionRate' },\n      { method: 'epochUpsideExposureRate' },\n      { method: 'epochEntryPrice' },\n      { method: 'getEpochSeniorTokenPrice' },\n      { method: 'getEpochJuniorTokenPrice' },\n      { method: 'queuedJuniorsUnderlyingIn' },\n      { method: 'queuedJuniorsUnderlyingOut' },\n      { method: 'queuedJuniorTokensBurn' },\n      { method: 'queuedSeniorsUnderlyingIn' },\n      { method: 'queuedSeniorsUnderlyingOut' },\n      { method: 'queuedSeniorTokensBurn' },\n      { method: 'estimateCurrentSeniorTokenPrice' },\n      { method: 'estimateCurrentJuniorTokenPrice' },\n      { method: 'priceOracle' },\n    ]);\n\n    this.epoch = Number(epoch);\n    this.currentEpoch = Number(currentEpoch);\n    this.epoch1Start = Number(epoch1Start);\n    this.epochDuration = Number(epochDuration);\n    this.epochSeniorLiquidity = BigNumber.from(epochSeniorLiquidity);\n    this.epochJuniorLiquidity = BigNumber.from(epochJuniorLiquidity);\n    this.epochDownsideProtectionRate = BigNumber.from(epochDownsideProtectionRate);\n    this.epochUpsideExposureRate = BigNumber.from(epochUpsideExposureRate);\n    this.epochEntryPrice = BigNumber.from(epochEntryPrice);\n    this.epochSeniorTokenPrice = BigNumber.from(epochSeniorTokenPrice);\n    this.epochJuniorTokenPrice = BigNumber.from(epochJuniorTokenPrice);\n    this.queuedJuniorsUnderlyingIn = BigNumber.from(queuedJuniorsUnderlyingIn);\n    this.queuedJuniorsUnderlyingOut = BigNumber.from(queuedJuniorsUnderlyingOut);\n    this.queuedJuniorTokensBurn = BigNumber.from(queuedJuniorTokensBurn);\n    this.queuedSeniorsUnderlyingIn = BigNumber.from(queuedSeniorsUnderlyingIn);\n    this.queuedSeniorsUnderlyingOut = BigNumber.from(queuedSeniorsUnderlyingOut);\n    this.queuedSeniorTokensBurn = BigNumber.from(queuedSeniorTokensBurn);\n    this.estimateCurrentSeniorTokenPrice = BigNumber.from(estimateCurrentSeniorTokenPrice);\n    this.estimateCurrentJuniorTokenPrice = BigNumber.from(estimateCurrentJuniorTokenPrice);\n    this.priceOracleContract = new PriceOracleContract(priceOracleAddress);\n    this.priceOracleContract.setCallProvider(this.callProvider);\n    this.priceOracle = await this.priceOracleContract.getPrice();\n    this.emit(Web3Contract.UPDATE_DATA);\n  }\n\n  getEntryPriceDecimals(oracleSymbol: string) {\n    return isEthAsset(oracleSymbol) ? 18 : 8;\n  }\n\n  seniorEntryQueue(address: string): Promise<[number, BigNumber | undefined]> {\n    return this.call('seniorEntryQueue', [address], {}).then(result => [Number(result[0]), BigNumber.from(result[1])]);\n  }\n\n  seniorExitQueue(address: string): Promise<[number, BigNumber | undefined]> {\n    return this.call('seniorExitQueue', [address], {}).then(result => [Number(result[0]), BigNumber.from(result[1])]);\n  }\n\n  juniorEntryQueue(address: string): Promise<[number, BigNumber | undefined]> {\n    return this.call('juniorEntryQueue', [address], {}).then(result => [Number(result[0]), BigNumber.from(result[1])]);\n  }\n\n  juniorExitQueue(address: string): Promise<[number, BigNumber | undefined]> {\n    return this.call('juniorExitQueue', [address], {}).then(result => [Number(result[0]), BigNumber.from(result[1])]);\n  }\n\n  getFeesAccrued(): Promise<BigNumber | undefined> {\n    return this.call('feesAccrued', [], {}).then(result => {\n      this.feesAccrued = BigNumber.from(result);\n      this.emit(Web3Contract.UPDATE_DATA);\n      return this.feesAccrued;\n    });\n  }\n\n  async depositJunior(amount: BigNumber, gasPrice?: number): Promise<void> {\n    await this.send('depositJunior', [amount], {}, gasPrice);\n  }\n\n  async withdrawJunior(amount: BigNumber, gasPrice?: number): Promise<void> {\n    await this.send('exitJunior', [amount], {}, gasPrice);\n  }\n\n  async redeemJuniorTokens(gasPrice?: number): Promise<void> {\n    await this.send('redeemJuniorTokens', [], {}, gasPrice);\n  }\n\n  async redeemJuniorUnderlying(gasPrice?: number): Promise<void> {\n    await this.send('redeemJuniorUnderlying', [], {}, gasPrice);\n  }\n\n  async depositSenior(amount: BigNumber, gasPrice?: number): Promise<void> {\n    await this.send('depositSenior', [amount], {}, gasPrice);\n  }\n\n  async withdrawSenior(amount: BigNumber, gasPrice?: number): Promise<void> {\n    await this.send('exitSenior', [amount], {}, gasPrice);\n  }\n\n  async redeemSeniorTokens(gasPrice?: number): Promise<void> {\n    await this.send('redeemSeniorTokens', [], {}, gasPrice);\n  }\n\n  async redeemSeniorUnderlying(gasPrice?: number): Promise<void> {\n    await this.send('redeemSeniorUnderlying', [], {}, gasPrice);\n  }\n\n  async transferFees(gasPrice?: number): Promise<void> {\n    await this.send('transferFees', [], {}, gasPrice);\n  }\n\n  async advanceEpoch(): Promise<void> {\n    await this.send('advanceEpoch', [], {});\n  }\n}\n\nexport default SmartAlphaContract;\n","import Tooltip from 'components/antd/tooltip';\nimport { Icon } from 'components/icon';\n\ntype PropsType = {\n  className?: string;\n  style?: React.CSSProperties;\n};\n\nexport const InfoTooltip: React.FC<PropsType> = ({ children, className, style }) => (\n  <Tooltip title={children}>\n    <Icon\n      name=\"info\"\n      size={16}\n      className={className}\n      style={{\n        flexShrink: 0,\n        ...style,\n      }}\n    />\n  </Tooltip>\n);\n","import BigNumber from 'bignumber.js';\nimport { AbiItem } from 'web3-utils';\nimport Web3Contract, { AbiTuple, createAbiItem } from 'web3/web3Contract';\n\nconst ABI: AbiItem[] = [\n  // call\n  createAbiItem(\n    'estimateNextEpoch',\n    ['address'],\n    [new AbiTuple(['uint256', 'uint256', 'uint256', 'uint256', 'uint256'])],\n  ),\n  createAbiItem('userRedeemableSeniorTokens', ['address', 'address'], ['uint256']),\n  createAbiItem('userRedeemableJuniorTokens', ['address', 'address'], ['uint256']),\n  createAbiItem('userRedeemableSeniorUnderlying', ['address', 'address'], ['uint256']),\n  createAbiItem('userRedeemableJuniorUnderlying', ['address', 'address'], ['uint256']),\n];\n\nclass LoupeContract extends Web3Contract {\n  price: BigNumber | undefined;\n\n  constructor(address: string) {\n    super(ABI, address, 'SA Loupe');\n  }\n\n  getEstimateNextEpoch(smartAlphaAddress: string): Promise<(BigNumber | undefined)[]> {\n    return this.call('estimateNextEpoch', [smartAlphaAddress], {}).then(result => [\n      BigNumber.from(result[0]), // juniorLiquidity\n      BigNumber.from(result[1]), // seniorLiquidity\n      BigNumber.from(result[2]), // upsideRate\n      BigNumber.from(result[3]), // downsideRate\n      BigNumber.from(result[4]), // startPrice\n    ]);\n  }\n\n  getUserRedeemableSeniorTokens(smartAlphaAddress: string, userAddress: string): Promise<BigNumber | undefined> {\n    return this.call('userRedeemableSeniorTokens', [smartAlphaAddress, userAddress], {}).then(BigNumber.from);\n  }\n\n  getUserRedeemableJuniorTokens(smartAlphaAddress: string, userAddress: string): Promise<BigNumber | undefined> {\n    return this.call('userRedeemableJuniorTokens', [smartAlphaAddress, userAddress], {}).then(BigNumber.from);\n  }\n\n  getUserRedeemableSeniorUnderlying(smartAlphaAddress: string, userAddress: string): Promise<BigNumber | undefined> {\n    return this.call('userRedeemableSeniorUnderlying', [smartAlphaAddress, userAddress], {}).then(BigNumber.from);\n  }\n\n  getUserRedeemableJuniorUnderlying(smartAlphaAddress: string, userAddress: string): Promise<BigNumber | undefined> {\n    return this.call('userRedeemableJuniorUnderlying', [smartAlphaAddress, userAddress], {}).then(BigNumber.from);\n  }\n}\n\nexport default LoupeContract;\n","// This icon file is generated automatically.\nvar LoadingOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\" } }] }, \"name\": \"loading\", \"theme\": \"outlined\" };\nexport default LoadingOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport LoadingOutlinedSvg from \"@ant-design/icons-svg/es/asn/LoadingOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar LoadingOutlined = function LoadingOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: LoadingOutlinedSvg\n  }));\n};\n\nLoadingOutlined.displayName = 'LoadingOutlined';\nexport default /*#__PURE__*/React.forwardRef(LoadingOutlined);","import { Component, useMemo, useRef } from 'react';\nimport { format } from 'date-fns';\nimport { isFunction } from 'lodash';\nimport { nanoid } from 'nanoid';\nimport { Area, AreaChart, CartesianGrid, Legend, ResponsiveContainer, Tooltip, XAxis, YAxis } from 'recharts';\nimport { CategoricalChartProps, CategoricalChartState } from 'recharts/types/chart/generateCategoricalChart';\nimport { AxisDomain, AxisDomainItem } from 'recharts/types/util/types';\n\nimport Spin from 'components/antd/spin';\nimport { Text } from 'components/custom/typography';\nimport { ReactComponent as EmptyChartSvg } from 'resources/svg/empty-chart.svg';\n\nimport s from './s.module.scss';\n\ninterface PropsType {\n  data: Object[];\n  x: {\n    key: string;\n    format?: (item: any) => string;\n    itemFormat?: (item: any) => string;\n    ticks?: number[];\n  };\n  y: {\n    format?: (item: any) => string;\n    itemsFormat?: (item: any) => string;\n    items: {\n      key: string;\n      title: string;\n      color: 'red' | 'green' | 'blue' | 'yellow' | 'purple' | 'grey';\n      yAxisId?: 'left' | 'right';\n    }[];\n    domain?: AxisDomain;\n    domainRight?: AxisDomain;\n  };\n  className?: string;\n  loading?: boolean;\n}\n\nconst renderTooltip = (\n  props: any,\n  titleFormat: PropsType['x']['itemFormat'],\n  dataFormat: PropsType['y']['itemsFormat'],\n) => {\n  const { payload, label } = props;\n  if (!payload) return null;\n\n  const date = label && titleFormat ? titleFormat(label) : label; // format(new Date(label), 'MM.dd.yyyy HH:mm') : '';\n\n  return (\n    <div className={s.tooltip}>\n      <div className={s.tooltipTitle}>{date}</div>\n      <dl className={s.tooltipItems}>\n        {payload.map((item, idx) => {\n          return (\n            <div className={s.tooltipItem} key={idx}>\n              <dt className={s.tooltipName} style={{ '--dot-color': item.color } as React.CSSProperties}>\n                {item.name}\n              </dt>\n              <dd className={s.tooltipValue}>{dataFormat ? dataFormat(item.value) : item.value}</dd>\n            </div>\n          );\n        })}\n      </dl>\n    </div>\n  );\n};\n\nconst renderLegend = ({ payload }: any) => {\n  if (!payload) return null;\n  return (\n    <div className={s.legend}>\n      {payload.map((entry, idx) => (\n        <span key={idx} className={s.legendItem} style={{ '--dot-color': entry.color } as React.CSSProperties}>\n          {entry.value}\n        </span>\n      ))}\n    </div>\n  );\n};\n\nexport const Chart: React.FC<PropsType> = ({ data, x, y, className, loading = false }) => {\n  const areaUniqIds = useMemo(() => {\n    return Array.from({ length: y.items.length }).map(() => nanoid());\n  }, [y.items.length]);\n\n  const hasRightYAxis = y.items.some(item => item.yAxisId === 'right');\n\n  const chartRef = useRef<Component<CategoricalChartProps, CategoricalChartState>>();\n\n  const yDomainLeft = useMemo(() => {\n    if (!chartRef.current || !y.domain || !Array.isArray(y.domain)) {\n      return y.domain;\n    }\n\n    const [min, max] = y.domain;\n    const { yAxisMap } = chartRef.current.state as CategoricalChartState;\n\n    if (!isFunction(min) || !isFunction(max) || !yAxisMap || !yAxisMap.left) {\n      return y.domain;\n    }\n\n    const { domain = [] } = yAxisMap.left;\n\n    return [\n      dataMin => min(dataMin, domain ?? [dataMin, dataMin]),\n      dataMax => max(dataMax, domain ?? [dataMax, dataMax]),\n    ] as [AxisDomainItem, AxisDomainItem];\n  }, [chartRef.current, y.domain]);\n\n  return (\n    <Spin spinning={loading}>\n      {data.length === 0 ? (\n        <div className=\"flex flow-row row-gap-24 align-center justify-center pv-48\">\n          <EmptyChartSvg />\n          <Text type=\"p1\" color=\"secondary\">\n            Not enough data to plot a graph\n          </Text>\n        </div>\n      ) : (\n        <ResponsiveContainer width=\"100%\" height={300} className={className}>\n          <AreaChart ref={chartRef as any} data={data}>\n            <defs>\n              {areaUniqIds.map((areaId, idx) => (\n                <linearGradient key={areaId} id={areaId} gradientTransform=\"rotate(180)\">\n                  <stop offset=\"0%\" stopColor={`rgba(var(--theme-${y.items[idx].color}-color-rgb), 0.08)`} />\n                  <stop offset=\"100%\" stopColor={`rgba(var(--theme-${y.items[idx].color}-color-rgb), 0)`} />\n                </linearGradient>\n              ))}\n            </defs>\n            <CartesianGrid vertical={false} strokeDasharray=\"3 0\" stroke=\"var(--theme-border-color)\" />\n            <XAxis\n              dataKey={x.key}\n              axisLine={false}\n              tickLine={false}\n              tickMargin={8}\n              minTickGap={0}\n              tickFormatter={x.format}\n              ticks={x.ticks}\n            />\n            <YAxis\n              axisLine={false}\n              tickLine={false}\n              tickFormatter={y.format}\n              orientation=\"left\"\n              yAxisId=\"left\"\n              domain={yDomainLeft}\n            />\n            {hasRightYAxis && (\n              <YAxis\n                axisLine={false}\n                tickLine={false}\n                tickFormatter={y.format}\n                orientation=\"right\"\n                yAxisId=\"right\"\n                domain={y.domainRight}\n              />\n            )}\n\n            {y.items.map((areaItem, idx) => (\n              <Area\n                key={areaItem.key}\n                name={areaItem.title}\n                dataKey={areaItem.key}\n                type=\"monotone\"\n                fill={`url(#${areaUniqIds[idx]})`}\n                stroke={`var(--theme-${y.items[idx].color}-color)`}\n                strokeWidth={2}\n                yAxisId={areaItem.yAxisId ?? 'left'}\n                strokeDasharray={areaItem.yAxisId === 'right' ? '3 3' : ''}\n              />\n            ))}\n            <Tooltip\n              labelFormatter={value => (\n                <div className={s.tooltipTitle}>{value ? format(new Date(value), 'MM.dd.yyyy HH:mm') : ''}</div>\n              )}\n              content={p => renderTooltip(p, x.itemFormat, y.itemsFormat)}\n            />\n            <Legend content={renderLegend} />\n          </AreaChart>\n        </ResponsiveContainer>\n      )}\n    </Spin>\n  );\n};\n","import { useEffect, useMemo, useState } from 'react';\nimport { BigNumber } from 'bignumber.js';\n\nimport { useConfig } from 'components/providers/configProvider';\nimport { useContractFactory } from 'hooks/useContract';\n\nimport LoupeContract from '../contracts/loupeContract';\nimport { SMART_ALPHA_DECIMALS } from '../contracts/smartAlphaContract';\n\ntype ReturnType = {\n  nextEpochEstimates: (BigNumber | undefined)[];\n  nextEpochSeniorLiquidityRate: number | undefined;\n  nextEpochJuniorLiquidityRate: number | undefined;\n  nextEpochUpsideLeverage: BigNumber | undefined;\n  nextEpochDownsideLeverage: BigNumber | undefined;\n};\n\nexport function useNextEpochEstimate(saAddress: string | undefined): ReturnType {\n  const config = useConfig();\n  const { getOrCreateContract } = useContractFactory();\n\n  const loupeContract = useMemo(() => {\n    const loupeAddress = config.contracts.sa?.loupe;\n\n    if (!loupeAddress) {\n      return;\n    }\n\n    return getOrCreateContract(loupeAddress, () => {\n      return new LoupeContract(loupeAddress);\n    });\n  }, []);\n\n  const [nextEpochEstimates, setNextEpochEstimates] = useState<ReturnType['nextEpochEstimates']>([]);\n\n  useEffect(() => {\n    if (!saAddress || !loupeContract) {\n      return;\n    }\n\n    loupeContract.getEstimateNextEpoch(saAddress).then(result => {\n      setNextEpochEstimates(result);\n    });\n  }, [saAddress, loupeContract]);\n\n  const nextEpochSeniorLiquidityRate = useMemo(() => {\n    if (!nextEpochEstimates[0] || !nextEpochEstimates[1]) {\n      return 0;\n    }\n\n    const totalLiquidity = nextEpochEstimates[0].plus(nextEpochEstimates[1]);\n    return nextEpochEstimates[1]?.div(totalLiquidity).toNumber();\n  }, [nextEpochEstimates]);\n\n  const nextEpochJuniorLiquidityRate = useMemo(() => {\n    if (!nextEpochEstimates[0] || !nextEpochEstimates[1]) {\n      return 0;\n    }\n\n    const totalLiquidity = nextEpochEstimates[0].plus(nextEpochEstimates[1]);\n    return nextEpochEstimates[0]?.div(totalLiquidity).toNumber();\n  }, [nextEpochEstimates]);\n\n  const nextEpochUpsideLeverage = useMemo(() => {\n    if (!nextEpochEstimates[0] || !nextEpochEstimates[1] || !nextEpochEstimates[2]) {\n      return undefined;\n    }\n\n    if (nextEpochEstimates[0].eq(0)) {\n      return new BigNumber(1);\n    }\n\n    return nextEpochEstimates[1]\n      .div(nextEpochEstimates[0])\n      .multipliedBy(new BigNumber(1).minus(nextEpochEstimates[2].unscaleBy(SMART_ALPHA_DECIMALS)!))\n      .plus(1);\n  }, [nextEpochEstimates]);\n\n  const nextEpochDownsideLeverage = useMemo(() => {\n    if (!nextEpochEstimates[0] || !nextEpochEstimates[1]) {\n      return undefined;\n    }\n\n    if (nextEpochEstimates[0].eq(0)) {\n      return new BigNumber(1);\n    }\n\n    return nextEpochEstimates[1].div(nextEpochEstimates[0]).plus(1);\n  }, [nextEpochEstimates]);\n\n  return {\n    nextEpochEstimates,\n    nextEpochSeniorLiquidityRate,\n    nextEpochJuniorLiquidityRate,\n    nextEpochUpsideLeverage,\n    nextEpochDownsideLeverage,\n  };\n}\n","import { ExternalLink } from 'components/button';\nimport { Icon } from 'components/icon';\nimport { useTokens } from 'components/providers/tokensProvider';\nimport { TokenIcon } from 'components/token-icon';\nimport { PoolApiType } from 'modules/smart-alpha/api';\n\nimport s from './s.module.scss';\n\ntype TradeTranchesType = ['junior', 'senior'] | ['junior'] | ['senior'];\ntype TrancheType = 'junior' | 'senior';\n\nexport const TradeLinks = ({\n  pool,\n  tranches = ['junior', 'senior'],\n}: {\n  pool: PoolApiType;\n  tranches?: TradeTranchesType;\n}) => {\n  return (\n    <ul className={s.list}>\n      {tranches.map((tranche: TrancheType) => {\n        return <Tranche key={tranche} tranche={tranche} pool={pool} />;\n      })}\n    </ul>\n  );\n};\n\nconst Tranche = ({ pool, tranche }: { pool: PoolApiType; tranche: TrancheType }) => {\n  const { getToken } = useTokens();\n  const poolToken = getToken(pool.poolToken.symbol);\n\n  const data = tradePoolsLinks[pool.poolName]?.[tranche];\n\n  if (!data) {\n    console.error(`No trade links for ${tranche}_${pool.poolName}`);\n    return null;\n  }\n\n  return (\n    <>\n      <li>\n        <ExternalLink className={s.link} href={data[0]}>\n          <div className={s.token}>\n            <TokenIcon name={poolToken?.icon} bubble1Name=\"bond\" bubble2Name=\"usd\" outline=\"purple\" size={32} />\n            {tranche}_{pool.poolName}\n          </div>\n          <div className={s.arrowIcon}>\n            <Icon name=\"arrow\" color=\"icon\" size={16} />\n          </div>\n          <div className={s.token}>\n            <TokenIcon name={poolToken?.icon} bubble1Name=\"bond\" bubble2Name=\"usd\" outline=\"green\" size={32} />\n            {tranche === 'senior' ? 'junior' : 'senior'}_{pool.poolName}\n          </div>\n        </ExternalLink>\n      </li>\n      <li>\n        <ExternalLink className={s.link} href={data[1]}>\n          <div className={s.token}>\n            <TokenIcon name={poolToken?.icon} bubble1Name=\"bond\" bubble2Name=\"usd\" outline=\"purple\" size={32} />\n            {tranche}_{pool.poolName}\n          </div>\n          <div className={s.arrowIcon}>\n            <Icon name=\"arrow\" color=\"icon\" size={16} />\n          </div>\n          <div className={s.token}>\n            <TokenIcon name={poolToken?.icon} bubble2Name=\"usd\" size={32} />\n            {pool.poolToken.symbol}\n          </div>\n        </ExternalLink>\n      </li>\n    </>\n  );\n};\n\nconst tradePoolsLinks = {\n  'WETH-USD-1w': {\n    junior: [\n      'https://app.balancer.fi/#/trade/0xcd89c90ce3d565f51587033604591ba292ba1866/0xb138dd4a00f9afa14c7feaacd710f37a22fe4f12',\n      'https://app.balancer.fi/#/trade/0xcd89c90ce3d565f51587033604591ba292ba1866/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n    ],\n    senior: [\n      'https://app.balancer.fi/#/trade/0xb138dd4a00f9afa14c7feaacd710f37a22fe4f12/0xcd89c90ce3d565f51587033604591ba292ba1866',\n      'https://app.balancer.fi/#/trade/0xb138dd4a00f9afa14c7feaacd710f37a22fe4f12/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n    ],\n  },\n  'WBTC-USD-1w': {\n    junior: [\n      'https://app.balancer.fi/#/trade/0x2766cc123d0a005c73f7bac66ce9e6a746fc1006/0xc919d5d1053a9ab77529618e45f168b199bd823d',\n      'https://app.balancer.fi/#/trade/0x2766cc123d0a005c73f7bac66ce9e6a746fc1006/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599',\n    ],\n    senior: [\n      'https://app.balancer.fi/#/trade/0xc919d5d1053a9ab77529618e45f168b199bd823d/0x2766cc123d0a005c73f7bac66ce9e6a746fc1006',\n      'https://app.balancer.fi/#/trade/0xc919d5d1053a9ab77529618e45f168b199bd823d/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599',\n    ],\n  },\n};\n\nexport function hasTradeOption(poolName: string) {\n  return Object.keys(tradePoolsLinks).includes(poolName);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"s_list__D30tk\",\"link\":\"s_link__lvRqU\",\"token\":\"s_token__1zE_S\",\"arrowIcon\":\"s_arrowIcon__187l2\"};","import { useEffect, useMemo, useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport { format } from 'date-fns';\nimport { formatToken, formatUSD, shortenAddr } from 'web3/utils';\n\nimport Select from 'components/antd/select';\nimport { ExplorerAddressLink } from 'components/button';\nimport { ColumnType, Table, TableFooter } from 'components/custom/table';\nimport TableFilter, { TableFilterType } from 'components/custom/table-filter';\nimport { Text } from 'components/custom/typography';\nimport { useTokens } from 'components/providers/tokensProvider';\nimport { TokenIcon } from 'components/token-icon';\nimport { TransactionApiType, useFetchTransactions } from 'modules/smart-alpha/api';\n\nconst transactionTypeLabelMap = {\n  JUNIOR_ENTRY: 'Junior entry',\n  JUNIOR_REDEEM_TOKENS: 'Junior redeem tokens',\n  JUNIOR_EXIT: 'Junior exit',\n  JUNIOR_REDEEM_UNDERLYING: 'Junior redeem underlying',\n  SENIOR_ENTRY: 'Senior entry',\n  SENIOR_REDEEM_TOKENS: 'Senior redeem tokens',\n  SENIOR_EXIT: 'Senior exit',\n  SENIOR_REDEEM_UNDERLYING: 'Senior redeem underlying',\n  JTOKEN_SEND: 'Jtoken send',\n  JTOKEN_RECEIVE: 'Jtoken receive',\n  STOKEN_SEND: 'Stoken send',\n  STOKEN_RECEIVE: 'Stoken receive',\n};\n\nconst filtersOptions: TableFilterType[] = [\n  {\n    name: 'transactionType',\n    label: 'Transaction type',\n    defaultValue: '',\n    itemRender: () => {\n      const tokenOpts = [\n        {\n          value: '',\n          label: 'All types',\n        },\n        ...Object.entries(transactionTypeLabelMap).map(([value, label]) => ({ value, label })),\n      ];\n\n      return <Select options={tokenOpts} className=\"full-width\" />;\n    },\n  },\n];\n\nexport const TransactionsTable = ({\n  poolAddress,\n  accountAddress,\n}: {\n  poolAddress?: string;\n  accountAddress?: string;\n}) => {\n  function handleFilterChange(filters: Record<string, any>) {\n    setFilters(prevState => ({\n      ...prevState,\n      ...filters,\n    }));\n  }\n\n  const [filters, setFilters] = useState<{\n    page: number;\n    pageSize: number;\n    transactionType: TransactionApiType['transactionType'] | '';\n  }>({\n    page: 1,\n    pageSize: 10,\n    transactionType: '',\n  });\n\n  useEffect(() => {\n    setFilters(prevFilters => ({\n      ...prevFilters,\n      page: 1,\n      transactionType: filters.transactionType,\n    }));\n  }, [filters.transactionType]);\n\n  const { data, loading } = useFetchTransactions({\n    page: filters.page,\n    limit: filters.pageSize,\n    userAddress: accountAddress,\n    poolAddress,\n    transactionType: filters.transactionType,\n  });\n\n  const columns: ColumnType<TransactionApiType>[] = useMemo(() => getColumns(accountAddress), [accountAddress]);\n\n  return (\n    <section className=\"card\">\n      <header className=\"card-header flex align-center pv-12\">\n        <Text type=\"p1\" weight=\"semibold\">\n          Transaction history\n        </Text>\n\n        <TableFilter filters={filtersOptions} value={filters} onChange={handleFilterChange} className=\"ml-auto\" />\n      </header>\n      <Table<TransactionApiType> columns={columns} data={data?.data || []} loading={loading} />\n      <TableFooter\n        total={data?.meta.count ?? 0}\n        current={filters.page}\n        pageSize={filters.pageSize}\n        onChange={page =>\n          setFilters(prevFilters => ({\n            ...prevFilters,\n            page,\n          }))\n        }\n        text\n      />\n    </section>\n  );\n};\n\nfunction getColumns(accountAddress?: string): ColumnType<TransactionApiType>[] {\n  return [\n    {\n      heading: 'Token Name',\n      render: function Render(item) {\n        const { getToken, getAsset } = useTokens();\n\n        const poolToken = getToken(item.poolTokenSymbol);\n        const oracleToken = getAsset(item.oracleAssetSymbol);\n\n        const [outline, bubble1Name, bubble2Name] =\n          {\n            JUNIOR_EXIT: ['purple', 'bond', oracleToken?.icon],\n            JUNIOR_REDEEM_TOKENS: ['purple', 'bond', oracleToken?.icon],\n            JTOKEN_SEND: ['purple', 'bond', oracleToken?.icon],\n            JTOKEN_RECEIVE: ['purple', 'bond', oracleToken?.icon],\n            SENIOR_EXIT: ['green', 'bond', oracleToken?.icon],\n            SENIOR_REDEEM_TOKENS: ['green', 'bond', oracleToken?.icon],\n            STOKEN_SEND: ['green', 'bond', oracleToken?.icon],\n            STOKEN_RECEIVE: ['green', 'bond', oracleToken?.icon],\n          }[item.transactionType] ?? [];\n\n        return (\n          <div className=\"flex align-center\" style={{ whiteSpace: 'nowrap' }}>\n            <TokenIcon\n              name={poolToken?.icon}\n              outline={outline}\n              {...(bubble1Name ? { bubble1Name } : {})}\n              {...(bubble2Name ? { bubble2Name } : {})}\n              size={32}\n              className=\"mr-16\"\n            />\n            <ExplorerAddressLink address={item.tokenAddress}>\n              <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className=\"mb-4\">\n                {item.tokenSymbol}\n              </Text>\n            </ExplorerAddressLink>\n          </div>\n        );\n      },\n    },\n    {\n      heading: `Side / transaction`,\n      render: item => (\n        <div style={{ whiteSpace: 'nowrap' }}>\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className=\"mb-4\">\n            {item.tranche === 'SENIOR' ? 'Senior' : null}\n            {item.tranche === 'JUNIOR' ? 'Junior' : null}\n          </Text>\n          <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n            {transactionTypeLabelMap[item.transactionType] || null}\n          </Text>\n        </div>\n      ),\n    },\n    {\n      heading: `Amount`,\n      render: function Render(item) {\n        const { getAsset } = useTokens();\n        const isIncome = checkIsIncome(item.transactionType, !!accountAddress);\n        const oracleToken = getAsset(item.oracleAssetSymbol);\n\n        return (\n          <div style={{ whiteSpace: 'nowrap' }}>\n            <Text type=\"p1\" weight=\"semibold\" color={isIncome ? 'green' : 'red'} tooltip={formatUSD(item.amountInUSD)}>\n              {isIncome ? '+' : '-'} {formatToken(BigNumber.from(item.amount))}\n            </Text>\n            <Text\n              type=\"small\"\n              weight=\"semibold\"\n              color=\"secondary\"\n              tooltip={formatToken(BigNumber.from(item.amountInQuoteAsset), {\n                decimals: oracleToken?.decimals,\n              })}>\n              {formatToken(BigNumber.from(item.amountInQuoteAsset), {\n                tokenName: item.oracleAssetSymbol,\n              })}\n            </Text>\n          </div>\n        );\n      },\n    },\n    ...(accountAddress\n      ? []\n      : [\n          {\n            heading: 'Address',\n            // @ts-ignore\n            render: item => (\n              <ExplorerAddressLink address={item.userAddress} variation=\"link\">\n                {shortenAddr(item.userAddress, 6, 4)}\n              </ExplorerAddressLink>\n            ),\n          } as ColumnType<TransactionApiType>,\n        ]),\n    {\n      heading: 'Transaction Hash',\n      render: item => (\n        <ExplorerAddressLink address={item.transactionHash} variation=\"link\">\n          {shortenAddr(item.transactionHash, 6, 4)}\n        </ExplorerAddressLink>\n      ),\n    },\n    {\n      heading: 'Date',\n      render: item => {\n        const date = new Date(item.blockTimestamp * 1000);\n        return (\n          <>\n            <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className=\"mb-4\">\n              {format(date, 'dd.MM.yyyy')}\n            </Text>\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              {format(date, 'HH:mm')}\n            </Text>\n          </>\n        );\n      },\n    },\n  ];\n}\n\nfunction checkIsIncome(transactionType: TransactionApiType['transactionType'], isUser: boolean): boolean {\n  switch (transactionType) {\n    case 'JUNIOR_ENTRY':\n      return !isUser;\n    case 'JUNIOR_REDEEM_TOKENS':\n      return isUser;\n    case 'JUNIOR_EXIT':\n      return !isUser;\n    case 'JUNIOR_REDEEM_UNDERLYING':\n      return isUser;\n    case 'SENIOR_ENTRY':\n      return !isUser;\n    case 'SENIOR_REDEEM_TOKENS':\n      return isUser;\n    case 'SENIOR_EXIT':\n      return !isUser;\n    case 'SENIOR_REDEEM_UNDERLYING':\n      return isUser;\n    case 'JTOKEN_SEND':\n      return false;\n    case 'JTOKEN_RECEIVE':\n      return true;\n    case 'STOKEN_SEND':\n      return false;\n    case 'STOKEN_RECEIVE':\n      return true;\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tooltip\":\"s_tooltip__2Hg-8\",\"tooltipTitle\":\"s_tooltipTitle__3oilh\",\"tooltipItems\":\"s_tooltipItems__1Zwow\",\"tooltipItem\":\"s_tooltipItem__12Wa5\",\"tooltipName\":\"s_tooltipName__3OpvE\",\"tooltipValue\":\"s_tooltipValue__2pCAP\",\"legend\":\"s_legend__1LvpQ\",\"legendItem\":\"s_legendItem__Eob-k\"};","import { useMemo } from 'react';\nimport classNames from 'classnames';\nimport { nanoid } from 'nanoid';\n\nimport { Icon } from 'components/icon';\n\nimport s from './s.module.scss';\n\ntype InputPropsType = React.InputHTMLAttributes<HTMLInputElement> & {\n  id?: string;\n  /** \"size\" prop sounds better, but this word already reserved in input props */\n  dimension?: 'normal' | 'large';\n  before?: React.ReactNode;\n};\n\nexport const Input: React.FC<InputPropsType> = ({ id, before, className, dimension = 'normal', ...rest }) => {\n  const inputId = useMemo(() => id ?? nanoid(), [id]);\n  const isSearch = rest.type === 'search';\n\n  return (\n    <label htmlFor={inputId} className={classNames(s.inputWrapper, className)}>\n      {before && <div className={classNames(s.before, s[dimension])}>{before}</div>}\n      {isSearch && <Icon name=\"search\" size={16} className={s.searchIcon} color=\"icon\" />}\n      <input\n        type=\"text\"\n        id={inputId}\n        className={classNames(s.input, s[dimension], {\n          [s.inputSearch]: isSearch,\n        })}\n        {...rest}\n      />\n    </label>\n  );\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputWrapper\":\"s_inputWrapper__2SYqe\",\"input\":\"s_input__ak8Ur\",\"large\":\"s_large__RjV7F\",\"inputSearch\":\"s_inputSearch__3tqk-\",\"before\":\"s_before__lvzM0\",\"searchIcon\":\"s_searchIcon__1NFiP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"s_search__3aj8i\",\"row\":\"s_row__2ps8F\",\"timeline\":\"s_timeline__2yCBZ\",\"timelineNumber\":\"s_timelineNumber__sF-8G\",\"timelineLineTop\":\"s_timelineLineTop__3LCOL\",\"hasNeighbors\":\"s_hasNeighbors__jEzFW\",\"hasMore\":\"s_hasMore__2Jt1l\",\"timelineLineBottom\":\"s_timelineLineBottom__2tt9J\",\"card\":\"s_card__3lZ01\",\"highlighted\":\"s_highlighted__Pkbq-\",\"time\":\"s_time__1anBI\",\"list\":\"s_list__-wa5M\",\"listGroup\":\"s_listGroup__2fqlT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"s_section__3VNv9\",\"sectionHeader\":\"s_sectionHeader__q7laG\",\"sectionBody\":\"s_sectionBody__rIA1q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progress\":\"s_progress__GHcmP\",\"cards\":\"s_cards__1sQuL\",\"epochCard\":\"s_epochCard__3X5y_\",\"epochCardPrimary\":\"s_epochCardPrimary__2-Jwz\",\"epochCardSecondary\":\"s_epochCardSecondary__2GF__\",\"epochCardTitleWrap\":\"s_epochCardTitleWrap__2J9vc\",\"epochCardTitle\":\"s_epochCardTitle__1jWp-\",\"epochCardHeader\":\"s_epochCardHeader__1jxK8\",\"epochCardHeaderItem\":\"s_epochCardHeaderItem__nUXH9\",\"epochCardDlRow\":\"s_epochCardDlRow__8S8Bx\",\"epochProgress\":\"s_epochProgress__x3KKg\",\"epochProgressLineBefore\":\"s_epochProgressLineBefore__ogr8D\",\"epochProgressLineAfter\":\"s_epochProgressLineAfter__ED7My\",\"epochProgressLineMiddle\":\"s_epochProgressLineMiddle__pjTS6\",\"epochProgressCurrent\":\"s_epochProgressCurrent__3zKrd\",\"epochProgressNext\":\"s_epochProgressNext__2ZbsZ\",\"epochSpinner\":\"s_epochSpinner__128RX\",\"rotating\":\"s_rotating__1Ud_K\"};","import { useState } from 'react';\nimport classNames from 'classnames';\nimport { format } from 'date-fns';\nimport { formatToken } from 'web3/utils';\n\nimport { Chart } from 'components/chart';\nimport { Tabs } from 'components/custom/tabs';\nimport { Text } from 'components/custom/typography';\nimport { EpochFilterTypeKey, useFetchPoolPerformance } from 'modules/smart-alpha/api';\n\nexport enum TrancheFilterTypeKey {\n  senior = 'senior',\n  junior = 'junior',\n}\n\nconst trancheTabs = [\n  {\n    id: TrancheFilterTypeKey.senior,\n    children: 'Senior',\n  },\n  {\n    id: TrancheFilterTypeKey.junior,\n    children: 'Junior',\n  },\n];\n\nconst epochTabs = [\n  {\n    id: EpochFilterTypeKey.current,\n    children: 'Current epoch',\n  },\n  {\n    id: EpochFilterTypeKey.last,\n    children: 'Last epoch',\n  },\n];\n\nexport const PoolPerformance: React.FC<{ poolAddress: string; oracleAssetSymbol: string; className?: string }> = ({\n  poolAddress,\n  oracleAssetSymbol,\n  className,\n}) => {\n  const [trancheFilter, setTrancheFilter] = useState<TrancheFilterTypeKey>(TrancheFilterTypeKey.senior);\n  const [epochFilter, setEpochFilter] = useState<EpochFilterTypeKey>(EpochFilterTypeKey.current);\n  const { data = [], loading } = useFetchPoolPerformance(poolAddress, epochFilter);\n\n  return (\n    <div className={classNames('card', className)}>\n      <div className=\"card-header flex align-center\">\n        <Text type=\"p1\" weight=\"semibold\">\n          Pool performance\n        </Text>\n        <Tabs<TrancheFilterTypeKey>\n          tabs={trancheTabs}\n          activeKey={trancheFilter}\n          onClick={setTrancheFilter}\n          variation=\"elastic\"\n          size=\"small\"\n          className=\"ml-auto mr-16\"\n        />\n        <Tabs<EpochFilterTypeKey>\n          tabs={epochTabs}\n          activeKey={epochFilter}\n          onClick={setEpochFilter}\n          variation=\"elastic\"\n          size=\"small\"\n        />\n      </div>\n      <div className=\"p-24\">\n        <Chart\n          loading={loading}\n          data={data ?? []}\n          x={{\n            key: 'point',\n            format: item => format(new Date(item), 'EEE HH:mm'),\n            itemFormat: item => format(new Date(item), 'MM.dd.yyyy HH:mm'),\n          }}\n          y={{\n            format: value =>\n              `${\n                formatToken(value, {\n                  compact: true,\n                }) ?? value\n              } ${oracleAssetSymbol}`,\n            itemsFormat: value => `${formatToken(value) ?? value} ${oracleAssetSymbol}`,\n            domain: [\n              (dataMin, domain = [dataMin, dataMin]) => dataMin - (domain[1] - dataMin) * 0.1,\n              (dataMax, domain = [dataMax, dataMax]) => dataMax + (dataMax - domain[0]) * 0.1,\n            ],\n            items:\n              trancheFilter === TrancheFilterTypeKey.senior\n                ? [\n                    {\n                      key: 'seniorWithSA',\n                      title: 'Senior value',\n                      color: 'green',\n                    },\n                    {\n                      key: 'seniorWithoutSA',\n                      title: 'Senior value (without SMART Alpha)',\n                      color: 'yellow',\n                    },\n                    {\n                      key: 'underlyingPrice',\n                      title: 'Price (Right axis)',\n                      color: 'grey',\n                      yAxisId: 'right',\n                    },\n                  ]\n                : [\n                    {\n                      key: 'juniorWithSA',\n                      title: 'Junior value',\n                      color: 'purple',\n                    },\n                    {\n                      key: 'juniorWithoutSA',\n                      title: 'Junior value (without SMART Alpha)',\n                      color: 'yellow',\n                    },\n                    {\n                      key: 'underlyingPrice',\n                      title: 'Price (Right axis)',\n                      color: 'grey',\n                      yAxisId: 'right',\n                    },\n                  ],\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport useDebounce from '@rooks/use-debounce';\nimport classNames from 'classnames';\nimport { format } from 'date-fns';\nimport { formatNumber, formatPercent } from 'web3/utils';\n\nimport { Button } from 'components/button';\nimport { Text } from 'components/custom/typography';\nimport { Input } from 'components/input';\nimport { Tokens, useTokens } from 'components/providers/tokensProvider';\nimport { TokenIcon } from 'components/token-icon';\nimport { EpochApiType, useFetchPreviousEpochs } from 'modules/smart-alpha/api';\n\nimport s from './s.module.scss';\n\nexport const PreviousEpochs = ({ poolTokenSymbol }: { poolTokenSymbol: Tokens }) => {\n  const { id: poolAddress } = useParams<{ id: string }>();\n\n  const [search, setSearch] = useState<string>('');\n\n  const { data, loading, loaded, loadNewer, loadOlder, hasNewer, hasOlder, load } = useFetchPreviousEpochs({\n    limit: 2,\n    poolAddress,\n  });\n\n  useEffect(() => {\n    loadOlder();\n  }, []);\n\n  const handleSearchChange = useDebounce((val: string) => {\n    load(val);\n  }, 400);\n\n  useEffect(() => handleSearchChange(search), [search]);\n\n  return (\n    <div style={{ paddingLeft: 44 }}>\n      <div style={{ paddingLeft: 72 }}>\n        <Input\n          type=\"search\"\n          className={classNames(s.search, 'mb-16')}\n          placeholder=\"Search epoch\"\n          value={search}\n          onChange={e => setSearch(e.target.value)}\n        />\n        {loaded && hasNewer ? (\n          <Button type=\"button\" variation=\"text\" onClick={() => loadNewer()} loading={loading} className=\"mb-16\">\n            Load newer epochs\n          </Button>\n        ) : null}\n      </div>\n      {data?.map((item, idx) => (\n        <Epoch\n          key={item.id}\n          item={item}\n          poolTokenSymbol={poolTokenSymbol}\n          highlighted={String(item.id) === search}\n          hasNewer={hasNewer}\n          hasOlder={hasOlder}\n          isFirst={idx === 0}\n          isLast={idx === data.length - 1}\n        />\n      ))}\n      <div style={{ paddingLeft: 72 }}>\n        {loaded && hasOlder ? (\n          <Button type=\"button\" variation=\"text\" onClick={() => loadOlder()} loading={loading} className=\"mt-16\">\n            Load older epochs\n          </Button>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nfunction Epoch({\n  item,\n  poolTokenSymbol,\n  highlighted,\n  hasNewer,\n  hasOlder,\n  isFirst,\n  isLast,\n}: {\n  item: EpochApiType;\n  poolTokenSymbol: Tokens;\n  highlighted: boolean;\n  hasNewer: boolean;\n  hasOlder: boolean;\n  isFirst: boolean;\n  isLast: boolean;\n}) {\n  const startDate = new Date(item.startDate * 1000);\n  const endDate = new Date(item.endDate * 1000);\n\n  const { getToken } = useTokens();\n  const poolToken = getToken(poolTokenSymbol);\n  const upsideLeverage =\n    1 + ((1 - Number(item.upsideExposureRate)) * Number(item.seniorLiquidity)) / Number(item.juniorLiquidity);\n  const downsideLeverage =\n    Number(item.juniorLiquidity) > 0 ? Number(item.seniorLiquidity) / Number(item.juniorLiquidity) + 1 : 1;\n\n  return (\n    <div className={s.row}>\n      <div className={s.timeline}>\n        <div\n          className={classNames(s.timelineLineTop, {\n            [s.hasNeighbors]: !isFirst,\n            [s.hasMore]: isFirst && hasNewer,\n          })}\n        />\n        <div className={s.timelineNumber}>{item.id}</div>\n        <div\n          className={classNames(s.timelineLineBottom, {\n            [s.hasNeighbors]: !isLast,\n            [s.hasMore]: isLast && hasOlder,\n          })}\n        />\n      </div>\n      <section\n        className={classNames(s.card, 'card p-24', {\n          [s.highlighted]: highlighted,\n          'mb-8': !isLast,\n          'mt-8': !isFirst,\n        })}>\n        <header className=\"flex align-center mb-24\">\n          <Text type=\"p1\" weight=\"semibold\" tag=\"h3\">\n            Epoch {item.id}\n          </Text>\n          <time className={classNames(s.time, 'ml-auto')} dateTime={startDate.toJSON()}>\n            {format(startDate, 'dd.MM.yyyy - hh:mm')}\n          </time>\n          <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"mh-8\">\n            -\n          </Text>\n          <time className={s.time} dateTime={endDate.toJSON()}>\n            {format(endDate, 'dd.MM.yyyy - hh:mm')}\n          </time>\n        </header>\n        <dl className={s.list}>\n          <div className={s.listGroup}>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                Senior liquidity\n              </Text>\n              <div className=\"flex align-center mb-4\">\n                <Text type=\"p2\" weight=\"semibold\" className=\"mr-4\" tooltip={item.seniorLiquidity}>\n                  {formatNumber(Number(item.seniorLiquidity), { decimals: 4 })}\n                </Text>\n                <TokenIcon name={poolToken?.icon} size={16} />\n              </div>\n            </div>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                Junior liquidity\n              </Text>\n              <div className=\"flex align-center\">\n                <Text type=\"p2\" weight=\"semibold\" className=\"mr-4\" tooltip={item.juniorLiquidity}>\n                  {formatNumber(Number(item.juniorLiquidity), { decimals: 4 })}\n                </Text>\n                <TokenIcon name={poolToken?.icon} size={16} />\n              </div>\n            </div>\n          </div>\n\n          <div className={s.listGroup}>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                Upside leverage\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"purple\">\n                {formatNumber(upsideLeverage || 1, { decimals: 2 })}x\n              </Text>\n            </div>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                Downside leverage\n              </Text>\n              <Text\n                type=\"p2\"\n                weight=\"semibold\"\n                color=\"purple\"\n                tooltip=\"You have this amount of downside leverage, until the underlying token's price drops by more than the senior downside protection - after which there is no more downside leverage - or you can consider it as being 1x\">\n                ≤{formatNumber(downsideLeverage, { decimals: 2 })}x\n              </Text>\n            </div>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                Upside exposure rate\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"green\">\n                {formatPercent(Number(item.upsideExposureRate))}\n              </Text>\n            </div>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                Downside protection rate\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"green\">\n                {formatPercent(Number(item.downsideProtectionRate))}\n              </Text>\n            </div>\n          </div>\n\n          <div className={s.listGroup}>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                Junior price start\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"primary\" tooltip={item.juniorTokenPriceStart}>\n                {formatNumber(Number(item.juniorTokenPriceStart), { decimals: 4 })}\n              </Text>\n            </div>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                Junior Profits\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"primary\" tooltip={item.juniorProfits}>\n                {formatNumber(Number(item.juniorProfits), { decimals: 4 })}\n              </Text>\n            </div>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                Senior price start\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"primary\" tooltip={item.seniorTokenPriceStart}>\n                {formatNumber(Number(item.seniorTokenPriceStart), { decimals: 4 })}\n              </Text>\n            </div>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                Senior Profits\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"primary\" tooltip={item.seniorProfits}>\n                {formatNumber(Number(item.seniorProfits), { decimals: 4 })}\n              </Text>\n            </div>\n            <div>\n              <Text type=\"small\" weight=\"semibold\" className=\"mb-8\" color=\"secondary\">\n                {poolTokenSymbol} Epoch entry price\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"primary\" tooltip={item.entryPrice}>\n                {formatNumber(Number(item.entryPrice), { decimals: 4 })}\n              </Text>\n            </div>\n          </div>\n        </dl>\n      </section>\n    </div>\n  );\n}\n","import { formatToken } from 'web3/utils';\n\nimport { Text } from 'components/custom/typography';\nimport { useTokens } from 'components/providers/tokensProvider';\nimport { TokenIcon } from 'components/token-icon';\nimport { SMART_ALPHA_DECIMALS } from 'modules/smart-alpha/contracts/smartAlphaContract';\n\nimport s from './s.module.scss';\n\nexport const QueueState = ({ pool, smartAlphaContract }) => {\n  const { getToken, getAsset } = useTokens();\n\n  const poolToken = getToken(pool.poolToken.symbol);\n  const oracleToken = getAsset(pool.oracleAssetSymbol);\n\n  return (\n    <>\n      <section className={s.section}>\n        <header className={s.sectionHeader}>\n          <Text type=\"small\" weight=\"semibold\" color=\"secondary\" tag=\"h3\">\n            Going in\n          </Text>\n        </header>\n        <div className={s.sectionBody}>\n          <div>\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"mb-4\">\n              Juniors underlying\n            </Text>\n            <div className=\"flex align-center\">\n              <TokenIcon name={poolToken?.icon} size={16} className=\"mr-8\" />\n              <Text\n                type=\"p1\"\n                weight=\"semibold\"\n                color=\"primary\"\n                tooltip={\n                  formatToken(smartAlphaContract?.queuedJuniorsUnderlyingIn?.unscaleBy(pool.poolToken.decimals), {\n                    decimals: pool.poolToken.decimals,\n                    tokenName: pool.poolToken.symbol,\n                  }) ?? '-'\n                }>\n                {formatToken(smartAlphaContract?.queuedJuniorsUnderlyingIn?.unscaleBy(pool.poolToken.decimals)) ?? '-'}\n              </Text>\n            </div>\n          </div>\n          <div>\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"mb-4\">\n              Seniors underlying\n            </Text>\n            <div className=\"flex align-center\">\n              <TokenIcon name={poolToken?.icon} size={16} className=\"mr-8\" />\n              <Text\n                type=\"p1\"\n                weight=\"semibold\"\n                color=\"primary\"\n                tooltip={\n                  formatToken(smartAlphaContract?.queuedSeniorsUnderlyingIn?.unscaleBy(pool.poolToken.decimals), {\n                    decimals: pool.poolToken.decimals,\n                    tokenName: pool.poolToken.symbol,\n                  }) ?? '-'\n                }>\n                {formatToken(smartAlphaContract?.queuedSeniorsUnderlyingIn?.unscaleBy(pool.poolToken.decimals)) ?? '-'}\n              </Text>\n            </div>\n          </div>\n        </div>\n      </section>\n      <section className={s.section}>\n        <header className={s.sectionHeader}>\n          <Text type=\"small\" weight=\"semibold\" color=\"secondary\" tag=\"h3\">\n            Going out\n          </Text>\n        </header>\n        <div className={s.sectionBody}>\n          <div>\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"mb-4\">\n              Junior tokens\n            </Text>\n            <div className=\"flex align-center\">\n              <TokenIcon\n                name={poolToken?.icon}\n                bubble1Name=\"bond\"\n                bubble2Name={oracleToken?.icon}\n                outline=\"purple\"\n                size={16}\n                className=\"mr-8\"\n              />\n              <Text\n                type=\"p1\"\n                weight=\"semibold\"\n                color=\"primary\"\n                tooltip={\n                  formatToken(smartAlphaContract?.queuedJuniorTokensBurn?.unscaleBy(SMART_ALPHA_DECIMALS), {\n                    decimals: SMART_ALPHA_DECIMALS,\n                    tokenName: `junior_${pool.poolName}`,\n                  }) ?? '-'\n                }>\n                {formatToken(smartAlphaContract?.queuedJuniorTokensBurn?.unscaleBy(SMART_ALPHA_DECIMALS)) ?? '-'}\n              </Text>\n            </div>\n          </div>\n          <div>\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"mb-4\">\n              Senior tokens\n            </Text>\n            <div className=\"flex align-center\">\n              <TokenIcon\n                name={poolToken?.icon}\n                bubble1Name=\"bond\"\n                bubble2Name={oracleToken?.icon}\n                outline=\"green\"\n                size={16}\n                className=\"mr-8\"\n              />\n              <Text\n                type=\"p1\"\n                weight=\"semibold\"\n                color=\"primary\"\n                tooltip={\n                  formatToken(smartAlphaContract?.queuedSeniorTokensBurn?.unscaleBy(SMART_ALPHA_DECIMALS), {\n                    decimals: SMART_ALPHA_DECIMALS,\n                    tokenName: `senior_${pool.poolName}`,\n                  }) ?? '-'\n                }>\n                {formatToken(smartAlphaContract?.queuedSeniorTokensBurn?.unscaleBy(SMART_ALPHA_DECIMALS)) ?? '-'}\n              </Text>\n            </div>\n          </div>\n        </div>\n      </section>\n      <section className={s.section}>\n        <header className={s.sectionHeader}>\n          <Text type=\"small\" weight=\"semibold\" color=\"secondary\" tag=\"h3\">\n            Out but not redeemed\n          </Text>\n        </header>\n        <div className={s.sectionBody}>\n          <div>\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"mb-4\">\n              Juniors underlying\n            </Text>\n            <div className=\"flex align-center\">\n              <TokenIcon name={poolToken?.icon} size={16} className=\"mr-8\" />\n              <Text\n                type=\"p1\"\n                weight=\"semibold\"\n                color=\"primary\"\n                tooltip={\n                  formatToken(smartAlphaContract?.queuedJuniorsUnderlyingOut?.unscaleBy(pool.poolToken.decimals), {\n                    decimals: pool.poolToken.decimals,\n                    tokenName: pool.poolToken.symbol,\n                  }) ?? '-'\n                }>\n                {formatToken(smartAlphaContract?.queuedJuniorsUnderlyingOut?.unscaleBy(pool.poolToken.decimals)) ?? '-'}\n              </Text>\n            </div>\n          </div>\n          <div>\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"mb-4\">\n              Seniors underlying\n            </Text>\n            <div className=\"flex align-center\">\n              <TokenIcon name={poolToken?.icon} size={16} className=\"mr-8\" />\n              <Text\n                type=\"p1\"\n                weight=\"semibold\"\n                color=\"primary\"\n                tooltip={\n                  formatToken(smartAlphaContract?.queuedSeniorsUnderlyingOut?.unscaleBy(pool.poolToken.decimals), {\n                    decimals: pool.poolToken.decimals,\n                    tokenName: pool.poolToken.symbol,\n                  }) ?? '-'\n                }>\n                {formatToken(smartAlphaContract?.queuedSeniorsUnderlyingOut?.unscaleBy(pool.poolToken.decimals)) ?? '-'}\n              </Text>\n            </div>\n          </div>\n        </div>\n      </section>\n    </>\n  );\n};\n","import { useState } from 'react';\nimport classNames from 'classnames';\nimport { format } from 'date-fns';\n\nimport { Chart } from 'components/chart';\nimport { PeriodChartTabs, PeriodTabsKey } from 'components/custom/tabs';\nimport { Text } from 'components/custom/typography';\nimport { useFetchTokenPrice } from 'modules/smart-alpha/api';\n\nimport { formatTick } from 'utils/chart';\n\nexport const TokensPrice: React.FC<{ poolAddress: string; tokenSymbol: string; className?: string }> = ({\n  poolAddress,\n  tokenSymbol,\n  className,\n}) => {\n  const [periodFilter, setPeriodFilter] = useState<PeriodTabsKey>(PeriodTabsKey.day);\n  const { data = [], loading } = useFetchTokenPrice(poolAddress, periodFilter);\n\n  return (\n    <div className={classNames('card', className)}>\n      <div className=\"card-header flex align-center\">\n        <Text type=\"p1\" weight=\"semibold\">\n          Tokens price\n        </Text>\n        <PeriodChartTabs activeKey={periodFilter} onClick={setPeriodFilter} size=\"small\" className=\"ml-auto\" />\n      </div>\n      <div className=\"p-24\">\n        <Chart\n          loading={loading}\n          data={data ?? []}\n          x={{\n            key: 'point',\n            format: item => formatTick(item, periodFilter),\n            itemFormat: item => format(new Date(item), 'MM.dd.yyyy HH:mm'),\n          }}\n          y={{\n            format: value => `${Intl.NumberFormat('en', { notation: 'compact' }).format(value)} ${tokenSymbol}`,\n            itemsFormat: value => `${Intl.NumberFormat('en').format(value)} ${tokenSymbol}`,\n            items: [\n              {\n                key: 'seniorTokenPrice',\n                title: 'Senior token price',\n                color: 'green',\n              },\n              {\n                key: 'juniorTokenPrice',\n                title: 'Junior token price',\n                color: 'purple',\n              },\n            ],\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n","import React, { useMemo, useState } from 'react';\nimport { isMobile } from 'react-device-detect';\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\nimport BigNumber from 'bignumber.js';\nimport classNames from 'classnames';\nimport { formatNumber, formatPercent, formatToken, formatUSD } from 'web3/utils';\n\nimport { Button, Link } from 'components/button';\nimport { Badge } from 'components/custom/badge';\nimport { Spinner } from 'components/custom/spinner';\nimport { InfoTooltip } from 'components/custom/tooltip';\nimport { Text } from 'components/custom/typography';\nimport { Modal } from 'components/modal';\nimport { useNetwork } from 'components/providers/networkProvider';\nimport { isUsdAsset, useTokens } from 'components/providers/tokensProvider';\nimport { TokenIcon } from 'components/token-icon';\nimport { useContractFactory } from 'hooks/useContract';\nimport { UseLeftTime } from 'hooks/useLeftTime';\nimport { useReload } from 'hooks/useReload';\nimport { useFetchPool } from 'modules/smart-alpha/api';\nimport { TradeLinks, hasTradeOption } from 'modules/smart-alpha/components/trade';\nimport SmartAlphaContract, { SMART_ALPHA_DECIMALS } from 'modules/smart-alpha/contracts/smartAlphaContract';\nimport { useNextEpochEstimate } from 'modules/smart-alpha/hooks/next-epoch-estimate';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport { TransactionsTable } from '../../components/transactions';\nimport { PoolPerformance } from './pool-performance';\nimport { PreviousEpochs } from './previous-epochs';\nimport { QueueState } from './queue-state';\nimport { TokensPrice } from './tokens-price';\n\nimport { getFormattedDuration } from 'utils';\n\nimport s from './s.module.scss';\n\nconst PoolView = () => {\n  const { id: poolAddress } = useParams<{ id: string }>();\n  const history = useHistory();\n  const location = useLocation();\n  const network = useNetwork();\n  const { data: pool, loaded } = useFetchPool(poolAddress);\n  const { getToken, getAsset } = useTokens();\n  const wallet = useWallet();\n  const [reload] = useReload();\n  const [queueStateVisible, setQueueStateVisible] = useState(false);\n  const [previousEpochVisible, setPreviousEpochVisible] = useState(false);\n  const [epochAdvancing, setEpochAdvancing] = useState(false);\n  const [displayTradeLinks, setDisplayTradeLinks] = useState(false);\n  const { getOrCreateContract } = useContractFactory();\n\n  const smartAlphaContract = useMemo(() => {\n    if (!pool) {\n      return;\n    }\n\n    return getOrCreateContract(\n      pool.poolAddress,\n      () => {\n        return new SmartAlphaContract(pool.poolAddress);\n      },\n      {\n        afterInit: async contract => {\n          contract.onUpdateData(reload);\n          await contract.loadCommon();\n        },\n      },\n    );\n  }, [pool]);\n\n  const {\n    nextEpochEstimates,\n    nextEpochSeniorLiquidityRate,\n    nextEpochJuniorLiquidityRate,\n    nextEpochUpsideLeverage,\n    nextEpochDownsideLeverage,\n  } = useNextEpochEstimate(smartAlphaContract?.address);\n\n  if (!pool) {\n    if (loaded) {\n      history.push('/smart-alpha/pools');\n    }\n\n    return <Spinner style={{ margin: 'auto' }} />;\n  }\n\n  const poolToken = getToken(pool.poolToken.symbol);\n  const oracleToken = getAsset(pool.oracleAssetSymbol);\n\n  const entryPriceDecimals = smartAlphaContract?.getEntryPriceDecimals(pool.oracleAssetSymbol);\n  const upsideLeverage = smartAlphaContract?.epochUpsideLeverage?.unscaleBy(SMART_ALPHA_DECIMALS);\n  const downsideLeverage = smartAlphaContract?.epochDownsideLeverage?.unscaleBy(SMART_ALPHA_DECIMALS);\n\n  async function handleEpochAdvance() {\n    setEpochAdvancing(true);\n\n    try {\n      await smartAlphaContract?.advanceEpoch();\n      smartAlphaContract?.loadCommon();\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setEpochAdvancing(false);\n    }\n  }\n\n  return (\n    <div className=\"container-limit\">\n      <div className=\"mb-16\">\n        <Link to=\"/smart-alpha\" variation=\"text-alt\" icon=\"arrow\" iconPosition=\"left\" iconRotate={180}>\n          Pools\n        </Link>\n      </div>\n      <div className=\"flex wrap col-gap-16 row-gap-16 align-center mb-40\">\n        <div className=\"flex flex-grow align-center\">\n          <TokenIcon name={poolToken?.icon} size={40} bubble2Name={oracleToken?.icon} className=\"mr-16\" />\n          <div>\n            <Text type=\"p1\" weight=\"semibold\" color=\"primary\" tag=\"h2\" className=\"mb-4\">\n              {pool.poolName}\n            </Text>\n            <Text type=\"small\" weight=\"semibold\" color=\"red\">\n              Epoch {smartAlphaContract?.epoch ?? pool.state.epoch ?? '-'}\n            </Text>\n          </div>\n        </div>\n        <div className=\"flex align-center col-gap-24\">\n          {network.activeNetwork.type === 'Ethereum' && hasTradeOption(pool.poolName) && (\n            <Button variation=\"text\" onClick={() => setDisplayTradeLinks(true)}>\n              Trade\n            </Button>\n          )}\n          <Link to={`${location.pathname}/simulate-epoch`} variation=\"text\">\n            Simulate\n          </Link>\n          {!isMobile ? (\n            <Link to={`${location.pathname}/deposit`} variation=\"primary\" aria-disabled={!wallet.account}>\n              Deposit\n            </Link>\n          ) : null}\n        </div>\n      </div>\n      <div className={classNames(s.cards, 'mb-12')}>\n        <section className={classNames(s.epochCard, s.epochCardPrimary)}>\n          <div className={s.epochCardTitleWrap}>\n            <Text type=\"lb2\" weight=\"bold\" tag=\"h3\" color=\"red\" className={s.epochCardTitle}>\n              EPOCH {smartAlphaContract?.epoch ?? '-'} - IN PROGRESS\n            </Text>\n          </div>\n          <header className={classNames(s.epochCardHeader, 'mb-24')}>\n            <div className={s.epochCardHeaderItem}>\n              <div className=\"flex align-center col-gap-8\">\n                <Text type=\"h3\" weight=\"bold\" color=\"primary\" className=\"mb-4\">\n                  {upsideLeverage ? `${formatNumber(upsideLeverage)}x` : `-`}\n                </Text>\n                <Badge color=\"purple\" size=\"small\">\n                  Junior\n                </Badge>\n              </div>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"flex align-middle col-gap-4\">\n                Upside leverage\n                <InfoTooltip>Junior positions will have their upside amplified by this much</InfoTooltip>\n              </Text>\n            </div>\n            <div className={s.epochCardHeaderItem}>\n              <div className=\"flex align-center col-gap-8\">\n                <Text\n                  type=\"h3\"\n                  weight=\"bold\"\n                  color=\"primary\"\n                  className=\"mb-4\"\n                  tooltip=\"You have this amount of downside leverage, until the underlying token's price drops by more than the senior downside protection - after which there is no more downside leverage - or you can consider it as being 1x\">\n                  {downsideLeverage ? `≤${formatNumber(downsideLeverage)}x` : `-`}\n                </Text>\n                <Badge color=\"purple\" size=\"small\">\n                  Junior\n                </Badge>\n              </div>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"flex align-middle col-gap-4\">\n                Downside leverage\n                <InfoTooltip>\n                  How much of every 1% move to the downside in the underlying asset a junior position will have exposure\n                  to.\n                  <br />\n                  <br />\n                  The downside leverage is only applicable until senior downside protection is fully covered, and junior\n                  losses are fully realized.\n                </InfoTooltip>\n              </Text>\n            </div>\n            <div className={s.epochCardHeaderItem}>\n              <div className=\"flex align-center col-gap-8\">\n                <Text type=\"h3\" weight=\"bold\" color=\"primary\" className=\"mb-4\">\n                  {formatPercent(smartAlphaContract?.epochUpsideExposureRate?.unscaleBy(SMART_ALPHA_DECIMALS)) ?? '-'}\n                </Text>\n                <Badge color=\"green\" size=\"small\">\n                  Senior\n                </Badge>\n              </div>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"flex align-middle col-gap-4\">\n                Upside exposure rate\n                <InfoTooltip>\n                  How much of every 1% move to the upside in the underlying asset a senior position will have exposure\n                  to.\n                </InfoTooltip>\n              </Text>\n            </div>\n            <div className={s.epochCardHeaderItem}>\n              <div className=\"flex align-center col-gap-8\">\n                <Text type=\"h3\" weight=\"bold\" color=\"primary\" className=\"mb-4\">\n                  {formatPercent(smartAlphaContract?.epochDownsideProtectionRate?.unscaleBy(SMART_ALPHA_DECIMALS)) ??\n                    '-'}\n                </Text>\n                <Badge color=\"green\" size=\"small\">\n                  Senior\n                </Badge>\n              </div>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"flex align-middle col-gap-4\">\n                Downside protection rate\n                <InfoTooltip>\n                  How much the underlying asset can decline before a senior position takes on losses.\n                </InfoTooltip>\n              </Text>\n            </div>\n          </header>\n          <div className=\"ph-24 pb-16\">\n            <dl>\n              <div className={s.epochCardDlRow}>\n                <dt>\n                  <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                    {pool.poolToken.symbol} epoch entry price\n                  </Text>\n                </dt>\n                <dd className=\"flex align-center\">\n                  <Text\n                    type=\"p1\"\n                    weight=\"semibold\"\n                    color=\"primary\"\n                    tooltip={formatToken(smartAlphaContract?.epochEntryPrice?.unscaleBy(entryPriceDecimals), {\n                      tokenName: pool.oracleAssetSymbol,\n                      decimals: entryPriceDecimals,\n                    })}>\n                    {(isUsdAsset(pool.oracleAssetSymbol)\n                      ? formatUSD(smartAlphaContract?.epochEntryPrice?.unscaleBy(entryPriceDecimals))\n                      : formatToken(smartAlphaContract?.epochEntryPrice?.unscaleBy(entryPriceDecimals))) ?? '-'}\n                  </Text>\n                  {!isUsdAsset(pool.oracleAssetSymbol) && (\n                    <TokenIcon name={oracleToken?.icon} size={16} className=\"ml-8\" />\n                  )}\n                </dd>\n              </div>\n              <div className={s.epochCardDlRow}>\n                <dt className=\"flex align-center\">\n                  <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                    Senior liquidity\n                  </Text>\n                  <span\n                    className=\"middle-dot color-border ml-8\"\n                    style={{ '--dot-color': 'var(--theme-green-color)' } as React.CSSProperties}\n                  />\n                </dt>\n                <dd className=\"flex align-center\">\n                  <Text\n                    type=\"p1\"\n                    weight=\"semibold\"\n                    color=\"primary\"\n                    tooltip={\n                      <Text type=\"p2\" color=\"primary\" className=\"flex flow-row row-gap-4\">\n                        <span>\n                          {formatToken(\n                            smartAlphaContract?.epochSeniorLiquidity?.unscaleBy(pool.poolToken.decimals) ??\n                              BigNumber.from(pool.state.seniorLiquidity),\n                            {\n                              tokenName: pool.poolToken.symbol,\n                              decimals: pool.poolToken.decimals,\n                            },\n                          )}\n                        </span>\n                        <span>\n                          {formatUSD(\n                            (\n                              smartAlphaContract?.epochSeniorLiquidity?.unscaleBy(pool.poolToken.decimals) ??\n                              BigNumber.from(pool.state.seniorLiquidity)\n                            )?.multipliedBy(poolToken?.price ?? 0),\n                          )}\n                        </span>\n                      </Text>\n                    }\n                    className=\"mr-8\">\n                    {formatToken(\n                      smartAlphaContract?.epochSeniorLiquidity?.unscaleBy(pool.poolToken.decimals) ??\n                        BigNumber.from(pool.state.seniorLiquidity),\n                    ) ?? '-'}\n                  </Text>\n                  <TokenIcon name={poolToken?.icon} size={16} />\n                </dd>\n              </div>\n              <div className={s.epochCardDlRow}>\n                <dt className=\"flex align-center\">\n                  <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                    Junior liquidity\n                  </Text>\n                  <span\n                    className=\"middle-dot color-border ml-8\"\n                    style={{ '--dot-color': 'var(--theme-purple-color)' } as React.CSSProperties}\n                  />\n                </dt>\n                <dd className=\"flex align-center\">\n                  <Text\n                    type=\"p1\"\n                    weight=\"semibold\"\n                    color=\"primary\"\n                    tooltip={\n                      <Text type=\"p2\" color=\"primary\" className=\"flex flow-row row-gap-4\">\n                        <span>\n                          {formatToken(\n                            smartAlphaContract?.epochJuniorLiquidity?.unscaleBy(pool.poolToken.decimals) ??\n                              BigNumber.from(pool.state.juniorLiquidity),\n                            {\n                              tokenName: pool.poolToken.symbol,\n                              decimals: pool.poolToken.decimals,\n                            },\n                          )}\n                        </span>\n                        <span>\n                          {formatUSD(\n                            (\n                              smartAlphaContract?.epochJuniorLiquidity?.unscaleBy(pool.poolToken.decimals) ??\n                              BigNumber.from(pool.state.juniorLiquidity)\n                            )?.multipliedBy(poolToken?.price ?? 0),\n                          )}\n                        </span>\n                      </Text>\n                    }\n                    className=\"mr-8\">\n                    {formatToken(smartAlphaContract?.epochJuniorLiquidity?.unscaleBy(pool.poolToken.decimals)) ?? '-'}\n                  </Text>\n                  <TokenIcon name={poolToken?.icon} size={16} />\n                </dd>\n              </div>\n            </dl>\n            <div\n              className={classNames(s.progress, 'mb-8')}\n              style={\n                {\n                  '--pool-epoch-tranche-percentage': (smartAlphaContract?.epochSeniorLiquidityRate ?? 0) * 100,\n                } as React.CSSProperties\n              }\n            />\n            <div className=\"flex align-center\">\n              <Text type=\"small\" weight=\"semibold\" color=\"green\">\n                {formatPercent(smartAlphaContract?.epochSeniorLiquidityRate) ?? '-'}\n              </Text>\n              <Text type=\"small\" weight=\"semibold\" color=\"purple\" className=\"ml-auto\">\n                {formatPercent(smartAlphaContract?.epochJuniorLiquidityRate) ?? '-'}\n              </Text>\n            </div>\n            <div className=\"flex justify-center mt-8\">\n              <Button variation=\"text\" color=\"red\" onClick={() => setQueueStateVisible(true)}>\n                View queue state\n              </Button>\n            </div>\n          </div>\n        </section>\n        <section className={classNames(s.epochCard, s.epochCardSecondary)}>\n          <div className={s.epochCardTitleWrap}>\n            <Text type=\"lb2\" weight=\"bold\" tag=\"h3\" color=\"secondary\" className={s.epochCardTitle}>\n              EPOCH {smartAlphaContract?.currentEpoch !== undefined ? smartAlphaContract?.currentEpoch + 1 : '-'} -\n              ESTIMATES\n            </Text>\n          </div>\n          <header className={classNames(s.epochCardHeader, 'mb-24')}>\n            <div className={s.epochCardHeaderItem}>\n              <div className=\"flex align-center col-gap-8\">\n                <Text type=\"h3\" weight=\"bold\" color=\"primary\" className=\"mb-4\">\n                  {nextEpochUpsideLeverage ? `${formatNumber(nextEpochUpsideLeverage)}x` : `-`}\n                </Text>\n                <Badge color=\"purple\" size=\"small\">\n                  Junior\n                </Badge>\n              </div>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"flex align-middle col-gap-4\">\n                Upside leverage\n                <InfoTooltip>Junior positions will have their upside amplified by this much</InfoTooltip>\n              </Text>\n            </div>\n            <div className={s.epochCardHeaderItem}>\n              <div className=\"flex align-center col-gap-8\">\n                <Text\n                  type=\"h3\"\n                  weight=\"bold\"\n                  color=\"primary\"\n                  className=\"mb-4\"\n                  tooltip=\"You have this amount of downside leverage, until the underlying token's price drops by more than the senior downside protection - after which there is no more downside leverage - or you can consider it as being 1x\">\n                  {nextEpochDownsideLeverage ? `≤${formatNumber(nextEpochDownsideLeverage)}x` : `-`}\n                </Text>\n                <Badge color=\"purple\" size=\"small\">\n                  Junior\n                </Badge>\n              </div>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"flex align-middle col-gap-4\">\n                Downside leverage\n                <InfoTooltip>\n                  How much of every 1% move to the downside in the underlying asset a junior position will have exposure\n                  to.\n                  <br />\n                  <br />\n                  The downside leverage is only applicable until senior downside protection is fully covered, and junior\n                  losses are fully realized.\n                </InfoTooltip>\n              </Text>\n            </div>\n            <div className={s.epochCardHeaderItem}>\n              <div className=\"flex align-center col-gap-8\">\n                <Text type=\"h3\" weight=\"bold\" color=\"primary\" className=\"mb-4\">\n                  {formatPercent(nextEpochEstimates[2]?.unscaleBy(SMART_ALPHA_DECIMALS)) ?? '-'}\n                </Text>\n                <Badge color=\"green\" size=\"small\">\n                  Senior\n                </Badge>\n              </div>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"flex align-middle col-gap-4\">\n                Upside exposure rate\n                <InfoTooltip>\n                  How much of every 1% move to the upside in the underlying asset a senior position will have exposure\n                  to.\n                </InfoTooltip>\n              </Text>\n            </div>\n            <div className={s.epochCardHeaderItem}>\n              <div className=\"flex align-center col-gap-8\">\n                <Text type=\"h3\" weight=\"bold\" color=\"primary\" className=\"mb-4\">\n                  {formatPercent(nextEpochEstimates[3]?.unscaleBy(SMART_ALPHA_DECIMALS)) ?? '-'}\n                </Text>\n                <Badge color=\"green\" size=\"small\">\n                  Senior\n                </Badge>\n              </div>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"flex align-middle col-gap-4\">\n                Downside protection rate\n                <InfoTooltip>\n                  How much the underlying asset can decline before a senior position takes on losses.\n                </InfoTooltip>\n              </Text>\n            </div>\n          </header>\n          <div className=\"ph-24 pb-16\">\n            <dl>\n              <div className={s.epochCardDlRow}>\n                <dt>\n                  <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                    {pool.poolToken.symbol} epoch entry price\n                  </Text>\n                </dt>\n                <dd className=\"flex align-center\">\n                  <Text\n                    type=\"p1\"\n                    weight=\"semibold\"\n                    color=\"primary\"\n                    tooltip={formatToken(nextEpochEstimates[4]?.unscaleBy(entryPriceDecimals), {\n                      tokenName: pool.oracleAssetSymbol,\n                      decimals: entryPriceDecimals,\n                    })}>\n                    {(isUsdAsset(pool.oracleAssetSymbol)\n                      ? formatUSD(nextEpochEstimates[4]?.unscaleBy(entryPriceDecimals))\n                      : formatToken(nextEpochEstimates[4]?.unscaleBy(entryPriceDecimals))) ?? '-'}\n                  </Text>\n                  {!isUsdAsset(pool.oracleAssetSymbol) && (\n                    <TokenIcon name={oracleToken?.icon} size={16} className=\"ml-8\" />\n                  )}\n                </dd>\n              </div>\n              <div className={s.epochCardDlRow}>\n                <dt className=\"flex align-center\">\n                  <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                    Senior liquidity\n                  </Text>\n                  <span\n                    className=\"middle-dot color-border ml-8\"\n                    style={{ '--dot-color': 'var(--theme-green-color)' } as React.CSSProperties}\n                  />\n                </dt>\n                <dd className=\"flex align-center\">\n                  <Text\n                    type=\"p1\"\n                    weight=\"semibold\"\n                    color=\"primary\"\n                    tooltip={\n                      <Text type=\"p2\" color=\"primary\" className=\"flex flow-row row-gap-4\">\n                        <span>\n                          {formatToken(nextEpochEstimates[1]?.unscaleBy(pool.poolToken.decimals), {\n                            tokenName: pool.poolToken.symbol,\n                            decimals: pool.poolToken.decimals,\n                          })}\n                        </span>\n                        <span>\n                          {formatUSD(\n                            nextEpochEstimates[1]\n                              ?.unscaleBy(pool.poolToken.decimals)\n                              ?.multipliedBy(poolToken?.price ?? 0),\n                          )}\n                        </span>\n                      </Text>\n                    }\n                    className=\"mr-8\">\n                    {formatToken(nextEpochEstimates[1]?.unscaleBy(pool.poolToken.decimals)) ?? '-'}\n                  </Text>\n                  <TokenIcon name={poolToken?.icon} size={16} />\n                </dd>\n              </div>\n              <div className={s.epochCardDlRow}>\n                <dt className=\"flex align-center\">\n                  <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                    Junior liquidity\n                  </Text>\n                  <span\n                    className=\"middle-dot color-border ml-8\"\n                    style={{ '--dot-color': 'var(--theme-purple-color)' } as React.CSSProperties}\n                  />\n                </dt>\n                <dd className=\"flex align-center\">\n                  <Text\n                    type=\"p1\"\n                    weight=\"semibold\"\n                    color=\"primary\"\n                    tooltip={\n                      <Text type=\"p2\" color=\"primary\" className=\"flex flow-row row-gap-4\">\n                        <span>\n                          {formatToken(nextEpochEstimates[0]?.unscaleBy(pool.poolToken.decimals), {\n                            tokenName: pool.poolToken.symbol,\n                            decimals: pool.poolToken.decimals,\n                          })}\n                        </span>\n                        <span>\n                          {formatUSD(\n                            nextEpochEstimates[0]\n                              ?.unscaleBy(pool.poolToken.decimals)\n                              ?.multipliedBy(poolToken?.price ?? 0),\n                          )}\n                        </span>\n                      </Text>\n                    }\n                    className=\"mr-8\">\n                    {formatToken(nextEpochEstimates[0]?.unscaleBy(pool.poolToken.decimals)) ?? '-'}\n                  </Text>\n                  <TokenIcon name={poolToken?.icon} size={16} />\n                </dd>\n              </div>\n            </dl>\n            <div\n              className={classNames(s.progress, 'mb-8')}\n              style={\n                {\n                  '--pool-epoch-tranche-percentage': (nextEpochSeniorLiquidityRate ?? 0) * 100,\n                } as React.CSSProperties\n              }\n            />\n            <div className=\"flex align-center\">\n              <Text type=\"small\" weight=\"semibold\" color=\"green\">\n                {formatPercent(nextEpochSeniorLiquidityRate) ?? '-'}\n              </Text>\n              <Text type=\"small\" weight=\"semibold\" color=\"purple\" className=\"ml-auto\">\n                {formatPercent(nextEpochJuniorLiquidityRate) ?? '-'}\n              </Text>\n            </div>\n          </div>\n        </section>\n      </div>\n      <div className={classNames(s.epochProgress, 'mb-4')}>\n        <div className={s.epochProgressLineBefore} />\n        <div className=\"flex align-center\">\n          <span className={classNames(s.epochProgressCurrent, 'flex align-center')}>\n            {smartAlphaContract?.epoch ?? '-'}\n            <div className={classNames(s.epochSpinner, 'ml-4')} />\n          </span>\n          <UseLeftTime delay={1_000}>\n            {() => (\n              <div\n                className={s.epochProgressLineMiddle}\n                style={\n                  {\n                    '--epoch-progress':\n                      (((smartAlphaContract?.epochDuration ?? 0) - (smartAlphaContract?.tillNextEpoch ?? 0)) /\n                        (smartAlphaContract?.epochDuration ?? 0)) *\n                      100,\n                  } as React.CSSProperties\n                }\n              />\n            )}\n          </UseLeftTime>\n          <span className={s.epochProgressNext}>\n            {smartAlphaContract?.currentEpoch !== undefined ? smartAlphaContract?.currentEpoch + 1 : '-'}\n          </span>\n        </div>\n        <div className={s.epochProgressLineAfter} />\n      </div>\n      <div className=\"flex align-center justify-space-between row-gap-8 mb-32\">\n        <Button variation=\"text\" color=\"red\" onClick={() => setPreviousEpochVisible(true)}>\n          View previous epochs\n        </Button>\n        <UseLeftTime\n          end={(smartAlphaContract?.nextEpochStart ?? 0) * 1_000}\n          delay={1_000}\n          onEnd={() => smartAlphaContract?.loadCommon()}>\n          {tillNextEpoch => {\n            if (smartAlphaContract?.requireEpochAdvance) {\n              return (\n                <Text\n                  type=\"small\"\n                  tooltip={\n                    <span>\n                      Epochs are automatically advanced whenever an action occurs - however, until that happens, they\n                      cannot automatically advance - which means that essentially we would end up with epochs lasting\n                      more than one week, the concept we call elastic epochs.\n                      <br />\n                      <br />\n                      Advancing the epoch manually ensures the previous epoch's profits and losses are cemented between\n                      seniors and juniors. This yields no other benefit to the caller.\n                    </span>\n                  }>\n                  <Button\n                    variation=\"text\"\n                    color=\"red\"\n                    disabled={!wallet.isActive || epochAdvancing}\n                    loading={epochAdvancing}\n                    onClick={handleEpochAdvance}>\n                    Advance epoch\n                  </Button>\n                </Text>\n              );\n            }\n\n            if (tillNextEpoch > 0) {\n              return (\n                <>\n                  <Text type=\"p2\" weight=\"bold\" color=\"primary\" className=\"ml-auto\">\n                    {getFormattedDuration(tillNextEpoch / 1_000)}\n                  </Text>\n                  <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"ml-4\">\n                    until next epoch\n                  </Text>\n                </>\n              );\n            }\n\n            return null;\n          }}\n        </UseLeftTime>\n      </div>\n      <TokensPrice poolAddress={poolAddress} tokenSymbol={pool.poolToken.symbol} className=\"mb-32\" />\n      <PoolPerformance poolAddress={poolAddress} oracleAssetSymbol={pool.oracleAssetSymbol} className=\"mb-32\" />\n      <TransactionsTable poolAddress={poolAddress} />\n      {queueStateVisible && (\n        <Modal\n          heading={\n            <Text type=\"h3\" weight=\"bold\" color=\"primary\">\n              Queue state\n            </Text>\n          }\n          closeHandler={() => setQueueStateVisible(false)}>\n          <QueueState pool={pool} smartAlphaContract={smartAlphaContract} />\n        </Modal>\n      )}\n      {previousEpochVisible && (\n        <Modal\n          heading={\n            <div className=\"flex align-center\">\n              <TokenIcon name={poolToken?.icon} size={40} bubble2Name={oracleToken?.icon} className=\"mr-16\" />\n              <div>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\" tag=\"h2\" className=\"mb-4\">\n                  Previous epochs\n                </Text>\n                <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                  {pool.poolName}\n                </Text>\n              </div>\n            </div>\n          }\n          closeHandler={() => setPreviousEpochVisible(false)}\n          fullscreen>\n          <PreviousEpochs poolTokenSymbol={pool.poolToken.symbol} />\n        </Modal>\n      )}\n      {displayTradeLinks && (\n        <Modal\n          heading={\n            <Text type=\"h3\" weight=\"bold\" color=\"primary\">\n              Trade on Balancer\n            </Text>\n          }\n          closeHandler={() => setDisplayTradeLinks(false)}>\n          <TradeLinks pool={pool} />\n        </Modal>\n      )}\n    </div>\n  );\n};\n\nexport default PoolView;\n"],"sourceRoot":""}