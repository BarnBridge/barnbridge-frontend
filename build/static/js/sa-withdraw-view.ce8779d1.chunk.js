(this["webpackJsonpbarnbridge-frontend"]=this["webpackJsonpbarnbridge-frontend"]||[]).push([[23],{2264:function(e,o,l){"use strict";l.r(o);var t=l(29),n=l(9),a=l.n(n),i=l(0),c=l(56),s=l(80),r=l(65),d=l(38),b=l(1361),u=l(12),m=l(250),j=l(415),h=l(1365),p=l(424),v=l(5),O=l(19),x=l.n(O),f=l(8),y=l.n(f),w=l(1377),g=l(1614),N=l(1383),k=l(45),T=l(116),C=l(1591),S=l(1436),B=l(73),A=l(1909),J=l.n(A),q=l(1),z=function(e){var o,l,n,s,p,O,f,A,z=e.pool,I=e.tokenContract,M=Object(c.i)().tranche.toLowerCase(),U=Object(k.b)().contracts,E=Object(B.c)(),P=Object(m.e)(),R=P.getToken,W=P.getAsset,L=Object(T.a)(),Q=Object(v.a)(L,2),Y=Q[0],F=Q[1],D=Object(i.useState)(""),G=Object(v.a)(D,2),H=G[0],K=G[1],V=Object(i.useState)(),X=Object(v.a)(V,2),Z=X[0],$=X[1],_=Object(i.useState)(),ee=Object(v.a)(_,2),oe=ee[0],le=ee[1],te=Object(i.useState)(!1),ne=Object(v.a)(te,2),ae=ne[0],ie=ne[1],ce=Object(i.useState)(!1),se=Object(v.a)(ce,2),re=se[0],de=se[1],be="senior"===M,ue=R(z.poolToken.symbol),me=W(z.oracleAssetSymbol),je=null!==(o=null===I||void 0===I||null===(l=I.balance)||void 0===l?void 0:l.unscaleBy(z.poolToken.decimals))&&void 0!==o?o:0,he=Object(h.b)(),pe=he.getOrCreateContract,ve=he.Listeners,Oe=Object(i.useMemo)((function(){if(z)return pe(z.poolAddress,(function(){return new S.b(z.poolAddress)}),{afterInit:function(){var e=Object(t.a)(a.a.mark((function e(o){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.loadCommon();case 2:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}()})}),[z]),xe=Object(i.useMemo)((function(){var e,o=null===(e=U.sa)||void 0===e?void 0:e.loupe;if(o)return pe(o,(function(){return new C.a(o)}))}),[null===(n=U.sa)||void 0===n?void 0:n.loupe]);function fe(){return(fe=Object(t.a)(a.a.mark((function e(o){var l,t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(de(!1),ie(!0),e.prev=2,!(t=null===(l=x.a.from(H))||void 0===l?void 0:l.scaleBy(z.poolToken.decimals))){e.next=11;break}return e.next=7,null===(n=be?null===Oe||void 0===Oe?void 0:Oe.withdrawSenior:null===Oe||void 0===Oe?void 0:Oe.withdrawJunior)||void 0===n?void 0:n.call(Oe,t,o);case 7:return e.next=9,null===I||void 0===I?void 0:I.loadBalance();case 9:K(""),Y();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0);case 16:ie(!1);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){var e,o;E.account&&(null===(e=be?null===Oe||void 0===Oe?void 0:Oe.seniorExitQueue:null===Oe||void 0===Oe?void 0:Oe.juniorExitQueue)||void 0===e||e.call(Oe,E.account).then((function(e){var o=Object(v.a)(e,2),l=(o[0],o[1]);$(l)})),null===(o=be?null===xe||void 0===xe?void 0:xe.getUserRedeemableSeniorUnderlying:null===xe||void 0===xe?void 0:xe.getUserRedeemableJuniorUnderlying)||void 0===o||o.call(xe,null===Oe||void 0===Oe?void 0:Oe.address,E.account).then((function(e){le(e)})))}),[E.account,F]),Object(q.jsxs)("div",{className:"card p-24",children:[Object(q.jsxs)(u.b,{type:"h3",weight:"bold",color:"primary",tag:"h3",className:"mb-16",children:[be?"Senior":"Junior"," withdraw"]}),Object(q.jsxs)(u.b,{type:"p2",weight:"semibold",color:"secondary",tag:"p",className:"mb-32",children:["Choose the amount of tokens you want to withdraw from the ",M," side. Make sure you double check the amounts."]}),Object(q.jsxs)("div",{className:y()(J.a.depositBalance,"flex col-gap-32 mb-32"),children:[Object(q.jsxs)("div",{children:[Object(q.jsx)(u.a,{text:"This amount of junior/senior tokens is already in the withdrawal queue and will be subtracted from your overall position in the next epoch.",className:"mb-4",children:Object(q.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",children:"Balance in withdraw queue"})}),Object(q.jsxs)(u.b,{type:"p1",weight:"semibold",color:"primary",className:"flex align-center",children:[null!==(s=Object(r.d)(null===Z||void 0===Z?void 0:Z.unscaleBy(z.poolToken.decimals)))&&void 0!==s?s:"-",Object(q.jsx)(j.a,{name:null===ue||void 0===ue?void 0:ue.icon,outline:be?"green":"purple",bubble1Name:"bond",bubble2Name:null===me||void 0===me?void 0:me.icon,size:16,className:"ml-8"})]})]}),Object(q.jsxs)("div",{children:[Object(q.jsx)(u.a,{text:"This amount of ".concat(null===ue||void 0===ue?void 0:ue.icon," is available to be redeemed from withdrawals made in previous epochs. It will be automatically redeemed if you add more junior/senior tokens to the withdrawal queue."),className:"mb-4",children:Object(q.jsxs)(u.b,{type:"small",weight:"semibold",color:"secondary",children:["Unclaimed ",M," tokens"]})}),Object(q.jsxs)(u.b,{type:"p1",weight:"semibold",color:"primary",className:"flex align-center",children:[null!==(p=Object(r.d)(null===oe||void 0===oe?void 0:oe.unscaleBy(z.poolToken.decimals)))&&void 0!==p?p:"-",Object(q.jsx)(j.a,{name:null===ue||void 0===ue?void 0:ue.icon,size:16,className:"ml-8"})]})]})]}),Object(q.jsxs)(u.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-8",children:[null!==(O=null===I||void 0===I?void 0:I.symbol)&&void 0!==O?O:"-"," amount"]}),Object(q.jsx)(N.a,{before:Object(q.jsx)(j.a,{name:null===ue||void 0===ue?void 0:ue.icon,bubble1Name:"bond",bubble2Name:null===me||void 0===me?void 0:me.icon,outline:be?"green":"purple",size:24}),value:H,onChange:K,slider:!0,max:je,placeholder:"0 (Max ".concat(null!==je&&void 0!==je?je:0,")"),className:"mb-32"}),Object(q.jsx)(g.a,{type:"info",className:"mb-32",children:"Withdrawals made during an epoch will be added to the withdrawal queue and subtracted from your overall position in the next epoch."}),Object(q.jsx)("div",{className:"flex justify-end align-center",children:Object(q.jsxs)(d.a,{variation:"primary",disabled:ae,onClick:function(){de(!0)},children:[ae&&Object(q.jsx)(b.a,{className:"mr-8"}),"Signal withdraw"]})}),re&&Object(q.jsx)(w.a,{title:"Initiate withdrawal",header:Object(q.jsxs)("div",{className:"flex flow-row row-gap-16",children:[Object(q.jsxs)(u.b,{type:"p2",weight:"semibold",color:"secondary",children:["Your balance of"," ",Object(q.jsx)(u.b,{tag:"span",type:"p2",weight:"bold",color:"primary",children:Object(r.d)(x.a.from(H),{tokenName:null===I||void 0===I?void 0:I.symbol})})," ","will be added to the exit queue. You can come back at the end of the epoch to redeem your underlying token"]}),Object(q.jsxs)("div",{className:"container-box flex flow-col col-gap-32",children:[Object(q.jsxs)("div",{className:"flex flow-row",children:[Object(q.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Withdraw amount"}),Object(q.jsxs)(u.b,{type:"p1",weight:"semibold",color:"primary",className:"flex align-center",children:[null!==(f=Object(r.d)(x.a.from(H)))&&void 0!==f?f:"-",Object(q.jsx)(j.a,{name:null===ue||void 0===ue?void 0:ue.icon,bubble1Name:"bond",bubble2Name:null===me||void 0===me?void 0:me.icon,outline:be?"green":"purple",className:"ml-8"})]})]}),Object(q.jsxs)("div",{className:"flex flow-row",children:[Object(q.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Redeemable unclaimed underlying"}),Object(q.jsxs)(u.b,{type:"p1",weight:"semibold",color:"primary",className:"flex align-center",children:[null!==(A=Object(r.d)(null===oe||void 0===oe?void 0:oe.unscaleBy(z.poolToken.decimals)))&&void 0!==A?A:"-",Object(q.jsx)(j.a,{name:null===ue||void 0===ue?void 0:ue.icon,size:16,className:"ml-8"})]})]})]})]}),submitText:"Initiate withdraw",onCancel:function(){return de(!1)},onConfirm:function(e){return function(e){return fe.apply(this,arguments)}(e.gasPrice)}}),ve]})};o.default=function(){var e,o,l,n=Object(c.i)(),v=n.id,O=n.tranche,x=Object(p.e)(v).data,f=Object(m.e)(),y=f.getToken,w=f.getAsset,g="senior"===O,N=Object(h.b)().getOrCreateContract,k=Object(i.useMemo)((function(){if(x){var e=g?x.seniorTokenAddress:x.juniorTokenAddress;return N(e,(function(){return new s.a([],e)}),{afterInit:function(){var e=Object(t.a)(a.a.mark((function e(o){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([o.loadCommon(),o.loadBalance()]);case 2:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}()})}}),[x,g]);if(!x)return Object(q.jsx)(b.a,{style:{margin:"auto"}});var T=y(x.poolToken.symbol),C=w(x.oracleAssetSymbol);return Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:"container-fit",children:[Object(q.jsx)(d.e,{to:"/smart-alpha/portfolio/".concat(O,"?poolAddress=").concat(v),variation:"text-alt",icon:"arrow",iconPosition:"left",iconRotate:180,className:"mb-16",children:"Portfolio"}),Object(q.jsxs)("div",{className:"flex col-gap-64 align-center mb-32",children:[Object(q.jsxs)("div",{className:"flex align-center",children:[Object(q.jsx)(j.a,{name:null===T||void 0===T?void 0:T.icon,size:40,bubble2Name:null===C||void 0===C?void 0:C.icon,className:"mr-16"}),Object(q.jsxs)("div",{children:[Object(q.jsx)(u.b,{type:"p1",weight:"semibold",color:"primary",tag:"h2",className:"mb-4",children:x.poolName}),Object(q.jsxs)(u.b,{type:"small",weight:"semibold",color:"red",children:["Epoch ",x.state.epoch]})]})]}),Object(q.jsxs)("div",{children:[Object(q.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Wallet balance"}),Object(q.jsxs)("div",{className:"flex align-center",children:[Object(q.jsx)(u.b,{type:"p1",weight:"semibold",color:"primary",className:"mr-4",children:null!==(e=Object(r.d)(null===k||void 0===k||null===(o=k.balance)||void 0===o?void 0:o.unscaleBy(x.poolToken.decimals)))&&void 0!==e?e:"-"}),Object(q.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",children:null!==(l=null===k||void 0===k?void 0:k.symbol)&&void 0!==l?l:"-"})]})]}),Object(q.jsxs)(c.d,{children:[Object(q.jsx)(c.b,{path:"/smart-alpha/pools/:id/deposit/senior",children:Object(q.jsxs)("div",{children:[Object(q.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Side"}),Object(q.jsx)(u.b,{type:"p1",weight:"semibold",color:"primary",className:"mr-4",children:"Senior"})]})}),Object(q.jsx)(c.b,{path:"/smart-alpha/pools/:id/deposit/junior",children:Object(q.jsxs)("div",{children:[Object(q.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Side"}),Object(q.jsx)(u.b,{type:"p1",weight:"semibold",color:"primary",className:"mr-4",children:"Junior"})]})})]})]}),Object(q.jsx)(z,{pool:x,tokenContract:k})]})})}}}]);
//# sourceMappingURL=sa-withdraw-view.ce8779d1.chunk.js.map