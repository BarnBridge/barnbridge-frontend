(this["webpackJsonpbarnbridge-frontend"] = this["webpackJsonpbarnbridge-frontend"] || []).push([[7],{

/***/ 1751:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"tabs":"s_tabs__28uev","simple":"s_simple__3E-6U"};

/***/ }),

/***/ 1757:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"divider":"s_divider__3YM-J"};

/***/ }),

/***/ 1759:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"skeleton":"s_skeleton__3FB8I"};

/***/ }),

/***/ 1769:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__2OyQF","separator":"s_separator__2jXLs","list":"s_list__1TTsx","row":"s_row__1G0VL","term":"s_term__1Hf4T","termIcon":"s_termIcon__2ojvb","data":"s_data__PBmCp","dataIcon":"s_dataIcon__2hNBh"};

/***/ }),

/***/ 1770:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__3Mvxm","items":"s_items__12xaa","ratio":"s_ratio__2PnO1"};

/***/ }),

/***/ 1771:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__1YiEf","acceptance":"s_acceptance__3YfK4","fulfilled":"s_fulfilled__3gPu5"};

/***/ }),

/***/ 1777:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component___p2il"};

/***/ }),

/***/ 1854:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"cards":"s_cards__Stj_L"};

/***/ }),

/***/ 1855:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"tabs":"s_tabs__32Wke","shadows":"s_shadows__12PQF","tab":"s_tab__2wEah","active":"s_active__1mayN","disabled":"s_disabled__xaH2p","elasticTabs":"s_elasticTabs__2URoC","elasticToggle":"s_elasticToggle__3M_xZ","small":"s_small__c6etg","horizontalMenu":"s_horizontalMenu__3BcI1"};

/***/ }),

/***/ 1856:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"form":"s_form__36nMg","item":"s_item__2gbuN"};

/***/ }),

/***/ 1870:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__2RWFR"};

/***/ }),

/***/ 1871:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"list":"s_list__mhVNU"};

/***/ }),

/***/ 1872:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"divider":"s_divider__1jS-8"};

/***/ }),

/***/ 1873:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__bp6jU"};

/***/ }),

/***/ 1878:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"form":"s_form__373JW","disabled":"s_disabled__gL2Qr"};

/***/ }),

/***/ 1879:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"spinner":"s_spinner__2lxg5","rotate":"s_rotate__K9I_G","container":"s_container__2DwVy","children":"s_children__1ZC_G"};

/***/ }),

/***/ 1880:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"statusTag":"s_statusTag__qs55u","red":"s_red__1poW_","green":"s_green__2QiFO","blue":"s_blue__1mk4Q"};

/***/ }),

/***/ 1881:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__2HckH","disabled":"s_disabled__3ybza"};

/***/ }),

/***/ 1891:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__2hCqz"};

/***/ }),

/***/ 1892:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"cards":"s_cards__SMmvy","card":"s_card__3ZxAU","selected":"s_selected__5uLwB"};

/***/ }),

/***/ 1894:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"tokenSelectList":"s_tokenSelectList__1rsig","tokenSelectListButton":"s_tokenSelectListButton__898YC","active":"s_active__1VA0m","dropdown":"s_dropdown__2I7kF","large":"s_large__uF7P8","dropdownChevron":"s_dropdownChevron__3cfM7"};

/***/ }),

/***/ 1896:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"input":"s_input__1b3rZ"};

/***/ }),

/***/ 1897:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"tokenAmount":"s_tokenAmount__2n5WY","error":"s_error__3x3RW","tokenAmountBefore":"s_tokenAmountBefore__3YeAZ","tokenAmountValues":"s_tokenAmountValues__1qT2P","tokenAmountValue":"s_tokenAmountValue__2mG1w","tokenAmountHint":"s_tokenAmountHint__3Jk8f","tokenAmountSlider":"s_tokenAmountSlider__2LNhd","tokenAmountPreview":"s_tokenAmountPreview__1qEON","tokenAmountPreviewBefore":"s_tokenAmountPreviewBefore__2ZTVO","tokenAmountPreviewValues":"s_tokenAmountPreviewValues__3WU83","tokenAmountPreviewValue":"s_tokenAmountPreviewValue__2CGmA","tokenAmountPreviewHint":"s_tokenAmountPreviewHint__1XGYo","tokenSelectTrigger":"s_tokenSelectTrigger__39PsM","tokenSelectChevron":"s_tokenSelectChevron__3_diD","tokenSelectListButton":"s_tokenSelectListButton__qrRSq","active":"s_active__hEyw6","tokenAmountSelectToken":"s_tokenAmountSelectToken__8QBHp"};

/***/ }),

/***/ 1899:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__3feGb","dropdown":"s_dropdown__ggOEG"};

/***/ }),

/***/ 1913:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"inputWrapper":"s_inputWrapper__2SYqe","input":"s_input__ak8Ur","large":"s_large__RjV7F","inputSearch":"s_inputSearch__3tqk-","before":"s_before__lvzM0","searchIcon":"s_searchIcon__1NFiP"};

/***/ }),

/***/ 1914:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__HvMmO"};

/***/ }),

/***/ 1915:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__QDW8F"};

/***/ }),

/***/ 1916:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__1YTqh"};

/***/ }),

/***/ 1917:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__lLKM4","content":"s_content__VOUyb","footer":"s_footer__teV8K"};

/***/ }),

/***/ 1923:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"content":"s_content__3uru7","address":"s_address__1a35W","paragraph":"s_paragraph__2QppP","expanded":"s_expanded__1OewS"};

/***/ }),

/***/ 1941:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__2wkK2","wrap":"s_wrap__s3gkd","form":"s_form__2n-lq","textarea":"s_textarea__2EyBJ","actions":"s_actions__2fHLy"};

/***/ }),

/***/ 1944:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"addActionBtn":"s_addActionBtn__mtRzB","cardsContainer":"s_cardsContainer__1ejSo"};

/***/ }),

/***/ 1945:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__3DYra","tabs":"s_tabs__WlGiL","table":"s_table__KDN67","powerCell":"s_powerCell__2ikNm","forTag":"s_forTag__3hKyp","againstTag":"s_againstTag__2mGqw"};

/***/ }),

/***/ 1946:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__3p9EE","row":"s_row__2g1jK","changeGroup":"s_changeGroup__139DU","actionBtn":"s_actionBtn__3HPoz"};

/***/ }),

/***/ 1947:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__3oQBs"};

/***/ }),

/***/ 1948:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__1YyNj","tabs":"s_tabs__2j20Y","table":"s_table__1-kJz","powerCell":"s_powerCell__21xuC","forTag":"s_forTag__3h46w","againstTag":"s_againstTag__3ZoLW"};

/***/ }),

/***/ 1949:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__9_R9p","row":"s_row__1roRu","changeGroup":"s_changeGroup__1yheK","actionBtn":"s_actionBtn__1d105"};

/***/ }),

/***/ 1950:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"component":"s_component__rqoCF","row":"s_row__2-bC9","actionBtn":"s_actionBtn__33Ovt"};

/***/ }),

/***/ 1951:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"cardsAndSidebarContainer":"s_cardsAndSidebarContainer__1Pd9o","cardsContainer":"s_cardsContainer__29QWl","sidebarContainer":"s_sidebarContainer__288P0"};

/***/ }),

/***/ 1952:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"tabs":"s_tabs__3o4xa","search":"s_search__1fxlk"};

/***/ }),

/***/ 1953:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"pagination":"s_pagination__3UMZt","page":"s_page__29oPu","separator":"s_separator__1n_F1","prev":"s_prev__2g1Q9","next":"s_next__d_WwI","active":"s_active__ec-7d"};

/***/ }),

/***/ 1954:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"tableContainer":"s_tableContainer__2Dki2","loading":"s_loading__1OMuZ","table":"s_table__Nd1Ke","clickable":"s_clickable__1x0tg","arrowIcon":"s_arrowIcon__1zygh","tableFooter":"s_tableFooter__3iZZl","spinner":"s_spinner__1axuf"};

/***/ }),

/***/ 1955:
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"tabs":"s_tabs__2blvo"};

/***/ }),

/***/ 1973:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules
var slicedToArray = __webpack_require__(14);

// EXTERNAL MODULE: ./node_modules/react/index.js
var react = __webpack_require__(0);
var react_default = /*#__PURE__*/__webpack_require__.n(react);

// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js
var react_router = __webpack_require__(56);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js
var objectSpread2 = __webpack_require__(8);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules
var objectWithoutProperties = __webpack_require__(33);

// EXTERNAL MODULE: ./node_modules/antd/lib/tabs/index.js
var lib_tabs = __webpack_require__(1572);
var tabs_default = /*#__PURE__*/__webpack_require__.n(lib_tabs);

// EXTERNAL MODULE: ./node_modules/classnames/index.js
var classnames = __webpack_require__(7);
var classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);

// EXTERNAL MODULE: ./src/components/antd/tabs/s.module.scss
var s_module = __webpack_require__(1751);
var s_module_default = /*#__PURE__*/__webpack_require__.n(s_module);

// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js
var jsx_runtime = __webpack_require__(1);

// CONCATENATED MODULE: ./src/components/antd/tabs/index.tsx
var _excluded=["className"],_excluded2=["className","simple"];var tabs_Tab=function Tab(props){var className=props.className,tabProps=Object(objectWithoutProperties["a" /* default */])(props,_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(tabs_default.a.TabPane,Object(objectSpread2["a" /* default */])({className:classnames_default()(s_module_default.a.tab,className)},tabProps));};var tabs_Tabs=function Tabs(props){var className=props.className,_props$simple=props.simple,simple=_props$simple===void 0?false:_props$simple,tabsProps=Object(objectWithoutProperties["a" /* default */])(props,_excluded2);return/*#__PURE__*/Object(jsx_runtime["jsx"])(tabs_default.a,Object(objectSpread2["a" /* default */])({className:classnames_default()(s_module_default.a.tabs,className,simple&&s_module_default.a.simple),tabBarGutter:32},tabsProps));};tabs_Tabs.Tab=tabs_Tab;/* harmony default export */ var antd_tabs = (tabs_Tabs);
// EXTERNAL MODULE: ./src/components/button/index.tsx
var components_button = __webpack_require__(43);

// EXTERNAL MODULE: ./src/components/custom/grid/index.tsx
var grid = __webpack_require__(51);

// EXTERNAL MODULE: ./src/components/custom/icon/index.tsx + 1 modules
var custom_icon = __webpack_require__(69);

// EXTERNAL MODULE: ./src/components/custom/typography/index.tsx
var typography = __webpack_require__(11);

// EXTERNAL MODULE: ./node_modules/bignumber.js/bignumber.js
var bignumber = __webpack_require__(16);
var bignumber_default = /*#__PURE__*/__webpack_require__.n(bignumber);

// EXTERNAL MODULE: ./node_modules/query-string/index.js
var query_string = __webpack_require__(628);
var query_string_default = /*#__PURE__*/__webpack_require__.n(query_string);

// EXTERNAL MODULE: ./src/web3/utils.ts
var utils = __webpack_require__(68);

// EXTERNAL MODULE: ./src/components/providers/configProvider.tsx
var configProvider = __webpack_require__(49);

// EXTERNAL MODULE: ./src/utils/context.ts
var utils_context = __webpack_require__(62);

// EXTERNAL MODULE: ./src/utils/fetch.ts
var utils_fetch = __webpack_require__(77);

// CONCATENATED MODULE: ./src/modules/governance/api.tsx
var api_excluded=["status"],api_excluded2=["status"],_excluded3=["status"],_excluded4=["status"];var APIProposalState;(function(APIProposalState){APIProposalState["CREATED"]="CREATED";APIProposalState["WARMUP"]="WARMUP";APIProposalState["ACTIVE"]="ACTIVE";APIProposalState["CANCELED"]="CANCELED";APIProposalState["FAILED"]="FAILED";APIProposalState["ACCEPTED"]="ACCEPTED";APIProposalState["QUEUED"]="QUEUED";APIProposalState["GRACE"]="GRACE";APIProposalState["EXPIRED"]="EXPIRED";APIProposalState["EXECUTED"]="EXECUTED";APIProposalState["ABROGATED"]="ABROGATED";})(APIProposalState||(APIProposalState={}));var APIProposalStateId;(function(APIProposalStateId){APIProposalStateId[APIProposalStateId["WARMUP"]=0]="WARMUP";APIProposalStateId[APIProposalStateId["ACTIVE"]=1]="ACTIVE";APIProposalStateId[APIProposalStateId["CANCELED"]=2]="CANCELED";APIProposalStateId[APIProposalStateId["FAILED"]=3]="FAILED";APIProposalStateId[APIProposalStateId["ACCEPTED"]=4]="ACCEPTED";APIProposalStateId[APIProposalStateId["QUEUED"]=5]="QUEUED";APIProposalStateId[APIProposalStateId["GRACE"]=6]="GRACE";APIProposalStateId[APIProposalStateId["EXPIRED"]=7]="EXPIRED";APIProposalStateId[APIProposalStateId["EXECUTED"]=8]="EXECUTED";APIProposalStateId[APIProposalStateId["ABROGATED"]=9]="ABROGATED";})(APIProposalStateId||(APIProposalStateId={}));var APIProposalStateMap=new Map([[APIProposalState.CREATED,'Created'],[APIProposalState.WARMUP,'Warm-Up'],[APIProposalState.ACTIVE,'Voting'],[APIProposalState.CANCELED,'Canceled'],[APIProposalState.FAILED,'Failed'],[APIProposalState.ACCEPTED,'Accepted'],[APIProposalState.QUEUED,'Queued for execution'],[APIProposalState.GRACE,'Pending execution'],[APIProposalState.EXPIRED,'Expired'],[APIProposalState.EXECUTED,'Executed'],[APIProposalState.ABROGATED,'Abrogated']]);var Context=/*#__PURE__*/Object(react["createContext"])(Object(utils_context["a" /* InvariantContext */])('DaoAPIProvider'));function useDaoAPI(){return Object(react["useContext"])(Context);}var api_DaoAPIProvider=function DaoAPIProvider(props){var config=Object(configProvider["b" /* useConfig */])();function fetchOverviewData(){var url=new URL("/api/governance/overview",config.api.baseUrl);return fetch(url.toString()).then(function(result){return result.json();}).then(function(result){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},result.data),{},{totalDelegatedPower:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(result.data.totalDelegatedPower),18),totalVbond:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(result.data.totalVbond),18)});});}function fetchVoters(){var page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var url=new URL("/api/governance/voters?page=".concat(page,"&limit=").concat(limit),config.api.baseUrl);return fetch(url.toString()).then(function(result){return result.json();}).then(function(result){var _result$data;return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},result),{},{data:((_result$data=result.data)!==null&&_result$data!==void 0?_result$data:[]).map(function(item){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},item),{},{bondStaked:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(item.bondStaked),18),// bond decimals
delegatedPower:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(item.delegatedPower),18),votingPower:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(item.votingPower),18)});})});});}function fetchProposals(){var page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var state=arguments.length>2?arguments[2]:undefined;var search=arguments.length>3?arguments[3]:undefined;var query=query_string_default.a.stringify({page:String(page),limit:String(limit),state:state,title:search},{skipNull:true,skipEmptyString:true,encode:true});var url=new URL("/api/governance/proposals?".concat(query),config.api.baseUrl);return fetch(url.toString()).then(function(result){return result.json();}).then(function(_ref){var status=_ref.status,data=Object(objectWithoutProperties["a" /* default */])(_ref,api_excluded);if(status!==200){return Promise.reject(status);}return data;}).then(function(result){var _result$data2;return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},result),{},{data:((_result$data2=result.data)!==null&&_result$data2!==void 0?_result$data2:[]).map(function(proposal){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},proposal),{},{forVotes:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(proposal.forVotes),18),againstVotes:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(proposal.againstVotes),18)});})});});}function fetchProposal(proposalId){var url=new URL("/api/governance/proposals/".concat(proposalId),config.api.baseUrl);return fetch(url.toString()).then(function(result){return result.json();}).then(function(_ref2){var data=_ref2.data,status=_ref2.status;if(status!==200){return Promise.reject(status);}return data;}).then(function(data){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},data),{},{forVotes:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(data.forVotes),18),againstVotes:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(data.againstVotes),18)});});}function fetchProposalVoters(proposalId){var page=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var limit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:10;var support=arguments.length>3?arguments[3]:undefined;var query=query_string_default.a.stringify({page:String(page),limit:String(limit),support:support},{skipNull:true,skipEmptyString:true,encode:true});var url=new URL("/api/governance/proposals/".concat(proposalId,"/votes?").concat(query),config.api.baseUrl);return fetch(url.toString()).then(function(result){return result.json();}).then(function(_ref3){var status=_ref3.status,data=Object(objectWithoutProperties["a" /* default */])(_ref3,api_excluded2);if(status!==200){return Promise.reject(status);}return data;}).then(function(result){var _result$data3;return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},result),{},{data:((_result$data3=result.data)!==null&&_result$data3!==void 0?_result$data3:[]).map(function(vote){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},vote),{},{power:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(vote.power),18)});})});});}function fetchAbrogation(proposalId){var url=new URL("/api/governance/abrogation-proposals/".concat(proposalId),config.api.baseUrl);return fetch(url.toString()).then(function(result){return result.json();}).then(function(_ref4){var data=_ref4.data,status=_ref4.status;if(status!==200){return Promise.reject(status);}return data;}).then(function(data){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},data),{},{forVotes:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(data.forVotes),18),againstVotes:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(data.againstVotes),18)});});}function fetchAbrogationVoters(proposalId){var page=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var limit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:10;var support=arguments.length>3?arguments[3]:undefined;var query=query_string_default.a.stringify({page:String(page),limit:String(limit),support:support},{skipNull:true,skipEmptyString:true,encode:true});var url=new URL("/api/governance/abrogation-proposals/".concat(proposalId,"/votes?").concat(query),config.api.baseUrl);return fetch(url.toString()).then(function(result){return result.json();}).then(function(_ref5){var status=_ref5.status,data=Object(objectWithoutProperties["a" /* default */])(_ref5,_excluded3);if(status!==200){return Promise.reject(status);}return data;}).then(function(result){var _result$data4;return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},result),{},{data:((_result$data4=result.data)!==null&&_result$data4!==void 0?_result$data4:[]).map(function(vote){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},vote),{},{power:Object(utils["e" /* getHumanValue */])(bignumber_default.a.from(vote.power),18)});})});});}function fetchTreasuryTokens(){var _config$contracts$dao;var url=new URL("/api/governance/treasury/tokens?address=".concat((_config$contracts$dao=config.contracts.dao)===null||_config$contracts$dao===void 0?void 0:_config$contracts$dao.governance),config.api.baseUrl);return fetch(url.toString()).then(function(result){return result.json();}).then(function(_ref6){var status=_ref6.status,data=_ref6.data;if(status!==200){return Promise.reject(status);}return data;});}function fetchTreasuryHistory(){var _config$contracts$dao2;var page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;var tokenFilter=arguments.length>2?arguments[2]:undefined;var directionFilter=arguments.length>3?arguments[3]:undefined;var query=query_string_default.a.stringify({address:(_config$contracts$dao2=config.contracts.dao)===null||_config$contracts$dao2===void 0?void 0:_config$contracts$dao2.governance,page:String(page),limit:String(limit),tokenAddress:tokenFilter,transactionDirection:directionFilter},{skipNull:true,skipEmptyString:true,encode:true});var url=new URL("/api/governance/treasury/transactions?".concat(query),config.api.baseUrl);return fetch(url.toString()).then(function(result){return result.json();}).then(function(_ref7){var status=_ref7.status,data=Object(objectWithoutProperties["a" /* default */])(_ref7,_excluded4);if(status!==200){return Promise.reject(status);}return data;}).then(function(result){var _result$data5;return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},result),{},{data:((_result$data5=result.data)!==null&&_result$data5!==void 0?_result$data5:[]).map(function(item){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},item),{},{amount:Number(item.amount)});})});});}var value={fetchOverviewData:fetchOverviewData,fetchVoters:fetchVoters,fetchProposals:fetchProposals,fetchProposal:fetchProposal,fetchProposalVoters:fetchProposalVoters,fetchAbrogation:fetchAbrogation,fetchAbrogationVoters:fetchAbrogationVoters,fetchTreasuryTokens:fetchTreasuryTokens,fetchTreasuryHistory:fetchTreasuryHistory};return/*#__PURE__*/Object(jsx_runtime["jsx"])(Context.Provider,{value:value,children:props.children});};/* harmony default export */ var api = (api_DaoAPIProvider);function useFetchTreasuryTokens(){var _config$contracts$dao3;var config=Object(configProvider["b" /* useConfig */])();var url=new URL("/api/governance/treasury/tokens?address=".concat((_config$contracts$dao3=config.contracts.dao)===null||_config$contracts$dao3===void 0?void 0:_config$contracts$dao3.governance),config.api.baseUrl);return Object(utils_fetch["c" /* useFetch */])(url,{transform:function transform(_ref8){var data=_ref8.data;return data;}});}function useFetchTreasuryHistory(){var _config$contracts$dao4;var page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var tokenFilter=arguments.length>1?arguments[1]:undefined;var directionFilter=arguments.length>2?arguments[2]:undefined;var config=Object(configProvider["b" /* useConfig */])();var query=Object(utils_fetch["b" /* queryfy */])({address:(_config$contracts$dao4=config.contracts.dao)===null||_config$contracts$dao4===void 0?void 0:_config$contracts$dao4.governance,limit:10,page:page,tokenAddress:tokenFilter,transactionDirection:directionFilter});var url=new URL("/api/governance/treasury/transactions?".concat(query),config.api.baseUrl);return Object(utils_fetch["c" /* useFetch */])(url,{transform:function transform(_ref9){var _ref9$data=_ref9.data,data=_ref9$data===void 0?[]:_ref9$data,meta=_ref9.meta;return{meta:meta,data:data.map(function(item){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},item),{},{amount:Number(item.amount)});})};}});}
// EXTERNAL MODULE: ./src/wallets/walletProvider.tsx + 16 modules
var wallets_walletProvider = __webpack_require__(80);

// EXTERNAL MODULE: ./src/web3/components/contractManagerProvider.tsx
var contractManagerProvider = __webpack_require__(75);

// EXTERNAL MODULE: ./src/components/providers/knownTokensProvider.tsx
var knownTokensProvider = __webpack_require__(191);

// EXTERNAL MODULE: ./src/hooks/useMergeState.ts
var useMergeState = __webpack_require__(429);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js
var regenerator = __webpack_require__(12);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(28);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js
var classCallCheck = __webpack_require__(19);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js
var createClass = __webpack_require__(25);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js
var inherits = __webpack_require__(30);

// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js + 2 modules
var createSuper = __webpack_require__(31);

// EXTERNAL MODULE: ./src/web3/web3Contract.ts
var web3Contract = __webpack_require__(40);

// CONCATENATED MODULE: ./src/modules/governance/contracts/daoBarn.ts
var DaoBarnABI=[// call
Object(web3Contract["b" /* createAbiItem */])('bondStaked',[],['uint256']),Object(web3Contract["b" /* createAbiItem */])('balanceOf',['address'],['uint256']),Object(web3Contract["b" /* createAbiItem */])('votingPower',['address'],['uint256']),Object(web3Contract["b" /* createAbiItem */])('userLockedUntil',['address'],['uint256']),Object(web3Contract["b" /* createAbiItem */])('delegatedPower',['address'],['uint256']),Object(web3Contract["b" /* createAbiItem */])('userDelegatedTo',['address'],['address']),Object(web3Contract["b" /* createAbiItem */])('bondStakedAtTs',['uint256'],['uint256']),Object(web3Contract["b" /* createAbiItem */])('votingPowerAtTs',['address','uint256'],['uint256']),Object(web3Contract["b" /* createAbiItem */])('multiplierAtTs',['address','uint256'],['uint256']),Object(web3Contract["b" /* createAbiItem */])('checkTimeLock',['address','uint8'],['uint256','uint256','bytes32']),// send
Object(web3Contract["b" /* createAbiItem */])('deposit',['uint256'],[]),Object(web3Contract["b" /* createAbiItem */])('withdraw',['uint256'],[]),Object(web3Contract["b" /* createAbiItem */])('addOrAdjusttimelock',['uint256','uint256','uint8','bytes32'],[]),Object(web3Contract["b" /* createAbiItem */])('delegate',['address'],[]),Object(web3Contract["b" /* createAbiItem */])('stopDelegate',[],[]),Object(web3Contract["b" /* createAbiItem */])('lock',['uint256'],[])];var daoBarn_DaoBarnContract=/*#__PURE__*/function(_Web3Contract){Object(inherits["a" /* default */])(DaoBarnContract,_Web3Contract);var _super=Object(createSuper["a" /* default */])(DaoBarnContract);function DaoBarnContract(address){var _this;Object(classCallCheck["a" /* default */])(this,DaoBarnContract);_this=_super.call(this,DaoBarnABI,address,'DAO Barn');_this.bondStaked=void 0;_this.balance=void 0;_this.votingPower=void 0;_this.userLockedUntil=void 0;_this.delegatedPower=void 0;_this.userDelegatedTo=void 0;_this.on(web3Contract["c" /* default */].UPDATE_ACCOUNT,function(){_this.balance=undefined;_this.votingPower=undefined;_this.userLockedUntil=undefined;_this.delegatedPower=undefined;_this.userDelegatedTo=undefined;});return _this;}// common data
Object(createClass["a" /* default */])(DaoBarnContract,[{key:"isUserLocked",get:// computed data
function get(){var _this$userLockedUntil;return((_this$userLockedUntil=this.userLockedUntil)!==null&&_this$userLockedUntil!==void 0?_this$userLockedUntil:0)>Date.now()/1000;}},{key:"loadCommonData",value:function(){var _loadCommonData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _yield$this$batch,_yield$this$batch2,bondStaked;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.batch([{method:'bondStaked'}]);case 2:_yield$this$batch=_context.sent;_yield$this$batch2=Object(slicedToArray["a" /* default */])(_yield$this$batch,1);bondStaked=_yield$this$batch2[0];this.bondStaked=new bignumber_default.a(bondStaked).unscaleBy(18);/// TODO: re-check
this.emit(web3Contract["c" /* default */].UPDATE_DATA);case 7:case"end":return _context.stop();}}},_callee,this);}));function loadCommonData(){return _loadCommonData.apply(this,arguments);}return loadCommonData;}()},{key:"loadUserData",value:function(){var _loadUserData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var account,_yield$this$batch3,_yield$this$batch4,balance,votingPower,userLockedUntil,delegatedPower,userDelegatedTo;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:account=this.account;this.assertAccount();_context2.next=4;return this.batch([{method:'balanceOf',methodArgs:[account]},{method:'votingPower',methodArgs:[account]},{method:'userLockedUntil',methodArgs:[account]},{method:'delegatedPower',methodArgs:[account]},{method:'userDelegatedTo',methodArgs:[account]}]);case 4:_yield$this$batch3=_context2.sent;_yield$this$batch4=Object(slicedToArray["a" /* default */])(_yield$this$batch3,5);balance=_yield$this$batch4[0];votingPower=_yield$this$batch4[1];userLockedUntil=_yield$this$batch4[2];delegatedPower=_yield$this$batch4[3];userDelegatedTo=_yield$this$batch4[4];this.balance=new bignumber_default.a(balance).unscaleBy(18);/// TODO: re-check
this.votingPower=new bignumber_default.a(votingPower).unscaleBy(18);/// TODO: re-check
this.userLockedUntil=Number(userLockedUntil);this.delegatedPower=new bignumber_default.a(delegatedPower).unscaleBy(18);/// TODO: re-check
this.userDelegatedTo=userDelegatedTo;this.emit(web3Contract["c" /* default */].UPDATE_DATA);case 17:case"end":return _context2.stop();}}},_callee2,this);}));function loadUserData(){return _loadUserData.apply(this,arguments);}return loadUserData;}()},{key:"getBondStakedAtTs",value:function getBondStakedAtTs(timestamp){return this.call('bondStakedAtTs',[timestamp]).then(function(value){return new bignumber_default.a(value).unscaleBy(18);});/// TODO: re-check
}},{key:"getVotingPower",value:function getVotingPower(address){return this.call('votingPower',[address]).then(function(value){return new bignumber_default.a(value).unscaleBy(18);});/// TODO: re-check
}},{key:"getVotingPowerAtTs",value:function getVotingPowerAtTs(address,timestamp){return this.call('votingPowerAtTs',[address,timestamp]).then(function(value){return new bignumber_default.a(value).unscaleBy(18);});/// TODO: re-check
}},{key:"getMultiplierAtTs",value:function getMultiplierAtTs(address,timestamp){return this.call('votingPowerAtTs',[address,timestamp]).then(function(value){return new bignumber_default.a(value).unscaleBy(18);});/// TODO: re-check
}},{key:"checkTimeLock",value:function checkTimeLock(address,dataType){return this.call('checkTimeLock',[address,dataType]).then(function(value){return{amount:new bignumber_default.a(value[0]).unscaleBy(18).toNumber(),expiry:Number(value[1]),data:String(value[2])};});}},{key:"deposit",value:function deposit(amount,gasPrice){return this.send('deposit',[amount],{},gasPrice);}},{key:"withdraw",value:function withdraw(amount,gasPrice){return this.send('withdraw',[amount],{},gasPrice);}},{key:"delegate",value:function delegate(to,gasPrice){return this.send('delegate',[to],{},gasPrice);}},{key:"stopDelegate",value:function stopDelegate(gasPrice){return this.send('stopDelegate',[],{},gasPrice);}},{key:"lock",value:function lock(timestamp,gasPrice){return this.send('lock',[timestamp],{},gasPrice);}},{key:"addOrAdjusttimelock",value:function addOrAdjusttimelock(amount,timestamp,dataType,data,gasPrice){return this.send('addOrAdjusttimelock',[amount,timestamp,dataType,data],{},gasPrice);}}]);return DaoBarnContract;}(web3Contract["c" /* default */]);/* harmony default export */ var contracts_daoBarn = (daoBarn_DaoBarnContract);
// CONCATENATED MODULE: ./src/modules/governance/contracts/daoGovernance.ts
var DaoGovernanceABI=[// call
Object(web3Contract["b" /* createAbiItem */])('isActive',[],['bool']),Object(web3Contract["b" /* createAbiItem */])('state',['uint256'],['uint8']),Object(web3Contract["b" /* createAbiItem */])('latestProposalIds',['address'],['uint256']),Object(web3Contract["b" /* createAbiItem */])('getReceipt',['uint256','address'],[new web3Contract["a" /* AbiTuple */](['bool','uint256','bool'])]),Object(web3Contract["b" /* createAbiItem */])('abrogationProposals',['uint256'],['address','uint256','string','uint256','uint256']),Object(web3Contract["b" /* createAbiItem */])('getAbrogationProposalReceipt',['uint256','address'],[new web3Contract["a" /* AbiTuple */](['bool','uint256','bool'])]),// send
Object(web3Contract["b" /* createAbiItem */])('activate',[],[]),Object(web3Contract["b" /* createAbiItem */])('propose',['address[]','uint256[]','string[]','bytes[]','string','string'],['uint256']),Object(web3Contract["b" /* createAbiItem */])('cancelProposal',['uint256'],[]),Object(web3Contract["b" /* createAbiItem */])('queue',['uint256'],[]),Object(web3Contract["b" /* createAbiItem */])('execute',['uint256'],[]),Object(web3Contract["b" /* createAbiItem */])('castVote',['uint256','bool'],[]),Object(web3Contract["b" /* createAbiItem */])('cancelVote',['uint256'],[]),Object(web3Contract["b" /* createAbiItem */])('startAbrogationProposal',['uint256','string'],[]),Object(web3Contract["b" /* createAbiItem */])('abrogationProposal_castVote',['uint256','bool'],[]),Object(web3Contract["b" /* createAbiItem */])('abrogationProposal_cancelVote',['uint256'],[])];var daoGovernance_DaoGovernanceContract=/*#__PURE__*/function(_Web3Contract){Object(inherits["a" /* default */])(DaoGovernanceContract,_Web3Contract);var _super=Object(createSuper["a" /* default */])(DaoGovernanceContract);function DaoGovernanceContract(address){var _this;Object(classCallCheck["a" /* default */])(this,DaoGovernanceContract);_this=_super.call(this,DaoGovernanceABI,address,'DAO Governance');_this.isActive=void 0;_this.on(web3Contract["c" /* default */].UPDATE_ACCOUNT,function(){});return _this;}// common data
Object(createClass["a" /* default */])(DaoGovernanceContract,[{key:"loadCommonData",value:function(){var _loadCommonData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _yield$this$batch,_yield$this$batch2,isActive;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.batch([{method:'isActive'}]);case 2:_yield$this$batch=_context.sent;_yield$this$batch2=Object(slicedToArray["a" /* default */])(_yield$this$batch,1);isActive=_yield$this$batch2[0];this.isActive=Boolean(isActive);this.emit(web3Contract["c" /* default */].UPDATE_DATA);case 7:case"end":return _context.stop();}}},_callee,this);}));function loadCommonData(){return _loadCommonData.apply(this,arguments);}return loadCommonData;}()},{key:"loadUserData",value:function(){var _loadUserData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.assertAccount();this.emit(web3Contract["c" /* default */].UPDATE_DATA);case 2:case"end":return _context2.stop();}}},_callee2,this);}));function loadUserData(){return _loadUserData.apply(this,arguments);}return loadUserData;}()},{key:"getState",value:function getState(proposalId){return this.call('state',[proposalId]).then(function(value){return Number(value);});}},{key:"getLatestProposalIds",value:function getLatestProposalIds(address){return this.call('latestProposalIds',[address]).then(function(value){return Number(value);});}},{key:"getReceipt",value:function getReceipt(proposalId,voterAddress){return this.call('getReceipt',[proposalId,voterAddress]).then(function(value){return{hasVoted:Boolean(value[0]),votes:Number(value[1]),support:Boolean(value[2])};});}},{key:"getAbrogationProposals",value:function getAbrogationProposals(proposalId){return this.call('abrogationProposals',[proposalId]).then(function(value){return{creator:value[0],createTime:Number(value[1]),description:value[2],forVotes:Number(value[3]),againstVotes:Number(value[4])};});}},{key:"getAbrogationProposalReceipt",value:function getAbrogationProposalReceipt(proposalId,voterAddress){return this.call('getAbrogationProposalReceipt',[proposalId,voterAddress]).then(function(value){return{hasVoted:Boolean(value[0]),votes:Number(value[1]),support:Boolean(value[2])};});}},{key:"activate",value:function activate(gasPrice){return this.send('activate',[],{},gasPrice);}},{key:"propose",value:function propose(title,description,targets,values,signatures,calldatas,gasPrice){return this.send('propose',[targets,values,signatures,calldatas,description,title],{},gasPrice);}},{key:"cancelProposal",value:function cancelProposal(proposalId,gasPrice){return this.send('cancelProposal',[proposalId],{},gasPrice);}},{key:"queue",value:function queue(proposalId,gasPrice){return this.send('queue',[proposalId],{},gasPrice);}},{key:"execute",value:function execute(proposalId,gasPrice){return this.send('execute',[proposalId],{},gasPrice);}},{key:"castVote",value:function castVote(proposalId,support,gasPrice){return this.send('castVote',[proposalId,support],{},gasPrice);}},{key:"cancelVote",value:function cancelVote(proposalId,gasPrice){return this.send('cancelVote',[proposalId],{},gasPrice);}},{key:"startAbrogationProposal",value:function startAbrogationProposal(proposalId,description,gasPrice){return this.send('startAbrogationProposal',[proposalId,description],{},gasPrice);}},{key:"abrogationProposalCastVote",value:function abrogationProposalCastVote(proposalId,support,gasPrice){return this.send('abrogationProposal_castVote',[proposalId,support],{},gasPrice);}},{key:"abrogationProposalCancelVote",value:function abrogationProposalCancelVote(proposalId,gasPrice){return this.send('abrogationProposal_cancelVote',[proposalId],{},gasPrice);}}]);return DaoGovernanceContract;}(web3Contract["c" /* default */]);/* harmony default export */ var contracts_daoGovernance = (daoGovernance_DaoGovernanceContract);
// CONCATENATED MODULE: ./src/modules/governance/contracts/daoReward.ts
var DaoRewardABI=[// call
Object(web3Contract["b" /* createAbiItem */])('pullFeature',[],['address','uint256','uint256','uint256']),// send
Object(web3Contract["b" /* createAbiItem */])('claim',[],['uint256'])];var daoReward_DaoRewardContract=/*#__PURE__*/function(_Web3Contract){Object(inherits["a" /* default */])(DaoRewardContract,_Web3Contract);var _super=Object(createSuper["a" /* default */])(DaoRewardContract);function DaoRewardContract(address){var _this;Object(classCallCheck["a" /* default */])(this,DaoRewardContract);_this=_super.call(this,DaoRewardABI,address,'DAO Reward');_this.pullFeature=void 0;_this.toClaim=void 0;_this.on(web3Contract["c" /* default */].UPDATE_ACCOUNT,function(){_this.toClaim=undefined;});return _this;}// common data
Object(createClass["a" /* default */])(DaoRewardContract,[{key:"bondRewards",get:// computed data
function get(){if(!this.pullFeature){return undefined;}var _this$pullFeature=this.pullFeature,startTs=_this$pullFeature.startTs,endTs=_this$pullFeature.endTs,totalDuration=_this$pullFeature.totalDuration;var now=Date.now()/1000;if(startTs>now){return bignumber_default.a.ZERO;}if(endTs<=now){return bignumber_default.a.ZERO;}return bignumber_default.a.ZERO;}},{key:"loadCommonData",value:function(){var _loadCommonData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _yield$this$batch,_yield$this$batch2,pullFeature;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.batch([{method:'pullFeature'}]);case 2:_yield$this$batch=_context.sent;_yield$this$batch2=Object(slicedToArray["a" /* default */])(_yield$this$batch,1);pullFeature=_yield$this$batch2[0];this.pullFeature={source:pullFeature[0],startTs:Number(pullFeature[1]),endTs:Number(pullFeature[2]),totalDuration:Number(pullFeature[3]),totalAmount:new bignumber_default.a(pullFeature[4]).unscaleBy(18)/// TODO: re-check
};this.emit(web3Contract["c" /* default */].UPDATE_DATA);case 7:case"end":return _context.stop();}}},_callee,this);}));function loadCommonData(){return _loadCommonData.apply(this,arguments);}return loadCommonData;}()},{key:"loadUserData",value:function(){var _loadUserData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var _BigNumber$from;var account,_yield$this$batch3,_yield$this$batch4,toClaim;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:account=this.account;this.assertAccount();_context2.next=4;return this.batch([{method:'claim',callArgs:{from:account}}]);case 4:_yield$this$batch3=_context2.sent;_yield$this$batch4=Object(slicedToArray["a" /* default */])(_yield$this$batch3,1);toClaim=_yield$this$batch4[0];this.toClaim=(_BigNumber$from=bignumber_default.a.from(toClaim))===null||_BigNumber$from===void 0?void 0:_BigNumber$from.unscaleBy(18);/// TODO: re-check
this.emit(web3Contract["c" /* default */].UPDATE_DATA);case 9:case"end":return _context2.stop();}}},_callee2,this);}));function loadUserData(){return _loadUserData.apply(this,arguments);}return loadUserData;}()},{key:"claim",value:function(){var _claim=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(gasPrice){return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.send('claim',[],{},gasPrice);case 2:case"end":return _context3.stop();}}},_callee3,this);}));function claim(_x){return _claim.apply(this,arguments);}return claim;}()}]);return DaoRewardContract;}(web3Contract["c" /* default */]);/* harmony default export */ var contracts_daoReward = (daoReward_DaoRewardContract);
// CONCATENATED MODULE: ./src/modules/governance/components/dao-provider/index.tsx
var InitialState={minThreshold:1,isActive:undefined,bondStaked:undefined,activationRate:undefined,thresholdRate:undefined};var dao_provider_Context=/*#__PURE__*/react_default.a.createContext(Object(utils_context["a" /* InvariantContext */])('DAOProvider'));function useDAO(){return react_default.a.useContext(dao_provider_Context);}var dao_provider_DAOProvider=function DAOProvider(props){var _config$contracts$dao,_config$contracts$dao3,_config$contracts$dao5;var children=props.children;var config=Object(configProvider["b" /* useConfig */])();var walletCtx=Object(wallets_walletProvider["c" /* useWallet */])();var daoBarn=Object(contractManagerProvider["b" /* useContract */])((_config$contracts$dao=config.contracts.dao)===null||_config$contracts$dao===void 0?void 0:_config$contracts$dao.barn,function(){var _config$contracts$dao2;return new contracts_daoBarn((_config$contracts$dao2=config.contracts.dao)===null||_config$contracts$dao2===void 0?void 0:_config$contracts$dao2.barn);});var daoGovernance=Object(contractManagerProvider["b" /* useContract */])((_config$contracts$dao3=config.contracts.dao)===null||_config$contracts$dao3===void 0?void 0:_config$contracts$dao3.governance,function(){var _config$contracts$dao4;return new contracts_daoGovernance((_config$contracts$dao4=config.contracts.dao)===null||_config$contracts$dao4===void 0?void 0:_config$contracts$dao4.governance);});var daoReward=Object(contractManagerProvider["b" /* useContract */])((_config$contracts$dao5=config.contracts.dao)===null||_config$contracts$dao5===void 0?void 0:_config$contracts$dao5.reward,function(){var _config$contracts$dao6;return new contracts_daoReward((_config$contracts$dao6=config.contracts.dao)===null||_config$contracts$dao6===void 0?void 0:_config$contracts$dao6.reward);});var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),projectToken=_useKnownTokens.projectToken;var _useMergeState=Object(useMergeState["a" /* default */])(InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];react_default.a.useEffect(function(){daoGovernance.loadCommonData();daoReward.loadCommonData();daoBarn.loadCommonData();},[]);react_default.a.useEffect(function(){var bondContract=projectToken.contract;bondContract.setAccount(walletCtx.account);// ?
if(walletCtx.account){var _config$contracts$dao7;daoGovernance.loadUserData();daoReward.loadUserData();daoBarn.loadUserData();bondContract.loadAllowance((_config$contracts$dao7=config.contracts.dao)===null||_config$contracts$dao7===void 0?void 0:_config$contracts$dao7.barn).catch(Error);}},[walletCtx.account]);react_default.a.useEffect(function(){var _config$dao;var isActive=daoGovernance.isActive;var bondStaked=daoBarn.bondStaked,votingPower=daoBarn.votingPower;var activationThreshold=(_config$dao=config.dao)===null||_config$dao===void 0?void 0:_config$dao.activationThreshold;var activationRate;if(bondStaked&&activationThreshold&&activationThreshold>0){activationRate=bondStaked.multipliedBy(100).div(activationThreshold).toNumber();activationRate=Math.min(activationRate,100);}var thresholdRate;if(votingPower&&(bondStaked===null||bondStaked===void 0?void 0:bondStaked.gt(bignumber_default.a.ZERO))){thresholdRate=votingPower.multipliedBy(100).div(bondStaked).toNumber();thresholdRate=Math.min(thresholdRate,100);}setState({isActive:isActive,bondStaked:bondStaked,activationRate:activationRate,thresholdRate:thresholdRate});},[daoGovernance.isActive,daoBarn.bondStaked,daoBarn.votingPower]);function activate(){return daoGovernance.activate().then(function(){// daoGovernance.reload(); /// TODO: check
// daoBarn.reload(); /// TODO: check
});}function hasActiveProposal(){if(!walletCtx.account){return Promise.resolve(false);}return daoGovernance.getLatestProposalIds(walletCtx.account).then(function(proposalId){if(!proposalId){return Promise.resolve(false);}return daoGovernance.getState(proposalId).then(function(proposalState){return![APIProposalStateId.CANCELED,APIProposalStateId.EXECUTED,APIProposalStateId.FAILED,APIProposalStateId.EXPIRED,APIProposalStateId.ABROGATED].includes(proposalState);});});}function hasThreshold(){if(state.thresholdRate===undefined){return undefined;}return state.thresholdRate>=state.minThreshold;}return/*#__PURE__*/Object(jsx_runtime["jsx"])(dao_provider_Context.Provider,{value:Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{daoBarn:daoBarn,daoReward:daoReward,daoGovernance:daoGovernance,actions:{activate:activate,hasThreshold:hasThreshold,hasActiveProposal:hasActiveProposal}}),children:children});};/* harmony default export */ var dao_provider = (dao_provider_DAOProvider);
// EXTERNAL MODULE: ./node_modules/antd/es/spin/index.js
var spin = __webpack_require__(1971);

// EXTERNAL MODULE: ./src/components/antd/button/index.tsx
var antd_button = __webpack_require__(79);

// EXTERNAL MODULE: ./node_modules/antd/lib/divider/index.js
var divider = __webpack_require__(1758);
var divider_default = /*#__PURE__*/__webpack_require__.n(divider);

// EXTERNAL MODULE: ./src/components/antd/divider/s.module.scss
var divider_s_module = __webpack_require__(1757);
var divider_s_module_default = /*#__PURE__*/__webpack_require__.n(divider_s_module);

// CONCATENATED MODULE: ./src/components/antd/divider/index.tsx
var divider_excluded=["className"];var divider_Divider=function Divider(props){var className=props.className,dividerProps=Object(objectWithoutProperties["a" /* default */])(props,divider_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(divider_default.a,Object(objectSpread2["a" /* default */])({className:classnames_default()(divider_s_module_default.a.divider,className)},dividerProps));};/* harmony default export */ var antd_divider = (divider_Divider);
// EXTERNAL MODULE: ./node_modules/antd/lib/skeleton/index.js
var skeleton = __webpack_require__(1760);
var skeleton_default = /*#__PURE__*/__webpack_require__.n(skeleton);

// EXTERNAL MODULE: ./src/components/antd/skeleton/s.module.scss
var skeleton_s_module = __webpack_require__(1759);
var skeleton_s_module_default = /*#__PURE__*/__webpack_require__.n(skeleton_s_module);

// CONCATENATED MODULE: ./src/components/antd/skeleton/index.tsx
var skeleton_excluded=["className","width","height","loading","children"];var skeleton_Skeleton=function Skeleton(props){var className=props.className,width=props.width,height=props.height,loading=props.loading,children=props.children,skeletonProps=Object(objectWithoutProperties["a" /* default */])(props,skeleton_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(skeleton_default.a,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:classnames_default()(skeleton_s_module_default.a.skeleton,className),title:{width:width,style:{height:height}},active:true,loading:loading!==false,paragraph:{rows:0}},skeletonProps),{},{children:children}));};/* harmony default export */ var antd_skeleton = (skeleton_Skeleton);
// EXTERNAL MODULE: ./src/components/antd/tooltip/index.tsx
var tooltip = __webpack_require__(115);

// EXTERNAL MODULE: ./src/components/token-icon/index.tsx
var token_icon = __webpack_require__(431);

// EXTERNAL MODULE: ./node_modules/@rooks/use-interval/lib/index.esm.js
var index_esm = __webpack_require__(1768);

// EXTERNAL MODULE: ./src/components/providers/generalProvider.tsx
var generalProvider = __webpack_require__(98);

// EXTERNAL MODULE: ./src/hooks/useReload.ts
var useReload = __webpack_require__(127);

// CONCATENATED MODULE: ./src/hooks/useLeftTime.tsx
function useLeftTime(options){var _options$delay;var optsRef=Object(react["useRef"])(options);optsRef.current=options;var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isStarted=_useState2[0],setStarted=_useState2[1];var _useState3=Object(react["useState"])(false),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),isRunning=_useState4[0],setRunning=_useState4[1];var getLeftTime=Object(react["useCallback"])(function(){if(!optsRef.current.end){return undefined;}return Math.max(optsRef.current.end.valueOf()-Date.now(),0);},[]);var _useInterval=Object(index_esm["a" /* default */])(function(){var _optsRef$current$onTi,_optsRef$current;var leftTime=getLeftTime();(_optsRef$current$onTi=(_optsRef$current=optsRef.current).onTick)===null||_optsRef$current$onTi===void 0?void 0:_optsRef$current$onTi.call(_optsRef$current,leftTime!==null&&leftTime!==void 0?leftTime:0);if(leftTime===0){var _optsRef$current$onEn,_optsRef$current2;setStarted(false);stopInterval();(_optsRef$current$onEn=(_optsRef$current2=optsRef.current).onEnd)===null||_optsRef$current$onEn===void 0?void 0:_optsRef$current$onEn.call(_optsRef$current2);}},(_options$delay=options.delay)!==null&&_options$delay!==void 0?_options$delay:1000,false),_useInterval2=Object(slicedToArray["a" /* default */])(_useInterval,2),startInterval=_useInterval2[0],stopInterval=_useInterval2[1];Object(react["useEffect"])(function(){if(!options.end||Date.now()<options.end){var _optsRef$current$onSt,_optsRef$current3,_getLeftTime;setStarted(true);startInterval();(_optsRef$current$onSt=(_optsRef$current3=optsRef.current).onStart)===null||_optsRef$current$onSt===void 0?void 0:_optsRef$current$onSt.call(_optsRef$current3,(_getLeftTime=getLeftTime())!==null&&_getLeftTime!==void 0?_getLeftTime:0);}return function(){setStarted(false);stopInterval();};},[options.end]);return Object(react["useMemo"])(function(){return{isStarted:isStarted,isRunning:isRunning,start:function start(){var _optsRef$current$onSt2,_optsRef$current4,_getLeftTime2;setStarted(true);setRunning(true);startInterval();(_optsRef$current$onSt2=(_optsRef$current4=optsRef.current).onStart)===null||_optsRef$current$onSt2===void 0?void 0:_optsRef$current$onSt2.call(_optsRef$current4,(_getLeftTime2=getLeftTime())!==null&&_getLeftTime2!==void 0?_getLeftTime2:0);},stop:function stop(){var _optsRef$current$onSt3,_optsRef$current5,_getLeftTime3;setRunning(false);setStarted(false);stopInterval();(_optsRef$current$onSt3=(_optsRef$current5=optsRef.current).onStop)===null||_optsRef$current$onSt3===void 0?void 0:_optsRef$current$onSt3.call(_optsRef$current5,(_getLeftTime3=getLeftTime())!==null&&_getLeftTime3!==void 0?_getLeftTime3:0);},pause:function pause(){setRunning(false);stopInterval();},resume:function resume(){setRunning(true);startInterval();}};},[isRunning,stopInterval,startInterval]);}var useLeftTime_UseLeftTime=function UseLeftTime(props){var _leftTimeRef$current;var _useGeneral=Object(generalProvider["b" /* useGeneral */])(),windowState=_useGeneral.windowState;var _useReload=Object(useReload["a" /* useReload */])(),_useReload2=Object(slicedToArray["a" /* default */])(_useReload,1),reload=_useReload2[0];var leftTimeRef=Object(react["useRef"])();var _useLeftTime=useLeftTime(Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},props),{},{onStart:function onStart(value){var _props$onStart;leftTimeRef.current=value;reload();(_props$onStart=props.onStart)===null||_props$onStart===void 0?void 0:_props$onStart.call(props,value);},onStop:function onStop(value){var _props$onStop;leftTimeRef.current=value;reload();(_props$onStop=props.onStop)===null||_props$onStop===void 0?void 0:_props$onStop.call(props,value);},onTick:function onTick(value){var _props$onTick;leftTimeRef.current=value;reload();(_props$onTick=props.onTick)===null||_props$onTick===void 0?void 0:_props$onTick.call(props,value);}})),isStarted=_useLeftTime.isStarted,isRunning=_useLeftTime.isRunning,pause=_useLeftTime.pause,resume=_useLeftTime.resume;Object(react["useEffect"])(function(){if(!isStarted){return;}if(!isRunning&&windowState.isVisible){resume();}if(isRunning&&!windowState.isVisible){pause();}},[windowState.isVisible,isStarted,isRunning]);return/*#__PURE__*/Object(jsx_runtime["jsx"])(jsx_runtime["Fragment"],{children:props.children((_leftTimeRef$current=leftTimeRef.current)!==null&&_leftTimeRef$current!==void 0?_leftTimeRef$current:0)});};
// EXTERNAL MODULE: ./src/components/antd/modal/index.tsx
var modal = __webpack_require__(104);

// EXTERNAL MODULE: ./src/utils.ts
var src_utils = __webpack_require__(71);

// EXTERNAL MODULE: ./src/modules/governance/components/voting-detailed-modal/s.module.scss
var voting_detailed_modal_s_module = __webpack_require__(1769);
var voting_detailed_modal_s_module_default = /*#__PURE__*/__webpack_require__.n(voting_detailed_modal_s_module);

// CONCATENATED MODULE: ./src/modules/governance/components/voting-detailed-modal/index.tsx
var voting_detailed_modal_InitialState={leftBonus:undefined,leftTotalVotingPower:undefined};var voting_detailed_modal_VotingDetailedModal=function VotingDetailedModal(props){var _state$leftBonus;var daoCtx=useDAO();var _ref=daoCtx.daoBarn,votingPower=_ref.votingPower,userDelegatedTo=_ref.userDelegatedTo,delegatedPower=_ref.delegatedPower,userLockedUntil=_ref.userLockedUntil,myBondBalance=_ref.balance;var _useMergeState=Object(useMergeState["a" /* default */])(voting_detailed_modal_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];var isDelegated=Object(src_utils["g" /* isValidAddress */])(userDelegatedTo);var loadedUserLockedUntil=react_default.a.useMemo(function(){return(userLockedUntil!==null&&userLockedUntil!==void 0?userLockedUntil:Date.now())-Date.now();},[userLockedUntil]);useLeftTime({end:!isDelegated?userLockedUntil!==null&&userLockedUntil!==void 0?userLockedUntil:0:0,delay:1000,onTick:function onTick(leftTime){var _bonus2,_bonus3;var bonus=votingPower===null||votingPower===void 0?void 0:votingPower.minus(delegatedPower!==null&&delegatedPower!==void 0?delegatedPower:bignumber_default.a.ZERO);if(!isDelegated){var _bonus;bonus=(_bonus=bonus)===null||_bonus===void 0?void 0:_bonus.minus(myBondBalance!==null&&myBondBalance!==void 0?myBondBalance:bignumber_default.a.ZERO);}var leftBonus=(_bonus2=bonus)===null||_bonus2===void 0?void 0:_bonus2.multipliedBy(leftTime).div(loadedUserLockedUntil);var leftTotalVotingPower=votingPower===null||votingPower===void 0?void 0:votingPower.minus((_bonus3=bonus)!==null&&_bonus3!==void 0?_bonus3:bignumber_default.a.ZERO).plus(leftBonus!==null&&leftBonus!==void 0?leftBonus:bignumber_default.a.ZERO);setState({leftBonus:leftBonus,leftTotalVotingPower:leftTotalVotingPower});}});react_default.a.useEffect(function(){setState({leftBonus:isDelegated?bignumber_default.a.ZERO:votingPower===null||votingPower===void 0?void 0:votingPower.minus(myBondBalance!==null&&myBondBalance!==void 0?myBondBalance:bignumber_default.a.ZERO).minus(delegatedPower!==null&&delegatedPower!==void 0?delegatedPower:bignumber_default.a.ZERO),leftTotalVotingPower:votingPower});},[isDelegated]);return/*#__PURE__*/Object(jsx_runtime["jsx"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:voting_detailed_modal_s_module_default.a.component,title:"Voting power detailed view"},props),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("dl",{className:voting_detailed_modal_s_module_default.a.list,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:voting_detailed_modal_s_module_default.a.row,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("dt",{className:voting_detailed_modal_s_module_default.a.term,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"wallet-outlined",width:20,height:20,className:voting_detailed_modal_s_module_default.a.termIcon}),"My staked balance"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("dd",{className:voting_detailed_modal_s_module_default.a.data,children:[Object(utils["b" /* formatToken */])(myBondBalance),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"circle-plus-outlined",width:18,height:18,color:"green",className:voting_detailed_modal_s_module_default.a.dataIcon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:voting_detailed_modal_s_module_default.a.row,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("dt",{className:voting_detailed_modal_s_module_default.a.term,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"wallet-outlined",width:20,height:20,className:voting_detailed_modal_s_module_default.a.termIcon}),"Delegated by me"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("dd",{className:voting_detailed_modal_s_module_default.a.data,children:[isDelegated?Object(utils["b" /* formatToken */])(myBondBalance):0,/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"circle-minus-outlined",width:18,height:18,color:"red",className:voting_detailed_modal_s_module_default.a.dataIcon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:voting_detailed_modal_s_module_default.a.row,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("dt",{className:voting_detailed_modal_s_module_default.a.term,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"rate-outlined",width:20,height:20,className:voting_detailed_modal_s_module_default.a.termIcon}),"Locked balance bonus"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("dd",{className:voting_detailed_modal_s_module_default.a.data,children:[((_state$leftBonus=state.leftBonus)===null||_state$leftBonus===void 0?void 0:_state$leftBonus.gt(bignumber_default.a.ZERO))?'> ':'',Object(utils["b" /* formatToken */])(state.leftBonus),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"circle-plus-outlined",width:18,height:18,color:"green",className:voting_detailed_modal_s_module_default.a.dataIcon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:voting_detailed_modal_s_module_default.a.row,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("dt",{className:voting_detailed_modal_s_module_default.a.term,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"handshake-outlined",width:20,height:20,className:voting_detailed_modal_s_module_default.a.termIcon}),"Delegated to me"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("dd",{className:voting_detailed_modal_s_module_default.a.data,children:[Object(utils["b" /* formatToken */])(delegatedPower),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"circle-plus-outlined",width:18,height:18,color:"green",className:voting_detailed_modal_s_module_default.a.dataIcon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:voting_detailed_modal_s_module_default.a.separator}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:voting_detailed_modal_s_module_default.a.row,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("dt",{className:voting_detailed_modal_s_module_default.a.term,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"stamp-outlined",width:20,height:20,className:voting_detailed_modal_s_module_default.a.termIcon}),"My total voting power"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h3",weight:"bold",tag:"dd",className:voting_detailed_modal_s_module_default.a.data,children:Object(utils["b" /* formatToken */])(state.leftTotalVotingPower)})]})]})}));};/* harmony default export */ var voting_detailed_modal = (voting_detailed_modal_VotingDetailedModal);
// EXTERNAL MODULE: ./src/modules/governance/components/voting-header/s.module.scss
var voting_header_s_module = __webpack_require__(1770);
var voting_header_s_module_default = /*#__PURE__*/__webpack_require__.n(voting_header_s_module);

// CONCATENATED MODULE: ./src/modules/governance/components/voting-header/index.tsx
var voting_header_InitialState={claiming:false,showDetailedView:false};var voting_header_VotingHeader=function VotingHeader(){var _balance;var daoCtx=useDAO();var walletCtx=Object(wallets_walletProvider["c" /* useWallet */])();var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),projectToken=_useKnownTokens.projectToken;var _useMergeState=Object(useMergeState["a" /* default */])(voting_header_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];var toClaim=daoCtx.daoReward.toClaim;var bondBalance=(_balance=projectToken.contract.balance)===null||_balance===void 0?void 0:_balance.unscaleBy(projectToken.decimals);var _daoCtx$daoBarn=daoCtx.daoBarn,votingPower=_daoCtx$daoBarn.votingPower,userLockedUntil=_daoCtx$daoBarn.userLockedUntil,myStakedBalance=_daoCtx$daoBarn.balance;var _useState=Object(react["useState"])(1),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),multiplier=_useState2[0],setMultiplier=_useState2[1];Object(react["useEffect"])(function(){if(walletCtx.account){daoCtx.daoBarn.getMultiplierAtTs(walletCtx.account,Object(src_utils["b" /* getNowTs */])()).then(function(value){return setMultiplier(value.toNumber());});}},[walletCtx.account]);var loadedUserLockedUntil=(userLockedUntil!==null&&userLockedUntil!==void 0?userLockedUntil:Date.now())-Date.now();function handleLeftTimeEnd(){// daoCtx.daoBarn.reload(); /// TODO: check
}function handleClaim(){setState({claiming:true});daoCtx.daoReward.claim().catch(Error).then(function(){// daoCtx.daoReward.reload(); /// TODO: check
projectToken.contract.loadBalance().catch(Error);setState({claiming:false});});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:classnames_default()(voting_header_s_module_default.a.component,'pv-24 ph-64 sm-ph-16'),children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",color:"blue",className:"mb-16",children:"My Account status"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:24,className:voting_header_s_module_default.a.items,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"Current staked"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:16,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_skeleton,{loading:myStakedBalance===undefined,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h3",weight:"bold",color:"primary",children:Object(utils["b" /* formatToken */])(myStakedBalance)})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_divider,{type:"vertical"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"Current reward"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:16,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(tooltip["a" /* default */],{title:Object(utils["b" /* formatToken */])(toClaim!==null&&toClaim!==void 0?toClaim:0,{decimals:projectToken.decimals}),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h3",weight:"bold",color:"primary",children:Object(utils["b" /* formatToken */])(toClaim!==null&&toClaim!==void 0?toClaim:0,{hasLess:true})})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"light",disabled:toClaim===null||toClaim===void 0?void 0:toClaim.isZero(),onClick:handleClaim,children:!state.claiming?'Claim':/*#__PURE__*/Object(jsx_runtime["jsx"])(spin["a" /* default */],{spinning:true})})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_divider,{type:"vertical"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"Total voting power"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:16,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_skeleton,{loading:votingPower===undefined,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h3",weight:"bold",color:"primary",children:Object(utils["b" /* formatToken */])(votingPower)})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"light",onClick:function onClick(){return setState({showDetailedView:true});},children:"Detailed view"}),state.showDetailedView&&/*#__PURE__*/Object(jsx_runtime["jsx"])(voting_detailed_modal,{onCancel:function onCancel(){return setState({showDetailedView:false});}})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(useLeftTime_UseLeftTime,{end:userLockedUntil!==null&&userLockedUntil!==void 0?userLockedUntil:0,delay:1000,onEnd:handleLeftTimeEnd,children:function children(leftTime){var leftMultiplier=(multiplier-1)*(leftTime/loadedUserLockedUntil)+1;return leftMultiplier>1?/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_divider,{type:"vertical"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",children:"The multiplier mechanic allows users to lock $BOND for a period up to 1 year and get a bonus of up to 2x vBOND. The bonus is linear, as per the following example:"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",children:"lock 1000 $BOND for 1 year \u2192 get back 2000 vBOND"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",children:"lock 1000 $BOND for 6 months \u2192 get back 1500 vBOND"})})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["d" /* ExternalLink */],{href:"https://docs.barnbridge.com/governance/barnbridge-dao/multiplier-and-voting-power",variation:"link",children:"Learn more"})]}),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"Multiplier & Lock timer"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(tooltip["a" /* default */],{title:"x".concat(leftMultiplier),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"lb1",weight:"bold",color:"blue",className:voting_header_s_module_default.a.ratio,children:[Object(src_utils["d" /* inRange */])(multiplier,1,1.01)?'>':''," ",Object(utils["a" /* formatBigValue */])(leftMultiplier,2,'-',2),"x"]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"for"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h3",weight:"bold",color:"primary",children:Object(src_utils["a" /* getFormattedDuration */])(0,userLockedUntil)})]})]})]}):undefined;}})]})]});};/* harmony default export */ var voting_header = (voting_header_VotingHeader);
// EXTERNAL MODULE: ./node_modules/antd/lib/progress/index.js
var progress = __webpack_require__(1772);
var progress_default = /*#__PURE__*/__webpack_require__.n(progress);

// EXTERNAL MODULE: ./src/components/antd/progress/s.module.scss
var progress_s_module = __webpack_require__(1771);
var progress_s_module_default = /*#__PURE__*/__webpack_require__.n(progress_s_module);

// CONCATENATED MODULE: ./src/components/antd/progress/index.tsx
var progress_excluded=["className","acceptance"];var progress_Progress=function Progress(props){var className=props.className,acceptance=props.acceptance,progressProps=Object(objectWithoutProperties["a" /* default */])(props,progress_excluded);var acceptanceMode=acceptance!==undefined;var acceptanceFulfilled=Number(acceptance)<=Number(props.percent);return/*#__PURE__*/Object(jsx_runtime["jsx"])(progress_default.a,Object(objectSpread2["a" /* default */])({className:classnames_default()(progress_s_module_default.a.component,acceptanceMode&&progress_s_module_default.a.acceptance,acceptanceFulfilled&&progress_s_module_default.a.fulfilled,className),showInfo:false,success:acceptanceMode?{percent:acceptance,strokeColor:acceptanceFulfilled?String(props.strokeColor):props.trailColor}:undefined},progressProps));};/* harmony default export */ var antd_progress = (progress_Progress);
// CONCATENATED MODULE: ./src/modules/governance/views/overview-view/components/activation-threshold/index.tsx
var activation_threshold_ActivationThreshold=function ActivationThreshold(props){var _config$dao,_config$dao2;var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),projectToken=_useKnownTokens.projectToken;var config=Object(configProvider["b" /* useConfig */])();var daoCtx=useDAO();var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),activating=_React$useState2[0],setActivating=_React$useState2[1];function handleActivate(){setActivating(true);daoCtx.actions.activate().catch(Error).then(function(){setActivating(false);});}return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:classnames_default()('card p-24',props.className),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:24,align:"start",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",children:["For the DAO to be activated, a threshold of ",Object(utils["b" /* formatToken */])((_config$dao=config.dao)===null||_config$dao===void 0?void 0:_config$dao.activationThreshold)," $",projectToken.symbol," tokens staked has to be met."]}),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Activation threshold"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{gap:12,colsTemplate:"auto 24px",width:"100%",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:daoCtx.activationRate,trailColor:"var(--theme-border-color)",strokeWidth:24,strokeColor:{'0%':'var(--theme-blue-color)','100%':'var(--theme-green-color)'}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"ribbon-outlined"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:Object(utils["b" /* formatToken */])(daoCtx.bondStaked)}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"secondary",children:["/ ",Object(utils["b" /* formatToken */])((_config$dao2=config.dao)===null||_config$dao2===void 0?void 0:_config$dao2.activationThreshold)," already staked."]})]}),daoCtx.activationRate===100&&!daoCtx.isActive&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",loading:activating,onClick:handleActivate,children:"Activate"})]})});};/* harmony default export */ var activation_threshold = (activation_threshold_ActivationThreshold);
// EXTERNAL MODULE: ./node_modules/antd/lib/table/index.js
var table = __webpack_require__(1778);
var table_default = /*#__PURE__*/__webpack_require__.n(table);

// EXTERNAL MODULE: ./src/components/antd/table/s.module.scss
var table_s_module = __webpack_require__(1777);
var table_s_module_default = /*#__PURE__*/__webpack_require__.n(table_s_module);

// CONCATENATED MODULE: ./src/components/antd/table/index.tsx
var table_excluded=["className","pagination"];var table_Table=function Table(props){var className=props.className,pagination=props.pagination,tableProps=Object(objectWithoutProperties["a" /* default */])(props,table_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(table_default.a,Object(objectSpread2["a" /* default */])({className:classnames_default()(table_s_module_default.a.component,className),bordered:false,showSorterTooltip:false,pagination:pagination?Object(objectSpread2["a" /* default */])({showSizeChanger:false},pagination):false},tableProps));};/* harmony default export */ var antd_table = (table_Table);
// EXTERNAL MODULE: ./src/components/custom/identicon/index.tsx
var identicon = __webpack_require__(261);

// CONCATENATED MODULE: ./src/modules/governance/views/overview-view/components/voters-table/index.tsx
var Columns=[{title:'Address',dataIndex:'address',render:function Render(value){return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex col-gap-16 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(identicon["a" /* default */],{address:value,width:32,height:32}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(components_button["b" /* ExplorerAddressLink */],{address:value,variation:"link",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",ellipsis:true,className:"hidden-mobile hidden-tablet",children:value}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",wrap:false,className:"hidden-desktop",children:Object(utils["f" /* shortenAddr */])(value)})]})]});}},{title:'Staked Balance',dataIndex:'bondStaked',width:200,align:'right',render:function render(value){return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",className:"ml-auto",children:Object(utils["a" /* formatBigValue */])(value,2,'-',2)});}},{title:'Voting Power',dataIndex:'votingPower',width:200,align:'right',render:function render(value){return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",className:"ml-auto",children:Object(utils["a" /* formatBigValue */])(value,2,'-',2)});}},{title:'Votes',dataIndex:'votes',width:150,align:'right',render:function render(value){return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",className:"ml-auto",children:value});}},{title:'Proposals',dataIndex:'proposals',width:150,align:'right',render:function render(value){return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",className:"ml-auto",children:value});}}];var voters_table_VotersTable=function VotersTable(props){var className=props.className;var daoAPI=useDaoAPI();var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var _React$useState3=react_default.a.useState([]),_React$useState4=Object(slicedToArray["a" /* default */])(_React$useState3,2),voters=_React$useState4[0],setVoters=_React$useState4[1];var _React$useState5=react_default.a.useState(0),_React$useState6=Object(slicedToArray["a" /* default */])(_React$useState5,2),totalVoters=_React$useState6[0],setTotal=_React$useState6[1];var _React$useState7=react_default.a.useState(1),_React$useState8=Object(slicedToArray["a" /* default */])(_React$useState7,2),page=_React$useState8[0],setPage=_React$useState8[1];var pageSize=10;react_default.a.useEffect(function(){setLoading(true);daoAPI.fetchVoters(page,pageSize).then(function(data){setVoters(data.data);setTotal(data.meta.count);setLoading(false);}).catch(function(){setLoading(false);});},[page,pageSize]);return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:classnames_default()('card',className),children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Voter weights"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_table,{columns:Columns,dataSource:voters,rowKey:"address",loading:loading,pagination:{total:totalVoters,pageSize:pageSize,current:page,position:['bottomRight'],showTotal:function showTotal(total,_ref){var _ref2=Object(slicedToArray["a" /* default */])(_ref,2),from=_ref2[0],to=_ref2[1];return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",className:"hidden-mobile",children:["Showing ",from," to ",to," out of ",total," stakers"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",className:"hidden-tablet hidden-desktop",children:[from,"..",to," of ",total]})]});},onChange:setPage},scroll:{x:true}})]});};/* harmony default export */ var voters_table = (voters_table_VotersTable);
// EXTERNAL MODULE: ./src/components/icon/index.tsx
var components_icon = __webpack_require__(35);

// EXTERNAL MODULE: ./src/modules/governance/views/overview-view/components/voting-stat-list/s.module.scss
var voting_stat_list_s_module = __webpack_require__(1854);
var voting_stat_list_s_module_default = /*#__PURE__*/__webpack_require__.n(voting_stat_list_s_module);

// CONCATENATED MODULE: ./src/modules/governance/views/overview-view/components/voting-stat-list/index.tsx
var voting_stat_list_VotingStatList=function VotingStatList(props){var _daoCtx$daoReward$pul,_daoCtx$daoReward$pul2,_daoCtx$daoReward$pul3,_daoCtx$daoReward$pul4,_totalSupply;var className=props.className;var daoAPI=useDaoAPI();var daoCtx=useDAO();var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),projectToken=_useKnownTokens.projectToken,convertTokenInUSD=_useKnownTokens.convertTokenInUSD;var _React$useState=react_default.a.useState(),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),overview=_React$useState2[0],setOverview=_React$useState2[1];react_default.a.useEffect(function(){daoAPI.fetchOverviewData().then(setOverview);},[]);return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:classnames_default()(voting_stat_list_s_module_default.a.cards,className),children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card p-24",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:48,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",children:"This number shows the amount of $BOND (and their USD value) currently staked in the DAO."}),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",color:"blue",children:"Total Staked"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:4,align:"end",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h2",weight:"bold",color:"primary",children:Object(utils["b" /* formatToken */])(daoCtx.daoBarn.bondStaked)}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:projectToken.symbol}),/*#__PURE__*/Object(jsx_runtime["jsx"])(tooltip["a" /* default */],{title:/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:["The BarnBridge Governance contracts are covered by: ",/*#__PURE__*/Object(jsx_runtime["jsx"])("br",{}),"- Bridge Mutual,",' ',/*#__PURE__*/Object(jsx_runtime["jsx"])("a",{href:"https://app.bridgemutual.io/user/cover/0xdb9A242cfD588507106919051818e771778202e9",rel:"noopener noreferrer",target:"_blank",children:"click here"}),' ',"to purchase coverage"]}),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],{name:"insured",color:"green",size:32})})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:Object(utils["c" /* formatUSD */])(convertTokenInUSD(daoCtx.daoBarn.bondStaked,projectToken.symbol))})]})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card p-24",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:48,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,align:"start",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",children:"This number shows the amount of vBOND currently minted. This number may differ from the amount of $BOND staked because of the multiplier mechanic"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["d" /* ExternalLink */],{href:"https://integrations.barnbridge.com/specs/dao-specifications#multiplier-and-voting-power",className:"link-blue",style:{fontWeight:600},children:"Learn more"})]}),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",color:"blue",children:"VSWINGBY"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"row",gap:4,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h2",weight:"bold",color:"primary",children:Object(utils["b" /* formatToken */])(overview===null||overview===void 0?void 0:overview.totalVbond)})})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card p-24",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:48,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,align:"start",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",children:"This counter shows the average amount of time $BOND stakers locked their deposits in order to take advantage of the voting power bonus."}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["d" /* ExternalLink */],{href:"https://integrations.barnbridge.com/specs/dao-specifications#users-can-lock-bond-for-vbond",className:"link-blue",style:{fontWeight:600},children:"Learn more"})]}),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",color:"blue",children:"Avg. Lock Time"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h2",weight:"bold",color:"primary",children:(overview===null||overview===void 0?void 0:overview.avgLockTimeSeconds)?Object(src_utils["a" /* getFormattedDuration */])(overview===null||overview===void 0?void 0:overview.avgLockTimeSeconds):'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:"average time"})]})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card p-24",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:48,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",children:["This number shows the $BOND token rewards distributed so far out of the total of",' ',Object(utils["b" /* formatToken */])((_daoCtx$daoReward$pul=daoCtx.daoReward.pullFeature)===null||_daoCtx$daoReward$pul===void 0?void 0:_daoCtx$daoReward$pul.totalAmount)," that are going to be available for the DAO Staking."]}),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",color:"blue",children:"Staking rewards"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(useLeftTime_UseLeftTime,{end:((_daoCtx$daoReward$pul2=(_daoCtx$daoReward$pul3=daoCtx.daoReward.pullFeature)===null||_daoCtx$daoReward$pul3===void 0?void 0:_daoCtx$daoReward$pul3.endTs)!==null&&_daoCtx$daoReward$pul2!==void 0?_daoCtx$daoReward$pul2:0)*1000,delay:5000,children:function children(){return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h2",weight:"bold",color:"primary",children:Object(utils["b" /* formatToken */])(daoCtx.daoReward.bondRewards)});}}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["out of ",Object(utils["b" /* formatToken */])((_daoCtx$daoReward$pul4=daoCtx.daoReward.pullFeature)===null||_daoCtx$daoReward$pul4===void 0?void 0:_daoCtx$daoReward$pul4.totalAmount)]})]})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card p-24",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:48,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,align:"start",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",children:"This number shows the amount of vBOND that is delegated to other addresses."}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["d" /* ExternalLink */],{href:"https://integrations.barnbridge.com/specs/dao-specifications#users-can-delegate-vbond-to-other-users",className:"link-blue",style:{fontWeight:600},children:"Learn more"})]}),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",color:"blue",children:"Delegated"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h2",weight:"bold",color:"primary",children:Object(utils["b" /* formatToken */])(overview===null||overview===void 0?void 0:overview.totalDelegatedPower)}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["out of",' ',Object(utils["b" /* formatToken */])((_totalSupply=projectToken.contract.totalSupply)===null||_totalSupply===void 0?void 0:_totalSupply.unscaleBy(projectToken.decimals))]})]})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card p-24",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:48,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",children:"This card shows the number of holders of $BOND and compares it to the number of stakers and voters in the DAO."}),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",color:"blue",children:"Addresses"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:4,align:"end",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h2",weight:"bold",color:"primary",children:overview===null||overview===void 0?void 0:overview.holdersStakingExcluded}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:"holders"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:[overview===null||overview===void 0?void 0:overview.barnUsers," stakers & ",overview===null||overview===void 0?void 0:overview.voters," voters"]})]})]})})]});};/* harmony default export */ var voting_stat_list = (voting_stat_list_VotingStatList);
// CONCATENATED MODULE: ./src/modules/governance/views/overview-view/index.tsx
var overview_view_OverviewView=function OverviewView(){var daoCtx=useDAO();return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[daoCtx.isActive===false&&/*#__PURE__*/Object(jsx_runtime["jsx"])(activation_threshold,{className:"full-width mb-32"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(voting_stat_list,{className:"mb-32"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(voters_table,{})]});};/* harmony default export */ var overview_view = (overview_view_OverviewView);
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(39);

// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js
var react_router_dom = __webpack_require__(64);

// EXTERNAL MODULE: ./src/components/custom/tabs/s.module.scss
var tabs_s_module = __webpack_require__(1855);
var tabs_s_module_default = /*#__PURE__*/__webpack_require__.n(tabs_s_module);

// CONCATENATED MODULE: ./src/components/custom/tabs/index.tsx
var tabs_excluded=["className","children"],tabs_excluded2=["className"],tabs_excluded3=["id","className","onClick"];var tabs_NavTabs=function NavTabs(_ref){var className=_ref.className,tabs=_ref.tabs,_ref$shadows=_ref.shadows,shadows=_ref$shadows===void 0?false:_ref$shadows;return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:classnames_default()(tabs_s_module_default.a.tabs,className,Object(defineProperty["a" /* default */])({},tabs_s_module_default.a.shadows,shadows)),style:{'--tabs-bg':"var(".concat(typeof shadows==='string'?shadows:'--theme-body-color',")")},children:tabs.map(function(_ref2,idx){var className=_ref2.className,children=_ref2.children,restTab=Object(objectWithoutProperties["a" /* default */])(_ref2,tabs_excluded);// @ts-ignore
if(restTab.to){return/*#__PURE__*/ (// @ts-ignore
Object(jsx_runtime["jsx"])(react_router_dom["c" /* NavLink */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:classnames_default()(tabs_s_module_default.a.tab,className),activeClassName:tabs_s_module_default.a.active},restTab),{},{children:children}),idx));}return/*#__PURE__*/Object(jsx_runtime["jsx"])("a",Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:classnames_default()(tabs_s_module_default.a.tab,className),rel:"noopener noreferrer",target:"_blank"},restTab),{},{children:children}),idx);})});};var tabs_HorizontalMenu=function HorizontalMenu(_ref3){var className=_ref3.className,rest=Object(objectWithoutProperties["a" /* default */])(_ref3,tabs_excluded2);return/*#__PURE__*/Object(jsx_runtime["jsx"])(tabs_NavTabs,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},rest),{},{className:classnames_default()(tabs_s_module_default.a.horizontalMenu,className)}));};var custom_tabs_Tabs=function Tabs(props){var _cn2;var _props$variation=props.variation,variation=_props$variation===void 0?'normal':_props$variation,tabs=props.tabs,activeKey=props.activeKey,size=props.size,className=props.className,style=props.style;return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:classnames_default()(className,(_cn2={},Object(defineProperty["a" /* default */])(_cn2,tabs_s_module_default.a.tabs,variation==='normal'),Object(defineProperty["a" /* default */])(_cn2,tabs_s_module_default.a.elasticTabs,variation==='elastic'),_cn2)),style:style,children:tabs.map(function(_ref4){var _cn3;var id=_ref4.id,className=_ref4.className,_onClick=_ref4.onClick,tabRest=Object(objectWithoutProperties["a" /* default */])(_ref4,tabs_excluded3);return/*#__PURE__*/Object(jsx_runtime["jsx"])("button",Object(objectSpread2["a" /* default */])({className:classnames_default()(tabs_s_module_default.a.tab,className,(_cn3={},Object(defineProperty["a" /* default */])(_cn3,tabs_s_module_default.a.active,id===activeKey),Object(defineProperty["a" /* default */])(_cn3,tabs_s_module_default.a.small,size==='small'),_cn3)),type:"button",onClick:function onClick(){var _props$onClick;(_props$onClick=props.onClick)===null||_props$onClick===void 0?void 0:_props$onClick.call(props,id);_onClick===null||_onClick===void 0?void 0:_onClick(id);}},tabRest),id);})});};var PeriodTabsKey;(function(PeriodTabsKey){PeriodTabsKey["day"]="24h";PeriodTabsKey["week"]="1w";PeriodTabsKey["month"]="30d";})(PeriodTabsKey||(PeriodTabsKey={}));var periodTabs=[{id:PeriodTabsKey.day,children:'24h'},{id:PeriodTabsKey.week,children:'1w'},{id:PeriodTabsKey.month,children:'1mo'}];var tabs_PeriodChartTabs=function PeriodChartTabs(props){return/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_tabs_Tabs,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},props),{},{tabs:periodTabs,variation:"elastic"}));};var PortfolioPeriodTabsKey;(function(PortfolioPeriodTabsKey){PortfolioPeriodTabsKey["week"]="1w";PortfolioPeriodTabsKey["month"]="30d";})(PortfolioPeriodTabsKey||(PortfolioPeriodTabsKey={}));var portfolioPeriodTabs=[{id:PortfolioPeriodTabsKey.week,children:'1w'},{id:PortfolioPeriodTabsKey.month,children:'1mo'}];var tabs_PortfolioPeriodChartTabs=function PortfolioPeriodChartTabs(props){return/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_tabs_Tabs,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},props),{},{tabs:portfolioPeriodTabs,variation:"elastic"}));};
// EXTERNAL MODULE: ./node_modules/antd/es/form/index.js + 33 modules
var es_form = __webpack_require__(1975);

// EXTERNAL MODULE: ./node_modules/antd/lib/form/index.js
var lib_form = __webpack_require__(1413);
var form_default = /*#__PURE__*/__webpack_require__.n(lib_form);

// EXTERNAL MODULE: ./src/components/antd/form/s.module.scss
var form_s_module = __webpack_require__(1856);
var form_s_module_default = /*#__PURE__*/__webpack_require__.n(form_s_module);

// CONCATENATED MODULE: ./src/components/antd/form/index.tsx
var form_excluded=["children"],form_excluded2=["className","label","hint","extra","children"],form_excluded3=["className","children"];var form_FormList=function FormList(props){var children=props.children,listProps=Object(objectWithoutProperties["a" /* default */])(props,form_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(form_default.a.List,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},listProps),{},{children:children}));};var form_FormItem=function FormItem(props){var className=props.className,label=props.label,hint=props.hint,extra=props.extra,children=props.children,itemProps=Object(objectWithoutProperties["a" /* default */])(props,form_excluded2);return/*#__PURE__*/Object(jsx_runtime["jsx"])(form_default.a.Item,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:classnames_default()(form_s_module_default.a.item,className)},itemProps),{},{label:/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:4,align:"center",children:[label,hint&&/*#__PURE__*/Object(jsx_runtime["jsx"])(tooltip["a" /* default */],{title:hint,children:/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],{name:"info",size:15})})})]}),extra]}),children:children}));};var form_Form=function Form(props){var className=props.className,children=props.children,formProps=Object(objectWithoutProperties["a" /* default */])(props,form_excluded3);return/*#__PURE__*/Object(jsx_runtime["jsx"])(form_default.a,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:classnames_default()(form_s_module_default.a.form,className),layout:"vertical",requiredMark:false},formProps),{},{children:children}));};form_Form.Item=form_FormItem;form_Form.List=form_FormList;/* harmony default export */ var antd_form = (form_Form);
// EXTERNAL MODULE: ./node_modules/antd/lib/radio/index.js
var lib_radio = __webpack_require__(1404);
var radio_default = /*#__PURE__*/__webpack_require__.n(lib_radio);

// EXTERNAL MODULE: ./node_modules/antd/lib/spin/index.js
var lib_spin = __webpack_require__(263);
var spin_default = /*#__PURE__*/__webpack_require__.n(lib_spin);

// EXTERNAL MODULE: ./src/components/antd/radio-button/s.module.scss
var radio_button_s_module = __webpack_require__(1870);
var radio_button_s_module_default = /*#__PURE__*/__webpack_require__.n(radio_button_s_module);

// CONCATENATED MODULE: ./src/components/antd/radio-button/index.tsx
var radio_button_excluded=["label","hint","className"];var radio_button_RadioButton=function RadioButton(props){var label=props.label,hint=props.hint,className=props.className,radioProps=Object(objectWithoutProperties["a" /* default */])(props,radio_button_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_default.a,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:classnames_default()(radio_button_s_module_default.a.component,className)},radioProps),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[label,hint]})}));};/* harmony default export */ var radio_button = (radio_button_RadioButton);
// EXTERNAL MODULE: ./src/components/providers/networkProvider.tsx
var networkProvider = __webpack_require__(54);

// EXTERNAL MODULE: ./src/components/custom/gas-fee-list/s.module.scss
var gas_fee_list_s_module = __webpack_require__(1871);
var gas_fee_list_s_module_default = /*#__PURE__*/__webpack_require__.n(gas_fee_list_s_module);

// CONCATENATED MODULE: ./src/components/custom/gas-fee-list/index.tsx
var gas_fee_list_excluded=["className","value","onChange"];var gas_fee_list_GasFeeList=function GasFeeList(props){var className=props.className,value=props.value,onChange=props.onChange,groupProps=Object(objectWithoutProperties["a" /* default */])(props,gas_fee_list_excluded);var _useNetwork=Object(networkProvider["b" /* useNetwork */])(),activeNetwork=_useNetwork.activeNetwork;var _useMergeState=Object(useMergeState["a" /* default */])({options:[],loading:false,selected:undefined}),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];react_default.a.useEffect(function(){setState({loading:true});var url="".concat(activeNetwork.explorer.apiUrl,"/api?module=gastracker&action=gasoracle&apikey=").concat(activeNetwork.explorer.key);fetch(url).then(function(result){return result.json();}).then(function(result){return result.result;}).then(function(result){return{veryFast:Number(result.FastGasPrice),fast:Number(result.ProposeGasPrice),average:Math.round((Number(result.ProposeGasPrice)+Number(result.SafeGasPrice))/2),safeLow:Number(result.SafeGasPrice)};}).then(function(result){var options=[{key:'fastest',name:'Very fast',value:result.veryFast},{key:'fast',name:'Fast',value:result.fast},{key:'average',name:'Standard',value:result.average},{key:'safeLow',name:'Slow',value:result.safeLow}];setState({loading:false,options:options});}).catch(function(){setState({loading:false});});},[]);react_default.a.useEffect(function(){if(value===undefined&&state.options.length>2){var _props$onChange;(_props$onChange=props.onChange)===null||_props$onChange===void 0?void 0:_props$onChange.call(props,state.options[2]);}},[value,state.options]);function handleChange(ev){var _props$onChange2;(_props$onChange2=props.onChange)===null||_props$onChange2===void 0?void 0:_props$onChange2.call(props,ev.target.value);}react_default.a.useEffect(function(){setState({selected:value});},[value]);return/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_default.a.Group,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:className,style:{width:'100%'}},groupProps),{},{value:state.selected,onChange:handleChange,children:state.loading?/*#__PURE__*/Object(jsx_runtime["jsx"])(spin_default.a,{}):/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:gas_fee_list_s_module_default.a.list,children:state.options.map(function(option){return/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_button,{label:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:option.name}),hint:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:option.value}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:"Gwei"})]}),value:option},option.key);})})}));};/* harmony default export */ var gas_fee_list = (gas_fee_list_GasFeeList);
// CONCATENATED MODULE: ./src/hooks/useIsUnmount.ts
function useIsUnmount(){var isUnmountRef=Object(react["useRef"])(false);Object(react["useEffect"])(function(){return function(){isUnmountRef.current=true;};},[]);return isUnmountRef;}
// EXTERNAL MODULE: ./src/web3/components/tx-confirm-modal/s.module.scss
var tx_confirm_modal_s_module = __webpack_require__(1872);
var tx_confirm_modal_s_module_default = /*#__PURE__*/__webpack_require__.n(tx_confirm_modal_s_module);

// CONCATENATED MODULE: ./src/web3/components/tx-confirm-modal/index.tsx
var tx_confirm_modal_excluded=["header","submitText","children","onConfirm"];var tx_confirm_modal_TxConfirmModal=function TxConfirmModal(props){var header=props.header,submitText=props.submitText,children=props.children,onConfirm=props.onConfirm,modalProps=Object(objectWithoutProperties["a" /* default */])(props,tx_confirm_modal_excluded);var _useNetwork=Object(networkProvider["b" /* useNetwork */])(),activeNetwork=_useNetwork.activeNetwork;var _Antd$Form$useForm=es_form["a" /* default */].useForm(),_Antd$Form$useForm2=Object(slicedToArray["a" /* default */])(_Antd$Form$useForm,1),form=_Antd$Form$useForm2[0];var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),submitting=_React$useState2[0],setSubmitting=_React$useState2[1];var isUnmountRef=useIsUnmount();function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var gasPrice,_props$onCancel;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:gasPrice=values.gasPrice;setSubmitting(true);_context.prev=2;_context.next=5;return onConfirm(Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},values),{},{gasPrice:gasPrice===null||gasPrice===void 0?void 0:gasPrice.value}));case 5:(_props$onCancel=props.onCancel)===null||_props$onCancel===void 0?void 0:_props$onCancel.call(props);_context.next=10;break;case 8:_context.prev=8;_context.t0=_context["catch"](2);case 10:if(!isUnmountRef.current){setSubmitting(false);}case 11:case"end":return _context.stop();}}},_callee,null,[[2,8]]);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/Object(jsx_runtime["jsx"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({width:560},modalProps),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_form,{form:form,validateTrigger:['onSubmit'],onFinish:handleSubmit,children:[header&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[header,/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_divider,{className:tx_confirm_modal_s_module_default.a.divider})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,children:[children===null||children===void 0?void 0:children({form:form,submitting:submitting}),activeNetwork.config.features.gasFees&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"gasPrice",label:"Gas Fee (Gwei)",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(gas_fee_list,{disabled:submitting})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{htmlType:"submit",type:"primary",loading:submitting,children:submitText})]})]})}));};/* harmony default export */ var tx_confirm_modal = (tx_confirm_modal_TxConfirmModal);
// EXTERNAL MODULE: ./node_modules/antd/lib/alert/index.js
var lib_alert = __webpack_require__(1596);
var alert_default = /*#__PURE__*/__webpack_require__.n(lib_alert);

// EXTERNAL MODULE: ./src/components/antd/alert/s.module.scss
var alert_s_module = __webpack_require__(1873);
var alert_s_module_default = /*#__PURE__*/__webpack_require__.n(alert_s_module);

// CONCATENATED MODULE: ./src/components/antd/alert/index.tsx
var alert_excluded=["className","type"];var alert_Alert=function Alert(props){var className=props.className,_props$type=props.type,type=_props$type===void 0?'info':_props$type,alertProps=Object(objectWithoutProperties["a" /* default */])(props,alert_excluded);var icon=react_default.a.useMemo(function(){switch(type){case'info':return/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],{name:"info"});default:return undefined;}},[type]);return/*#__PURE__*/Object(jsx_runtime["jsx"])(alert_default.a,Object(objectSpread2["a" /* default */])({className:classnames_default()(alert_s_module_default.a.component,className),type:type,showIcon:true,icon:icon},alertProps));};/* harmony default export */ var antd_alert = (alert_Alert);
// EXTERNAL MODULE: ./node_modules/react-hook-form/dist/index.esm.js
var dist_index_esm = __webpack_require__(1876);

// EXTERNAL MODULE: ./node_modules/valirator/dist/valirator.umd.js
var valirator_umd = __webpack_require__(1877);

// EXTERNAL MODULE: ./src/components/custom/form/s.module.scss
var custom_form_s_module = __webpack_require__(1878);
var custom_form_s_module_default = /*#__PURE__*/__webpack_require__.n(custom_form_s_module);

// CONCATENATED MODULE: ./src/components/custom/form/index.tsx
var ConditionalWrapper=function ConditionalWrapper(_ref){var condition=_ref.condition,wrapper=_ref.wrapper,children=_ref.children;return condition?wrapper(children):children;};var InternalContext=/*#__PURE__*/Object(react["createContext"])(Object(utils_context["a" /* InvariantContext */])('Form'));function VFormEmptyResolver(values){return{values:values,errors:{}};}function VFormValidationResolver(_x,_x2){return _VFormValidationResolver.apply(this,arguments);}function _VFormValidationResolver(){_VFormValidationResolver=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values,context){var validationResult,errors;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Object(valirator_umd["validate"])(context===null||context===void 0?void 0:context.scheme,values);case 2:validationResult=_context.sent;errors=validationResult.getErrors();return _context.abrupt("return",{values:values,errors:Object.keys(errors).reduce(function(res,path){var errKey=Object.keys(errors[path])[0];if(errKey){res[path]={type:errKey,message:errors[path][errKey]};}return res;},{})});case 5:case"end":return _context.stop();}}},_callee);}));return _VFormValidationResolver.apply(this,arguments);}function useForm(props){var validationScheme=props.validationScheme,defaultValues=props.defaultValues,onSubmit=props.onSubmit;var resolver=validationScheme?VFormValidationResolver:VFormEmptyResolver;var rhForm=Object(dist_index_esm["b" /* useForm */])({mode:'all',resolver:resolver,context:{scheme:validationScheme},defaultValues:defaultValues,shouldUnregister:true});var submit=rhForm.handleSubmit(onSubmit);var updateValue=function updateValue(fieldName,value){rhForm.setValue(fieldName,value,{shouldDirty:true,shouldValidate:true});};return Object.assign(rhForm,{updateValue:updateValue,submit:submit});}function custom_form_Form(props){var children=props.children,className=props.className,form=props.form,_props$disabled=props.disabled,disabled=_props$disabled===void 0?false:_props$disabled;var handleSubmit=Object(react["useCallback"])(function(ev){ev.preventDefault();form.submit();},[form.submit]);var value={form:form};return/*#__PURE__*/Object(jsx_runtime["jsx"])(InternalContext.Provider,{value:value,children:/*#__PURE__*/Object(jsx_runtime["jsx"])("form",{className:classnames_default()(custom_form_s_module_default.a.form,className,disabled&&custom_form_s_module_default.a.disabled),onSubmit:handleSubmit,children:children})});}function FieldLabel(props){var children=props.children,className=props.className,label=props.label,hint=props.hint,extra=props.extra;return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:classnames_default()('flex flow-row row-gap-8',className),children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-4 justify-space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex flow-col col-gap-4 align-center",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:hint,children:typeof label==='string'?/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:label}):label})}),extra]}),children]});}function FormError(props){var _err$message;var children=props.children,name=props.name;var _useContext=Object(react["useContext"])(InternalContext),form=_useContext.form;var err=form.formState.errors[name];if(!err){return null;}return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"red",children:(_err$message=err.message)!==null&&_err$message!==void 0?_err$message:children});}function custom_form_FormItem(props){var children=props.children,name=props.name,label=props.label,_props$labelProps=props.labelProps,labelProps=_props$labelProps===void 0?{}:_props$labelProps,_props$showError=props.showError,showError=_props$showError===void 0?true:_props$showError,className=props.className;var _useContext2=Object(react["useContext"])(InternalContext),form=_useContext2.form;return/*#__PURE__*/Object(jsx_runtime["jsxs"])(ConditionalWrapper,{condition:!!label,wrapper:function wrapper(children){return/*#__PURE__*/Object(jsx_runtime["jsx"])(FieldLabel,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({label:label,className:className},labelProps),{},{children:children}));},children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(dist_index_esm["a" /* Controller */],{name:name,control:form.control,render:children,shouldUnregister:true}),showError&&/*#__PURE__*/Object(jsx_runtime["jsx"])(FormError,{name:name})]});}
// EXTERNAL MODULE: ./src/components/custom/spinner/s.module.scss
var spinner_s_module = __webpack_require__(1879);
var spinner_s_module_default = /*#__PURE__*/__webpack_require__.n(spinner_s_module);

// CONCATENATED MODULE: ./src/components/custom/spinner/index.tsx
var spinner_excluded=["className","children","spinning"];var spinner_Spinner=function Spinner(_ref){var className=_ref.className,children=_ref.children,spinning=_ref.spinning,restProps=Object(objectWithoutProperties["a" /* default */])(_ref,spinner_excluded);if(children){if(spinning){return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:spinner_s_module_default.a.container,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:spinner_s_module_default.a.children,children:children}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],Object(objectSpread2["a" /* default */])({name:"loader",className:classnames_default()(spinner_s_module_default.a.spinner,className)},restProps))]});}return/*#__PURE__*/Object(jsx_runtime["jsx"])(jsx_runtime["Fragment"],{children:children});}return/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],Object(objectSpread2["a" /* default */])({name:"loader",className:classnames_default()(spinner_s_module_default.a.spinner,className)},restProps));};
// EXTERNAL MODULE: ./src/components/custom/status-tag/s.module.scss
var status_tag_s_module = __webpack_require__(1880);
var status_tag_s_module_default = /*#__PURE__*/__webpack_require__.n(status_tag_s_module);

// CONCATENATED MODULE: ./src/components/custom/status-tag/index.tsx
var status_tag_StatusTag=function StatusTag(props){var text=props.text,color=props.color,className=props.className,style=props.style;return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:classnames_default()(status_tag_s_module_default.a.statusTag,className,status_tag_s_module_default.a[color]),style:style,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",tag:"label",weight:"bold",children:text})});};/* harmony default export */ var status_tag = (status_tag_StatusTag);
// EXTERNAL MODULE: ./node_modules/web3-utils/lib/index.js
var lib = __webpack_require__(65);

// EXTERNAL MODULE: ./node_modules/antd/lib/input/index.js
var lib_input = __webpack_require__(1597);
var input_default = /*#__PURE__*/__webpack_require__.n(lib_input);

// EXTERNAL MODULE: ./src/components/antd/input/s.module.scss
var input_s_module = __webpack_require__(1881);
var input_s_module_default = /*#__PURE__*/__webpack_require__.n(input_s_module);

// CONCATENATED MODULE: ./src/components/antd/input/index.tsx
var input_excluded=["className","disabled"];var input_Input=function Input(props){var className=props.className,disabled=props.disabled,inputProps=Object(objectWithoutProperties["a" /* default */])(props,input_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(input_default.a,Object(objectSpread2["a" /* default */])({className:classnames_default()(input_s_module_default.a.component,className,disabled&&input_s_module_default.a.disabled),disabled:disabled,autoComplete:"off"},inputProps));};/* harmony default export */ var antd_input = (input_Input);
// EXTERNAL MODULE: ./src/components/custom/token-input/s.module.scss
var token_input_s_module = __webpack_require__(1891);
var token_input_s_module_default = /*#__PURE__*/__webpack_require__.n(token_input_s_module);

// CONCATENATED MODULE: ./src/components/custom/token-input/index.tsx
var token_input_excluded=["className","value"];var TokenInput=/*#__PURE__*/Object(react["forwardRef"])(function(props){var className=props.className,value=props.value,inputProps=Object(objectWithoutProperties["a" /* default */])(props,token_input_excluded);var addonBefore=react_default.a.useMemo(function(){return Object(lib["isAddress"])(String(value))?/*#__PURE__*/Object(jsx_runtime["jsx"])(identicon["a" /* default */],{address:String(value),width:24,height:24}):/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{});},[value]);return/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_input,Object(objectSpread2["a" /* default */])({className:classnames_default()(token_input_s_module_default.a.component,className),size:"large",addonBefore:addonBefore,value:value},inputProps));});/* harmony default export */ var token_input = (TokenInput);
// EXTERNAL MODULE: ./src/components/radio-card/s.module.scss
var radio_card_s_module = __webpack_require__(1892);
var radio_card_s_module_default = /*#__PURE__*/__webpack_require__.n(radio_card_s_module);

// CONCATENATED MODULE: ./src/components/radio-card/index.tsx
var radio_card_excluded=["children","selected"],radio_card_excluded2=["className"];var radio_card_RadioCard=function RadioCard(props){var children=props.children,_props$selected=props.selected,selected=_props$selected===void 0?false:_props$selected,rest=Object(objectWithoutProperties["a" /* default */])(props,radio_card_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])("button",Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({type:"button",className:classnames_default()(radio_card_s_module_default.a.card,Object(defineProperty["a" /* default */])({},radio_card_s_module_default.a.selected,selected))},rest),{},{children:children}));};var radio_card_RadioCards=function RadioCards(_ref){var className=_ref.className,rest=Object(objectWithoutProperties["a" /* default */])(_ref,radio_card_excluded2);return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",Object(objectSpread2["a" /* default */])({className:classnames_default()(radio_card_s_module_default.a.cards,className)},rest));};
// CONCATENATED MODULE: ./src/modules/governance/views/portfolio-view/portfolio-delegate/index.tsx
var MANUAL_KEY='manual';var DELEGATED_KEY='delegated';var portfolio_delegate_PortfolioDelegate=function PortfolioDelegate(){var _projectTokenContract,_formatToken;var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),projectToken=_useKnownTokens.projectToken;var wallet=Object(wallets_walletProvider["c" /* useWallet */])();var daoCtx=useDAO();var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=Object(react["useState"])(false),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),isSubmitting=_useState4[0],setSubmitting=_useState4[1];var _useState5=Object(react["useState"])(false),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),confirmModalVisible=_useState6[0],setConfirmModalVisible=_useState6[1];var _daoCtx$daoBarn=daoCtx.daoBarn,_daoCtx$daoBarn$balan=_daoCtx$daoBarn.balance,stakedBalance=_daoCtx$daoBarn$balan===void 0?bignumber_default.a.ZERO:_daoCtx$daoBarn$balan,_daoCtx$daoBarn$userL=_daoCtx$daoBarn.userLockedUntil,userLockedUntil=_daoCtx$daoBarn$userL===void 0?0:_daoCtx$daoBarn$userL,userDelegatedTo=_daoCtx$daoBarn.userDelegatedTo;var projectTokenContract=projectToken.contract;var bondBalance=(_projectTokenContract=projectTokenContract.balance)===null||_projectTokenContract===void 0?void 0:_projectTokenContract.unscaleBy(projectToken.decimals);var isLocked=userLockedUntil>Date.now();var isDelegated=Object(src_utils["g" /* isValidAddress */])(userDelegatedTo);var form=useForm({validationScheme:{delegateAddress:{rules:{required:function required(value,_,obj){if(obj.votingType===DELEGATED_KEY){return Boolean(value);}return true;},isAddress:function isAddress(value,_,obj){if(obj.votingType===DELEGATED_KEY){return Object(src_utils["g" /* isValidAddress */])(value);}return true;},isSelf:function isSelf(value,_,obj){if(obj.votingType===DELEGATED_KEY){var _wallet$account;return((_wallet$account=wallet.account)===null||_wallet$account===void 0?void 0:_wallet$account.toLowerCase())!==(value===null||value===void 0?void 0:value.toLowerCase());}return true;},isSame:function isSame(value,_,obj){if(obj.votingType===DELEGATED_KEY){return(userDelegatedTo===null||userDelegatedTo===void 0?void 0:userDelegatedTo.toLowerCase())!==(value===null||value===void 0?void 0:value.toLowerCase());}return true;}},messages:{required:'Required',isAddress:'Invalid address',isSelf:"Can't delegate to self",isSame:"Your voting power is already delegated to this address"}}},onSubmit:function onSubmit(){setConfirmModalVisible(true);}});function loadData(){return _loadData.apply(this,arguments);}function _loadData(){_loadData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _daoCtx$daoBarn$userD,_userDelegatedTo,_isDelegated;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return daoCtx.daoBarn.loadUserData();case 4:_daoCtx$daoBarn$userD=daoCtx.daoBarn.userDelegatedTo,_userDelegatedTo=_daoCtx$daoBarn$userD===void 0?'':_daoCtx$daoBarn$userD;_isDelegated=Object(src_utils["g" /* isValidAddress */])(_userDelegatedTo);form.reset({votingType:_isDelegated?DELEGATED_KEY:MANUAL_KEY,delegateAddress:_isDelegated?_userDelegatedTo:''});_context.next=11;break;case 9:_context.prev=9;_context.t0=_context["catch"](1);case 11:setLoading(false);case 12:case"end":return _context.stop();}}},_callee,null,[[1,9]]);}));return _loadData.apply(this,arguments);}Object(react["useEffect"])(function(){loadData().catch(Error);},[]);var formState=form.formState,watch=form.watch;var _watch=watch(['votingType','delegateAddress']),_watch2=Object(slicedToArray["a" /* default */])(_watch,2),votingType=_watch2[0],delegateAddress=_watch2[1];var canSubmit=formState.isDirty&&!isSubmitting&&stakedBalance.gt(bignumber_default.a.ZERO);function doDelegate(_x,_x2,_x3){return _doDelegate.apply(this,arguments);}function _doDelegate(){_doDelegate=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(type,address,gasPrice){return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setSubmitting(true);_context2.prev=1;if(!(type===MANUAL_KEY)){_context2.next=7;break;}_context2.next=5;return daoCtx.daoBarn.stopDelegate(gasPrice);case 5:_context2.next=10;break;case 7:if(!(type===DELEGATED_KEY)){_context2.next=10;break;}_context2.next=10;return daoCtx.daoBarn.delegate(address,gasPrice);case 10:_context2.next=12;return loadData();case 12:_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2["catch"](1);console.error(_context2.t0);case 17:setSubmitting(false);case 18:case"end":return _context2.stop();}}},_callee2,null,[[1,14]]);}));return _doDelegate.apply(this,arguments);}function handleCancel(){setConfirmModalVisible(false);}function handleConfirm(_x4){return _handleConfirm.apply(this,arguments);}function _handleConfirm(){_handleConfirm=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(gasPrice){return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setConfirmModalVisible(false);_context3.next=3;return doDelegate(votingType,delegateAddress,gasPrice);case 3:case"end":return _context3.stop();}}},_callee3);}));return _handleConfirm.apply(this,arguments);}if(isLoading){return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex justify-center p-24",style:{minHeight:'732px'},children:/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{})});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(custom_form_Form,{form:form,className:"flex flow-row row-gap-32 p-24",disabled:isSubmitting,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-box flex flow-col col-gap-44",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Current voting type"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex flow-col col-gap-8 align-center",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:isDelegated?'Delegate voting':'Manual voting'})})]}),isDelegated&&/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Delegated address"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex flow-col col-gap-8 align-center",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["b" /* ExplorerAddressLink */],{address:userDelegatedTo,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:Object(utils["f" /* shortenAddr */])(userDelegatedTo)})})})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_form_FormItem,{name:"votingType",label:"Voting type",children:function children(_ref){var field=_ref.field;return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_card_RadioCard,{selected:field.value===MANUAL_KEY,onClick:function onClick(){return form.updateValue('votingType',MANUAL_KEY);},children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-40 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Manual voting"}),field.value===MANUAL_KEY&&/*#__PURE__*/Object(jsx_runtime["jsx"])(status_tag,{text:"ACTIVE",color:"green"})]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_card_RadioCard,{selected:field.value===DELEGATED_KEY,onClick:function onClick(){return form.updateValue('votingType',DELEGATED_KEY);},children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-40 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Delegate voting"}),field.value===DELEGATED_KEY&&/*#__PURE__*/Object(jsx_runtime["jsx"])(status_tag,{text:"ACTIVE",color:"green"})]})})]});}}),votingType===DELEGATED_KEY&&/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_form_FormItem,{name:"delegateAddress",label:"Address",children:function children(_ref2){var field=_ref2.field;return/*#__PURE__*/Object(jsx_runtime["jsx"])(token_input,Object(objectSpread2["a" /* default */])({},field));}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{message:"Delegating your voting power to this address means that they will be able to vote in your place. You can\u2019t delegate the voting bonus, only the staked balance."}),isLocked&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{message:"Switching back to manual voting while a lock is active will put the amount back under lock. Delegation does not stop the lock timer."}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex flow-col col-gap-12 align-center justify-end",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"submit",className:"button-primary",disabled:!canSubmit,children:[isSubmitting&&/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{className:"mr-4"}),votingType===DELEGATED_KEY?'Delegate':'Stop Delegate']})})]}),confirmModalVisible&&/*#__PURE__*/Object(jsx_runtime["jsx"])(tx_confirm_modal,{title:votingType===DELEGATED_KEY?'Delegate your voting power':'Stop delegating voting power',header:votingType===DELEGATED_KEY?/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-box flex flow-col col-gap-40",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flow flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:["Delegate ",projectToken.symbol," amount"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:(_formatToken=Object(utils["b" /* formatToken */])(bondBalance))!==null&&_formatToken!==void 0?_formatToken:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flow flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Delegate address"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(identicon["a" /* default */],{address:delegateAddress}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:Object(utils["f" /* shortenAddr */])(delegateAddress)})]})]})]}):null,submitText:votingType===DELEGATED_KEY?'Delegate voting power':'Stop delegate',onCancel:handleCancel,onConfirm:function onConfirm(_ref3){var gasPrice=_ref3.gasPrice;return handleConfirm(gasPrice);}})]});};/* harmony default export */ var portfolio_delegate = (portfolio_delegate_PortfolioDelegate);
// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules
var toConsumableArray = __webpack_require__(72);

// EXTERNAL MODULE: ./node_modules/react-dom/index.js
var react_dom = __webpack_require__(53);
var react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);

// EXTERNAL MODULE: ./node_modules/react-popper/lib/esm/usePopper.js + 53 modules
var usePopper = __webpack_require__(1974);

// EXTERNAL MODULE: ./node_modules/outy/index.js
var outy = __webpack_require__(1893);
var outy_default = /*#__PURE__*/__webpack_require__.n(outy);

// EXTERNAL MODULE: ./src/components/custom/dropdown/s.module.scss
var dropdown_s_module = __webpack_require__(1894);
var dropdown_s_module_default = /*#__PURE__*/__webpack_require__.n(dropdown_s_module);

// CONCATENATED MODULE: ./src/components/custom/dropdown/index.tsx
var dropdown_excluded=["onClick"];var modifiers=[{name:'offset',options:{offset:[0,8]}},{name:'sameWidth',enabled:true,phase:'beforeWrite',requires:['computeStyles'],fn:function fn(_ref){var state=_ref.state;state.styles.popper.minWidth="".concat(state.rects.reference.width,"px");},effect:function effect(_ref2){var state=_ref2.state;// @ts-ignore
state.elements.popper.style.minWidth="".concat(state.elements.reference.offsetWidth,"px");}}];var dropdown_DropdownBase=function DropdownBase(_ref3){var content=_ref3.content,children=_ref3.children,options=_ref3.options;var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var referenceElement=react_default.a.useRef(null);var popperElement=react_default.a.useRef(null);var _usePopper=Object(usePopper["a" /* usePopper */])(referenceElement.current,popperElement.current,Object(objectSpread2["a" /* default */])({placement:'bottom-start',strategy:'absolute',modifiers:modifiers},options)),styles=_usePopper.styles,attributes=_usePopper.attributes,forceUpdate=_usePopper.forceUpdate;react_default.a.useEffect(function(){var outyInstance;if(forceUpdate){forceUpdate();}if(open){var nodes=[];var referenceWrapEl=referenceElement.current;if(referenceWrapEl){nodes.push(referenceWrapEl);}var popperEl=popperElement.current;if(popperEl){nodes.push(popperEl);}outyInstance=outy_default()(nodes,['click','touchstart'],function(){return setOpen(false);});}return function(){var _outyInstance;(_outyInstance=outyInstance)===null||_outyInstance===void 0?void 0:_outyInstance.remove();};},[open]);return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[children({ref:referenceElement,setOpen:setOpen,open:open}),/*#__PURE__*/react_dom_default.a.createPortal(/*#__PURE__*/Object(jsx_runtime["jsx"])("div",Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({ref:popperElement,style:Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},styles.popper),{},{// visibility: open ? 'visible' : 'hidden',
display:open?'':'none'})},attributes.popper),{},{children:content(setOpen)})),document.querySelector('#tooltip-root')||document.body)]});};var dropdown_DropdownList=function DropdownList(_ref4){var items=_ref4.items,children=_ref4.children,options=_ref4.options;return/*#__PURE__*/Object(jsx_runtime["jsx"])(dropdown_DropdownBase,{content:function content(setOpen){return/*#__PURE__*/Object(jsx_runtime["jsx"])("ul",{className:dropdown_s_module_default.a.tokenSelectList,children:items.map(function(_ref5,idx){var _onClick=_ref5.onClick,rest=Object(objectWithoutProperties["a" /* default */])(_ref5,dropdown_excluded);if(rest.href){return/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])("a",Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({href:rest.href},rest),{},{className:dropdown_s_module_default.a.tokenSelectListButton,onClick:function onClick(e){// if (onClick) onClick(e);
setOpen(false);},children:rest.children}))},idx);}// @ts-ignore
if(rest.to){return/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},rest),{},{className:dropdown_s_module_default.a.tokenSelectListButton,onClick:function onClick(e){// if (onClick) onClick(e);
setOpen(false);}}))},idx);}return/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])("button",Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},rest),{},{className:dropdown_s_module_default.a.tokenSelectListButton,onClick:function onClick(e){// @ts-ignore
if(_onClick)_onClick(e);setOpen(false);}}))},idx);})});},options:options,children:children});};var dropdown_Dropdown=function Dropdown(_ref6){var items=_ref6.items,_children=_ref6.children,className=_ref6.className,_ref6$size=_ref6.size,size=_ref6$size===void 0?'normal':_ref6$size,style=_ref6.style;return/*#__PURE__*/Object(jsx_runtime["jsx"])(dropdown_DropdownList,{items:items,children:function children(_ref7){var ref=_ref7.ref,setOpen=_ref7.setOpen,open=_ref7.open;return/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"button",ref:ref,onClick:function onClick(){return setOpen(function(isOpen){return!isOpen;});},className:classnames_default()(dropdown_s_module_default.a.dropdown,dropdown_s_module_default.a[size],className),style:style,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex align-center flex-grow pr-16",children:_children}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],{name:"dropdown",size:"24",className:dropdown_s_module_default.a.dropdownChevron,style:{transform:open?'rotate(180deg)':''}})]});}});};
// EXTERNAL MODULE: ./src/components/custom/slider/s.module.scss
var slider_s_module = __webpack_require__(1896);
var slider_s_module_default = /*#__PURE__*/__webpack_require__.n(slider_s_module);

// CONCATENATED MODULE: ./src/components/custom/slider/index.tsx
var slider_excluded=["className","value"];var slider_Slider=function Slider(_ref){var className=_ref.className,value=_ref.value,rest=Object(objectWithoutProperties["a" /* default */])(_ref,slider_excluded);var max=Number(rest.max)||0;var slicedMax=Math.floor(max*1e6)/1e6;var slicedValue=Math.floor(Number(value)*1e6)/1e6;var percent=slicedValue/slicedMax*100||0;var disabled=slicedMax===0;return/*#__PURE__*/Object(jsx_runtime["jsx"])("input",Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},rest),{},{type:"range",className:classnames_default()(slider_s_module_default.a.input,className),style:{'--track-fill':"".concat(!disabled?percent:0,"%")},max:disabled?1:slicedMax,disabled:disabled,value:!disabled?value||'0':'0'}));};
// EXTERNAL MODULE: ./src/components/custom/token-amount-new/s.module.scss
var token_amount_new_s_module = __webpack_require__(1897);
var token_amount_new_s_module_default = /*#__PURE__*/__webpack_require__.n(token_amount_new_s_module);

// CONCATENATED MODULE: ./src/components/custom/token-amount-new/index.tsx
var token_amount_new_excluded=["onChange","before","secondary","className","classNameBefore","slider","value","errors","decimals","max"];var TokenAmount=/*#__PURE__*/Object(react["forwardRef"])(function(_ref,ref){var _BigNumber$from;var _onChange=_ref.onChange,before=_ref.before,secondary=_ref.secondary,className=_ref.className,classNameBefore=_ref.classNameBefore,slider=_ref.slider,value=_ref.value,_ref$errors=_ref.errors,errors=_ref$errors===void 0?[]:_ref$errors,_ref$decimals=_ref.decimals,decimals=_ref$decimals===void 0?6:_ref$decimals,maxValue=_ref.max,rest=Object(objectWithoutProperties["a" /* default */])(_ref,token_amount_new_excluded);var max=(_BigNumber$from=bignumber_default.a.from(maxValue))!==null&&_BigNumber$from!==void 0?_BigNumber$from:bignumber_default.a.ZERO;return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:className,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:classnames_default()(token_amount_new_s_module_default.a.tokenAmount,Object(defineProperty["a" /* default */])({},token_amount_new_s_module_default.a.error,errors.length)),children:[before&&/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:classnames_default()(token_amount_new_s_module_default.a.tokenAmountBefore,classNameBefore),children:before}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:token_amount_new_s_module_default.a.tokenAmountValues,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("input",Object(objectSpread2["a" /* default */])({ref:ref,className:token_amount_new_s_module_default.a.tokenAmountValue,type:"text",inputMode:"decimal",pattern:"[0-9]+([\\.,][0-9]+)?",onWheel:function onWheel(ev){ev.currentTarget.blur();},onChange:function onChange(e){_onChange(e.target.value);},value:value||''},rest)),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:token_amount_new_s_module_default.a.tokenAmountHint,children:secondary})]}),!max.isZero()&&/*#__PURE__*/Object(jsx_runtime["jsx"])("button",{type:"button",className:"button-ghost",style:{alignSelf:'center'},disabled:rest.disabled||max.isZero(),onClick:function onClick(){return _onChange(max.toString());},children:"MAX"})]}),!!errors.length&&errors.map(function(error,idx){return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"red",style:{marginTop:'8px'},children:error},idx);}),slider&&!max.isZero()?/*#__PURE__*/Object(jsx_runtime["jsx"])(slider_Slider,{type:"range",className:token_amount_new_s_module_default.a.tokenAmountSlider,min:"0",max:max.toString(),step:1/Math.pow(10,Math.min(decimals,6))// value={rest.value ?? 0}
,value:value!==null&&value!==void 0?value:0,disabled:rest.disabled||max.isZero(),onChange:function onChange(e){_onChange(e.target.value);}}):null]});});var token_amount_new_TokenAmountPreview=function TokenAmountPreview(_ref2){var value=_ref2.value,before=_ref2.before,secondary=_ref2.secondary,className=_ref2.className,classNameBefore=_ref2.classNameBefore;return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:classnames_default()(token_amount_new_s_module_default.a.tokenAmountPreview,className),children:[before&&/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:classnames_default()(token_amount_new_s_module_default.a.tokenAmountPreviewBefore,classNameBefore),children:before}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:token_amount_new_s_module_default.a.tokenAmountPreviewValues,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("input",{className:token_amount_new_s_module_default.a.tokenAmountPreviewValue,type:"text",value:value||'',readOnly:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:token_amount_new_s_module_default.a.tokenAmountPreviewHint,children:secondary})]})]});};var token_amount_new_TokenSelect=function TokenSelect(_ref3){var value=_ref3.value,onChange=_ref3.onChange,tokens=_ref3.tokens,className=_ref3.className,style=_ref3.style;var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),getTokenBySymbol=_useKnownTokens.getTokenBySymbol;var foundToken=getTokenBySymbol(value);return/*#__PURE__*/Object(jsx_runtime["jsx"])(dropdown_DropdownList,{items:tokens.reduce(function(acc,token){var _getTokenBySymbol,_getTokenBySymbol2;var found=getTokenBySymbol(token);if(!found)return acc;return[].concat(Object(toConsumableArray["a" /* default */])(acc),[{onClick:function onClick(){onChange(token);},children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:(_getTokenBySymbol=getTokenBySymbol(token))===null||_getTokenBySymbol===void 0?void 0:_getTokenBySymbol.icon,className:"mr-8"}),(_getTokenBySymbol2=getTokenBySymbol(token))===null||_getTokenBySymbol2===void 0?void 0:_getTokenBySymbol2.name]}),'aria-selected':(foundToken===null||foundToken===void 0?void 0:foundToken.symbol)===found.symbol?'true':'false'}]);},[]),children:function children(_ref4){var ref=_ref4.ref,setOpen=_ref4.setOpen,open=_ref4.open;return/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"button",ref:ref,onClick:function onClick(){return setOpen(function(isOpen){return!isOpen;});},className:classnames_default()(token_amount_new_s_module_default.a.tokenAmountSelectToken,className),style:style,children:[foundToken?/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:foundToken.icon,size:24,className:"mr-16"}):null,/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:foundToken===null||foundToken===void 0?void 0:foundToken.symbol}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],{name:open?'dropdown-active':'dropdown',size:"24",className:"token-select-chevron",style:{marginLeft:4}})]});}});};
// CONCATENATED MODULE: ./src/modules/governance/views/portfolio-view/portfolio-deposit/components/wallet-deposit-confirm-modal/index.tsx
var wallet_deposit_confirm_modal_excluded=["deposit","lockDuration"];var wallet_deposit_confirm_modal_WalletDepositConfirmModal=function WalletDepositConfirmModal(props){var deposit=props.deposit,lockDuration=props.lockDuration,modalProps=Object(objectWithoutProperties["a" /* default */])(props,wallet_deposit_confirm_modal_excluded);var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),projectToken=_useKnownTokens.projectToken;return/*#__PURE__*/Object(jsx_runtime["jsx"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({width:560},modalProps),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"warning-outlined",width:40,height:40,color:"red"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h3",weight:"semibold",color:"primary",children:"Are you sure you want to deposit?"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:["You are about to deposit ",Object(utils["b" /* formatToken */])(deposit)," $",projectToken.symbol,".",/*#__PURE__*/Object(jsx_runtime["jsx"])("br",{}),"You have an active lock for ",Object(src_utils["a" /* getFormattedDuration */])(0,lockDuration),"."]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"bold",color:"primary",children:"All deposits you make until the lock timer ends will be locked for the same duration."})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"default",onClick:modalProps.onCancel,children:"Cancel"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",onClick:modalProps.onOk,children:"Deposit"})]})]})}));};/* harmony default export */ var wallet_deposit_confirm_modal = (wallet_deposit_confirm_modal_WalletDepositConfirmModal);
// CONCATENATED MODULE: ./src/modules/governance/views/portfolio-view/portfolio-deposit/index.tsx
var portfolio_deposit_PortfolioDeposit=function PortfolioDeposit(){var _projectTokenContract,_config$contracts$dao,_formatToken,_formatToken2;var config=Object(configProvider["b" /* useConfig */])();var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),projectToken=_useKnownTokens.projectToken;var daoCtx=useDAO();var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=Object(react["useState"])(false),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),isEnabling=_useState4[0],setEnabling=_useState4[1];var _useState5=Object(react["useState"])(false),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),isSubmitting=_useState6[0],setSubmitting=_useState6[1];var _useState7=Object(react["useState"])(false),_useState8=Object(slicedToArray["a" /* default */])(_useState7,2),confirmModalVisible=_useState8[0],setConfirmModalVisible=_useState8[1];var _useState9=Object(react["useState"])(false),_useState10=Object(slicedToArray["a" /* default */])(_useState9,2),depositConfirmModal=_useState10[0],showDepositConfirmModal=_useState10[1];var _daoCtx$daoBarn=daoCtx.daoBarn,stakedBalance=_daoCtx$daoBarn.balance,userLockedUntil=_daoCtx$daoBarn.userLockedUntil;var projectTokenContract=projectToken.contract;var bondBalance=(_projectTokenContract=projectTokenContract.balance)===null||_projectTokenContract===void 0?void 0:_projectTokenContract.unscaleBy(projectToken.decimals);var barnAllowance=projectTokenContract.getAllowanceOf((_config$contracts$dao=config.contracts.dao)===null||_config$contracts$dao===void 0?void 0:_config$contracts$dao.barn);var isLocked=(userLockedUntil!==null&&userLockedUntil!==void 0?userLockedUntil:0)>Date.now();var form=useForm({validationScheme:{amount:{rules:{required:true,min:0},messages:{required:'Value is required.',min:'Should be a positive value.'}}},onSubmit:function onSubmit(){if(isLocked){showDepositConfirmModal(true);return;}setConfirmModalVisible(true);}});function loadData(){return _loadData.apply(this,arguments);}function _loadData(){_loadData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return projectTokenContract.loadBalance();case 4:_context.next=6;return daoCtx.daoBarn.loadUserData();case 6:_context.next=10;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);case 10:setLoading(false);case 11:case"end":return _context.stop();}}},_callee,null,[[1,8]]);}));return _loadData.apply(this,arguments);}Object(react["useEffect"])(function(){loadData().catch(Error);},[]);var formState=form.formState,watch=form.watch;var amount=watch('amount');var bnAmount=bignumber_default.a.from(amount);var isEnabled=Object(react["useMemo"])(function(){var _barnAllowance$gt;return(_barnAllowance$gt=barnAllowance===null||barnAllowance===void 0?void 0:barnAllowance.gt(bignumber_default.a.ZERO))!==null&&_barnAllowance$gt!==void 0?_barnAllowance$gt:false;},[barnAllowance]);var canSubmit=isEnabled&&formState.isDirty&&formState.isValid&&!isSubmitting;function handleTokenEnable(){return _handleTokenEnable.apply(this,arguments);}function _handleTokenEnable(){_handleTokenEnable=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var _config$contracts$dao2;var barn;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:barn=(_config$contracts$dao2=config.contracts.dao)===null||_config$contracts$dao2===void 0?void 0:_config$contracts$dao2.barn;if(barn){_context2.next=3;break;}return _context2.abrupt("return");case 3:setEnabling(true);_context2.prev=4;_context2.next=7;return projectTokenContract.approve(barn,true);case 7:_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2["catch"](4);console.error(_context2.t0);case 12:setEnabling(false);case 13:case"end":return _context2.stop();}}},_callee2,null,[[4,9]]);}));return _handleTokenEnable.apply(this,arguments);}function doDeposit(_x,_x2){return _doDeposit.apply(this,arguments);}function _doDeposit(){_doDeposit=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(amount,gasPrice){var depositAmount;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setSubmitting(true);_context3.prev=1;depositAmount=amount.scaleBy(projectToken.decimals);if(!depositAmount){_context3.next=8;break;}_context3.next=6;return daoCtx.daoBarn.deposit(depositAmount,gasPrice);case 6:_context3.next=8;return loadData();case 8:_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3["catch"](1);console.error(_context3.t0);case 13:setSubmitting(false);case 14:case"end":return _context3.stop();}}},_callee3,null,[[1,10]]);}));return _doDeposit.apply(this,arguments);}function handleCancel(){setConfirmModalVisible(false);}function handleConfirm(_x3){return _handleConfirm.apply(this,arguments);}function _handleConfirm(){_handleConfirm=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(gasPrice){return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(bnAmount){_context4.next=2;break;}return _context4.abrupt("return");case 2:setConfirmModalVisible(false);_context4.next=5;return doDeposit(bnAmount,gasPrice);case 5:case"end":return _context4.stop();}}},_callee4);}));return _handleConfirm.apply(this,arguments);}if(isLoading){return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex justify-center p-24",style:{minHeight:'518px'},children:/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{})});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[config.features.faucets&&/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],{to:"/faucets",className:"button-ghost ml-auto",children:"Faucets"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(custom_form_Form,{form:form,className:"flex flow-row row-gap-32 p-24",disabled:isSubmitting,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-box flex flow-col col-gap-44",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Portfolio balance"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:(_formatToken=Object(utils["b" /* formatToken */])(stakedBalance))!==null&&_formatToken!==void 0?_formatToken:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Wallet balance"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:(_formatToken2=Object(utils["b" /* formatToken */])(bondBalance))!==null&&_formatToken2!==void 0?_formatToken2:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_form_FormItem,{name:"amount",label:"Amount",children:function children(_ref){var field=_ref.field;return/*#__PURE__*/Object(jsx_runtime["jsx"])(TokenAmount,Object(objectSpread2["a" /* default */])({before:/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon}),max:bondBalance,disabled:isSubmitting,decimals:projectToken.decimals,slider:true},field));}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{message:"Deposits made after you have an ongoing lock will be added to the locked balance and will be subjected to the same lock timer."}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-12 align-center justify-end",children:[!isEnabled&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"button",className:"button-primary align-self-start",onClick:handleTokenEnable,children:[isEnabling&&/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{className:"mr-4"}),"Enable ",projectToken.symbol]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"arrow-forward"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"submit",className:"button-primary align-self-start",disabled:!canSubmit,children:[isSubmitting&&/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{className:"mr-4"}),"Deposit"]})]})]}),depositConfirmModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(wallet_deposit_confirm_modal,{deposit:bnAmount,lockDuration:userLockedUntil,onCancel:function onCancel(){return showDepositConfirmModal(false);},onOk:function onOk(){showDepositConfirmModal(false);// return handleSubmit();
}}),confirmModalVisible&&/*#__PURE__*/Object(jsx_runtime["jsx"])(tx_confirm_modal,{title:"Confirm deposit",header:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-box flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Deposit amount"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:Object(utils["b" /* formatToken */])(bnAmount,{decimals:projectToken.decimals})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]}),submitText:"Confirm your deposit",onCancel:handleCancel,onConfirm:function onConfirm(_ref2){var gasPrice=_ref2.gasPrice;return handleConfirm(gasPrice);}})]});};/* harmony default export */ var portfolio_deposit = (portfolio_deposit_PortfolioDeposit);
// EXTERNAL MODULE: ./node_modules/date-fns/esm/addDays/index.js
var addDays = __webpack_require__(66);

// EXTERNAL MODULE: ./node_modules/date-fns/esm/addMinutes/index.js
var addMinutes = __webpack_require__(209);

// EXTERNAL MODULE: ./node_modules/date-fns/esm/addMonths/index.js
var addMonths = __webpack_require__(128);

// EXTERNAL MODULE: ./node_modules/date-fns/esm/addYears/index.js
var addYears = __webpack_require__(269);

// EXTERNAL MODULE: ./node_modules/date-fns/esm/getUnixTime/index.js
var getUnixTime = __webpack_require__(446);

// EXTERNAL MODULE: ./node_modules/antd/lib/date-picker/generatePicker/index.js
var generatePicker = __webpack_require__(1515);
var generatePicker_default = /*#__PURE__*/__webpack_require__.n(generatePicker);

// EXTERNAL MODULE: ./node_modules/rc-picker/lib/generate/dateFns.js
var dateFns = __webpack_require__(1898);
var dateFns_default = /*#__PURE__*/__webpack_require__.n(dateFns);

// EXTERNAL MODULE: ./src/components/antd/datepicker/s.module.scss
var datepicker_s_module = __webpack_require__(1899);
var datepicker_s_module_default = /*#__PURE__*/__webpack_require__.n(datepicker_s_module);

// CONCATENATED MODULE: ./src/components/antd/datepicker/index.tsx
var datepicker_excluded=["className"];var DateFNSPicker=generatePicker_default()(dateFns_default.a);var datepicker_DatePicker=function DatePicker(props){var className=props.className,datePickerProps=Object(objectWithoutProperties["a" /* default */])(props,datepicker_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(DateFNSPicker,Object(objectSpread2["a" /* default */])({className:classnames_default()(datepicker_s_module_default.a.component,className),dropdownClassName:datepicker_s_module_default.a.dropdown},datePickerProps));};/* harmony default export */ var datepicker = (datepicker_DatePicker);
// CONCATENATED MODULE: ./src/modules/governance/views/portfolio-view/portfolio-lock/index.tsx
var portfolio_lock_excluded=["ref"];var DURATION_1_WEEK='1 w';var DURATION_1_MONTH='1 mo';var DURATION_3_MONTH='3 mo';var DURATION_6_MONTH='6 mo';var DURATION_1_YEAR='1 y';var DURATION_OPTIONS=[DURATION_1_WEEK,DURATION_1_MONTH,DURATION_3_MONTH,DURATION_6_MONTH,DURATION_1_YEAR];function getLockEndDate(startDate,duration){switch(duration){case DURATION_1_WEEK:return Object(addDays["a" /* default */])(startDate,7);case DURATION_1_MONTH:return Object(addMonths["a" /* default */])(startDate,1);case DURATION_3_MONTH:return Object(addMonths["a" /* default */])(startDate,3);case DURATION_6_MONTH:return Object(addMonths["a" /* default */])(startDate,6);case DURATION_1_YEAR:return Object(addDays["a" /* default */])(startDate,365);default:return undefined;}}var portfolio_lock_PortfolioLock=function PortfolioLock(){var _formatToken,_lockEndDate$valueOf;var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),projectToken=_useKnownTokens.projectToken;var daoCtx=useDAO();var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=Object(react["useState"])(false),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),isSubmitting=_useState4[0],setSubmitting=_useState4[1];var _useState5=Object(react["useState"])(false),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),confirmModalVisible=_useState6[0],setConfirmModalVisible=_useState6[1];var _daoCtx$daoBarn=daoCtx.daoBarn,stakedBalance=_daoCtx$daoBarn.balance,userLockedUntil=_daoCtx$daoBarn.userLockedUntil;var form=useForm({validationScheme:{lockEndDate:{rules:{required:true,min:function min(value){var _value$valueOf;return Object(addMinutes["a" /* default */])(Date.now(),1).valueOf()<((_value$valueOf=value===null||value===void 0?void 0:value.valueOf())!==null&&_value$valueOf!==void 0?_value$valueOf:0);},max:function max(value){var _value$valueOf2;return Object(addYears["a" /* default */])(Date.now(),1).valueOf()>((_value$valueOf2=value===null||value===void 0?void 0:value.valueOf())!==null&&_value$valueOf2!==void 0?_value$valueOf2:0);}},messages:{required:'Required',min:'Should be more than 1 minute',max:'Should be less than 1 year'}}},onSubmit:function onSubmit(){setConfirmModalVisible(true);}});function loadData(){return _loadData.apply(this,arguments);}function _loadData(){_loadData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var _userLockedUntil,_lockEndDate;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return daoCtx.daoBarn.loadUserData();case 4:_userLockedUntil=daoCtx.daoBarn.userLockedUntil;_lockEndDate=_userLockedUntil?new Date(_userLockedUntil*1000):undefined;if(_lockEndDate&&_lockEndDate.valueOf()<=Date.now()){_lockEndDate=undefined;}form.reset({lockEndDate:_lockEndDate});_context.next=12;break;case 10:_context.prev=10;_context.t0=_context["catch"](1);case 12:setLoading(false);case 13:case"end":return _context.stop();}}},_callee,null,[[1,10]]);}));return _loadData.apply(this,arguments);}Object(react["useEffect"])(function(){loadData().catch(Error);},[]);var formState=form.formState,watch=form.watch;var lockEndDate=watch('lockEndDate');var canSubmit=formState.isDirty&&!isSubmitting;function doLock(_x,_x2){return _doLock.apply(this,arguments);}function _doLock(){_doLock=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(lockUntil,gasPrice){var timestamp;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setSubmitting(true);_context2.prev=1;if(!lockUntil){_context2.next=9;break;}timestamp=Object(getUnixTime["a" /* default */])(lockUntil);if(!(timestamp&&timestamp>0)){_context2.next=9;break;}_context2.next=7;return daoCtx.daoBarn.lock(timestamp,gasPrice);case 7:_context2.next=9;return loadData();case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2["catch"](1);console.error(_context2.t0);case 14:setSubmitting(false);case 15:case"end":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return _doLock.apply(this,arguments);}function handleCancel(){setConfirmModalVisible(false);}function handleConfirm(_x3){return _handleConfirm.apply(this,arguments);}function _handleConfirm(){_handleConfirm=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(gasPrice){return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setConfirmModalVisible(false);_context3.next=3;return doLock(lockEndDate,gasPrice);case 3:case"end":return _context3.stop();}}},_callee3);}));return _handleConfirm.apply(this,arguments);}if(isLoading){return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex justify-center p-24",style:{minHeight:'518px'},children:/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{})});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(custom_form_Form,{form:form,className:"flex flow-row row-gap-32 p-24",disabled:isSubmitting,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-box flex flow-col col-gap-44",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Portfolio balance"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:(_formatToken=Object(utils["b" /* formatToken */])(stakedBalance))!==null&&_formatToken!==void 0?_formatToken:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Lock duration"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex flow-col col-gap-8 align-center",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(useLeftTime_UseLeftTime,{end:(userLockedUntil!==null&&userLockedUntil!==void 0?userLockedUntil:Object(getUnixTime["a" /* default */])(new Date()))*1000,delay:1000,children:function children(leftTime){var _getFormattedDuration;return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:((_getFormattedDuration=Object(src_utils["a" /* getFormattedDuration */])(leftTime/1000))===null||_getFormattedDuration===void 0?void 0:_getFormattedDuration.trim())||'0s'});}})})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_form_FormItem,{name:"lockEndDate",label:"Lock end date",children:function children(_ref){var _ref$field=_ref.field,ref=_ref$field.ref,field=Object(objectWithoutProperties["a" /* default */])(_ref$field,portfolio_lock_excluded);return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-16",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(datepicker,Object(objectSpread2["a" /* default */])({showTime:true,showNow:false,format:"DD/MM/YYYY HH:mm",size:"large"},field)),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flexbox-grid",style:{'--gap':'8px'},children:DURATION_OPTIONS.map(function(item){var _field$value,_getLockEndDate;return/*#__PURE__*/Object(jsx_runtime["jsx"])("button",{type:"button",className:classnames_default()('flex justify-center ph-24 pv-16',((_field$value=field.value)===null||_field$value===void 0?void 0:_field$value.valueOf())===((_getLockEndDate=getLockEndDate(new Date(),item))===null||_getLockEndDate===void 0?void 0:_getLockEndDate.valueOf())?'button-primary':'button-ghost-monochrome'),onClick:function onClick(){form.updateValue('lockEndDate',getLockEndDate(new Date(),item));},children:item},item);})})]});}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{message:"All locked balances will be unavailable for withdrawal until the lock timer ends. All future deposits will be locked for the same time."}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex flow-col col-gap-12 align-center justify-end",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"submit",className:"button-primary",disabled:!canSubmit,children:[isSubmitting&&/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{className:"mr-4"}),"Lock"]})})]}),confirmModalVisible&&/*#__PURE__*/Object(jsx_runtime["jsx"])(tx_confirm_modal,{title:"Are you sure you want to lock your balance?",header:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-16",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"bold",color:"secondary",children:["You are about to lock",' ',/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"primary-color",children:[Object(utils["b" /* formatToken */])(stakedBalance)," ",projectToken.symbol]}),' ',"for",' ',/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"primary-color",children:Object(src_utils["a" /* getFormattedDuration */])(Date.now(),(_lockEndDate$valueOf=lockEndDate===null||lockEndDate===void 0?void 0:lockEndDate.valueOf())!==null&&_lockEndDate$valueOf!==void 0?_lockEndDate$valueOf:0)}),". You cannot undo this or partially lock your balance. Locked tokens will be unavailable for withdrawal until the lock timer ends. All future deposits you make will be locked for the same time."]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"bold",color:"primary",children:"The multiplier you get for locking tokens only applies to your voting power, it does not earn more rewards."})]}),submitText:"Lock balance",onCancel:handleCancel,onConfirm:function onConfirm(_ref2){var gasPrice=_ref2.gasPrice;return handleConfirm(gasPrice);}})]});};/* harmony default export */ var portfolio_lock = (portfolio_lock_PortfolioLock);
// EXTERNAL MODULE: ./node_modules/nanoid/index.browser.js + 1 modules
var index_browser = __webpack_require__(251);

// EXTERNAL MODULE: ./src/components/input/s.module.scss
var components_input_s_module = __webpack_require__(1913);
var components_input_s_module_default = /*#__PURE__*/__webpack_require__.n(components_input_s_module);

// CONCATENATED MODULE: ./src/components/input/index.tsx
var components_input_excluded=["id","before","className","dimension"];var components_input_Input=function Input(_ref){var id=_ref.id,before=_ref.before,className=_ref.className,_ref$dimension=_ref.dimension,dimension=_ref$dimension===void 0?'normal':_ref$dimension,rest=Object(objectWithoutProperties["a" /* default */])(_ref,components_input_excluded);var inputId=Object(react["useMemo"])(function(){return id!==null&&id!==void 0?id:Object(index_browser["a" /* nanoid */])();},[id]);var isSearch=rest.type==='search';return/*#__PURE__*/Object(jsx_runtime["jsxs"])("label",{htmlFor:inputId,className:classnames_default()(components_input_s_module_default.a.inputWrapper,className),children:[before&&/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:classnames_default()(components_input_s_module_default.a.before,components_input_s_module_default.a[dimension]),children:before}),isSearch&&/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],{name:"search",size:16,className:components_input_s_module_default.a.searchIcon,color:"icon"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("input",Object(objectSpread2["a" /* default */])({type:"text",id:inputId,className:classnames_default()(components_input_s_module_default.a.input,components_input_s_module_default.a[dimension],Object(defineProperty["a" /* default */])({},components_input_s_module_default.a.inputSearch,isSearch))},rest))]});};
// CONCATENATED MODULE: ./src/modules/governance/views/portfolio-view/portfolio-stake/index.tsx
var portfolio_stake_excluded=["ref"];var portfolio_stake_DURATION_1_WEEK='1 w';var portfolio_stake_DURATION_1_MONTH='1 mo';var portfolio_stake_DURATION_3_MONTH='3 mo';var portfolio_stake_DURATION_6_MONTH='6 mo';var portfolio_stake_DURATION_1_YEAR='1 y';var portfolio_stake_DURATION_OPTIONS=[portfolio_stake_DURATION_1_WEEK,portfolio_stake_DURATION_1_MONTH,portfolio_stake_DURATION_3_MONTH,portfolio_stake_DURATION_6_MONTH,portfolio_stake_DURATION_1_YEAR];var NETWORK=['BTC_ETH','BTC_BSC'];function getNetworkID(network){if(network==='BTC_ETH'){return 1;}if(network==='BTC_BSC'){return 2;}return 0;}function portfolio_stake_getLockEndDate(startDate,duration){switch(duration){case portfolio_stake_DURATION_1_WEEK:return Object(addDays["a" /* default */])(startDate,7);case portfolio_stake_DURATION_1_MONTH:return Object(addMonths["a" /* default */])(startDate,1);case portfolio_stake_DURATION_3_MONTH:return Object(addMonths["a" /* default */])(startDate,3);case portfolio_stake_DURATION_6_MONTH:return Object(addMonths["a" /* default */])(startDate,6);case portfolio_stake_DURATION_1_YEAR:return Object(addDays["a" /* default */])(startDate,365);default:return undefined;}}var portfolio_stake_PortfolioDeposit=function PortfolioDeposit(){var _projectTokenContract,_config$contracts$dao,_formatToken,_formatToken2,_lockEndDate$valueOf;var config=Object(configProvider["b" /* useConfig */])();var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),projectToken=_useKnownTokens.projectToken;var daoCtx=useDAO();var wallet=Object(wallets_walletProvider["c" /* useWallet */])();var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=Object(react["useState"])(false),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),isEnabling=_useState4[0],setEnabling=_useState4[1];var _useState5=Object(react["useState"])(false),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),isSubmitting=_useState6[0],setSubmitting=_useState6[1];var _useState7=Object(react["useState"])(false),_useState8=Object(slicedToArray["a" /* default */])(_useState7,2),confirmModalVisible=_useState8[0],setConfirmModalVisible=_useState8[1];var _daoCtx$daoBarn=daoCtx.daoBarn,stakedBalance=_daoCtx$daoBarn.balance,userLockedUntil=_daoCtx$daoBarn.userLockedUntil;var projectTokenContract=projectToken.contract;var bondBalance=(_projectTokenContract=projectTokenContract.balance)===null||_projectTokenContract===void 0?void 0:_projectTokenContract.unscaleBy(projectToken.decimals);var barnAllowance=projectTokenContract.getAllowanceOf((_config$contracts$dao=config.contracts.dao)===null||_config$contracts$dao===void 0?void 0:_config$contracts$dao.barn);var isLocked=(userLockedUntil!==null&&userLockedUntil!==void 0?userLockedUntil:0)>Date.now();var form=useForm({validationScheme:{lockEndDate:{rules:{required:true,min:function min(value){var _value$valueOf;return Object(addMinutes["a" /* default */])(Date.now(),1).valueOf()<((_value$valueOf=value===null||value===void 0?void 0:value.valueOf())!==null&&_value$valueOf!==void 0?_value$valueOf:0);},max:function max(value){var _value$valueOf2;return Object(addYears["a" /* default */])(Date.now(),1).valueOf()>((_value$valueOf2=value===null||value===void 0?void 0:value.valueOf())!==null&&_value$valueOf2!==void 0?_value$valueOf2:0);}},messages:{required:'Required',min:'Should be more than 1 minute',max:'Should be less than 1 year'}},amount:{rules:{required:true,min:0},messages:{required:'Value is required.',min:'Should be a positive value.'}},p2pkey:{rules:{required:false},messages:{}},dataType:{rules:{required:false},messages:{}}},onSubmit:function onSubmit(){if(isLocked){setConfirmModalVisible(false);return;}setConfirmModalVisible(true);}});function loadTimelock(_x){return _loadTimelock.apply(this,arguments);}function _loadTimelock(){_loadTimelock=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(type){var timelockData;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(wallet.account){_context.next=2;break;}return _context.abrupt("return");case 2:console.log(wallet.account,type);_context.next=5;return daoCtx.daoBarn.checkTimeLock(wallet.account,type);case 5:timelockData=_context.sent;console.log(timelockData);form.updateValue('dataType',type);form.updateValue('p2pKey',timelockData.data.slice(2));case 9:case"end":return _context.stop();}}},_callee);}));return _loadTimelock.apply(this,arguments);}function loadData(){return _loadData.apply(this,arguments);}function _loadData(){_loadData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(){var _userLockedUntil,_lockEndDate;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.prev=1;_context2.next=4;return projectTokenContract.loadBalance();case 4:_context2.next=6;return daoCtx.daoBarn.loadUserData();case 6:_userLockedUntil=daoCtx.daoBarn.userLockedUntil;_lockEndDate=_userLockedUntil?new Date(_userLockedUntil*1000):undefined;if(_lockEndDate&&_lockEndDate.valueOf()<=Date.now()){_lockEndDate=undefined;}form.reset({lockEndDate:_lockEndDate,p2pKey:'',dataType:1});_context2.next=14;break;case 12:_context2.prev=12;_context2.t0=_context2["catch"](1);case 14:setLoading(false);case 15:case"end":return _context2.stop();}}},_callee2,null,[[1,12]]);}));return _loadData.apply(this,arguments);}Object(react["useEffect"])(function(){loadData().catch(Error);},[]);var formState=form.formState,watch=form.watch;var amount=watch('amount');var bnAmount=bignumber_default.a.from(amount);var nextStakeBalance=stakedBalance===null||stakedBalance===void 0?void 0:stakedBalance.plus(amount);var lockEndDate=watch('lockEndDate');var p2pKey=watch('p2pKey');var dataType=watch('dataType');var isEnabled=Object(react["useMemo"])(function(){var _barnAllowance$gt;return(_barnAllowance$gt=barnAllowance===null||barnAllowance===void 0?void 0:barnAllowance.gt(bignumber_default.a.ZERO))!==null&&_barnAllowance$gt!==void 0?_barnAllowance$gt:false;},[barnAllowance]);var canSubmit=isEnabled&&formState.isDirty&&formState.isValid&&!isSubmitting;function handleTokenEnable(){return _handleTokenEnable.apply(this,arguments);}function _handleTokenEnable(){_handleTokenEnable=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(){var _config$contracts$dao2;var barn;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:barn=(_config$contracts$dao2=config.contracts.dao)===null||_config$contracts$dao2===void 0?void 0:_config$contracts$dao2.barn;if(barn){_context3.next=3;break;}return _context3.abrupt("return");case 3:setEnabling(true);_context3.prev=4;_context3.next=7;return projectTokenContract.approve(barn,true);case 7:_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3["catch"](4);console.error(_context3.t0);case 12:setEnabling(false);case 13:case"end":return _context3.stop();}}},_callee3,null,[[4,9]]);}));return _handleTokenEnable.apply(this,arguments);}function doDepositAndLock(_x2,_x3,_x4,_x5,_x6){return _doDepositAndLock.apply(this,arguments);}function _doDepositAndLock(){_doDepositAndLock=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(amount,lockUntil,type,p2pkey,gasPrice){var depositAmount,timestamp;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setSubmitting(true);_context4.prev=1;depositAmount=amount.scaleBy(projectToken.decimals);if(!(depositAmount&&lockUntil)){_context4.next=10;break;}timestamp=Object(getUnixTime["a" /* default */])(lockUntil);if(!(timestamp&&timestamp>0)){_context4.next=10;break;}_context4.next=8;return daoCtx.daoBarn.addOrAdjusttimelock(depositAmount,timestamp,type,'0x'+p2pkey,// 0x + hexstirng
gasPrice);case 8:_context4.next=10;return loadData();case 10:_context4.next=15;break;case 12:_context4.prev=12;_context4.t0=_context4["catch"](1);console.error(_context4.t0);case 15:setSubmitting(false);case 16:case"end":return _context4.stop();}}},_callee4,null,[[1,12]]);}));return _doDepositAndLock.apply(this,arguments);}function handleCancel(){setConfirmModalVisible(false);}function handleConfirm(_x7){return _handleConfirm.apply(this,arguments);}function _handleConfirm(){_handleConfirm=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(gasPrice){return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(bnAmount){_context5.next=2;break;}return _context5.abrupt("return");case 2:setConfirmModalVisible(false);_context5.next=5;return doDepositAndLock(bnAmount,lockEndDate,dataType,p2pKey,gasPrice);case 5:case"end":return _context5.stop();}}},_callee5);}));return _handleConfirm.apply(this,arguments);}if(isLoading){return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex justify-center p-24",style:{minHeight:'518px'},children:/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{})});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[config.features.faucets&&/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],{to:"/faucets",className:"button-ghost ml-auto",children:"Faucets"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(custom_form_Form,{form:form,className:"flex flow-row row-gap-32 p-24",disabled:isSubmitting,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-box flex flow-col col-gap-44",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Portfolio balance"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:(_formatToken=Object(utils["b" /* formatToken */])(stakedBalance))!==null&&_formatToken!==void 0?_formatToken:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Wallet balance"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:(_formatToken2=Object(utils["b" /* formatToken */])(bondBalance))!==null&&_formatToken2!==void 0?_formatToken2:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Lock duration"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex flow-col col-gap-8 align-center",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(useLeftTime_UseLeftTime,{end:(userLockedUntil!==null&&userLockedUntil!==void 0?userLockedUntil:Object(getUnixTime["a" /* default */])(new Date()))*1000,delay:1000,children:function children(leftTime){var _getFormattedDuration;return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:((_getFormattedDuration=Object(src_utils["a" /* getFormattedDuration */])(leftTime/1000))===null||_getFormattedDuration===void 0?void 0:_getFormattedDuration.trim())||'0s'});}})})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_form_FormItem,{name:"amount",label:"Amount",children:function children(_ref){var field=_ref.field;return/*#__PURE__*/Object(jsx_runtime["jsx"])(TokenAmount,Object(objectSpread2["a" /* default */])({before:/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon}),max:bondBalance,disabled:isSubmitting,decimals:projectToken.decimals,slider:true},field));}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_form_FormItem,{name:"lockEndDate",label:"Lock end date",children:function children(_ref2){var _ref2$field=_ref2.field,ref=_ref2$field.ref,field=Object(objectWithoutProperties["a" /* default */])(_ref2$field,portfolio_stake_excluded);return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-16",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(datepicker,Object(objectSpread2["a" /* default */])({showTime:true,showNow:false,format:"DD/MM/YYYY HH:mm",size:"large"},field)),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flexbox-grid",style:{'--gap':'8px'},children:portfolio_stake_DURATION_OPTIONS.map(function(item){var _field$value,_getLockEndDate;return/*#__PURE__*/Object(jsx_runtime["jsx"])("button",{type:"button",className:classnames_default()('flex justify-center ph-24 pv-16',((_field$value=field.value)===null||_field$value===void 0?void 0:_field$value.valueOf())===((_getLockEndDate=portfolio_stake_getLockEndDate(new Date(),item))===null||_getLockEndDate===void 0?void 0:_getLockEndDate.valueOf())?'button-primary':'button-ghost-monochrome'),onClick:function onClick(){form.updateValue('lockEndDate',portfolio_stake_getLockEndDate(new Date(),item));},children:item},item);})})]});}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_form_FormItem,{name:"dataType",label:"DataType (optional)",labelProps:{hint:'What DataType for your node. 1 => BTC_ETH network, 2 => BTC_BSC network'},className:"flex-grow",children:function children(_ref3){var field=_ref3.field;return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flexbox-grid",style:{'--gap':'8px'},children:NETWORK.map(function(item){return/*#__PURE__*/Object(jsx_runtime["jsx"])("button",{type:"button",className:classnames_default()('flex justify-center ph-24 pv-16 button-ghost-monochrome'),onClick:function onClick(){loadTimelock(getNetworkID(item));form.updateValue('dataType',getNetworkID(item));},children:item},item);})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_input_Input,{placeholder:"0",dimension:"large",className:"flex-grow",disabled:isSubmitting,value:dataType,onChange:field.onChange})]});}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_form_FormItem,{name:"p2pKey",label:"Node P2Pkey (optional)",labelProps:{hint:'What is p2p key (32bytes hexstring) is on your node'},className:"flex-grow",children:function children(_ref4){var field=_ref4.field;return/*#__PURE__*/Object(jsx_runtime["jsx"])(components_input_Input,{placeholder:"18c9c5...",dimension:"large",className:"flex-grow",disabled:isSubmitting,value:p2pKey,onChange:field.onChange});}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{message:"Deposits made after you have an ongoing lock will be added to the locked balance and will be subjected to the same lock timer."}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-12 align-center justify-end",children:[!isEnabled&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"button",className:"button-primary align-self-start",onClick:handleTokenEnable,children:[isEnabling&&/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{className:"mr-4"}),"Enable ",projectToken.symbol]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"arrow-forward"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"submit",className:"button-primary align-self-start",disabled:!canSubmit,children:[isSubmitting&&/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{className:"mr-4"}),"Timelock"]})]})]}),confirmModalVisible&&/*#__PURE__*/Object(jsx_runtime["jsx"])(tx_confirm_modal,{title:"Are you sure you want to lock your balance?",header:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-16",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"bold",color:"secondary",children:["You are about to lock",' ',/*#__PURE__*/Object(jsx_runtime["jsxs"])("span",{className:"primary-color",children:[Object(utils["b" /* formatToken */])(nextStakeBalance)," ",projectToken.symbol]}),' ',"for",' ',/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"primary-color",children:Object(src_utils["a" /* getFormattedDuration */])(Date.now(),(_lockEndDate$valueOf=lockEndDate===null||lockEndDate===void 0?void 0:lockEndDate.valueOf())!==null&&_lockEndDate$valueOf!==void 0?_lockEndDate$valueOf:0)}),". You cannot undo this or partially lock your balance. Locked tokens will be unavailable for withdrawal until the lock timer ends. All future deposits you make will be locked for the same time."]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"bold",color:"primary",children:"The multiplier you get for locking tokens only applies to your voting power, it does not earn more rewards."})]}),submitText:"Lock balance",onCancel:handleCancel,onConfirm:function onConfirm(_ref5){var gasPrice=_ref5.gasPrice;return handleConfirm(gasPrice);}})]});};/* harmony default export */ var portfolio_stake = (portfolio_stake_PortfolioDeposit);
// CONCATENATED MODULE: ./src/modules/governance/views/portfolio-view/portfolio-withdraw/index.tsx
var portfolio_withdraw_PortfolioWithdraw=function PortfolioWithdraw(){var _projectTokenContract,_formatToken,_formatToken2;var _useKnownTokens=Object(knownTokensProvider["b" /* useKnownTokens */])(),projectToken=_useKnownTokens.projectToken;var daoCtx=useDAO();var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=Object(react["useState"])(false),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),isSubmitting=_useState4[0],setSubmitting=_useState4[1];var _useState5=Object(react["useState"])(false),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),confirmModalVisible=_useState6[0],setConfirmModalVisible=_useState6[1];var _daoCtx$daoBarn=daoCtx.daoBarn,stakedBalance=_daoCtx$daoBarn.balance,userLockedUntil=_daoCtx$daoBarn.userLockedUntil;var projectTokenContract=projectToken.contract;var bondBalance=(_projectTokenContract=projectTokenContract.balance)===null||_projectTokenContract===void 0?void 0:_projectTokenContract.unscaleBy(projectToken.decimals);var isLocked=(userLockedUntil!==null&&userLockedUntil!==void 0?userLockedUntil:0)*1000>Date.now();var form=useForm({validationScheme:{amount:{rules:{required:true,min:0},messages:{required:'Value is required.',min:'Should be a positive value.'}}},onSubmit:function onSubmit(){if(bnAmount){setConfirmModalVisible(true);}}});function loadData(){return _loadData.apply(this,arguments);}function _loadData(){_loadData=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return projectTokenContract.loadBalance();case 4:_context.next=6;return daoCtx.daoBarn.loadUserData();case 6:_context.next=10;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);case 10:setLoading(false);case 11:case"end":return _context.stop();}}},_callee,null,[[1,8]]);}));return _loadData.apply(this,arguments);}Object(react["useEffect"])(function(){loadData().catch(Error);},[]);var formState=form.formState,watch=form.watch;var amount=watch('amount');var bnAmount=bignumber_default.a.from(amount);var canSubmit=formState.isDirty&&!isSubmitting&&!isLocked;function doWithdraw(_x,_x2){return _doWithdraw.apply(this,arguments);}function _doWithdraw(){_doWithdraw=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(amount,gasPrice){var withdrawAmount;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setSubmitting(true);_context2.prev=1;withdrawAmount=amount.scaleBy(projectToken.decimals);if(!withdrawAmount){_context2.next=8;break;}_context2.next=6;return daoCtx.daoBarn.withdraw(withdrawAmount,gasPrice);case 6:_context2.next=8;return loadData();case 8:_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](1);console.error(_context2.t0);case 13:setSubmitting(false);case 14:case"end":return _context2.stop();}}},_callee2,null,[[1,10]]);}));return _doWithdraw.apply(this,arguments);}function handleCancel(){setConfirmModalVisible(false);}function handleConfirm(_x3){return _handleConfirm.apply(this,arguments);}function _handleConfirm(){_handleConfirm=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(gasPrice){return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(bnAmount){_context3.next=2;break;}return _context3.abrupt("return");case 2:setConfirmModalVisible(false);_context3.next=5;return doWithdraw(bnAmount,gasPrice);case 5:case"end":return _context3.stop();}}},_callee3);}));return _handleConfirm.apply(this,arguments);}if(isLoading){return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex justify-center p-24",style:{minHeight:'518px'},children:/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{})});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(custom_form_Form,{form:form,className:"flex flow-row row-gap-32 p-24",disabled:isSubmitting,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-box flex flow-col col-gap-44",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Portfolio balance"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:(_formatToken=Object(utils["b" /* formatToken */])(stakedBalance))!==null&&_formatToken!==void 0?_formatToken:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Wallet balance"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:(_formatToken2=Object(utils["b" /* formatToken */])(bondBalance))!==null&&_formatToken2!==void 0?_formatToken2:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_form_FormItem,{name:"amount",label:"Amount",children:function children(_ref){var field=_ref.field;return/*#__PURE__*/Object(jsx_runtime["jsx"])(TokenAmount,Object(objectSpread2["a" /* default */])({before:/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon}),max:stakedBalance,disabled:isSubmitting,decimals:projectToken.decimals,slider:true},field));}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{message:"Locked balances are not available for withdrawal until the timer ends. Withdrawal means you will stop earning staking rewards for the amount withdrawn."}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"flex flow-col col-gap-12 align-center justify-end",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"submit",className:"button-primary",disabled:!canSubmit,children:[isSubmitting&&/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{className:"mr-4"}),"Withdraw"]})})]}),confirmModalVisible&&/*#__PURE__*/Object(jsx_runtime["jsx"])(tx_confirm_modal,{title:"Confirm withdraw",header:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-box flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Withdraw amount"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-8 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"bold",color:"primary",children:Object(utils["b" /* formatToken */])(bnAmount,{decimals:projectToken.decimals})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:projectToken.icon})]})]}),submitText:"Confirm your withdraw",onCancel:handleCancel,onConfirm:function onConfirm(_ref2){var gasPrice=_ref2.gasPrice;return handleConfirm(gasPrice);}})]});};/* harmony default export */ var portfolio_withdraw = (portfolio_withdraw_PortfolioWithdraw);
// CONCATENATED MODULE: ./src/modules/governance/views/portfolio-view/index.tsx
var portfolio_view_PortfolioView=function PortfolioView(){var wallet=Object(wallets_walletProvider["c" /* useWallet */])();if(!wallet.initialized){return null;}if(!wallet.isActive){return/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["a" /* Redirect */],{to:"/governance/overview"});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-fit",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h1",weight:"bold",color:"primary",className:"mb-32",children:"Portfolio"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header pv-0",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(tabs_NavTabs,{tabs:[{id:'deposit',children:'Deposit',to:'/governance/portfolio/deposit'},{id:'lock',children:'Lock',to:'/governance/portfolio/lock'},{id:'stake',children:'Node Stake',to:'/governance/portfolio/stake'},{id:'delegate',children:'Delegate',to:'/governance/portfolio/delegate'},{id:'withdraw',children:'Withdraw',to:'/governance/portfolio/withdraw'}]})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(react_router["d" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/portfolio/deposit",component:portfolio_deposit}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/portfolio/lock",component:portfolio_lock}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/portfolio/stake",component:portfolio_stake}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/portfolio/delegate",component:portfolio_delegate}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/portfolio/withdraw",component:portfolio_withdraw})]})]})]});};/* harmony default export */ var portfolio_view = (portfolio_view_PortfolioView);
// EXTERNAL MODULE: ./node_modules/async-wait-until/dist/index.esm.js + 3 modules
var async_wait_until_dist_index_esm = __webpack_require__(1962);

// EXTERNAL MODULE: ./src/components/antd/textarea/s.module.scss
var textarea_s_module = __webpack_require__(1914);
var textarea_s_module_default = /*#__PURE__*/__webpack_require__.n(textarea_s_module);

// CONCATENATED MODULE: ./src/components/antd/textarea/index.tsx
var textarea_excluded=["className"];var textarea_Textarea=function Textarea(props){var className=props.className,inputProps=Object(objectWithoutProperties["a" /* default */])(props,textarea_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(input_default.a.TextArea,Object(objectSpread2["a" /* default */])({className:classnames_default()(textarea_s_module_default.a.component,className)},inputProps));};/* harmony default export */ var antd_textarea = (textarea_Textarea);
// EXTERNAL MODULE: ./node_modules/antd/lib/notification/index.js
var notification = __webpack_require__(357);
var notification_default = /*#__PURE__*/__webpack_require__.n(notification);

// EXTERNAL MODULE: ./node_modules/antd/lib/switch/index.js
var lib_switch = __webpack_require__(1942);
var switch_default = /*#__PURE__*/__webpack_require__.n(lib_switch);

// EXTERNAL MODULE: ./node_modules/@ethersproject/abi/lib.esm/interface.js
var lib_esm_interface = __webpack_require__(1972);

// EXTERNAL MODULE: ./node_modules/@ethersproject/abi/lib.esm/fragments.js
var lib_esm_fragments = __webpack_require__(1603);

// EXTERNAL MODULE: ./node_modules/@ethersproject/abi/lib.esm/abi-coder.js + 10 modules
var abi_coder = __webpack_require__(1958);

// CONCATENATED MODULE: ./src/web3/abiInterface.ts
function parseValues(values){return values.map(function(item){if(typeof item==='string'){try{var value=JSON.parse(item);if(typeof value==='object'){return value;}}catch(_unused){}}return item;});}var abiInterface_AbiInterface=/*#__PURE__*/function(){function AbiInterface(fragments){Object(classCallCheck["a" /* default */])(this,AbiInterface);this.abi=void 0;this.abi=new lib_esm_interface["a" /* Interface */](fragments);}Object(createClass["a" /* default */])(AbiInterface,[{key:"writableFunctions",get:function get(){return Object.values(this.abi.functions).filter(function(fn){return!['view','pure'].includes(fn.stateMutability);});}},{key:"encodeFunctionData",value:function encodeFunctionData(functionFragment,values){return this.abi.encodeFunctionData(functionFragment,parseValues(values!==null&&values!==void 0?values:[]));}}],[{key:"encodeFunctionData",value:function encodeFunctionData(functionFragment,values){try{var fragment=typeof functionFragment==='string'?lib_esm_fragments["e" /* FunctionFragment */].fromString(functionFragment):functionFragment;return abi_coder["a" /* defaultAbiCoder */].encode(fragment.inputs,parseValues(values!==null&&values!==void 0?values:[]));}catch(e){console.error('AbiInterface::encodeFunctionData',e.message);}return undefined;}},{key:"decodeFunctionData",value:function decodeFunctionData(functionFragment,data){try{var fragment=typeof functionFragment==='string'?lib_esm_fragments["e" /* FunctionFragment */].fromString(functionFragment):functionFragment;var hexData=data.indexOf('0x')!==0?"0x".concat(data):data;return abi_coder["a" /* defaultAbiCoder */].decode(fragment.inputs,hexData);}catch(e){console.error('AbiInterface::decodeFunctionData',e.message);}return undefined;}},{key:"getFunctionFragmentFrom",value:function getFunctionFragmentFrom(signature){try{return lib_esm_fragments["e" /* FunctionFragment */].fromString(signature);}catch(e){console.error('AbiInterface::getFunctionFragmentFrom',e.message);}return undefined;}},{key:"stringifyParamValue",value:function stringifyParamValue(param){try{if(Array.isArray(param)){return JSON.stringify(param,null,2);}if(typeof(param===null||param===void 0?void 0:param.toString)==='function'){return param.toString();}return JSON.stringify(param,null,2);}catch(e){console.error('AbiInterface::stringifyParamValue',e.message);}return undefined;}}]);return AbiInterface;}();
// EXTERNAL MODULE: ./src/components/antd/select/index.tsx
var antd_select = __webpack_require__(458);

// EXTERNAL MODULE: ./src/components/antd/yes-no-selector/s.module.scss
var yes_no_selector_s_module = __webpack_require__(1915);
var yes_no_selector_s_module_default = /*#__PURE__*/__webpack_require__.n(yes_no_selector_s_module);

// CONCATENATED MODULE: ./src/components/antd/yes-no-selector/index.tsx
var yes_no_selector_excluded=["className"];var YesNoOptions=[{label:'Yes',value:true},{label:'No',value:false}];var yes_no_selector_YesNoSelector=function YesNoSelector(props){var className=props.className,groupProps=Object(objectWithoutProperties["a" /* default */])(props,yes_no_selector_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_default.a.Group,Object(objectSpread2["a" /* default */])({className:classnames_default()(yes_no_selector_s_module_default.a.component,className),options:YesNoOptions,optionType:"button",buttonStyle:"outline"},groupProps));};/* harmony default export */ var yes_no_selector = (yes_no_selector_YesNoSelector);
// EXTERNAL MODULE: ./src/components/providers/web3Provider.tsx + 1 modules
var web3Provider = __webpack_require__(37);

// EXTERNAL MODULE: ./src/components/antd/popover/index.tsx
var popover = __webpack_require__(246);

// CONCATENATED MODULE: ./src/modules/governance/components/add-zeros-popup/index.tsx
var add_zeros_popup_excluded=["max","onAdd"];var add_zeros_popup_AddZerosPopup=function AddZerosPopup(props){var max=props.max,onAdd=props.onAdd,popoverProps=Object(objectWithoutProperties["a" /* default */])(props,add_zeros_popup_excluded);var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),visible=_React$useState2[0],setVisible=_React$useState2[1];var _React$useState3=react_default.a.useState(''),_React$useState4=Object(slicedToArray["a" /* default */])(_React$useState3,2),value=_React$useState4[0],setValue=_React$useState4[1];function handleChange(ev){setValue(ev.target.value);}function handleCancel(){setVisible(false);setValue('');}function handleAddZeros(){setVisible(false);var val=Number(value);if(!Number.isNaN(val)){onAdd===null||onAdd===void 0?void 0:onAdd(val);}setValue('');}var content=/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:24,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Number of zeros"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"ghost",onClick:function onClick(){return setValue('6');},children:"6"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"ghost",onClick:function onClick(){return setValue('8');},children:"8"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"ghost",onClick:function onClick(){return setValue('18');},children:"18"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_input,{type:"number",value:value,max:max,placeholder:"Max ".concat(max),onChange:handleChange})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:"Use the options above to add trailing zeros to the input amount."}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:16,justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"ghost",onClick:handleCancel,children:"Cancel"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",onClick:handleAddZeros,children:"Add zeros"})]})]});return/*#__PURE__*/Object(jsx_runtime["jsx"])(popover["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({title:"Add zeros",placement:"bottomLeft",overlayStyle:{width:376},content:content,visible:visible,onVisibleChange:setVisible},popoverProps),{},{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"link",icon:/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"plus-square-outlined",width:16,height:16})})}));};/* harmony default export */ var add_zeros_popup = (add_zeros_popup_AddZerosPopup);
// EXTERNAL MODULE: ./node_modules/antd/lib/typography/index.js
var lib_typography = __webpack_require__(1924);
var typography_default = /*#__PURE__*/__webpack_require__.n(lib_typography);

// EXTERNAL MODULE: ./node_modules/antd/lib/menu/index.js
var menu = __webpack_require__(1508);
var menu_default = /*#__PURE__*/__webpack_require__.n(menu);

// EXTERNAL MODULE: ./node_modules/antd/lib/popover/index.js
var lib_popover = __webpack_require__(629);
var popover_default = /*#__PURE__*/__webpack_require__.n(lib_popover);

// EXTERNAL MODULE: ./src/components/antd/popover-menu/s.module.scss
var popover_menu_s_module = __webpack_require__(1916);
var popover_menu_s_module_default = /*#__PURE__*/__webpack_require__.n(popover_menu_s_module);

// CONCATENATED MODULE: ./src/components/antd/popover-menu/index.tsx
var popover_menu_excluded=["children","items","onClick"];var popover_menu_PopoverMenu=function PopoverMenu(props){var children=props.children,items=props.items,onClick=props.onClick,popoverProps=Object(objectWithoutProperties["a" /* default */])(props,popover_menu_excluded);var popoverRef=react_default.a.useRef();function handleMenuClick(info){var _props$onClick,_popoverRef$current;(_props$onClick=props.onClick)===null||_props$onClick===void 0?void 0:_props$onClick.call(props,info.key);(_popoverRef$current=popoverRef.current)===null||_popoverRef$current===void 0?void 0:_popoverRef$current.close();}return/*#__PURE__*/Object(jsx_runtime["jsx"])(popover_default.a,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({ref:popoverRef,overlayClassName:popover_menu_s_module_default.a.component,placement:"bottom",trigger:"click",content:/*#__PURE__*/Object(jsx_runtime["jsx"])(menu_default.a,{onClick:handleMenuClick,children:items===null||items===void 0?void 0:items.map(function(item){return/*#__PURE__*/Object(jsx_runtime["jsxs"])(menu_default.a.Item,{children:[item.icon,item.title]},item.key);})})},popoverProps),{},{children:children}));};/* harmony default export */ var popover_menu = (popover_menu_PopoverMenu);
// EXTERNAL MODULE: ./node_modules/antd/lib/card/index.js
var card = __webpack_require__(1918);
var card_default = /*#__PURE__*/__webpack_require__.n(card);

// EXTERNAL MODULE: ./src/components/custom/expandable-card/s.module.scss
var expandable_card_s_module = __webpack_require__(1917);
var expandable_card_s_module_default = /*#__PURE__*/__webpack_require__.n(expandable_card_s_module);

// CONCATENATED MODULE: ./src/components/custom/expandable-card/index.tsx
var expandable_card_excluded=["className","children","footer"];var expandable_card_ExpandableCard=function ExpandableCard(props){var className=props.className,children=props.children,footer=props.footer,cardProps=Object(objectWithoutProperties["a" /* default */])(props,expandable_card_excluded);return/*#__PURE__*/Object(jsx_runtime["jsxs"])(card_default.a,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:classnames_default()(expandable_card_s_module_default.a.component,className)},cardProps),{},{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:expandable_card_s_module_default.a.content,children:children}),footer&&/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:expandable_card_s_module_default.a.footer,children:footer})]}));};/* harmony default export */ var expandable_card = (expandable_card_ExpandableCard);
// EXTERNAL MODULE: ./src/modules/governance/components/proposal-action-card/s.module.scss
var proposal_action_card_s_module = __webpack_require__(1923);
var proposal_action_card_s_module_default = /*#__PURE__*/__webpack_require__.n(proposal_action_card_s_module);

// CONCATENATED MODULE: ./src/modules/governance/components/proposal-action-card/index.tsx
var proposal_action_card_excluded=["className","title","target","signature","callData","showSettings","onDeleteAction","onEditAction","children"];var proposal_action_card_ProposalActionCard=function ProposalActionCard(props){var className=props.className,title=props.title,target=props.target,signature=props.signature,callData=props.callData,showSettings=props.showSettings,onDeleteAction=props.onDeleteAction,onEditAction=props.onEditAction,children=props.children,cardProps=Object(objectWithoutProperties["a" /* default */])(props,proposal_action_card_excluded);var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),ellipsis=_React$useState2[0],setEllipsis=_React$useState2[1];var _React$useState3=react_default.a.useState(false),_React$useState4=Object(slicedToArray["a" /* default */])(_React$useState3,2),expanded=_React$useState4[0],setExpanded=_React$useState4[1];var _React$useState5=react_default.a.useState(false),_React$useState6=Object(slicedToArray["a" /* default */])(_React$useState5,2),isSignature=_React$useState6[0],showSignature=_React$useState6[1];var functionFragment=react_default.a.useMemo(function(){return abiInterface_AbiInterface.getFunctionFragmentFrom(signature);},[signature]);var functionParamValues=react_default.a.useMemo(function(){var _AbiInterface$decodeF;if(!functionFragment){return[];}return(_AbiInterface$decodeF=abiInterface_AbiInterface.decodeFunctionData(functionFragment,callData))!==null&&_AbiInterface$decodeF!==void 0?_AbiInterface$decodeF:[];},[functionFragment,callData]);var stringParams=react_default.a.useMemo(function(){var _params$join;var params=functionParamValues===null||functionParamValues===void 0?void 0:functionParamValues.map(function(param){return abiInterface_AbiInterface.stringifyParamValue(param);});return(_params$join=params===null||params===void 0?void 0:params.join(',\n'))!==null&&_params$join!==void 0?_params$join:'';},[functionParamValues]);var ActionMenuItems=[{key:'sig',icon:/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"chevron-right"}),title:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",children:isSignature?'Show transaction':'Show function signature'})},{key:'edit',icon:/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"pencil-outlined"}),title:'Edit action'},{key:'delete',icon:/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"bin-outlined",color:"red"}),title:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"red",children:"Delete action"})}];function handleEllipsis(isEllipsis){setEllipsis(isEllipsis);if(isEllipsis){setExpanded(!isEllipsis);}}function handleShowSignature(){showSignature(function(prevState){return!prevState;});}function handleExpand(){setExpanded(function(prevState){return!prevState;});}function handleActionMenu(key){if(key==='sig'){handleShowSignature();}else if(key==='edit'){onEditAction===null||onEditAction===void 0?void 0:onEditAction();}else if(key==='delete'){onDeleteAction===null||onDeleteAction===void 0?void 0:onDeleteAction();}}return/*#__PURE__*/Object(jsx_runtime["jsx"])(expandable_card,Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:className,title:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"primary",children:title}),extra:showSettings?/*#__PURE__*/Object(jsx_runtime["jsx"])(popover_menu,{items:ActionMenuItems,placement:"bottomLeft",onClick:function onClick(key){return handleActionMenu(String(key));},children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"link",icon:/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"gear"})})}):/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"link",onClick:handleShowSignature,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:isSignature?'Show transaction':'Show function signature'})}),footer:ellipsis||expanded?/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"col",align:"center",justify:"center",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"link",onClick:handleExpand,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:expanded?'Hide details':'Show more'})})}):null},cardProps),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:proposal_action_card_s_module_default.a.content,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["b" /* ExplorerAddressLink */],{address:target,query:"#writeContract",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",className:proposal_action_card_s_module_default.a.address,color:"blue",children:Object(utils["f" /* shortenAddr */])(target)})}),signature&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography_default.a.Paragraph,{className:classnames_default()(proposal_action_card_s_module_default.a.paragraph,expanded&&proposal_action_card_s_module_default.a.expanded),style:{maxWidth:'514px',overflowWrap:'anywhere'},ellipsis:{rows:expanded?9999:2,expandable:false,onEllipsis:handleEllipsis},children:[".",isSignature?signature:"".concat(functionFragment===null||functionFragment===void 0?void 0:functionFragment.name,"(").concat(stringParams,")")]})]})}));};/* harmony default export */ var proposal_action_card = (proposal_action_card_ProposalActionCard);
// CONCATENATED MODULE: ./src/modules/governance/components/simulated-proposal-action-modal/index.tsx
var simulated_proposal_action_modal_excluded=["targetAddress","functionSignature","functionEncodedParams"];var simulated_proposal_action_modal_SimulatedProposalActionModal=function SimulatedProposalActionModal(props){var targetAddress=props.targetAddress,functionSignature=props.functionSignature,functionEncodedParams=props.functionEncodedParams,modalProps=Object(objectWithoutProperties["a" /* default */])(props,simulated_proposal_action_modal_excluded);return/*#__PURE__*/Object(jsx_runtime["jsx"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({width:560},modalProps),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:24,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"warning-outlined",width:40,height:40,color:"red"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h3",weight:"semibold",color:"primary",children:"Action could not be simulated"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:"We run a simulation for every action before adding it to the proposal. The following action failed to simulate:"})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_action_card,{title:"",style:{width:'496px'},target:targetAddress,signature:functionSignature,callData:functionEncodedParams}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:"If you think this is a mistake, you can still add this action to the proposal."})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"default",onClick:modalProps.onOk,children:"Continue anyway"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",onClick:modalProps.onCancel,children:"Go back"})]})]})}));};/* harmony default export */ var simulated_proposal_action_modal = (simulated_proposal_action_modal_SimulatedProposalActionModal);
// EXTERNAL MODULE: ./src/modules/governance/components/create-proposal-action-modal/s.module.scss
var create_proposal_action_modal_s_module = __webpack_require__(1941);
var create_proposal_action_modal_s_module_default = /*#__PURE__*/__webpack_require__.n(create_proposal_action_modal_s_module);

// CONCATENATED MODULE: ./src/modules/governance/components/create-proposal-action-modal/index.tsx
var InitialFormValues={targetAddress:'',isProxyAddress:false,implementationAddress:'',addValueAttribute:false,actionValue:'',addFunctionCall:false,abiLoading:false,abiInterface:undefined,functionSignature:'',functionMeta:undefined,functionParams:{},functionStrParams:'',functionEncodedParams:''};var create_proposal_action_modal_InitialState={showSimulatedActionModal:false,simulatedAction:undefined,simulationResolve:undefined,simulationReject:undefined,formDirty:false,submitting:false};var create_proposal_action_modal_CreateProposalActionModal=function CreateProposalActionModal(props){var _props$edit=props.edit,edit=_props$edit===void 0?false:_props$edit,_props$initialValues=props.initialValues,initialValues=_props$initialValues===void 0?InitialFormValues:_props$initialValues;var _useNetwork=Object(networkProvider["b" /* useNetwork */])(),activeNetwork=_useNetwork.activeNetwork;var config=Object(configProvider["b" /* useConfig */])();var web3=Object(web3Provider["d" /* useWeb3 */])();var _AntdForm$useForm=form_default.a.useForm(),_AntdForm$useForm2=Object(slicedToArray["a" /* default */])(_AntdForm$useForm,1),form=_AntdForm$useForm2[0];var _useMergeState=Object(useMergeState["a" /* default */])(create_proposal_action_modal_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];function loadAbiInterface(address){form.setFieldsValue({abiLoading:true});var url="".concat(activeNetwork.explorer.apiUrl,"/api?module=contract&action=getabi&address=").concat(address,"&apikey=").concat(activeNetwork.explorer.key);fetch(url).then(function(result){return result.json();}).then(function(_ref){var status=_ref.status,result=_ref.result;if(status==='1'){return JSON.parse(result);}return Promise.reject(result);}).then(function(abi){form.setFieldsValue({abiInterface:new abiInterface_AbiInterface(abi)});}).catch(Error).then(function(){form.setFieldsValue({abiLoading:false});});}function handleFormValuesChange(values,allValues){var targetAddress=allValues.targetAddress,isProxyAddress=allValues.isProxyAddress,implementationAddress=allValues.implementationAddress,addFunctionCall=allValues.addFunctionCall,abiInterface=allValues.abiInterface,functionSignature=allValues.functionSignature,functionMeta=allValues.functionMeta,functionParams=allValues.functionParams;Object.keys(values).forEach(function(fieldName){if(fieldName==='targetAddress'||fieldName==='implementationAddress'){form.setFieldsValue({abiLoading:false,abiInterface:undefined,functionSignature:'',functionMeta:undefined,functionParams:{},functionStrParams:'',functionEncodedParams:''});var address=implementationAddress||targetAddress;if(addFunctionCall===true&&address){loadAbiInterface(address);}}else if(fieldName==='isProxyAddress'){if(!isProxyAddress&&implementationAddress){form.setFieldsValue({abiLoading:false,abiInterface:undefined,functionSignature:'',functionMeta:undefined,functionParams:{},functionStrParams:'',functionEncodedParams:''});if(addFunctionCall===true&&targetAddress){loadAbiInterface(targetAddress);}}}else if(fieldName==='addValueAttribute'){form.setFieldsValue({actionValue:''});}else if(fieldName==='addFunctionCall'){form.setFieldsValue({abiLoading:false,abiInterface:undefined,functionSignature:'',functionMeta:undefined,functionParams:{},functionStrParams:'',functionEncodedParams:''});var _address=implementationAddress||targetAddress;if(addFunctionCall===true&&_address){loadAbiInterface(_address);}}else if(fieldName==='functionSignature'){var _abiInterface$writabl;var selectedFunctionMeta=((_abiInterface$writabl=abiInterface===null||abiInterface===void 0?void 0:abiInterface.writableFunctions)!==null&&_abiInterface$writabl!==void 0?_abiInterface$writabl:[]).find(function(fn){return fn.format()===functionSignature;});var functionStrParams='';if(selectedFunctionMeta){var params=selectedFunctionMeta.inputs.map(function(_ref2){var name=_ref2.name,type=_ref2.type;return{name:name,type:type};});var paramsStr=JSON.stringify(params,null,2);functionStrParams="Parameters:\n".concat(paramsStr);}form.setFieldsValue({functionMeta:selectedFunctionMeta,functionParams:{},functionStrParams:functionStrParams,functionEncodedParams:''});}else if(fieldName==='functionParams'){if(functionMeta){var paramsValues=Object.values(functionParams);var encodedParams=abiInterface_AbiInterface.encodeFunctionData(functionMeta,paramsValues);form.setFieldsValue({functionEncodedParams:encodedParams});}}});setState({formDirty:form.isFieldsTouched()});}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var existsSimilar,cancel,_values$abiInterface,_values$functionParam,encodedFunction,_config$contracts$dao,_props$onCancel;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:existsSimilar=props.actions.some(function(action){return action!==values&&action.addFunctionCall&&action.targetAddress===values.targetAddress&&action.functionSignature===values.functionSignature&&action.functionEncodedParams===values.functionEncodedParams;});if(!existsSimilar){_context.next=4;break;}notification_default.a.error({message:'Duplicate actions are disallowed!'});return _context.abrupt("return");case 4:setState({submitting:true});cancel=false;_context.prev=6;_context.next=9;return form.validateFields();case 9:if(!values.addFunctionCall){_context.next=20;break;}encodedFunction=(_values$abiInterface=values.abiInterface)===null||_values$abiInterface===void 0?void 0:_values$abiInterface.encodeFunctionData(values.functionMeta,Object.values((_values$functionParam=values.functionParams)!==null&&_values$functionParam!==void 0?_values$functionParam:{}));_context.prev=11;_context.next=14;return web3.tryCall(values.targetAddress,(_config$contracts$dao=config.contracts.dao)===null||_config$contracts$dao===void 0?void 0:_config$contracts$dao.governance,encodedFunction,values.actionValue);case 14:_context.next=20;break;case 16:_context.prev=16;_context.t0=_context["catch"](11);_context.next=20;return new Promise(function(resolve,reject){setState({showSimulatedActionModal:true,simulatedAction:values,simulationResolve:resolve,simulationReject:reject});});case 20:_context.next=22;return props.onSubmit(values);case 22:form.resetFields();cancel=true;_context.next=29;break;case 26:_context.prev=26;_context.t1=_context["catch"](6);if(_context.t1===null||_context.t1===void 0?void 0:_context.t1.message){notification_default.a.error({message:_context.t1===null||_context.t1===void 0?void 0:_context.t1.message});}case 29:setState({submitting:false});if(cancel){(_props$onCancel=props.onCancel)===null||_props$onCancel===void 0?void 0:_props$onCancel.call(props);}case 31:case"end":return _context.stop();}}},_callee,null,[[6,26],[11,16]]);}));return _handleSubmit.apply(this,arguments);}function handleSimulatedAction(answer){if(answer){var _state$simulationReso;(_state$simulationReso=state.simulationResolve)===null||_state$simulationReso===void 0?void 0:_state$simulationReso.call(state);}else{var _state$simulationReje;(_state$simulationReje=state.simulationReject)===null||_state$simulationReje===void 0?void 0:_state$simulationReje.call(state);}setState({showSimulatedActionModal:false,simulationResolve:undefined,simulationReject:undefined});}react_default.a.useEffect(function(){if(initialValues!==InitialFormValues){form.resetFields();form.setFieldsValue(initialValues);}},[initialValues]);return/*#__PURE__*/Object(jsx_runtime["jsx"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:create_proposal_action_modal_s_module_default.a.component,confirmClose:state.formDirty,confirmText:"Are you sure you want to close this form?"},props),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:create_proposal_action_modal_s_module_default.a.wrap,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h2",weight:"semibold",className:create_proposal_action_modal_s_module_default.a.headerLabel,color:"primary",children:edit?'Edit action':'Add new action'}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_form,{className:create_proposal_action_modal_s_module_default.a.form,form:form,initialValues:{},validateTrigger:['onSubmit','onChange'],onValuesChange:handleFormValuesChange,onFinish:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"targetAddress",label:"Target address",hint:"This is the address to which the transaction will be sent.",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_input,{disabled:state.submitting})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",align:"center",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:"In case you are using a proxy address as the target, please specify the address where the function implementation is found.",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Is this a proxy address?"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"isProxyAddress",noStyle:true,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(switch_default.a,{disabled:state.submitting})})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{dependencies:['isProxyAddress'],noStyle:true,children:function children(_ref3){var getFieldsValue=_ref3.getFieldsValue;var _getFieldsValue=getFieldsValue(),isProxyAddress=_getFieldsValue.isProxyAddress;return isProxyAddress===true&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"implementationAddress",hidden:!isProxyAddress,preserve:false,rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_input,{placeholder:"Implementation address",disabled:state.submitting})});}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"addValueAttribute",label:"Add a value attribute to your action?",hint:"This field allows you to send some ETH along with your transaction.",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(yes_no_selector,{disabled:state.submitting})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{shouldUpdate:function shouldUpdate(prevValue){return prevValue.addValueAttribute===true;},noStyle:true,children:function children(_ref4){var _actionValue$length;var getFieldsValue=_ref4.getFieldsValue;var _getFieldsValue2=getFieldsValue(),addValueAttribute=_getFieldsValue2.addValueAttribute,actionValue=_getFieldsValue2.actionValue;var max=78-((_actionValue$length=actionValue===null||actionValue===void 0?void 0:actionValue.length)!==null&&_actionValue$length!==void 0?_actionValue$length:0);return addValueAttribute===true&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"actionValue",label:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Action Value"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(add_zeros_popup,{max:max,onAdd:function onAdd(value){var _getFieldsValue3=getFieldsValue(),prevActionValue=_getFieldsValue3.actionValue;if(prevActionValue){var zeros='0'.repeat(value);form.setFieldsValue({actionValue:"".concat(prevActionValue).concat(zeros)});}}})]}),preserve:false,rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_input,{disabled:state.submitting})});}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"addFunctionCall",label:"Add a function call to your action?",hint:"This field allows you to call a function on a smart contract.",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(yes_no_selector,{disabled:state.submitting})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"abiLoading",preserve:false,hidden:true,noStyle:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"abiInterface",preserve:false,hidden:true,noStyle:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"functionMeta",preserve:false,hidden:true,noStyle:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"functionStrParams",preserve:false,hidden:true,noStyle:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"functionEncodedParams",preserve:false,hidden:true,noStyle:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{shouldUpdate:function shouldUpdate(prevValues){return prevValues.addFunctionCall===true;},noStyle:true,children:function children(_ref5){var _abiInterface$writabl2;var getFieldsValue=_ref5.getFieldsValue;var _getFieldsValue4=getFieldsValue(),targetAddress=_getFieldsValue4.targetAddress,addFunctionCall=_getFieldsValue4.addFunctionCall,abiLoading=_getFieldsValue4.abiLoading,abiInterface=_getFieldsValue4.abiInterface,functionMeta=_getFieldsValue4.functionMeta,functionParams=_getFieldsValue4.functionParams,functionStrParams=_getFieldsValue4.functionStrParams,functionEncodedParams=_getFieldsValue4.functionEncodedParams;if(addFunctionCall!==true){return null;}var functionOptions=(_abiInterface$writabl2=abiInterface===null||abiInterface===void 0?void 0:abiInterface.writableFunctions.map(function(fn){return{label:fn.format(),value:fn.format()};}))!==null&&_abiInterface$writabl2!==void 0?_abiInterface$writabl2:[];return/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"functionSignature",label:"Select function",preserve:false,rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_select["a" /* default */],{loading:abiLoading,disabled:state.submitting,options:functionOptions,fixScroll:true})}),functionMeta&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,children:[functionMeta.inputs.map(function(input){return/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:['functionParams',input.name],label:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:[input.name," (",input.type,")"]}),/(u?int\d+)/g.test(input.type)&&/*#__PURE__*/Object(jsx_runtime["jsx"])(add_zeros_popup,{onAdd:function onAdd(value){var prevActionValue=functionParams[input.name];if(prevActionValue){var zeros='0'.repeat(value);functionParams[input.name]="".concat(prevActionValue).concat(zeros);var paramsValues=Object.values(functionParams);var encodedParams=abiInterface_AbiInterface.encodeFunctionData(functionMeta,paramsValues);form.setFieldsValue({functionParams:functionParams,functionEncodedParams:encodedParams});}}})]}),preserve:false,rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_input,{disabled:state.submitting,placeholder:"".concat(input.name," (").concat(input.type,")")})},"".concat(functionMeta===null||functionMeta===void 0?void 0:functionMeta.format(),":").concat(input.name));}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{label:"Function type: ".concat(functionMeta.name),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_textarea,{className:create_proposal_action_modal_s_module_default.a.textarea,rows:5,value:functionStrParams,disabled:true})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{label:"Hex data",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_textarea,{className:create_proposal_action_modal_s_module_default.a.textarea,rows:5,placeholder:"Fill in the arguments above",value:functionEncodedParams,disabled:true})})]}),targetAddress&&addFunctionCall&&!abiLoading&&!abiInterface&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{type:"error",message:"The target address you entered is not a validated contract address. Please check the information you entered and try again"})]});}}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{dependencies:['addValueAttribute','addFunctionCall'],noStyle:true,children:function children(_ref6){var getFieldsValue=_ref6.getFieldsValue;var _getFieldsValue5=getFieldsValue(),addValueAttribute=_getFieldsValue5.addValueAttribute,addFunctionCall=_getFieldsValue5.addFunctionCall;return addValueAttribute===false&&addFunctionCall===false&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{type:"error",message:"You need to provide at least one: a value attribute or a function call to your action"});}}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:create_proposal_action_modal_s_module_default.a.actions,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("button",{type:"button",disabled:state.submitting,onClick:props.onCancel,className:"button-ghost-monochrome",children:edit?'Cancel Changes':'Cancel'}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{className:"button-primary",type:"submit",children:[state.submitting&&/*#__PURE__*/Object(jsx_runtime["jsx"])(spin_default.a,{spinning:true}),edit?'Save Changes':'Add Action']})]})]}),state.showSimulatedActionModal&&state.simulatedAction&&/*#__PURE__*/Object(jsx_runtime["jsx"])(simulated_proposal_action_modal,{targetAddress:state.simulatedAction.targetAddress,functionSignature:state.simulatedAction.functionSignature,functionEncodedParams:state.simulatedAction.functionEncodedParams,onOk:function onOk(){return handleSimulatedAction(true);},onCancel:function onCancel(){return handleSimulatedAction(false);}})]})}));};/* harmony default export */ var create_proposal_action_modal = (create_proposal_action_modal_CreateProposalActionModal);
// CONCATENATED MODULE: ./src/modules/governance/components/delete-proposal-action-modal/index.tsx
var delete_proposal_action_modal_DeleteProposalActionModal=function DeleteProposalActionModal(props){var modalProps=Object.assign({},props);return/*#__PURE__*/Object(jsx_runtime["jsx"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({width:560},modalProps),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-32",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex col-gap-16 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"warning-outlined",width:40,height:40,color:"red"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h3",weight:"semibold",color:"primary",children:"Are you sure you want to delete the action?"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex justify-space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"default",onClick:modalProps.onCancel,children:"Cancel"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",onClick:modalProps.onOk,children:"Delete Action"})]})]})}));};/* harmony default export */ var delete_proposal_action_modal = (delete_proposal_action_modal_DeleteProposalActionModal);
// EXTERNAL MODULE: ./src/modules/governance/views/proposal-create-view/s.module.scss
var proposal_create_view_s_module = __webpack_require__(1944);
var proposal_create_view_s_module_default = /*#__PURE__*/__webpack_require__.n(proposal_create_view_s_module);

// CONCATENATED MODULE: ./src/modules/governance/views/proposal-create-view/index.tsx
var proposal_create_view_InitialState={hasActiveProposal:undefined,showCreateActionModal:false,showDeleteActionModal:false,selectedAction:undefined,submitting:false};var proposal_create_view_ProposalCreateView=function ProposalCreateView(){var history=Object(react_router["g" /* useHistory */])();var daoAPI=useDaoAPI();var daoCtx=useDAO();var wallet=Object(wallets_walletProvider["c" /* useWallet */])();var _AntdForm$useForm=form_default.a.useForm(),_AntdForm$useForm2=Object(slicedToArray["a" /* default */])(_AntdForm$useForm,1),form=_AntdForm$useForm2[0];var _useMergeState=Object(useMergeState["a" /* default */])(proposal_create_view_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];function handleBackClick(){history.push('/governance/proposals');}function handleCreateAction(payload){var actions=form.getFieldValue('actions');if(state.selectedAction){actions=actions.map(function(action){return action===state.selectedAction?payload:action;});}else{actions.push(payload);}form.setFieldsValue({actions:actions});}function handleActionDelete(){var selectedAction=state.selectedAction;if(selectedAction){form.setFieldsValue({actions:form.getFieldValue('actions').filter(function(action){return action!==selectedAction;})});}setState({showDeleteActionModal:false,selectedAction:undefined});}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var payload,proposalId;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setState({submitting:true});_context.prev=1;_context.next=4;return form.validateFields();case 4:payload=Object(objectSpread2["a" /* default */])({title:values.title,description:values.description},values.actions.reduce(function(a,c){if(!c.targetAddress){return a;}a.targets.push(c.targetAddress);if(c.addFunctionCall){a.signatures.push(c.functionSignature);a.calldatas.push(c.functionEncodedParams||'0x');}else{a.signatures.push('');a.calldatas.push('0x');}if(c.addValueAttribute){a.values.push(c.actionValue);}else{a.values.push('0');}return a;},{targets:[],signatures:[],calldatas:[],values:[]}));_context.next=7;return daoCtx.daoGovernance.propose(payload.title,payload.description,payload.targets,payload.values,payload.signatures,payload.calldatas,1);case 7:proposalId=_context.sent;_context.next=10;return Object(async_wait_until_dist_index_esm["a" /* waitUntil */])(function(){return daoAPI.fetchProposal(proposalId);},{intervalBetweenAttempts:3000,timeout:Infinity});case 10:form.resetFields();history.push("/governance/proposals/".concat(proposalId));_context.next=17;break;case 14:_context.prev=14;_context.t0=_context["catch"](1);console.error(_context.t0);case 17:setState({submitting:false});case 18:case"end":return _context.stop();}}},_callee,null,[[1,14]]);}));return _handleSubmit.apply(this,arguments);}react_default.a.useEffect(function(){daoCtx.actions.hasActiveProposal().then(function(hasActiveProposal){setState({hasActiveProposal:hasActiveProposal});});},[wallet.account]);if(!wallet.initialized){return null;}if(!wallet.isActive){return/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["a" /* Redirect */],{to:"/governance/proposals"});}var hasCreateRestrictions=state.hasActiveProposal!==undefined&&daoCtx.actions.hasThreshold()!==undefined;if(daoCtx.isActive===undefined||!hasCreateRestrictions){return null;}var canCreateProposal=state.hasActiveProposal===false&&daoCtx.actions.hasThreshold()===true;if(!daoCtx.isActive||!canCreateProposal){return/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["a" /* Redirect */],{to:"/governance/proposals"});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-limit",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"mb-16",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"button",onClick:handleBackClick,className:"button-text",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"arrow-back",width:16,height:16,className:"mr-8",color:"inherit"}),"Proposals"]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h1",weight:"bold",color:"primary",className:"mb-16",children:"Create Proposal"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_form,{form:form,initialValues:{title:'',description:'',actions:[]},validateTrigger:['onSubmit','onChange'],onFinish:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:classnames_default()(proposal_create_view_s_module_default.a.cardsContainer,'mb-40'),children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Proposal description"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-24 p-24",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"title",label:"Title",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_input,{placeholder:"Proposal title",disabled:state.submitting})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"description",label:"Description",hint:"Be careful with the length of the description, this will eventually have to be stored on chain and the gas needed might make the proposal creation transaction more expensive.",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_textarea,{placeholder:"Please enter the goal of this proposal here",rows:6,disabled:state.submitting})})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Actions"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"p-24",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.List,{name:"actions",rules:[{validator:function validator(_,value){return value.length===0?Promise.reject():Promise.resolve();},message:'At least one action is required!'},{validator:function validator(_,value){return value.length>10?Promise.reject():Promise.resolve();},message:'Maximum 10 actions are allowed!'}],children:function children(fields,_,_ref){var errors=_ref.errors;return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[fields.map(function(field,index){var fieldData=form.getFieldValue(['actions',index]);var targetAddress=fieldData.targetAddress,functionSignature=fieldData.functionSignature,functionEncodedParams=fieldData.functionEncodedParams;return/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{noStyle:true,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_action_card,{className:"mb-24",title:"Action ".concat(index+1),target:targetAddress,signature:functionSignature,callData:functionEncodedParams,showSettings:true,onDeleteAction:function onDeleteAction(){setState({showDeleteActionModal:true,selectedAction:fieldData});},onEditAction:function onEditAction(){setState({showCreateActionModal:true,selectedAction:fieldData});}})},field.key);}),fields.length<10&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"ghost",icon:/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"plus-circle-outlined",color:"inherit"}),disabled:state.submitting,className:proposal_create_view_s_module_default.a.addActionBtn,onClick:function onClick(){return setState({showCreateActionModal:true});},children:"Add new action"}),fields.length>=10&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{type:"info",message:"Maximum 10 actions are allowed."}),/*#__PURE__*/Object(jsx_runtime["jsx"])(form_default.a.ErrorList,{errors:errors})]});}})})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",htmlType:"submit",size:"large",loading:state.submitting,children:"Create proposal"})})]}),state.showCreateActionModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(create_proposal_action_modal,{edit:state.selectedAction!==undefined,actions:form.getFieldValue('actions'),initialValues:state.selectedAction,onCancel:function onCancel(){return setState({showCreateActionModal:false,selectedAction:undefined});},onSubmit:handleCreateAction}),state.showDeleteActionModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(delete_proposal_action_modal,{onCancel:function onCancel(){return setState({showDeleteActionModal:false,selectedAction:undefined});},onOk:handleActionDelete})]});};/* harmony default export */ var proposal_create_view = (proposal_create_view_ProposalCreateView);
// EXTERNAL MODULE: ./node_modules/antd/es/notification/index.js + 11 modules
var es_notification = __webpack_require__(1378);

// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/providers/ProposalProvider/index.tsx
var ProposalProvider_InitialState={minThreshold:1};var ProposalProvider_Context=/*#__PURE__*/react_default.a.createContext(Object(utils_context["a" /* InvariantContext */])('ProposalProvider'));function useProposal(){return react_default.a.useContext(ProposalProvider_Context);}var ProposalProvider_ProposalProvider=function ProposalProvider(props){var proposalId=props.proposalId,children=props.children;var history=Object(react_router["g" /* useHistory */])();var wallet=Object(wallets_walletProvider["c" /* useWallet */])();var daoAPI=useDaoAPI();var daoCtx=useDAO();var _useReload=Object(useReload["a" /* useReload */])(),_useReload2=Object(slicedToArray["a" /* default */])(_useReload,2),reload=_useReload2[0],version=_useReload2[1];var _useMergeState=Object(useMergeState["a" /* default */])(ProposalProvider_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];react_default.a.useEffect(function(){if(!proposalId){setState({proposal:undefined});return;}daoAPI.fetchProposal(proposalId).then(function(proposal){setState({proposal:proposal});}).catch(function(status){if(status===404){es_notification["a" /* default */].error({message:"Proposal with id=".concat(proposalId," doesn't exist.")});}else{es_notification["a" /* default */].error({message:"Failed to fetch proposal with id=".concat(proposalId,". (Status: ").concat(status,")")});}history.push('/governance/proposals');});},[proposalId,version]);react_default.a.useEffect(function(){setState({forRate:undefined,againstRate:undefined,quorum:undefined,isCanceled:undefined});if(!state.proposal){return;}var _state$proposal=state.proposal,forVotes=_state$proposal.forVotes,againstVotes=_state$proposal.againstVotes,createTime=_state$proposal.createTime,warmUpDuration=_state$proposal.warmUpDuration;var total=forVotes.plus(againstVotes);var forRate=0;var againstRate=0;if(total.gt(bignumber_default.a.ZERO)){forRate=forVotes.multipliedBy(100).div(total).toNumber();againstRate=againstVotes.multipliedBy(100).div(total).toNumber();}setState({forRate:forRate,againstRate:againstRate});daoCtx.daoBarn.getBondStakedAtTs(createTime+warmUpDuration).then(function(bondStakedAt){var quorum;if(bondStakedAt===null||bondStakedAt===void 0?void 0:bondStakedAt.gt(bignumber_default.a.ZERO)){quorum=total.multipliedBy(100).div(bondStakedAt).toNumber();}setState({quorum:quorum});});daoCtx.daoGovernance.getAbrogationProposals(state.proposal.proposalId).then(function(result){if(result){setState({isCanceled:result.createTime>0});}});},[state.proposal]);react_default.a.useEffect(function(){setState({thresholdRate:undefined});var bondStaked=daoCtx.daoBarn.bondStaked;if(!state.proposal||!bondStaked||bondStaked.isEqualTo(bignumber_default.a.ZERO)){return;}var proposer=state.proposal.proposer;daoCtx.daoBarn.getVotingPower(proposer).then(function(votingPower){if(votingPower){setState({thresholdRate:votingPower.div(bondStaked).multipliedBy(100).toNumber()});}});},[state.proposal,daoCtx.daoBarn.bondStaked]);react_default.a.useEffect(function(){setState({receipt:undefined,votingPower:undefined});if(!state.proposal||!wallet.isActive){return;}var _state$proposal2=state.proposal,createTime=_state$proposal2.createTime,warmUpDuration=_state$proposal2.warmUpDuration;daoCtx.daoGovernance.getReceipt(state.proposal.proposalId,wallet.account).then(function(receipt){setState({receipt:receipt});});daoCtx.daoBarn.getVotingPowerAtTs(wallet.account,createTime+warmUpDuration).then(function(votingPower){setState({votingPower:votingPower});});},[state.proposal,wallet.account]);function cancelProposal(){return proposalId?daoCtx.daoGovernance.cancelProposal(proposalId).then(function(){return reload();}):Promise.reject();}function queueProposalForExecution(gasPrice){return proposalId?daoCtx.daoGovernance.queue(proposalId,gasPrice).then(function(){return reload();}):Promise.reject();}function executeProposal(){return proposalId?daoCtx.daoGovernance.execute(proposalId).then(function(){return reload();}):Promise.reject();}function proposalCastVote(support,gasPrice){return proposalId?daoCtx.daoGovernance.castVote(proposalId,support,gasPrice).then(function(){return reload();}):Promise.reject();}function proposalCancelVote(gasPrice){return proposalId?daoCtx.daoGovernance.cancelVote(proposalId,gasPrice).then(function(){return reload();}):Promise.reject();}function startAbrogationProposal(description,gasPrice){return proposalId?daoCtx.daoGovernance.startAbrogationProposal(proposalId,description,gasPrice).then(function(){return reload();}):Promise.reject();}return/*#__PURE__*/Object(jsx_runtime["jsx"])(ProposalProvider_Context.Provider,{value:Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{reload:reload,cancelProposal:cancelProposal,queueProposalForExecution:queueProposalForExecution,executeProposal:executeProposal,proposalCastVote:proposalCastVote,proposalCancelVote:proposalCancelVote,startAbrogationProposal:startAbrogationProposal}),children:children});};/* harmony default export */ var providers_ProposalProvider = (ProposalProvider_ProposalProvider);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/providers/AbrogationProvider/index.tsx
var AbrogationProvider_InitialState={acceptanceThreshold:50};var AbrogationProvider_Context=/*#__PURE__*/react_default.a.createContext(Object(utils_context["a" /* InvariantContext */])('AbrogationProvider'));function useAbrogation(){return react_default.a.useContext(AbrogationProvider_Context);}var AbrogationProvider_AbrogationProvider=function AbrogationProvider(props){var children=props.children;var history=Object(react_router["g" /* useHistory */])();var _useReload=Object(useReload["a" /* useReload */])(),_useReload2=Object(slicedToArray["a" /* default */])(_useReload,2),reload=_useReload2[0],version=_useReload2[1];var wallet=Object(wallets_walletProvider["c" /* useWallet */])();var daoAPI=useDaoAPI();var daoCtx=useDAO();var _useProposal=useProposal(),proposal=_useProposal.proposal;var _useMergeState=Object(useMergeState["a" /* default */])(AbrogationProvider_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];react_default.a.useEffect(function(){if(!proposal){setState({abrogation:undefined});return;}daoAPI.fetchAbrogation(proposal.proposalId).then(function(abrogation){setState({abrogation:abrogation});}).catch(function(status){if(status===404){es_notification["a" /* default */].error({message:"Proposal with id=".concat(proposal.proposalId," doesn't exist.")});}else{es_notification["a" /* default */].error({message:"Failed to fetch proposal with id=".concat(proposal.proposalId,". (Status: ").concat(status,")")});}history.push("/governance/proposals/".concat(proposal.proposalId));});},[proposal,version]);react_default.a.useEffect(function(){setState({forRate:undefined,againstRate:undefined});if(!state.abrogation){return;}var _state$abrogation=state.abrogation,forVotes=_state$abrogation.forVotes,againstVotes=_state$abrogation.againstVotes,createTime=_state$abrogation.createTime;var total=forVotes.plus(againstVotes);var forRate=0;var againstRate=0;if(total.gt(bignumber_default.a.ZERO)){forRate=forVotes.multipliedBy(100).div(total).toNumber();againstRate=againstVotes.multipliedBy(100).div(total).toNumber();}setState({forRate:forRate,againstRate:againstRate});daoCtx.daoBarn.getBondStakedAtTs(createTime-1).then(function(bondStakedAt){var approvalRate;if(bondStakedAt===null||bondStakedAt===void 0?void 0:bondStakedAt.gt(bignumber_default.a.ZERO)){approvalRate=forVotes.multipliedBy(100).div(bondStakedAt).toNumber();approvalRate=Math.min(approvalRate,100);}setState({approvalRate:approvalRate});});},[state.abrogation]);react_default.a.useEffect(function(){setState({approvalRate:undefined});if(!state.abrogation||!wallet.account){return;}var _state$abrogation2=state.abrogation,proposalId=_state$abrogation2.proposalId,createTime=_state$abrogation2.createTime;daoCtx.daoBarn.getVotingPowerAtTs(wallet.account,createTime-1).then(function(votingPower){setState({votingPower:votingPower});});daoCtx.daoGovernance.getAbrogationProposalReceipt(proposalId,wallet.account).then(function(receipt){setState({receipt:receipt});});},[state.abrogation,wallet.account]);function abrogationProposalCastVote(support,gasPrice){return(proposal===null||proposal===void 0?void 0:proposal.proposalId)?daoCtx.daoGovernance.abrogationProposalCastVote(proposal===null||proposal===void 0?void 0:proposal.proposalId,support,gasPrice).then(function(){return reload();}):Promise.reject();}function abrogationProposalCancelVote(gasPrice){return(proposal===null||proposal===void 0?void 0:proposal.proposalId)?daoCtx.daoGovernance.abrogationProposalCancelVote(proposal===null||proposal===void 0?void 0:proposal.proposalId,gasPrice).then(function(){return reload();}):Promise.reject();}return/*#__PURE__*/Object(jsx_runtime["jsx"])(AbrogationProvider_Context.Provider,{value:Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{reload:reload,abrogationProposalCastVote:abrogationProposalCastVote,abrogationProposalCancelVote:abrogationProposalCancelVote}),children:children});};/* harmony default export */ var providers_AbrogationProvider = (AbrogationProvider_AbrogationProvider);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/abrogation-approval-card/index.tsx
var abrogation_approval_card_AbrogationApprovalCard=function AbrogationApprovalCard(){var _abrogationCtx$approv,_abrogationCtx$accept,_abrogationCtx$approv2;var abrogationCtx=useAbrogation();var passed=((_abrogationCtx$approv=abrogationCtx.approvalRate)!==null&&_abrogationCtx$approv!==void 0?_abrogationCtx$approv:0)>=((_abrogationCtx$accept=abrogationCtx.acceptanceThreshold)!==null&&_abrogationCtx$accept!==void 0?_abrogationCtx$accept:0);return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if \u201CApproval\u201D is set to 51%, then more than 51% of the votes on a proposal must vote \u201CYes\u201D for the proposal to pass.",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Abrogation proposal approval"})})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{className:"p-24",flow:"row",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:[(_abrogationCtx$approv2=abrogationCtx.approvalRate)===null||_abrogationCtx$approv2===void 0?void 0:_abrogationCtx$approv2.toFixed(2),"%"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(> ",abrogationCtx.acceptanceThreshold,"% required)"]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:abrogationCtx.approvalRate,acceptance:abrogationCtx.acceptanceThreshold,strokeColor:passed?'var(--theme-green-color)':'var(--theme-red-color)',trailColor:passed?'rgba(var(--theme-green-color-rgb), .16)':'rgba(var(--theme-red-color-rgb), .16)'})]})]});};/* harmony default export */ var abrogation_approval_card = (abrogation_approval_card_AbrogationApprovalCard);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/abrogation-details-card/index.tsx
var abrogation_details_card_AbrogationDetailsCard=function AbrogationDetailsCard(){var _abrogationCtx$abroga,_abrogationCtx$abroga2,_abrogationCtx$abroga3,_abrogationCtx$abroga4;var abrogationCtx=useAbrogation();return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Details"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"col",gap:32,justify:"space-between",padding:24,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"col",gap:32,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Created by"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(identicon["a" /* default */],{address:(_abrogationCtx$abroga=abrogationCtx.abrogation)===null||_abrogationCtx$abroga===void 0?void 0:_abrogationCtx$abroga.caller,width:24,height:24}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["b" /* ExplorerAddressLink */],{address:(_abrogationCtx$abroga2=abrogationCtx.abrogation)===null||_abrogationCtx$abroga2===void 0?void 0:_abrogationCtx$abroga2.caller,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"blue",children:Object(utils["f" /* shortenAddr */])((_abrogationCtx$abroga3=abrogationCtx.abrogation)===null||_abrogationCtx$abroga3===void 0?void 0:_abrogationCtx$abroga3.caller)})})]})]})})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_divider,{}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:16,padding:24,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Description"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"primary",wrap:true,children:(_abrogationCtx$abroga4=abrogationCtx.abrogation)===null||_abrogationCtx$abroga4===void 0?void 0:_abrogationCtx$abroga4.description})]})]});};/* harmony default export */ var abrogation_details_card = (abrogation_details_card_AbrogationDetailsCard);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/providers/AbrogationVotersProvider/index.tsx
var AbrogationVotersProvider_InitialState={votes:[],total:0,page:1,pageSize:10,loading:false,supportFilter:undefined};var AbrogationVotersProvider_Context=/*#__PURE__*/react_default.a.createContext(Object(utils_context["a" /* InvariantContext */])('AbrogationVotersProvider'));function useAbrogationVoters(){return react_default.a.useContext(AbrogationVotersProvider_Context);}var AbrogationVotersProvider_AbrogationVotersProvider=function AbrogationVotersProvider(props){var children=props.children;var daoAPI=useDaoAPI();var _useAbrogation=useAbrogation(),abrogation=_useAbrogation.abrogation;var _useMergeState=Object(useMergeState["a" /* default */])(AbrogationVotersProvider_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];react_default.a.useEffect(function(){if(!abrogation){setState({votes:[],total:0});return;}setState({loading:true});daoAPI.fetchAbrogationVoters(abrogation.proposalId,state.page,state.pageSize,state.supportFilter).then(function(data){setState({loading:false,votes:data.data,total:data.meta.count});}).catch(function(){setState({loading:false,votes:[]});});},[abrogation,state.page,state.supportFilter]);function changeSupportFilter(supportFilter){setState({supportFilter:supportFilter,page:1});}function changePage(page){setState({page:page});}return/*#__PURE__*/Object(jsx_runtime["jsx"])(AbrogationVotersProvider_Context.Provider,{value:Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{changeSupportFilter:changeSupportFilter,changePage:changePage}),children:children});};/* harmony default export */ var providers_AbrogationVotersProvider = (AbrogationVotersProvider_AbrogationVotersProvider);
// EXTERNAL MODULE: ./src/modules/governance/views/proposal-detail-view/components/abrogation-voters-modal/s.module.scss
var abrogation_voters_modal_s_module = __webpack_require__(1945);
var abrogation_voters_modal_s_module_default = /*#__PURE__*/__webpack_require__.n(abrogation_voters_modal_s_module);

// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/abrogation-voters-modal/index.tsx
var abrogation_voters_modal_Columns=[{title:'Address',dataIndex:'address',width:'35%',render:function Render(address){return/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(identicon["a" /* default */],{address:address,width:32,height:32}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["b" /* ExplorerAddressLink */],{address:address,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"blue",children:Object(utils["f" /* shortenAddr */])(address)})})]});}},{title:'Votes',dataIndex:'power',width:'38%',align:'right',render:function render(power){return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",className:abrogation_voters_modal_s_module_default.a.powerCell,children:Object(utils["a" /* formatBigValue */])(power,0)});}},{title:'Vote type',dataIndex:'support',width:'27%',render:function render(support){return support?/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",className:abrogation_voters_modal_s_module_default.a.forTag,children:"For"}):/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",className:abrogation_voters_modal_s_module_default.a.againstTag,children:"Against"});}}];var abrogation_voters_modal_AbrogationVotersModalInner=function AbrogationVotersModalInner(props){var modalProps=Object.assign({},props);var abrogationVotesCtx=useAbrogationVoters();function handleStateChange(stateFilter){if(stateFilter==='for'){abrogationVotesCtx.changeSupportFilter(true);}else if(stateFilter==='against'){abrogationVotesCtx.changeSupportFilter(false);}else{abrogationVotesCtx.changeSupportFilter(undefined);}}function handlePaginationChange(page){abrogationVotesCtx.changePage(page);}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:abrogation_voters_modal_s_module_default.a.component,width:620},modalProps),{},{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_tabs,{className:abrogation_voters_modal_s_module_default.a.tabs,defaultActiveKey:"all",onChange:handleStateChange,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:"All Votes"},"all"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:"For"},"for"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:"Against"},"against")]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_table,{className:abrogation_voters_modal_s_module_default.a.table,columns:abrogation_voters_modal_Columns,dataSource:abrogationVotesCtx.votes,rowKey:"address",loading:abrogationVotesCtx.loading,locale:{emptyText:'No votes'},pagination:{total:abrogationVotesCtx.total,current:abrogationVotesCtx.page,pageSize:abrogationVotesCtx.pageSize,position:['bottomRight'],showTotal:function showTotal(total,_ref){var _ref2=Object(slicedToArray["a" /* default */])(_ref,2),from=_ref2[0],to=_ref2[1];return/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:["Showing ",from," to ",to," out of ",total," votes"]});},onChange:handlePaginationChange}})]}));};var abrogation_voters_modal_AbrogationVotersModal=function AbrogationVotersModal(props){return/*#__PURE__*/Object(jsx_runtime["jsx"])(providers_AbrogationVotersProvider,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_voters_modal_AbrogationVotersModalInner,Object(objectSpread2["a" /* default */])({},props))});};/* harmony default export */ var abrogation_voters_modal = (abrogation_voters_modal_AbrogationVotersModal);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/abrogation-vote-results-card/index.tsx
var abrogation_vote_results_card_AbrogationVoteResultsCard=function AbrogationVoteResultsCard(){var _abrogationCtx$abroga,_abrogationCtx$forRat,_abrogationCtx$abroga2,_abrogationCtx$agains,_abrogationCtx$forRat2;var abrogationCtx=useAbrogation();var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),votersModal=_React$useState2[0],showVotersModal=_React$useState2[1];return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card-header flex justify-space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Vote results"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"link",onClick:function onClick(){return showVotersModal(true);},children:"View voters"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{className:"card-row p-24",flow:"row",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"For"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_abrogationCtx$abroga=abrogationCtx.abrogation)===null||_abrogationCtx$abroga===void 0?void 0:_abrogationCtx$abroga.forVotes.toFormat(2)}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(",(_abrogationCtx$forRat=abrogationCtx.forRate)===null||_abrogationCtx$forRat===void 0?void 0:_abrogationCtx$forRat.toFixed(2),"%)"]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,align:"end",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",align:"right",children:"Against"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_abrogationCtx$abroga2=abrogationCtx.abrogation)===null||_abrogationCtx$abroga2===void 0?void 0:_abrogationCtx$abroga2.againstVotes.toFormat(2)}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(",(_abrogationCtx$agains=abrogationCtx.againstRate)===null||_abrogationCtx$agains===void 0?void 0:_abrogationCtx$agains.toFixed(2),"%)"]})]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:abrogationCtx.forRate,strokeColor:"var(--theme-green-color)",trailColor:"var(--theme-red-color)"})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{className:"card-row p-24",flow:"row",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,align:"end",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if \u201CApproval\u201D is set to 51%, then more than 51% of the votes on a proposal must vote \u201CYes\u201D for the proposal to pass.",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",align:"right",children:"Approval"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:[(_abrogationCtx$forRat2=abrogationCtx.forRate)===null||_abrogationCtx$forRat2===void 0?void 0:_abrogationCtx$forRat2.toFixed(2),"%"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(> ",abrogationCtx.acceptanceThreshold,"% required)"]})]})]})]})})]}),votersModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_voters_modal,{onCancel:function onCancel(){return showVotersModal(false);}})]});};/* harmony default export */ var abrogation_vote_results_card = (abrogation_vote_results_card_AbrogationVoteResultsCard);
// EXTERNAL MODULE: ./src/modules/governance/views/proposal-detail-view/components/abrogation-vote-modal/s.module.scss
var abrogation_vote_modal_s_module = __webpack_require__(1946);
var abrogation_vote_modal_s_module_default = /*#__PURE__*/__webpack_require__.n(abrogation_vote_modal_s_module);

// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/abrogation-vote-modal/index.tsx
var abrogation_vote_modal_excluded=["voteState"];var VoteAbrogationState;(function(VoteAbrogationState){VoteAbrogationState[VoteAbrogationState["None"]=0]="None";VoteAbrogationState[VoteAbrogationState["VoteInitiate"]=1]="VoteInitiate";VoteAbrogationState[VoteAbrogationState["VoteFor"]=2]="VoteFor";VoteAbrogationState[VoteAbrogationState["VoteAgainst"]=3]="VoteAgainst";VoteAbrogationState[VoteAbrogationState["VoteChange"]=4]="VoteChange";VoteAbrogationState[VoteAbrogationState["VoteCancel"]=5]="VoteCancel";})(VoteAbrogationState||(VoteAbrogationState={}));var abrogation_vote_modal_InitialFormValues={changeOption:undefined,description:undefined,gasPrice:undefined};var abrogation_vote_modal_InitialState={submitting:false};var abrogation_vote_modal_AbrogationVoteModal=function AbrogationVoteModal(props){var _proposalCtx$proposal,_proposalCtx$proposal2,_proposalCtx$proposal3,_proposalCtx$proposal4;var voteState=props.voteState,modalProps=Object(objectWithoutProperties["a" /* default */])(props,abrogation_vote_modal_excluded);var proposalCtx=useProposal();var abrogationCtx=useAbrogation();var _useMergeState=Object(useMergeState["a" /* default */])(abrogation_vote_modal_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];var _AntdForm$useForm=form_default.a.useForm(),_AntdForm$useForm2=Object(slicedToArray["a" /* default */])(_AntdForm$useForm,1),form=_AntdForm$useForm2[0];function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var gasPrice,_props$onCancel,_values$description;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(voteState!==VoteAbrogationState.VoteInitiate&&!abrogationCtx.abrogation)){_context.next=2;break;}return _context.abrupt("return");case 2:gasPrice=values.gasPrice;if(gasPrice){_context.next=5;break;}return _context.abrupt("return");case 5:setState({submitting:true});_context.prev=6;_context.next=9;return form.validateFields();case 9:if(!(voteState===VoteAbrogationState.VoteInitiate)){_context.next=14;break;}_context.next=12;return proposalCtx.startAbrogationProposal((_values$description=values.description)!==null&&_values$description!==void 0?_values$description:'',gasPrice.value);case 12:_context.next=32;break;case 14:if(!(voteState===VoteAbrogationState.VoteFor)){_context.next=19;break;}_context.next=17;return abrogationCtx.abrogationProposalCastVote(true,gasPrice.value);case 17:_context.next=32;break;case 19:if(!(voteState===VoteAbrogationState.VoteAgainst)){_context.next=24;break;}_context.next=22;return abrogationCtx.abrogationProposalCastVote(false,gasPrice.value);case 22:_context.next=32;break;case 24:if(!(voteState===VoteAbrogationState.VoteChange)){_context.next=29;break;}_context.next=27;return abrogationCtx.abrogationProposalCastVote(values.changeOption===true,gasPrice.value);case 27:_context.next=32;break;case 29:if(!(voteState===VoteAbrogationState.VoteCancel)){_context.next=32;break;}_context.next=32;return abrogationCtx.abrogationProposalCancelVote(gasPrice.value);case 32:(_props$onCancel=props.onCancel)===null||_props$onCancel===void 0?void 0:_props$onCancel.call(props);_context.next=37;break;case 35:_context.prev=35;_context.t0=_context["catch"](6);case 37:setState({submitting:false});case 38:case"end":return _context.stop();}}},_callee,null,[[6,35]]);}));return _handleSubmit.apply(this,arguments);}react_default.a.useEffect(function(){if(voteState===VoteAbrogationState.VoteChange){var _abrogationCtx$receip;form.setFieldsValue({changeOption:(_abrogationCtx$receip=abrogationCtx.receipt)===null||_abrogationCtx$receip===void 0?void 0:_abrogationCtx$receip.support});}},[voteState,abrogationCtx.receipt]);/// TODO
return/*#__PURE__*/Object(jsx_runtime["jsx"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:abrogation_vote_modal_s_module_default.a.component,width:560,title:/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[voteState===VoteAbrogationState.VoteInitiate&&'Initiate abrogation proposal',voteState===VoteAbrogationState.VoteFor&&'Confirm your vote',voteState===VoteAbrogationState.VoteAgainst&&'Confirm your vote',voteState===VoteAbrogationState.VoteChange&&'Change your vote',voteState===VoteAbrogationState.VoteCancel&&'Cancel your vote']})},modalProps),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_form,{form:form,initialValues:abrogation_vote_modal_InitialFormValues,validateTrigger:['onSubmit','onChange'],onFinish:handleSubmit,children:[voteState===VoteAbrogationState.VoteInitiate&&/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"row",gap:16,padding:32,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:(_proposalCtx$proposal=proposalCtx.proposal)===null||_proposalCtx$proposal===void 0?void 0:_proposalCtx$proposal.title})}),voteState!==VoteAbrogationState.VoteInitiate&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:16,className:abrogation_vote_modal_s_module_default.a.row,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h2",weight:"bold",color:"primary",children:Object(utils["a" /* formatBigValue */])(proposalCtx.votingPower,2)}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"secondary",children:"Votes"})]}),(voteState===VoteAbrogationState.VoteFor||voteState===VoteAbrogationState.VoteAgainst)&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:["You are about to vote ",voteState===VoteAbrogationState.VoteFor?'FOR':'AGAINST'," the abrogation proposal for"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:["\u201C",(_proposalCtx$proposal2=proposalCtx.proposal)===null||_proposalCtx$proposal2===void 0?void 0:_proposalCtx$proposal2.title,"\u201D"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"You can change your vote later."})]}),voteState===VoteAbrogationState.VoteChange&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"You are about to change your vote on the abrogation proposal for"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:["\u201C",(_proposalCtx$proposal3=proposalCtx.proposal)===null||_proposalCtx$proposal3===void 0?void 0:_proposalCtx$proposal3.title,"\u201D"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"Are you sure you want to continue? You can change your vote again later."})]}),voteState===VoteAbrogationState.VoteCancel&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"You are about to cancel your vote on the abrogation proposal for"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:["\u201C",(_proposalCtx$proposal4=proposalCtx.proposal)===null||_proposalCtx$proposal4===void 0?void 0:_proposalCtx$proposal4.title,"&dquo;"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"Are you sure you want to continue? You can change your vote again later."})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_divider,{}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,className:abrogation_vote_modal_s_module_default.a.row,children:[voteState===VoteAbrogationState.VoteInitiate&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"description",label:"Description",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_textarea,{placeholder:"Placeholder",rows:4,disabled:state.submitting})}),voteState===VoteAbrogationState.VoteChange&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"changeOption",label:"Vote",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_default.a.Group,{className:abrogation_vote_modal_s_module_default.a.changeGroup,disabled:state.submitting,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{gap:16,colsTemplate:"1fr 1fr",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_button,{label:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"For"}),value:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_button,{label:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Against"}),value:false})]})})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"gasPrice",label:"Gas Fee (Gwei)",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(gas_fee_list,{disabled:state.submitting})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{shouldUpdate:true,children:function children(_ref){var getFieldsValue=_ref.getFieldsValue;var _getFieldsValue=getFieldsValue(),changeOption=_getFieldsValue.changeOption;var isDisabled=false;if(voteState===VoteAbrogationState.VoteChange){var _abrogationCtx$receip2;if(((_abrogationCtx$receip2=abrogationCtx.receipt)===null||_abrogationCtx$receip2===void 0?void 0:_abrogationCtx$receip2.support)===changeOption){isDisabled=true;}}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_button["a" /* default */],{htmlType:"submit",type:"primary",loading:state.submitting,disabled:isDisabled,className:abrogation_vote_modal_s_module_default.a.actionBtn,children:[voteState===VoteAbrogationState.VoteInitiate&&'Initiate abrogation proposal',voteState===VoteAbrogationState.VoteFor&&'Vote for abrogation proposal',voteState===VoteAbrogationState.VoteAgainst&&'Vote against abrogation proposal',voteState===VoteAbrogationState.VoteChange&&changeOption===true&&'Vote for abrogation proposal',voteState===VoteAbrogationState.VoteChange&&changeOption===false&&'Vote against abrogation proposal',voteState===VoteAbrogationState.VoteCancel&&'Cancel abrogation vote']});}})]})]})}));};/* harmony default export */ var abrogation_vote_modal = (abrogation_vote_modal_AbrogationVoteModal);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/abrogation-votes-card/index.tsx
var abrogation_votes_card_InitialState={showVotersModal:false,showVoteModal:false,voteState:VoteAbrogationState.None};var abrogation_votes_card_AbrogationVotesCard=function AbrogationVotesCard(){var _abrogationCtx$abroga,_abrogationCtx$forRat,_abrogationCtx$abroga2,_abrogationCtx$agains,_abrogationCtx$receip,_abrogationCtx$receip2;var abrogationCtx=useAbrogation();var _useMergeState=Object(useMergeState["a" /* default */])(abrogation_votes_card_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];function handleShowVotersModal(){setState({showVotersModal:true});}function handleHideVotersModal(){setState({showVotersModal:false});}function handleVoteForModal(){setState({showVoteModal:true,voteState:VoteAbrogationState.VoteFor});}function handleVoteAgainstModal(){setState({showVoteModal:true,voteState:VoteAbrogationState.VoteAgainst});}function handleVoteChangeModal(){setState({showVoteModal:true,voteState:VoteAbrogationState.VoteChange});}function handleVoteCancelModal(){setState({showVoteModal:true,voteState:VoteAbrogationState.VoteCancel});}function handleHideVoteModal(){setState({showVoteModal:false,voteState:VoteAbrogationState.None});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card-header flex justify-space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Abrogation proposal votes"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"link",onClick:handleShowVotersModal,children:"View voters"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{className:"card-row p-24",flow:"row",gap:32,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"For"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_abrogationCtx$abroga=abrogationCtx.abrogation)===null||_abrogationCtx$abroga===void 0?void 0:_abrogationCtx$abroga.forVotes.toFormat(2)}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(",(_abrogationCtx$forRat=abrogationCtx.forRate)===null||_abrogationCtx$forRat===void 0?void 0:_abrogationCtx$forRat.toFixed(2),"%)"]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:abrogationCtx.forRate,strokeColor:"var(--theme-green-color)",trailColor:"rgba(var(--theme-green-color-rgb), .16)"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Against"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_abrogationCtx$abroga2=abrogationCtx.abrogation)===null||_abrogationCtx$abroga2===void 0?void 0:_abrogationCtx$abroga2.againstVotes.toFormat(2)}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(",(_abrogationCtx$agains=abrogationCtx.againstRate)===null||_abrogationCtx$agains===void 0?void 0:_abrogationCtx$agains.toFixed(2),"%)"]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:abrogationCtx.againstRate,strokeColor:"var(--theme-red-color)",trailColor:"rgba(var(--theme-red-color-rgb), .16)"})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{className:"card-row p-24",flow:"row",gap:24,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:"Your voting power for this proposal"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:Object(utils["a" /* formatBigValue */])(abrogationCtx.votingPower,2)})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"row",gap:24,children:!((_abrogationCtx$receip=abrogationCtx.receipt)===null||_abrogationCtx$receip===void 0?void 0:_abrogationCtx$receip.hasVoted)?/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{gap:24,colsTemplate:"1fr 1fr",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",onClick:handleVoteForModal,children:"Vote for"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"default",onClick:handleVoteAgainstModal,children:"Vote against"})]}):/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{message:"You already voted ".concat(((_abrogationCtx$receip2=abrogationCtx.receipt)===null||_abrogationCtx$receip2===void 0?void 0:_abrogationCtx$receip2.support)?'FOR':'AGAINST'," the proposal abrogation")}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:24,colsTemplate:"1fr 1fr",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",onClick:handleVoteChangeModal,children:"Change vote"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"default",onClick:handleVoteCancelModal,children:"Cancel vote"})]})]})})]})]}),state.showVotersModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_voters_modal,{onCancel:handleHideVotersModal}),state.showVoteModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_vote_modal,{voteState:state.voteState,onCancel:handleHideVoteModal})]});};/* harmony default export */ var abrogation_votes_card = (abrogation_votes_card_AbrogationVotesCard);
// EXTERNAL MODULE: ./src/modules/governance/views/proposal-detail-view/components/abrogation-proposal-modal/s.module.scss
var abrogation_proposal_modal_s_module = __webpack_require__(1947);
var abrogation_proposal_modal_s_module_default = /*#__PURE__*/__webpack_require__.n(abrogation_proposal_modal_s_module);

// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/abrogation-proposal-modal/index.tsx
var abrogation_proposal_modal_AbrogationProposalModalInner=function AbrogationProposalModalInner(props){var _proposalCtx$proposal,_proposalCtx$proposal2,_proposalCtx$proposal3,_proposalCtx$proposal4;var proposalCtx=useProposal();return/*#__PURE__*/Object(jsx_runtime["jsx"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:abrogation_proposal_modal_s_module_default.a.component},props),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:16,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,align:"start",width:1070,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"warning-outlined"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"red",children:"Abrogation proposal"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:64,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"col",gap:32,colsTemplate:"1fr 1fr",width:1070,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"h2",weight:"semibold",color:"primary",children:["PID-",(_proposalCtx$proposal=proposalCtx.proposal)===null||_proposalCtx$proposal===void 0?void 0:_proposalCtx$proposal.proposalId,": ",(_proposalCtx$proposal2=proposalCtx.proposal)===null||_proposalCtx$proposal2===void 0?void 0:_proposalCtx$proposal2.title]})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:32,colsTemplate:"minmax(0, 610px) minmax(0, 428px)",width:1070,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,children:[((_proposalCtx$proposal3=proposalCtx.proposal)===null||_proposalCtx$proposal3===void 0?void 0:_proposalCtx$proposal3.state)!==APIProposalState.QUEUED&&/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_vote_results_card,{}),/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_details_card,{})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"row",gap:32,children:((_proposalCtx$proposal4=proposalCtx.proposal)===null||_proposalCtx$proposal4===void 0?void 0:_proposalCtx$proposal4.state)===APIProposalState.QUEUED&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_votes_card,{}),/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_approval_card,{})]})})]})]})]})}));};var abrogation_proposal_modal_AbrogationProposalModal=function AbrogationProposalModal(props){return/*#__PURE__*/Object(jsx_runtime["jsx"])(providers_AbrogationProvider,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_proposal_modal_AbrogationProposalModalInner,Object(objectSpread2["a" /* default */])({},props))});};/* harmony default export */ var abrogation_proposal_modal = (abrogation_proposal_modal_AbrogationProposalModal);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-abrogation-card/index.tsx
var proposal_abrogation_card_InitialState={abrogationVoteModal:false,abrogationViewModal:false,showWhyReason:false,cancelling:false};var proposal_abrogation_card_ProposalAbrogationCard=function ProposalAbrogationCard(){var _proposalCtx$proposal;var daoCtx=useDAO();var proposalCtx=useProposal();var _useMergeState=Object(useMergeState["a" /* default */])(proposal_abrogation_card_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];var hasThreshold=!!daoCtx.thresholdRate&&daoCtx.thresholdRate>=daoCtx.minThreshold;return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Abrogation proposal"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"p-24",children:[proposalCtx.isCanceled===undefined&&/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"col",justify:"center",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(spin_default.a,{spinning:true})}),proposalCtx.isCanceled===false&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:24,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"primary",children:"This is a special type of proposal, with the following thresholds:"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"primary",children:"Acceptance criteria: 50% of staked BOND"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"primary",children:"A proposal can only have one associated abrogation proposal at any given time"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"primary",children:"Anyone can vote on these proposals"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"primary",children:"There is a new snapshot for voter balances - taken at Abrogation Proposal\u2019s start time"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"primary",children:"Abrogation Proposal\u2019s duration is never greater than the Initial Proposal\u2019s queue period"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"primary",children:"When someone goes to execute the Initial Proposal - there is a check if an Abrogation Proposal that met its acceptance criteria exists"})})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,align:"center",justify:"end",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"default",loading:state.cancelling,disabled:!hasThreshold,onClick:function onClick(){return setState({abrogationVoteModal:true});},children:"Initiate abrogation proposal"}),!hasThreshold&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"You are not able to abrogate proposal."}),/*#__PURE__*/Object(jsx_runtime["jsx"])(popover["a" /* default */],{title:"Why you can\u2019t abrogate proposal",placement:"bottomLeft",overlayStyle:{width:520},content:/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",children:["You don\u2019t have enough voting power to create an abrogation proposal. The creator of an abrogation proposal needs to have a voting power of at least ",daoCtx.minThreshold,"% of the amount of $BOND staked in the DAO."]}),visible:state.showWhyReason,onVisibleChange:function onVisibleChange(visible){return setState({showWhyReason:visible});},children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"link",children:"See why"})})]})]})]}),proposalCtx.isCanceled===true&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:24,children:[((_proposalCtx$proposal=proposalCtx.proposal)===null||_proposalCtx$proposal===void 0?void 0:_proposalCtx$proposal.state)===APIProposalState.QUEUED&&/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"primary",children:"Abrogation proposal currently in progress."}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",onClick:function onClick(){return setState({abrogationViewModal:true});},children:"View abrogation proposal"})]})]})]}),state.abrogationVoteModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_vote_modal,{voteState:VoteAbrogationState.VoteInitiate,onCancel:function onCancel(){return setState({abrogationVoteModal:false});}}),state.abrogationViewModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(abrogation_proposal_modal,{onCancel:function onCancel(){return setState({abrogationViewModal:false});}})]});};/* harmony default export */ var proposal_abrogation_card = (proposal_abrogation_card_ProposalAbrogationCard);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-approval-card/index.tsx
var proposal_approval_card_ProposalApprovalCard=function ProposalApprovalCard(){var _proposalCtx$forRate,_proposalCtx$proposal,_proposalCtx$proposal2,_proposalCtx$forRate2,_proposalCtx$proposal3,_proposalCtx$proposal4;var proposalCtx=useProposal();var passed=((_proposalCtx$forRate=proposalCtx.forRate)!==null&&_proposalCtx$forRate!==void 0?_proposalCtx$forRate:0)>=((_proposalCtx$proposal=(_proposalCtx$proposal2=proposalCtx.proposal)===null||_proposalCtx$proposal2===void 0?void 0:_proposalCtx$proposal2.acceptanceThreshold)!==null&&_proposalCtx$proposal!==void 0?_proposalCtx$proposal:0);return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if \u201CApproval\u201D is set to 51%, then more than 51% of the votes on a proposal must vote \u201CYes\u201D for the proposal to pass.",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Approval"})})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{className:"p-24",flow:"row",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:[(_proposalCtx$forRate2=proposalCtx.forRate)===null||_proposalCtx$forRate2===void 0?void 0:_proposalCtx$forRate2.toFixed(2),"%"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(> ",(_proposalCtx$proposal3=proposalCtx.proposal)===null||_proposalCtx$proposal3===void 0?void 0:_proposalCtx$proposal3.acceptanceThreshold,"% required)"]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:proposalCtx.forRate,acceptance:(_proposalCtx$proposal4=proposalCtx.proposal)===null||_proposalCtx$proposal4===void 0?void 0:_proposalCtx$proposal4.acceptanceThreshold,strokeColor:passed?'var(--theme-green-color)':'var(--theme-red-color)',trailColor:passed?'rgba(var(--theme-green-color-rgb), .16)':'rgba(var(--theme-red-color-rgb), .16)'})]})]});};/* harmony default export */ var proposal_approval_card = (proposal_approval_card_ProposalApprovalCard);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-details-card/index.tsx
var proposal_details_card_InitialState={cancelling:false};var proposal_details_card_ProposalDetailsCard=function ProposalDetailsCard(){var _proposalCtx$proposal,_proposalCtx$proposal2,_proposalCtx$proposal3;var wallet=Object(wallets_walletProvider["c" /* useWallet */])();var proposalCtx=useProposal();var proposal=proposalCtx.proposal,thresholdRate=proposalCtx.thresholdRate,minThreshold=proposalCtx.minThreshold;var _React$useState=react_default.a.useState(proposal_details_card_InitialState),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var ownProposal=(proposal===null||proposal===void 0?void 0:proposal.proposer)===wallet.account;var isThresholdBelow=thresholdRate!==undefined&&thresholdRate<minThreshold;var isValidStateForCancel=[APIProposalState.WARMUP,APIProposalState.ACTIVE].includes(proposal===null||proposal===void 0?void 0:proposal.state);var canBeCancelled=isValidStateForCancel&&(ownProposal||isThresholdBelow);function handleProposalCancel(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{cancelling:true});});proposalCtx.cancelProposal().then(function(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{cancelling:false});});}).catch(function(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{cancelling:false});});});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Details"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card-row flexbox-list p-24",style:{'--gap':'32px'},children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Created by"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(identicon["a" /* default */],{address:(_proposalCtx$proposal=proposalCtx.proposal)===null||_proposalCtx$proposal===void 0?void 0:_proposalCtx$proposal.proposer,width:24,height:24}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["b" /* ExplorerAddressLink */],{address:(_proposalCtx$proposal2=proposalCtx.proposal)===null||_proposalCtx$proposal2===void 0?void 0:_proposalCtx$proposal2.proposer,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"blue",children:Object(utils["f" /* shortenAddr */])((_proposalCtx$proposal3=proposalCtx.proposal)===null||_proposalCtx$proposal3===void 0?void 0:_proposalCtx$proposal3.proposer)})})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:"If the creator\u2019s vBOND balance falls below ".concat(minThreshold,"% of the total amount of $BOND staked in the DAO the proposal can be cancelled by anyone."),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Creator threshold"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"col",gap:8,children:thresholdRate!==undefined&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:isThresholdBelow?'close-circle-outlined':'check-circle-outlined'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_skeleton,{loading:proposal===undefined,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:isThresholdBelow?'Below 1%':'Above 1%'})})]})})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{children:canBeCancelled&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"default",loading:state.cancelling,onClick:handleProposalCancel,children:"Cancel proposal"})})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{className:"card-row p-24",flow:"row",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Description"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"primary",wrap:true,children:proposal===null||proposal===void 0?void 0:proposal.description})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{className:"card-row p-24",flow:"row",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Actions"}),proposal===null||proposal===void 0?void 0:proposal.targets.map(function(target,index){return/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_action_card,{title:"Action ".concat(index+1),target:proposal===null||proposal===void 0?void 0:proposal.targets[index],signature:proposal===null||proposal===void 0?void 0:proposal.signatures[index],callData:proposal===null||proposal===void 0?void 0:proposal.calldatas[index]},index);})]})]});};/* harmony default export */ var proposal_details_card = (proposal_details_card_ProposalDetailsCard);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-quorum-card/index.tsx
var proposal_quorum_card_ProposalQuorumCard=function ProposalQuorumCard(){var _proposalCtx$quorum,_proposalCtx$proposal,_proposalCtx$proposal2,_proposalCtx$quorum2,_proposalCtx$proposal3,_proposalCtx$proposal4;var proposalCtx=useProposal();var passed=((_proposalCtx$quorum=proposalCtx.quorum)!==null&&_proposalCtx$quorum!==void 0?_proposalCtx$quorum:0)>=((_proposalCtx$proposal=(_proposalCtx$proposal2=proposalCtx.proposal)===null||_proposalCtx$proposal2===void 0?void 0:_proposalCtx$proposal2.minQuorum)!==null&&_proposalCtx$proposal!==void 0?_proposalCtx$proposal:0);return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:"Quorum is the percentage of the amount of tokens staked in the DAO that support for a proposal must be greater than for the proposal to be considered valid. For example, if the Quorum % is set to 20%, then more than 20% of the amount of tokens staked in the DAO must vote to approve a proposal for the vote to be considered valid.",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Quorum"})})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{className:"p-24",flow:"row",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:[(_proposalCtx$quorum2=proposalCtx.quorum)===null||_proposalCtx$quorum2===void 0?void 0:_proposalCtx$quorum2.toFixed(2),"%"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(> ",(_proposalCtx$proposal3=proposalCtx.proposal)===null||_proposalCtx$proposal3===void 0?void 0:_proposalCtx$proposal3.minQuorum,"% required)"]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:proposalCtx.quorum,acceptance:(_proposalCtx$proposal4=proposalCtx.proposal)===null||_proposalCtx$proposal4===void 0?void 0:_proposalCtx$proposal4.minQuorum,strokeColor:passed?'var(--theme-green-color)':'var(--theme-red-color)',trailColor:passed?'rgba(var(--theme-green-color-rgb), .16)':'rgba(var(--theme-red-color-rgb), .16)'})]})]});};/* harmony default export */ var proposal_quorum_card = (proposal_quorum_card_ProposalQuorumCard);
// EXTERNAL MODULE: ./node_modules/date-fns/esm/format/index.js + 2 modules
var format = __webpack_require__(158);

// EXTERNAL MODULE: ./node_modules/date-fns/esm/formatDistance/index.js
var formatDistance = __webpack_require__(295);

// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-status-card/index.tsx
function getEventIcon(index,name){if([APIProposalState.EXPIRED,APIProposalState.FAILED,APIProposalState.CANCELED,APIProposalState.ABROGATED].includes(name)){return/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"close-circle-outlined",width:40,height:40,color:"red"});}if([APIProposalState.CREATED,APIProposalState.ACCEPTED,APIProposalState.EXECUTED].includes(name)){return/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"check-circle-outlined",width:40,height:40,color:"green"});}if(index===0){return/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"history-circle-outlined",width:40,height:40,color:"blue"});}return/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"check-circle-outlined",width:40,height:40,color:"green"});}function formatEventTime(name,start,end){var mStart=new Date(start*1000);var now=new Date();if([APIProposalState.CREATED,APIProposalState.EXPIRED,APIProposalState.FAILED,APIProposalState.CANCELED,APIProposalState.EXECUTED,APIProposalState.QUEUED,APIProposalState.ACCEPTED,APIProposalState.ABROGATED].includes(name)){return Object(format["a" /* default */])(mStart,'dd MMM yyyy - HH:mm');}if(end>0){var mEnd=new Date(end*1000);if(mEnd<=now){return"Ended at ".concat(Object(format["a" /* default */])(mEnd,'dd MMM yyyy - HH:mm'));}var _dist=Object(formatDistance["a" /* default */])(mEnd,now,{addSuffix:true,includeSeconds:true});return"Ends ".concat(_dist);}var dist=Object(formatDistance["a" /* default */])(mStart,now,{addSuffix:true,includeSeconds:true});return"Started ".concat(dist);}var proposal_status_card_ProposalStatusCard=function ProposalStatusCard(){var _useProposal=useProposal(),proposal=_useProposal.proposal,reload=_useProposal.reload;if(!proposal){return null;}return/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card p-24",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"row",gap:24,children:proposal.history.map(function(event,index){return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex col-gap-12 align-center",children:[getEventIcon(index,event.name),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",className:"mr-8",children:APIProposalStateMap.get(event.name)}),event.txHash&&/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["c" /* ExplorerTxLink */],{address:event.txHash,style:{height:'16px'},children:/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"link-outlined",width:16,height:16})})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(useLeftTime_UseLeftTime,{end:event.endTimestamp*1000,delay:5000,onEnd:function onEnd(){return reload();},children:function children(){return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:formatEventTime(event.name,event.startTimestamp,event.endTimestamp)});}})]})]},event.name);})})});};/* harmony default export */ var proposal_status_card = (proposal_status_card_ProposalStatusCard);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/providers/ProposalVotersProvider/index.tsx
var ProposalVotersProvider_InitialState={votes:[],total:0,page:1,pageSize:10,loading:false,supportFilter:undefined};var ProposalVotersProvider_Context=/*#__PURE__*/react_default.a.createContext(Object(utils_context["a" /* InvariantContext */])('ProposalVotersProvider'));function useProposalVoters(){return react_default.a.useContext(ProposalVotersProvider_Context);}var ProposalVotersProvider_ProposalVotersProvider=function ProposalVotersProvider(props){var children=props.children;var daoAPI=useDaoAPI();var _useProposal=useProposal(),proposal=_useProposal.proposal;var _useMergeState=Object(useMergeState["a" /* default */])(ProposalVotersProvider_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];react_default.a.useEffect(function(){if(!(proposal===null||proposal===void 0?void 0:proposal.proposalId)){setState({votes:[],total:0});return;}setState({loading:true});daoAPI.fetchProposalVoters(proposal.proposalId,state.page,state.pageSize,state.supportFilter).then(function(data){setState({loading:false,votes:data.data,total:data.meta.count});}).catch(function(){setState({loading:false,votes:[]});});},[proposal,state.page,state.supportFilter]);function changeSupportFilter(supportFilter){setState({supportFilter:supportFilter,page:1});}function changePage(page){setState({page:page});}return/*#__PURE__*/Object(jsx_runtime["jsx"])(ProposalVotersProvider_Context.Provider,{value:Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{changeSupportFilter:changeSupportFilter,changePage:changePage}),children:children});};/* harmony default export */ var providers_ProposalVotersProvider = (ProposalVotersProvider_ProposalVotersProvider);
// EXTERNAL MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-voters-modal/s.module.scss
var proposal_voters_modal_s_module = __webpack_require__(1948);
var proposal_voters_modal_s_module_default = /*#__PURE__*/__webpack_require__.n(proposal_voters_modal_s_module);

// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-voters-modal/index.tsx
var proposal_voters_modal_Columns=[{title:'Address',dataIndex:'address',width:'35%',render:function Render(address){return/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(identicon["a" /* default */],{address:address,width:32,height:32}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["b" /* ExplorerAddressLink */],{address:address,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"blue",children:Object(utils["f" /* shortenAddr */])(address)})})]});}},{title:'Votes',dataIndex:'power',width:'38%',align:'right',render:function render(power){return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",className:proposal_voters_modal_s_module_default.a.powerCell,children:Object(utils["a" /* formatBigValue */])(power,2,'-',2)});}},{title:'Vote type',dataIndex:'support',width:'27%',render:function render(support){return support?/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",className:proposal_voters_modal_s_module_default.a.forTag,children:"For"}):/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"lb2",weight:"semibold",className:proposal_voters_modal_s_module_default.a.againstTag,children:"Against"});}}];var proposal_voters_modal_ProposalVotersModalInner=function ProposalVotersModalInner(props){var modalProps=Object.assign({},props);var proposalVotesCtx=useProposalVoters();function handleStateChange(stateFilter){if(stateFilter==='for'){proposalVotesCtx.changeSupportFilter(true);}else if(stateFilter==='against'){proposalVotesCtx.changeSupportFilter(false);}else{proposalVotesCtx.changeSupportFilter(undefined);}}function handlePaginationChange(page){proposalVotesCtx.changePage(page);}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:proposal_voters_modal_s_module_default.a.component,width:620},modalProps),{},{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_tabs,{className:proposal_voters_modal_s_module_default.a.tabs,defaultActiveKey:"all",onChange:handleStateChange,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:"All Votes"},"all"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:"For"},"for"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:"Against"},"against")]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_table,{className:proposal_voters_modal_s_module_default.a.table,columns:proposal_voters_modal_Columns,dataSource:proposalVotesCtx.votes,rowKey:"address",loading:proposalVotesCtx.loading,locale:{emptyText:'No votes'},pagination:{total:proposalVotesCtx.total,current:proposalVotesCtx.page,pageSize:proposalVotesCtx.pageSize,position:['bottomRight'],showTotal:function showTotal(total,_ref){var _ref2=Object(slicedToArray["a" /* default */])(_ref,2),from=_ref2[0],to=_ref2[1];return/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:["Showing ",from," to ",to," out of ",total," votes"]});},onChange:handlePaginationChange}})]}));};var proposal_voters_modal_ProposalVotersModal=function ProposalVotersModal(props){return/*#__PURE__*/Object(jsx_runtime["jsx"])(providers_ProposalVotersProvider,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_voters_modal_ProposalVotersModalInner,Object(objectSpread2["a" /* default */])({},props))});};/* harmony default export */ var proposal_voters_modal = (proposal_voters_modal_ProposalVotersModal);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-vote-results-card/index.tsx
var proposal_vote_results_card_ProposalVoteResultsCard=function ProposalVoteResultsCard(){var _proposalCtx$proposal,_proposalCtx$forRate,_proposalCtx$proposal2,_proposalCtx$againstR,_proposalCtx$quorum,_proposalCtx$proposal3,_proposalCtx$forRate2,_proposalCtx$proposal4;var proposalCtx=useProposal();var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),votersModal=_React$useState2[0],showVotersModal=_React$useState2[1];return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card-header flex justify-space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Vote results"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"link",onClick:function onClick(){return showVotersModal(true);},children:"View voters"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",className:"card-row p-24",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"For"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_proposalCtx$proposal=proposalCtx.proposal)===null||_proposalCtx$proposal===void 0?void 0:_proposalCtx$proposal.forVotes.toFormat(2)}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(",(_proposalCtx$forRate=proposalCtx.forRate)===null||_proposalCtx$forRate===void 0?void 0:_proposalCtx$forRate.toFixed(2),"%)"]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,align:"end",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",align:"right",children:"Against"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_proposalCtx$proposal2=proposalCtx.proposal)===null||_proposalCtx$proposal2===void 0?void 0:_proposalCtx$proposal2.againstVotes.toFormat(2)}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(",(_proposalCtx$againstR=proposalCtx.againstRate)===null||_proposalCtx$againstR===void 0?void 0:_proposalCtx$againstR.toFixed(),"%)"]})]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:proposalCtx.forRate,strokeColor:"var(--theme-green-color)",trailColor:"var(--theme-red-color)"})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"row",className:"card-row p-24",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:"Quorum is the percentage of the amount of tokens staked in the DAO that support for a proposal must be greater than for the proposal to be considered valid. For example, if the Quorum % is set to 20%, then more than 20% of the amount of tokens staked in the DAO must vote to approve a proposal for the vote to be considered valid.",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"Quorum"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:[(_proposalCtx$quorum=proposalCtx.quorum)===null||_proposalCtx$quorum===void 0?void 0:_proposalCtx$quorum.toFixed(2),"%"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(> ",(_proposalCtx$proposal3=proposalCtx.proposal)===null||_proposalCtx$proposal3===void 0?void 0:_proposalCtx$proposal3.minQuorum,"% required)"]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:4,align:"end",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["a" /* Hint */],{text:"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if \u201CApproval\u201D is set to 51%, then more than 51% of the votes on a proposal must vote \u201CYes\u201D for the proposal to pass.",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",align:"right",children:"Approval"})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:[(_proposalCtx$forRate2=proposalCtx.forRate)===null||_proposalCtx$forRate2===void 0?void 0:_proposalCtx$forRate2.toFixed(2),"%"]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(> ",(_proposalCtx$proposal4=proposalCtx.proposal)===null||_proposalCtx$proposal4===void 0?void 0:_proposalCtx$proposal4.acceptanceThreshold,"% required)"]})]})]})]})})]}),votersModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_voters_modal,{onCancel:function onCancel(){return showVotersModal(false);}})]});};/* harmony default export */ var proposal_vote_results_card = (proposal_vote_results_card_ProposalVoteResultsCard);
// EXTERNAL MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-vote-modal/s.module.scss
var proposal_vote_modal_s_module = __webpack_require__(1949);
var proposal_vote_modal_s_module_default = /*#__PURE__*/__webpack_require__.n(proposal_vote_modal_s_module);

// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-vote-modal/index.tsx
var proposal_vote_modal_excluded=["voteState"];var VoteState;(function(VoteState){VoteState[VoteState["None"]=0]="None";VoteState[VoteState["VoteFor"]=1]="VoteFor";VoteState[VoteState["VoteAgainst"]=2]="VoteAgainst";VoteState[VoteState["VoteChange"]=3]="VoteChange";VoteState[VoteState["VoteCancel"]=4]="VoteCancel";})(VoteState||(VoteState={}));var proposal_vote_modal_InitialFormValues={changeOption:undefined,gasPrice:undefined};var proposal_vote_modal_InitialState={submitting:false};var proposal_vote_modal_ProposalVoteModal=function ProposalVoteModal(props){var _proposalCtx$proposal,_proposalCtx$proposal2,_proposalCtx$proposal3;var voteState=props.voteState,modalProps=Object(objectWithoutProperties["a" /* default */])(props,proposal_vote_modal_excluded);var _AntdForm$useForm=form_default.a.useForm(),_AntdForm$useForm2=Object(slicedToArray["a" /* default */])(_AntdForm$useForm,1),form=_AntdForm$useForm2[0];var proposalCtx=useProposal();var _useMergeState=Object(useMergeState["a" /* default */])(proposal_vote_modal_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var gasPrice,_props$onCancel;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:gasPrice=values.gasPrice;if(!(!proposalCtx.proposal||!gasPrice)){_context.next=3;break;}return _context.abrupt("return");case 3:setState({submitting:true});_context.prev=4;_context.next=7;return form.validateFields();case 7:if(!(voteState===VoteState.VoteFor)){_context.next=12;break;}_context.next=10;return proposalCtx.proposalCastVote(true,gasPrice.value);case 10:_context.next=25;break;case 12:if(!(voteState===VoteState.VoteAgainst)){_context.next=17;break;}_context.next=15;return proposalCtx.proposalCastVote(false,gasPrice.value);case 15:_context.next=25;break;case 17:if(!(voteState===VoteState.VoteChange)){_context.next=22;break;}_context.next=20;return proposalCtx.proposalCastVote(values.changeOption===true,gasPrice.value);case 20:_context.next=25;break;case 22:if(!(voteState===VoteState.VoteCancel)){_context.next=25;break;}_context.next=25;return proposalCtx.proposalCancelVote(gasPrice.value);case 25:(_props$onCancel=props.onCancel)===null||_props$onCancel===void 0?void 0:_props$onCancel.call(props);_context.next=30;break;case 28:_context.prev=28;_context.t0=_context["catch"](4);case 30:setState({submitting:false});case 31:case"end":return _context.stop();}}},_callee,null,[[4,28]]);}));return _handleSubmit.apply(this,arguments);}react_default.a.useEffect(function(){if(voteState===VoteState.VoteChange){var _proposalCtx$receipt;form.setFieldsValue({changeOption:(_proposalCtx$receipt=proposalCtx.receipt)===null||_proposalCtx$receipt===void 0?void 0:_proposalCtx$receipt.support});}},[voteState]);return/*#__PURE__*/Object(jsx_runtime["jsx"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:proposal_vote_modal_s_module_default.a.component,width:560,title:/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[voteState===VoteState.VoteFor&&'Confirm your vote',voteState===VoteState.VoteAgainst&&'Confirm your vote',voteState===VoteState.VoteChange&&'Change your vote',voteState===VoteState.VoteCancel&&'Cancel your vote']})},modalProps),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_form,{form:form,initialValues:proposal_vote_modal_InitialFormValues,validateTrigger:['onSubmit','onChange'],onFinish:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:16,className:proposal_vote_modal_s_module_default.a.row,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h2",weight:"bold",color:"primary",children:Object(utils["a" /* formatBigValue */])(proposalCtx.votingPower,2)}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"secondary",children:"Votes"})]}),(voteState===VoteState.VoteFor||voteState===VoteState.VoteAgainst)&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"You are about to vote on proposal"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:["\u201C",(_proposalCtx$proposal=proposalCtx.proposal)===null||_proposalCtx$proposal===void 0?void 0:_proposalCtx$proposal.title,"\u201D"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"Are you sure you want to continue? You can change your vote later."})]}),voteState===VoteState.VoteChange&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"You are about to change your vote on proposal"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:["\u201C",(_proposalCtx$proposal2=proposalCtx.proposal)===null||_proposalCtx$proposal2===void 0?void 0:_proposalCtx$proposal2.title,"\u201D"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"Are you sure you want to continue? You can change your vote again later."})]}),voteState===VoteState.VoteCancel&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"You are about to cancel your vote on proposal"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:["\u201C",(_proposalCtx$proposal3=proposalCtx.proposal)===null||_proposalCtx$proposal3===void 0?void 0:_proposalCtx$proposal3.title,"\u201D"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",color:"secondary",children:"Are you sure you want to continue? You can change your vote again later."})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_divider,{}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,className:proposal_vote_modal_s_module_default.a.row,children:[voteState===VoteState.VoteChange&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"changeOption",label:"Vote",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_default.a.Group,{className:proposal_vote_modal_s_module_default.a.changeGroup,disabled:state.submitting,children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{gap:16,colsTemplate:"1fr 1fr",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_button,{label:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"For"}),value:true}),/*#__PURE__*/Object(jsx_runtime["jsx"])(radio_button,{label:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Against"}),value:false})]})})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"gasPrice",label:"Gas Fee (Gwei)",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(gas_fee_list,{disabled:state.submitting})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{shouldUpdate:true,children:function children(_ref){var getFieldsValue=_ref.getFieldsValue;var _getFieldsValue=getFieldsValue(),changeOption=_getFieldsValue.changeOption;var isDisabled=false;if(voteState===VoteState.VoteChange){var _proposalCtx$receipt2;if(((_proposalCtx$receipt2=proposalCtx.receipt)===null||_proposalCtx$receipt2===void 0?void 0:_proposalCtx$receipt2.support)===changeOption){isDisabled=true;}}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_button["a" /* default */],{htmlType:"submit",type:"primary",loading:state.submitting,disabled:isDisabled,className:proposal_vote_modal_s_module_default.a.actionBtn,children:[voteState===VoteState.VoteFor&&'Vote for proposal',voteState===VoteState.VoteAgainst&&'Vote against proposal',voteState===VoteState.VoteCancel&&'Cancel vote',voteState===VoteState.VoteChange&&changeOption===true&&'Vote for proposal',voteState===VoteState.VoteChange&&changeOption===false&&'Vote against proposal']});}})]})]})}));};/* harmony default export */ var proposal_vote_modal = (proposal_vote_modal_ProposalVoteModal);
// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/proposal-votes-card/index.tsx
var proposal_votes_card_InitialState={showVotersModal:false,showVoteModal:false,voteState:VoteState.None};var proposal_votes_card_ProposalVotesCard=function ProposalVotesCard(){var _proposalCtx$proposal,_proposalCtx$proposal2,_proposalCtx$forRate,_proposalCtx$proposal3,_proposalCtx$againstR,_proposalCtx$receipt,_proposalCtx$receipt2;var wallet=Object(wallets_walletProvider["c" /* useWallet */])();var proposalCtx=useProposal();var _React$useState=react_default.a.useState(proposal_votes_card_InitialState),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];function handleShowVotersModal(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{showVotersModal:true});});}function handleHideVotersModal(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{showVotersModal:false});});}function handleVoteForModal(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{showVoteModal:true,voteState:VoteState.VoteFor});});}function handleVoteAgainstModal(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{showVoteModal:true,voteState:VoteState.VoteAgainst});});}function handleVoteChangeModal(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{showVoteModal:true,voteState:VoteState.VoteChange});});}function handleVoteCancelModal(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{showVoteModal:true,voteState:VoteState.VoteCancel});});}function handleHideVoteModal(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{showVoteModal:false,voteState:VoteState.None});});}if(((_proposalCtx$proposal=proposalCtx.proposal)===null||_proposalCtx$proposal===void 0?void 0:_proposalCtx$proposal.state)===APIProposalState.WARMUP){return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Votes"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"p-24",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{type:"info",message:"Voting on this proposal will start after the Warm-Up period ends."})})]});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card-header flex justify-space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Votes"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"link",onClick:handleShowVotersModal,children:"View voters"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{className:"card-row p-24",flow:"row",gap:32,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"For"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_proposalCtx$proposal2=proposalCtx.proposal)===null||_proposalCtx$proposal2===void 0?void 0:_proposalCtx$proposal2.forVotes.toFormat(2)}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(",(_proposalCtx$forRate=proposalCtx.forRate)===null||_proposalCtx$forRate===void 0?void 0:_proposalCtx$forRate.toFixed(2),"%)"]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:proposalCtx.forRate,strokeColor:"var(--theme-green-color)",trailColor:"rgba(var(--theme-green-color-rgb), .16)"})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:16,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Against"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_proposalCtx$proposal3=proposalCtx.proposal)===null||_proposalCtx$proposal3===void 0?void 0:_proposalCtx$proposal3.againstVotes.toFormat(2)}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:["(",(_proposalCtx$againstR=proposalCtx.againstRate)===null||_proposalCtx$againstR===void 0?void 0:_proposalCtx$againstR.toFixed(2),"%)"]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:proposalCtx.againstRate,strokeColor:"var(--theme-red-color)",trailColor:"rgba(var(--theme-red-color-rgb), .16)"})]})]}),wallet.isActive&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{className:"card-row p-24",flow:"row",gap:24,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",color:"secondary",children:"Your voting power for this proposal"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:Object(utils["a" /* formatBigValue */])(proposalCtx.votingPower,2)})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"row",gap:24,children:!((_proposalCtx$receipt=proposalCtx.receipt)===null||_proposalCtx$receipt===void 0?void 0:_proposalCtx$receipt.hasVoted)?/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{gap:24,colsTemplate:"1fr 1fr",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",onClick:handleVoteForModal,children:"Vote for"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"default",onClick:handleVoteAgainstModal,children:"Vote against"})]}):/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_alert,{message:"You already voted ".concat(((_proposalCtx$receipt2=proposalCtx.receipt)===null||_proposalCtx$receipt2===void 0?void 0:_proposalCtx$receipt2.support)?'FOR':'AGAINST'," the proposal")}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:24,colsTemplate:"1fr 1fr",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",onClick:handleVoteChangeModal,children:"Change vote"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"default",onClick:handleVoteCancelModal,children:"Cancel vote"})]})]})})]})]}),state.showVotersModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_voters_modal,{onCancel:handleHideVotersModal}),state.showVoteModal&&/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_vote_modal,{voteState:state.voteState,onCancel:handleHideVoteModal})]});};/* harmony default export */ var proposal_votes_card = (proposal_votes_card_ProposalVotesCard);
// EXTERNAL MODULE: ./src/modules/governance/views/proposal-detail-view/components/queue-for-execution-modal/s.module.scss
var queue_for_execution_modal_s_module = __webpack_require__(1950);
var queue_for_execution_modal_s_module_default = /*#__PURE__*/__webpack_require__.n(queue_for_execution_modal_s_module);

// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/components/queue-for-execution-modal/index.tsx
var queue_for_execution_modal_InitialFormValues={gasPrice:undefined};var queue_for_execution_modal_InitialState={submitting:false};var queue_for_execution_modal_QueueForExecutionModal=function QueueForExecutionModal(props){var modalProps=Object.assign({},props);var _Antd$Form$useForm=es_form["a" /* default */].useForm(),_Antd$Form$useForm2=Object(slicedToArray["a" /* default */])(_Antd$Form$useForm,1),form=_Antd$Form$useForm2[0];var proposalCtx=useProposal();var _useMergeState=Object(useMergeState["a" /* default */])(queue_for_execution_modal_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=Object(asyncToGenerator["a" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(values){var gasPrice,_props$onCancel;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:gasPrice=values.gasPrice;if(!(!proposalCtx.proposal||!gasPrice)){_context.next=3;break;}return _context.abrupt("return");case 3:setState({submitting:true});_context.prev=4;_context.next=7;return form.validateFields();case 7:_context.next=9;return proposalCtx.queueProposalForExecution(gasPrice.value);case 9:(_props$onCancel=props.onCancel)===null||_props$onCancel===void 0?void 0:_props$onCancel.call(props);_context.next=14;break;case 12:_context.prev=12;_context.t0=_context["catch"](4);case 14:setState({submitting:false});case 15:case"end":return _context.stop();}}},_callee,null,[[4,12]]);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/Object(jsx_runtime["jsx"])(modal["a" /* default */],Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({className:queue_for_execution_modal_s_module_default.a.component,width:560,title:"Queue for execution"},modalProps),{},{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_form,{form:form,initialValues:queue_for_execution_modal_InitialFormValues,validateTrigger:['onSubmit','onChange'],onFinish:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"row",gap:16,className:queue_for_execution_modal_s_module_default.a.row,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:"Once a proposal is accepted, it will have to wait in the queue before it can be executed. During this time it can only be cancelled by an abrogation proposal."})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_divider,{}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,className:queue_for_execution_modal_s_module_default.a.row,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:"gasPrice",label:"Gas Fee (Gwei)",rules:[{required:true,message:'Required'}],children:/*#__PURE__*/Object(jsx_runtime["jsx"])(gas_fee_list,{disabled:state.submitting})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{htmlType:"submit",type:"primary",loading:state.submitting,className:queue_for_execution_modal_s_module_default.a.actionBtn,children:"Queue proposal for execution"})]})]})}));};/* harmony default export */ var queue_for_execution_modal = (queue_for_execution_modal_QueueForExecutionModal);
// EXTERNAL MODULE: ./src/modules/governance/views/proposal-detail-view/s.module.scss
var proposal_detail_view_s_module = __webpack_require__(1951);
var proposal_detail_view_s_module_default = /*#__PURE__*/__webpack_require__.n(proposal_detail_view_s_module);

// CONCATENATED MODULE: ./src/modules/governance/views/proposal-detail-view/index.tsx
var proposal_detail_view_InitialState={showQueueForExecution:false,executing:false};var proposal_detail_view_ProposalDetailViewInner=function ProposalDetailViewInner(){var _proposalCtx$proposal,_proposalCtx$proposal2,_proposalCtx$proposal3;var history=Object(react_router["g" /* useHistory */])();var wallet=Object(wallets_walletProvider["c" /* useWallet */])();var proposalCtx=useProposal();var proposalState=(_proposalCtx$proposal=proposalCtx.proposal)===null||_proposalCtx$proposal===void 0?void 0:_proposalCtx$proposal.state;var _useMergeState=Object(useMergeState["a" /* default */])(proposal_detail_view_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];function handleBackClick(){history.push('/governance/proposals');}function handleExecuteProposal(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{executing:true});});proposalCtx.executeProposal().catch(Error).then(function(){setState(function(prevState){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},prevState),{},{executing:false});});});}return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-limit",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"mb-32",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"button",onClick:handleBackClick,className:"button-text",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"arrow-back",width:16,height:16,className:"mr-8",color:"inherit"}),"Proposals"]})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:32,colsTemplate:"1fr 1fr",className:"mb-32",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"h2",weight:"semibold",color:"primary",children:["PID-",(_proposalCtx$proposal2=proposalCtx.proposal)===null||_proposalCtx$proposal2===void 0?void 0:_proposalCtx$proposal2.proposalId,": ",(_proposalCtx$proposal3=proposalCtx.proposal)===null||_proposalCtx$proposal3===void 0?void 0:_proposalCtx$proposal3.title]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(grid["a" /* default */],{flow:"col",justify:"end",children:wallet.account&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[APIProposalState.ACCEPTED===proposalState&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",loading:state.executing,onClick:function onClick(){return setState({showQueueForExecution:true});},children:"Queue for execution"}),APIProposalState.GRACE===proposalState&&/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",loading:state.executing,onClick:handleExecuteProposal,children:"Execute proposal"})]})})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:proposal_detail_view_s_module_default.a.cardsAndSidebarContainer,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,className:proposal_detail_view_s_module_default.a.cardsContainer,children:[![APIProposalState.WARMUP,APIProposalState.ACTIVE].includes(proposalState)&&/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_vote_results_card,{}),/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_details_card,{})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,className:proposal_detail_view_s_module_default.a.sidebarContainer,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_status_card,{}),(APIProposalState.QUEUED===proposalState||proposalCtx.isCanceled)&&/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_abrogation_card,{}),[APIProposalState.WARMUP,APIProposalState.ACTIVE].includes(proposalState)&&/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_votes_card,{}),APIProposalState.ACTIVE===proposalState&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_quorum_card,{}),/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_approval_card,{})]})]})]}),state.showQueueForExecution&&/*#__PURE__*/Object(jsx_runtime["jsx"])(queue_for_execution_modal,{onCancel:function onCancel(){return setState({showQueueForExecution:false});}})]});};var proposal_detail_view_ProposalDetailView=function ProposalDetailView(){var _useRouteMatch=Object(react_router["i" /* useRouteMatch */])(),params=_useRouteMatch.params;return/*#__PURE__*/Object(jsx_runtime["jsx"])(providers_ProposalProvider,{proposalId:Number(params.id),children:/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_detail_view_ProposalDetailViewInner,{})});};/* harmony default export */ var proposal_detail_view = (proposal_detail_view_ProposalDetailView);
// EXTERNAL MODULE: ./node_modules/@rooks/use-debounce/lib/index.esm.js
var lib_index_esm = __webpack_require__(463);

// CONCATENATED MODULE: ./src/modules/governance/views/proposals-view/providers/ProposalsProvider/index.tsx
var ProposalsProvider_InitialState={proposals:[],total:0,page:1,pageSize:10,loading:false,stateFilter:undefined,searchFilter:undefined};var ProposalsProvider_Context=/*#__PURE__*/react_default.a.createContext(Object(utils_context["a" /* InvariantContext */])('ProposalsProvider'));function useProposals(){return react_default.a.useContext(ProposalsProvider_Context);}var ProposalsProvider_ProposalsProvider=function ProposalsProvider(props){var stateFilter=props.stateFilter,searchFilter=props.searchFilter,children=props.children;var daoAPI=useDaoAPI();var _useMergeState=Object(useMergeState["a" /* default */])(ProposalsProvider_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];react_default.a.useEffect(function(){setState({stateFilter:stateFilter,searchFilter:searchFilter,page:1});},[stateFilter,searchFilter]);react_default.a.useEffect(function(){setState({loading:true});daoAPI.fetchProposals(state.page,state.pageSize,state.stateFilter,state.searchFilter).then(function(data){setState({loading:false,proposals:data.data.map(function(item){var _item$stateTimeLeft;return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},item),{},{stateTimeLeftTs:Date.now()+((_item$stateTimeLeft=item.stateTimeLeft)!==null&&_item$stateTimeLeft!==void 0?_item$stateTimeLeft:0)*1000});}),total:data.meta.count});}).catch(function(){setState({loading:false,proposals:[]});});},[state.page,state.stateFilter,state.searchFilter]);function changeStateFilter(value){setState({stateFilter:value});}function changeSearchFilter(value){setState({searchFilter:value});}function changePage(page){setState({page:page});}return/*#__PURE__*/Object(jsx_runtime["jsx"])(ProposalsProvider_Context.Provider,{value:Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},state),{},{changeStateFilter:changeStateFilter,changeSearchFilter:changeSearchFilter,changePage:changePage}),children:children});};/* harmony default export */ var providers_ProposalsProvider = (ProposalsProvider_ProposalsProvider);
// EXTERNAL MODULE: ./src/components/custom/badge/index.tsx
var badge = __webpack_require__(313);

// CONCATENATED MODULE: ./src/modules/governance/views/proposals-view/components/proposal-status-tag/index.tsx
var proposal_status_tag_ProposalStatusTag=function ProposalStatusTag(_ref){var state=_ref.state,className=_ref.className;var color='grey';switch(state){case'ACCEPTED':case'EXECUTED':color='green';break;case'WARMUP':case'ACTIVE':case'QUEUED':case'GRACE':color='blue';break;case'EXPIRED':case'FAILED':case'CANCELED':case'ABROGATED':color='red';break;}return/*#__PURE__*/Object(jsx_runtime["jsx"])(badge["a" /* Badge */],{color:color,size:"large",children:APIProposalStateMap.get(state)});};/* harmony default export */ var proposal_status_tag = (proposal_status_tag_ProposalStatusTag);
// CONCATENATED MODULE: ./src/modules/governance/views/proposals-view/components/proposals-table/index.tsx
var proposals_table_Columns=[{title:'Proposal',width:'70%',render:function render(_,data){return/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router_dom["b" /* Link */],{to:"proposals/".concat(data.proposalId),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:["PID-",data.proposalId,": ",data.title]})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:16,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(proposal_status_tag,{state:data.state}),/*#__PURE__*/Object(jsx_runtime["jsx"])(useLeftTime_UseLeftTime,{end:data.stateTimeLeftTs,delay:1000,children:function children(leftTime){return/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:leftTime>0?Object(src_utils["a" /* getFormattedDuration */])(0,data.stateTimeLeftTs):''});}})]})]});}},{title:'Votes',width:'30%',render:function render(_,data){var total=data.forVotes.plus(data.againstVotes);var forRate=bignumber_default.a.ZERO;var againstRate=bignumber_default.a.ZERO;if(total.gt(bignumber_default.a.ZERO)){forRate=data.forVotes.multipliedBy(100).div(total);againstRate=data.againstVotes.multipliedBy(100).div(total);}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{gap:24,colsTemplate:"minmax(0, 196px) 65px",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:forRate.toNumber(),strokeColor:"var(--theme-green-color)",trailColor:"rgba(var(--theme-green-color-rgb), .16)"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",align:"right",children:[forRate.toFormat(2),"%"]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{gap:24,colsTemplate:"minmax(0, 196px) 65px",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_progress,{percent:againstRate.toNumber(),strokeColor:"var(--theme-red-color)",trailColor:"rgba(var(--theme-red-color-rgb), .16)"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",align:"right",children:[againstRate.toFormat(2),"%"]})]})]});}}];var proposals_table_ProposalsTable=function ProposalsTable(){var proposalsCtx=useProposals();function handlePaginationChange(page){proposalsCtx.changePage(page);}return/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_table,{columns:proposals_table_Columns,dataSource:proposalsCtx.proposals,rowKey:"proposalId",loading:proposalsCtx.loading,locale:{emptyText:'No proposals'},pagination:{total:proposalsCtx.total,current:proposalsCtx.page,pageSize:proposalsCtx.pageSize,position:['bottomRight'],showTotal:function showTotal(total,_ref){var _ref2=Object(slicedToArray["a" /* default */])(_ref,2),from=_ref2[0],to=_ref2[1];return/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:["Showing ",from," to ",to," out of ",total," proposals"]});},onChange:handlePaginationChange}});};/* harmony default export */ var proposals_table = (proposals_table_ProposalsTable);
// EXTERNAL MODULE: ./src/modules/governance/views/proposals-view/s.module.scss
var proposals_view_s_module = __webpack_require__(1952);
var proposals_view_s_module_default = /*#__PURE__*/__webpack_require__.n(proposals_view_s_module);

// CONCATENATED MODULE: ./src/modules/governance/views/proposals-view/index.tsx
var proposals_view_InitialState={hasActiveProposal:undefined,showWhyReason:false};var proposals_view_ProposalsViewInner=function ProposalsViewInner(){var history=Object(react_router["g" /* useHistory */])();var wallet=Object(wallets_walletProvider["c" /* useWallet */])();var daoCtx=useDAO();var proposalsCtx=useProposals();var _useMergeState=Object(useMergeState["a" /* default */])(proposals_view_InitialState),_useMergeState2=Object(slicedToArray["a" /* default */])(_useMergeState,2),state=_useMergeState2[0],setState=_useMergeState2[1];function handleStateChange(stateFilter){proposalsCtx.changeStateFilter(stateFilter);}var handleSearchChange=Object(lib_index_esm["a" /* default */])(function(ev){proposalsCtx.changeSearchFilter(ev.target.value);},400);react_default.a.useEffect(function(){daoCtx.actions.hasActiveProposal().then(function(hasActiveProposal){setState({hasActiveProposal:hasActiveProposal});});},[wallet.account]);var hasCreateRestrictions=state.hasActiveProposal!==undefined&&daoCtx.actions.hasThreshold()!==undefined;var canCreateProposal=state.hasActiveProposal===false&&daoCtx.actions.hasThreshold()===true;return/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:32,children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",align:"center",justify:"space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h1",weight:"bold",color:"primary",children:"Proposals"}),wallet.isActive&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,align:"end",justify:"end",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"primary",disabled:!canCreateProposal,onClick:function onClick(){return history.push('proposals/create');},children:"Create proposal"}),hasCreateRestrictions&&!canCreateProposal&&/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:"You are not able to create a proposal."}),/*#__PURE__*/Object(jsx_runtime["jsx"])(popover["a" /* default */],{title:"Why you can\u2019t create a proposal",placement:"bottomLeft",overlayStyle:{width:520},content:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:8,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",children:"There are 2 possible reasons for why you can\u2019t create a proposal:"}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("ul",{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",children:"You already are the creator of an ongoing proposal"})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("li",{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p2",weight:"semibold",children:["You don\u2019t have enough voting power to create a proposal. The creator of a proposal needs to have a voting power of at least ",daoCtx.minThreshold,"% of the amount of $BOND staked in the DAO."]})})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["d" /* ExternalLink */],{href:"https://integrations.barnbridge.com/specs/dao-specifications#proposals-and-voting",children:"Learn more"})]}),visible:state.showWhyReason,onVisibleChange:function onVisibleChange(visible){return setState({showWhyReason:visible});},children:/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_button["a" /* default */],{type:"link",children:"See why"})})]})]})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card-header flex justify-space-between",style:{padding:0},children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_tabs,{className:proposals_view_s_module_default.a.tabs,simple:true,activeKey:proposalsCtx.stateFilter,onChange:handleStateChange,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:"All proposals"},"all"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:"Active"},"active"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:"Executed"},"executed"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:"Failed"},"failed")]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_input,{className:proposals_view_s_module_default.a.search,prefix:/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"search-outlined",width:16,height:16}),placeholder:"Search proposal",onChange:function onChange(ev){return handleSearchChange(ev);}})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(proposals_table,{})]})]});};var proposals_view_ProposalsView=function ProposalsView(){var history=Object(react_router["g" /* useHistory */])();var daoCtx=useDAO();function handleBackClick(){history.push('/governance/overview');}if(daoCtx.isActive===undefined){return/*#__PURE__*/Object(jsx_runtime["jsx"])(spin_default.a,{});}if(!daoCtx.isActive){return/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",gap:24,align:"start",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"button",onClick:handleBackClick,className:"button-text",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"arrow-back",width:16,height:16,className:"mr-8",color:"inherit"}),"Overview"]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(activation_threshold,{className:"full-width"})]});}return/*#__PURE__*/Object(jsx_runtime["jsx"])(providers_ProposalsProvider,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(proposals_view_ProposalsViewInner,{})});};/* harmony default export */ var proposals_view = (proposals_view_ProposalsView);
// EXTERNAL MODULE: ./src/web3/erc20Contract.ts
var erc20Contract = __webpack_require__(94);

// EXTERNAL MODULE: ./src/components/custom/pagination/s.module.scss
var pagination_s_module = __webpack_require__(1953);
var pagination_s_module_default = /*#__PURE__*/__webpack_require__.n(pagination_s_module);

// CONCATENATED MODULE: ./src/components/custom/pagination/index.tsx
/**
 * @param {number} current
 * @param {number} last
 * @param {number} [delta=2]
 */function pagination_pagination(current,last){var delta=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;var left=current-delta;var right=current+delta+1;var range=[];var rangeWithDots=[];var l;if(last<2){return[1];}range.push(1);for(var i=current-delta;i<=current+delta;i++){if(i>=left&&i<right&&i<last&&i>1){range.push(i);}}range.push(last);range.forEach(function(i){if(l){if(i-l===2){rangeWithDots.push(l+1);}else if(i-l!==1){rangeWithDots.push(null);}}rangeWithDots.push(i);l=i;});return rangeWithDots;}var pagination_Pagination=function Pagination(_ref){var className=_ref.className,total=_ref.total,current=_ref.current,pageSize=_ref.pageSize,onChange=_ref.onChange;var pages=Math.ceil(total/pageSize);var paginationList=Object(react["useMemo"])(function(){return pagination_pagination(current,pages);},[current,pages]);if(pages<2){return null;}return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:classnames_default()(pagination_s_module_default.a.pagination,className),children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("button",{className:classnames_default()(pagination_s_module_default.a.page,pagination_s_module_default.a.prev),type:"button",onClick:function onClick(){return onChange(current-1);},disabled:current<=1,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],{name:"chevron",rotate:180,size:24})}),paginationList.map(function(page,idx){return page?/*#__PURE__*/Object(jsx_runtime["jsx"])("button",{onClick:function onClick(){return onChange(page);},className:classnames_default()(pagination_s_module_default.a.page,Object(defineProperty["a" /* default */])({},pagination_s_module_default.a.active,page===current)),type:"button",disabled:page===current,children:page},idx):/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:pagination_s_module_default.a.separator,children:"..."},idx);}),/*#__PURE__*/Object(jsx_runtime["jsx"])("button",{className:classnames_default()(pagination_s_module_default.a.page,pagination_s_module_default.a.next),type:"button",onClick:function onClick(){return onChange(current+1);},disabled:current>=pages,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],{name:"chevron",size:24})})]});};
// EXTERNAL MODULE: ./src/components/custom/table/s.module.scss
var custom_table_s_module = __webpack_require__(1954);
var custom_table_s_module_default = /*#__PURE__*/__webpack_require__.n(custom_table_s_module);

// CONCATENATED MODULE: ./src/components/custom/table/index.tsx
var custom_table_Table=function Table(_ref){var _classNames2;var columns=_ref.columns,data=_ref.data,loading=_ref.loading,rowKey=_ref.rowKey,_ref$variation=_ref.variation,variation=_ref$variation===void 0?'standard':_ref$variation,link=_ref.link;var history=Object(react_router["g" /* useHistory */])();return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:classnames_default()('table-container',custom_table_s_module_default.a.tableContainer,Object(defineProperty["a" /* default */])({},custom_table_s_module_default.a.loading,loading)),children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("table",{className:classnames_default()(custom_table_s_module_default.a.table,(_classNames2={table:variation==='standard','table-separated':variation==='separated'},Object(defineProperty["a" /* default */])(_classNames2,custom_table_s_module_default.a.clickable,link),Object(defineProperty["a" /* default */])(_classNames2,custom_table_s_module_default.a.loading,loading),_classNames2)),children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("thead",{children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("tr",{children:[columns.map(function(_ref2,dataIdx){var heading=_ref2.heading,align=_ref2.align;return/*#__PURE__*/Object(jsx_runtime["jsx"])("th",{className:align?"text-".concat(align):undefined,children:heading},dataIdx);}),link?/*#__PURE__*/Object(jsx_runtime["jsx"])("th",{}):null]})}),/*#__PURE__*/Object(jsx_runtime["jsx"])("tbody",{children:data.map(function(item,itemIdx){var _rowKey;return/*#__PURE__*/Object(jsx_runtime["jsxs"])("tr",{onClick:link?function(){return history.push(link(item));}:undefined,children:[columns.map(function(_ref3,dataIdx){var Render=_ref3.render,align=_ref3.align;return/*#__PURE__*/Object(jsx_runtime["jsx"])("td",{className:align?"text-".concat(align):undefined,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(Render,Object(objectSpread2["a" /* default */])({},item))},dataIdx);}),link?/*#__PURE__*/Object(jsx_runtime["jsx"])("td",{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],{name:"arrow",color:"red",className:custom_table_s_module_default.a.arrowIcon})}):null]},(_rowKey=rowKey===null||rowKey===void 0?void 0:rowKey(item))!==null&&_rowKey!==void 0?_rowKey:itemIdx);})})]}),loading&&/*#__PURE__*/Object(jsx_runtime["jsx"])(spinner_Spinner,{className:custom_table_s_module_default.a.spinner,style:{width:40,height:40,position:'absolute',marginTop:-20,marginLeft:-20}})]});};var table_TableFooter=function TableFooter(_ref4){var children=_ref4.children,text=_ref4.text,total=_ref4.total,current=_ref4.current,pageSize=_ref4.pageSize,onChange=_ref4.onChange;var generatedText=generateText({text:text,total:total,current:current,pageSize:pageSize});return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:classnames_default()(custom_table_s_module_default.a.tableFooter,'p-24'),children:[generatedText?/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",children:generatedText}):null,/*#__PURE__*/Object(jsx_runtime["jsx"])(pagination_Pagination,{total:total,current:current,pageSize:pageSize,onChange:onChange})]});};function generateText(_ref5){var text=_ref5.text,total=_ref5.total,current=_ref5.current,pageSize=_ref5.pageSize;var generatedText;if(text){var from=total?(current-1)*pageSize+1:0;var to=current*pageSize>total?total:current*pageSize;if(typeof text==='function'){generatedText=text({total:total,from:from,to:to});}if(text===true){generatedText=/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:["Showing ",from," to ",to," out of ",total," entries"]});}}return generatedText;}
// CONCATENATED MODULE: ./src/components/custom/table-filter/index.tsx
function TableFilter(props){var filters=props.filters,value=props.value,onChange=props.onChange,className=props.className;var _AntdForm$useForm=form_default.a.useForm(),_AntdForm$useForm2=Object(slicedToArray["a" /* default */])(_AntdForm$useForm,1),form=_AntdForm$useForm2[0];var _useState=Object(react["useState"])(false),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var initialValues=Object(react["useMemo"])(function(){return filters.reduce(function(a,c){return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},a),{},Object(defineProperty["a" /* default */])({},c.name,c.defaultValue));},{});},[filters]);var countApplied=Object(react["useMemo"])(function(){var count=0;if(value){filters.forEach(function(filter){if(value[filter.name]!==filter.defaultValue){count++;}});}return count;},[filters,value]);Object(react["useEffect"])(function(){if(value){form.setFieldsValue(value);}},[value]);function handleSubmit(values){setVisible(false);onChange(values);}var Content=/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_form,{form:form,initialValues:initialValues,validateTrigger:['onSubmit'],onFinish:handleSubmit,children:[filters.map(function(filter){return/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_form.Item,{name:filter.name,label:filter.label,className:"mb-32",children:filter.itemRender()},filter.name);}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"grid flow-col align-center justify-space-between",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("button",{type:"button",onClick:function onClick(){return form.resetFields();},className:"button-text",children:"Reset filters"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("button",{type:"submit",className:"button-primary",children:"Apply filters"})]})]});return/*#__PURE__*/Object(jsx_runtime["jsx"])(popover["a" /* default */],{title:"Filters",overlayStyle:{width:348},content:Content,visible:visible,onVisibleChange:setVisible,placement:"bottomRight",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("button",{type:"button",className:classnames_default()('button-ghost-monochrome pv-16',className),children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(components_icon["a" /* Icon */],{name:"filter",className:"mr-8"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("span",{className:"mr-8",children:"Filters"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(badge["b" /* SquareBadge */],{children:countApplied})]})});}/* harmony default export */ var table_filter = (TableFilter);
// EXTERNAL MODULE: ./src/components/providers/tokensProvider.tsx
var tokensProvider = __webpack_require__(309);

// EXTERNAL MODULE: ./node_modules/lodash/isEqual.js
var isEqual = __webpack_require__(442);
var isEqual_default = /*#__PURE__*/__webpack_require__.n(isEqual);

// EXTERNAL MODULE: ./src/web3/components/contract-listener/index.tsx + 2 modules
var contract_listener = __webpack_require__(633);

// CONCATENATED MODULE: ./src/hooks/useContract.tsx
function useDeepCompareMemoize(value){var ref=Object(react["useRef"])();if(!isEqual_default()(value,ref.current)){ref.current=value;}return ref.current;}var useContract_useContract=function useContract(address){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},loadBalance=_ref.loadBalance,loadCommon=_ref.loadCommon,loadAllowance=_ref.loadAllowance;var _useWallet=Object(wallets_walletProvider["c" /* useWallet */])(),provider=_useWallet.provider,account=_useWallet.account;var _useReload=Object(useReload["a" /* useReload */])(),_useReload2=Object(slicedToArray["a" /* default */])(_useReload,1),reload=_useReload2[0];var _useContractManager=Object(contractManagerProvider["c" /* useContractManager */])(),getContract=_useContractManager.getContract;var contract=Object(react["useMemo"])(function(){if(!address){return null;}var contract=getContract(address,function(){return new erc20Contract["a" /* default */]([],address);});// (getTokenByAddress(address)?.contract as Erc20Contract) ?? new Erc20Contract([], address);
contract.on(web3Contract["c" /* default */].UPDATE_DATA,reload);return contract;},[address,provider,reload]);Object(react["useEffect"])(function(){if(contract&&loadBalance){contract.setAccount(account);contract.loadBalance();}},[contract,loadBalance,account]);Object(react["useEffect"])(function(){if(contract&&loadCommon){contract.loadCommon().then(function(){return reload();}).catch(Error);}},[contract,loadCommon,reload]);var memoisedAllowance=useDeepCompareMemoize(loadAllowance);Object(react["useEffect"])(function(){if(contract&&memoisedAllowance){if(Array.isArray(memoisedAllowance)){memoisedAllowance.forEach(function(i){return contract.loadAllowance(i);});}else{contract.loadAllowance(memoisedAllowance);}}},[contract,memoisedAllowance]);return contract;};function useContractFactory(options){var _ref2=options!==null&&options!==void 0?options:{},_ref2$listeners=_ref2.listeners,listeners=_ref2$listeners===void 0?true:_ref2$listeners;var _useWallet2=Object(wallets_walletProvider["c" /* useWallet */])(),account=_useWallet2.account,walletProvider=_useWallet2.provider;var _useWeb=Object(web3Provider["d" /* useWeb3 */])(),activeProvider=_useWeb.activeProvider;var _useReload3=Object(useReload["a" /* useReload */])(),_useReload4=Object(slicedToArray["a" /* default */])(_useReload3,2),reload=_useReload4[0],version=_useReload4[1];var activeProviderRef=Object(react["useRef"])(activeProvider);var walletProviderRef=Object(react["useRef"])(walletProvider);var accountRef=Object(react["useRef"])(account);var contractsRef=Object(react["useRef"])(new Map());var createContract=Object(react["useCallback"])(function(address,factory,options){var _options$afterInit;var contract=factory();contract.setCallProvider(activeProviderRef.current);contract.setProvider(walletProviderRef.current);contract.setAccount(accountRef.current);contractsRef.current.set(address,{address:address,factory:factory,options:options,instance:contract});options===null||options===void 0?void 0:(_options$afterInit=options.afterInit)===null||_options$afterInit===void 0?void 0:_options$afterInit.call(options,contract);reload();return contract;},[activeProvider,account,reload]);var updateContracts=Object(lib_index_esm["a" /* default */])(function(){contractsRef.current.forEach(function(meta){var _meta$options,_meta$options$onDestr;(_meta$options=meta.options)===null||_meta$options===void 0?void 0:(_meta$options$onDestr=_meta$options.onDestroy)===null||_meta$options$onDestr===void 0?void 0:_meta$options$onDestr.call(_meta$options,meta.instance);createContract(meta.address,function(){return meta.instance;},meta.options);});},250);if(activeProviderRef.current!==activeProvider){activeProviderRef.current=activeProvider;updateContracts();}if(walletProviderRef.current!==walletProvider){walletProviderRef.current=walletProvider;updateContracts();}if(accountRef.current!==account){accountRef.current=account;updateContracts();}var getOrCreateContract=Object(react["useCallback"])(function(address,factory,options){var contract;if(contractsRef.current.has(address)){contract=contractsRef.current.get(address).instance;}else{contract=createContract(address,factory,options);}return contract;},[createContract]);var getContract=Object(react["useCallback"])(function(address){if(!contractsRef.current.has(address)){return undefined;}return contractsRef.current.get(address).instance;},[createContract]);var Listeners=Object(react["useMemo"])(function(){return listeners?/*#__PURE__*/Object(jsx_runtime["jsx"])(jsx_runtime["Fragment"],{children:Array.from(contractsRef.current).map(function(_ref3){var _ref4=Object(slicedToArray["a" /* default */])(_ref3,2),key=_ref4[0],value=_ref4[1];return/*#__PURE__*/Object(jsx_runtime["jsx"])(contract_listener["a" /* default */],{contract:value.instance},key);})}):null;},[version,listeners]);return{getOrCreateContract:getOrCreateContract,getContract:getContract,Listeners:Listeners};}function useWeb3Contract(factory,options){return useContractFactory({listeners:false}).getOrCreateContract('$address',factory,options);}
// CONCATENATED MODULE: ./src/modules/governance/views/treasury-view/treasury-holdings/index.tsx
var treasury_holdings_Columns=[{heading:'Token Name',render:function render(entity){var _entity$token,_entity$tokenSymbol,_entity$token$name,_entity$token2;return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-col col-gap-12 align-center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:(_entity$token=entity.token)===null||_entity$token===void 0?void 0:_entity$token.icon,className:"mr-16",size:32}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_entity$tokenSymbol=entity.tokenSymbol)!==null&&_entity$tokenSymbol!==void 0?_entity$tokenSymbol:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:(_entity$token$name=(_entity$token2=entity.token)===null||_entity$token2===void 0?void 0:_entity$token2.name)!==null&&_entity$token$name!==void 0?_entity$token$name:'-'})]})]});}},{heading:'Transaction Hash',render:function render(entity){return/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["c" /* ExplorerTxLink */],{address:entity.transactionHash,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"blue",children:Object(utils["f" /* shortenAddr */])(entity.transactionHash)})});}},{heading:'Date',render:function render(entity){return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",className:"mb-4",children:Object(format["a" /* default */])(entity.blockTimestamp*1000,'MM.dd.yyyy')}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:Object(format["a" /* default */])(entity.blockTimestamp*1000,'HH:mm')})]});}},{heading:/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"text-right",children:"Amount"}),render:function render(entity){var _formatToken,_formatUSD;return/*#__PURE__*/Object(jsx_runtime["jsx"])(tooltip["a" /* default */],{placement:"bottomRight",title:Object(utils["b" /* formatToken */])(entity.amount,{decimals:entity.tokenDecimals,tokenName:entity.tokenSymbol}),children:/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"text-right",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:entity.transactionDirection==='IN'?'green':'red',children:[entity.transactionDirection==='IN'?'+':'-'," ",(_formatToken=Object(utils["b" /* formatToken */])(entity.amount))!==null&&_formatToken!==void 0?_formatToken:'-']}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",children:(_formatUSD=Object(utils["c" /* formatUSD */])(entity.amountUSD))!==null&&_formatUSD!==void 0?_formatUSD:'-'})]})});}},{heading:'From',render:function render(entity){return/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["b" /* ExplorerAddressLink */],{address:entity.transactionDirection==='IN'?entity.counterpartyAddress:entity.accountAddress,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"blue",children:entity.transactionDirection==='IN'?entity.counterpartyLabel||Object(utils["f" /* shortenAddr */])(entity.counterpartyAddress):entity.accountLabel||Object(utils["f" /* shortenAddr */])(entity.accountAddress)})});}},{heading:'To',render:function render(entity){return/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["b" /* ExplorerAddressLink */],{address:entity.transactionDirection==='OUT'?entity.counterpartyAddress:entity.accountAddress,children:/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"blue",children:entity.transactionDirection==='OUT'?entity.counterpartyLabel||Object(utils["f" /* shortenAddr */])(entity.counterpartyAddress):entity.accountLabel||Object(utils["f" /* shortenAddr */])(entity.accountAddress)})});}}];var treasury_holdings_TreasuryHoldings=function TreasuryHoldings(){var _historyResult$data,_historyResult$meta$c,_formatUSD2;var config=Object(configProvider["b" /* useConfig */])();var _useReload=Object(useReload["a" /* useReload */])(),_useReload2=Object(slicedToArray["a" /* default */])(_useReload,2),reload=_useReload2[0],version=_useReload2[1];var _useTokens=Object(tokensProvider["b" /* useTokens */])(),getAmountInUSD=_useTokens.getAmountInUSD,getToken=_useTokens.getToken;var _useContractFactory=useContractFactory(),getOrCreateContract=_useContractFactory.getOrCreateContract,getContract=_useContractFactory.getContract;var _useState=Object(react["useState"])(1),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),historyPage=_useState2[0],setHistoryPage=_useState2[1];var historyPageSize=10;var _useState3=Object(react["useState"])('all'),_useState4=Object(slicedToArray["a" /* default */])(_useState3,2),tokenFilter=_useState4[0],setTokenFilter=_useState4[1];var _useState5=Object(react["useState"])('all'),_useState6=Object(slicedToArray["a" /* default */])(_useState5,2),directionFilter=_useState6[0],setDirectionFilter=_useState6[1];var filterValue=Object(react["useMemo"])(function(){return{token:tokenFilter,direction:directionFilter};},[tokenFilter,directionFilter]);var _useFetchTreasuryToke=useFetchTreasuryTokens(),_useFetchTreasuryToke2=_useFetchTreasuryToke.data,treasuryTokens=_useFetchTreasuryToke2===void 0?[]:_useFetchTreasuryToke2;var _useFetchTreasuryHist=useFetchTreasuryHistory(historyPage,tokenFilter,directionFilter),historyResult=_useFetchTreasuryHist.data,historyLoading=_useFetchTreasuryHist.loading;var historyItems=(_historyResult$data=historyResult===null||historyResult===void 0?void 0:historyResult.data)!==null&&_historyResult$data!==void 0?_historyResult$data:[];var historyItemsCount=(_historyResult$meta$c=historyResult===null||historyResult===void 0?void 0:historyResult.meta.count)!==null&&_historyResult$meta$c!==void 0?_historyResult$meta$c:0;var tokensSource=Object(react["useMemo"])(function(){var tokens=(treasuryTokens!==null&&treasuryTokens!==void 0?treasuryTokens:[]).map(function(treasuryToken){var _tokenContract$getBal,_config$contracts$dao;var token=getToken(treasuryToken.symbol);if(!token){return undefined;}var tokenContract=getContract(treasuryToken.address);var balanceAmount=tokenContract===null||tokenContract===void 0?void 0:(_tokenContract$getBal=tokenContract.getBalanceOf((_config$contracts$dao=config.contracts.dao)===null||_config$contracts$dao===void 0?void 0:_config$contracts$dao.governance))===null||_tokenContract$getBal===void 0?void 0:_tokenContract$getBal.unscaleBy(treasuryToken.decimals);var balanceAmountUSD=getAmountInUSD(balanceAmount,treasuryToken.symbol);return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},treasuryToken),{},{balanceAmount:balanceAmount,balanceAmountUSD:balanceAmountUSD,token:token});}).filter(Boolean);tokens.sort(function(a,b){return a.balanceAmountUSD&&b.balanceAmountUSD?b.balanceAmountUSD.minus(a.balanceAmountUSD).toNumber():0;});return tokens;},[getAmountInUSD,getContract,treasuryTokens,version]);var totalHoldingsUSD=Object(react["useMemo"])(function(){return bignumber_default.a.sumEach(tokensSource,function(item){var _item$balanceAmountUS;return(_item$balanceAmountUS=item.balanceAmountUSD)!==null&&_item$balanceAmountUS!==void 0?_item$balanceAmountUS:bignumber_default.a.ZERO;});},[tokensSource]);var historySource=Object(react["useMemo"])(function(){var _historyItems$map;return(_historyItems$map=historyItems===null||historyItems===void 0?void 0:historyItems.map(function(item){var token=getToken(item.tokenSymbol);var amount=bignumber_default.a.from(item.amount);var amountUSD=getAmountInUSD(amount,item.tokenSymbol);return Object(objectSpread2["a" /* default */])(Object(objectSpread2["a" /* default */])({},item),{},{token:token,amount:amount,amountUSD:amountUSD});}))!==null&&_historyItems$map!==void 0?_historyItems$map:[];},[historyItems]);var historyFilters=Object(react["useMemo"])(function(){return[{name:'token',label:'Token address',defaultValue:'all',itemRender:function itemRender(){var tokenOpts=[{value:'all',label:'All tokens'}].concat(Object(toConsumableArray["a" /* default */])(tokensSource.map(function(token){var _token$token$name,_token$token;return{value:token.address,label:(_token$token$name=(_token$token=token.token)===null||_token$token===void 0?void 0:_token$token.name)!==null&&_token$token$name!==void 0?_token$token$name:token.symbol};})));return/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_select["a" /* default */],{options:tokenOpts,className:"full-width"});}},{name:'direction',label:'Transaction direction',defaultValue:'all',itemRender:function itemRender(){var options=[{value:'all',label:'All pool transactions'},{value:'in',label:'In'},{value:'out',label:'Out'}];return/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_select["a" /* default */],{options:options,className:"full-width"});}}];},[tokensSource]);Object(react["useEffect"])(function(){treasuryTokens===null||treasuryTokens===void 0?void 0:treasuryTokens.forEach(function(token){getOrCreateContract(token.address,function(){return new erc20Contract["a" /* default */]([],token.address);},{afterInit:function afterInit(contract){var _config$contracts$dao2;contract.on(web3Contract["c" /* default */].UPDATE_DATA,reload);contract.loadCommon().catch(Error);contract.loadBalance((_config$contracts$dao2=config.contracts.dao)===null||_config$contracts$dao2===void 0?void 0:_config$contracts$dao2.governance).catch(Error);}});});},[treasuryTokens]);function handleFilterChange(filters){setHistoryPage(1);setTokenFilter(filters.token);setDirectionFilter(filters.direction);}return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"h2",weight:"bold",color:"primary",className:"mb-4",children:(_formatUSD2=Object(utils["c" /* formatUSD */])(totalHoldingsUSD))!==null&&_formatUSD2!==void 0?_formatUSD2:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p2",weight:"semibold",color:"secondary",className:"mb-32",children:"Total holdings balance"}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"grid gap-16 mb-32",style:{gridTemplateColumns:'repeat(3, 1fr)'},children:tokensSource.map(function(item){var _item$token,_item$symbol,_item$token$name,_item$token2,_formatToken2,_formatUSD3;return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card flex flow-col col-gap-12 align-center p-24",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(token_icon["a" /* TokenIcon */],{name:(_item$token=item.token)===null||_item$token===void 0?void 0:_item$token.icon,className:"mr-8",size:32}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_item$symbol=item.symbol)!==null&&_item$symbol!==void 0?_item$symbol:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:(_item$token$name=(_item$token2=item.token)===null||_item$token2===void 0?void 0:_item$token2.name)!==null&&_item$token$name!==void 0?_item$token$name:'-'})]}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"flex flow-row row-gap-4 align-end ml-auto",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:(_formatToken2=Object(utils["b" /* formatToken */])(item.balanceAmount))!==null&&_formatToken2!==void 0?_formatToken2:'-'}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"small",weight:"semibold",color:"secondary",children:(_formatUSD3=Object(utils["c" /* formatUSD */])(item.balanceAmountUSD))!==null&&_formatUSD3!==void 0?_formatUSD3:'-'})]})]},item.address);})}),/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card",children:[/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"card-header flex flow-col align-center justify-space-between pv-12",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",color:"primary",children:"Transaction history"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(table_filter,{filters:historyFilters,value:filterValue,onChange:handleFilterChange})]}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_table_Table,{columns:treasury_holdings_Columns,data:historySource,rowKey:function rowKey(row){return"".concat(row.transactionHash,"_").concat(row.tokenSymbol);},loading:historyLoading// locale={{
//   emptyText: 'No entries', // TODO: Add support of empty result to Table component
// }}
}),/*#__PURE__*/Object(jsx_runtime["jsx"])(table_TableFooter,{total:historyItemsCount,current:historyPage,pageSize:historyPageSize,onChange:setHistoryPage,text:function text(_ref){var total=_ref.total,from=_ref.from,to=_ref.to;return/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:["Showing ",from," to ",to," out of ",total," transactions"]});}})]})]});};/* harmony default export */ var treasury_holdings = (treasury_holdings_TreasuryHoldings);
// CONCATENATED MODULE: ./src/modules/governance/views/treasury-view/index.tsx
var treasury_view_TreasuryView=function TreasuryView(){var _useRouteMatch=Object(react_router["i" /* useRouteMatch */])(),_useRouteMatch$params=_useRouteMatch.params.tab,tab=_useRouteMatch$params===void 0?'holdings':_useRouteMatch$params;var history=Object(react_router["g" /* useHistory */])();var _useState=Object(react["useState"])(tab),_useState2=Object(slicedToArray["a" /* default */])(_useState,2),activeTab=_useState2[0],setActiveTab=_useState2[1];function handleTabChange(tabKey){history.push("/governance/treasury/".concat(tabKey));}Object(react["useEffect"])(function(){if(tab!==activeTab){setActiveTab(tab);}},[tab]);return/*#__PURE__*/Object(jsx_runtime["jsxs"])("div",{className:"container-limit",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card mb-32",children:/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"card-header pv-0",children:/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_tabs_Tabs,{tabs:[{id:'holdings',children:'Holdings',onClick:function onClick(){handleTabChange('holdings');}}],size:"small",activeKey:activeTab,onClick:setActiveTab})})}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["d" /* Switch */],{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/treasury/holdings",exact:true,component:treasury_holdings})})]});};/* harmony default export */ var treasury_view = (treasury_view_TreasuryView);
// EXTERNAL MODULE: ./src/modules/governance/s.module.scss
var governance_s_module = __webpack_require__(1955);
var governance_s_module_default = /*#__PURE__*/__webpack_require__.n(governance_s_module);

// CONCATENATED MODULE: ./src/modules/governance/index.tsx
var governance_GovernanceViewInternal=function GovernanceViewInternal(){var history=Object(react_router["g" /* useHistory */])();var _useRouteMatch=Object(react_router["i" /* useRouteMatch */])(),_useRouteMatch$params=_useRouteMatch.params.vt,vt=_useRouteMatch$params===void 0?'overview':_useRouteMatch$params;var wallet=Object(wallets_walletProvider["c" /* useWallet */])();var _React$useState=react_default.a.useState(vt),_React$useState2=Object(slicedToArray["a" /* default */])(_React$useState,2),activeTab=_React$useState2[0],setActiveTab=_React$useState2[1];function handleTabChange(tabKey){if(tabKey){setActiveTab(tabKey);history.push("/governance/".concat(tabKey));}}react_default.a.useEffect(function(){if(vt!==activeTab){setActiveTab(vt);}},[vt]);return/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"row",children:[wallet.account&&/*#__PURE__*/Object(jsx_runtime["jsx"])(voting_header,{}),/*#__PURE__*/Object(jsx_runtime["jsxs"])(antd_tabs,{className:governance_s_module_default.a.tabs,activeKey:activeTab,onChange:handleTabChange,children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"bar-charts-outlined"})," Overview"]})},"overview"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{disabled:!wallet.account,tab:/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"wallet-outlined"})," Portfolio"]})},"portfolio"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"proposal-outlined"})," Proposals"]})},"proposals"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:/*#__PURE__*/Object(jsx_runtime["jsxs"])(jsx_runtime["Fragment"],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"treasury-outlined"})," Treasury"]})},"treasury"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["d" /* ExternalLink */],{href:"https://signal.barnbridge.com/",style:{color:'inherit'},children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"chats-outlined"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",children:"Signal"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"arrow-top-right",width:8,height:8,style:{alignSelf:'start',color:'inherit'}})]})})},"signal"),/*#__PURE__*/Object(jsx_runtime["jsx"])(antd_tabs.Tab,{tab:/*#__PURE__*/Object(jsx_runtime["jsx"])(components_button["d" /* ExternalLink */],{href:"https://forum.barnbridge.com/",style:{color:'inherit'},children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(grid["a" /* default */],{flow:"col",gap:8,align:"center",children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"forum-outlined"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(typography["b" /* Text */],{type:"p1",weight:"semibold",children:"Forum"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(custom_icon["a" /* default */],{name:"arrow-top-right",width:8,height:8,style:{alignSelf:'start',color:'inherit'}})]})})},"forum")]}),/*#__PURE__*/Object(jsx_runtime["jsx"])("div",{className:"content-container-fix content-container",children:/*#__PURE__*/Object(jsx_runtime["jsxs"])(react_router["d" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/overview",exact:true,component:overview_view}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["a" /* Redirect */],{exact:true,from:"/governance/portfolio",to:"/governance/portfolio/deposit"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/portfolio/:action(\\w+)",component:portfolio_view}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["a" /* Redirect */],{exact:true,from:"/governance/treasury",to:"/governance/treasury/holdings"}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/treasury/:tab(\\w+)",exact:true,component:treasury_view}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/proposals/create",exact:true,component:proposal_create_view}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/proposals/:id(\\d+)",exact:true,component:proposal_detail_view}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["b" /* Route */],{path:"/governance/proposals",exact:true,component:proposals_view}),/*#__PURE__*/Object(jsx_runtime["jsx"])(react_router["a" /* Redirect */],{from:"/governance",to:"/governance/overview"})]})})]});};var governance_GovernanceView=function GovernanceView(props){return/*#__PURE__*/Object(jsx_runtime["jsx"])(api,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(dao_provider,{children:/*#__PURE__*/Object(jsx_runtime["jsx"])(governance_GovernanceViewInternal,{children:props.children})})});};/* harmony default export */ var governance = __webpack_exports__["default"] = (governance_GovernanceView);

/***/ })

}]);