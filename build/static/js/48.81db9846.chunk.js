(this["webpackJsonpbarnbridge-frontend"]=this["webpackJsonpbarnbridge-frontend"]||[]).push([[48],{1393:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n(4),r=n(5),c=n(0);var i=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(c.useRef)(null),o=Object(c.useState)(a),s=Object(r.a)(o,2),l=s[0],u=s[1],d=Object(c.useRef)();function b(){l||u(!0)}function m(){l&&u(!1)}return Object(c.useEffect)((function(){d.current=e})),Object(c.useEffect)((function(){if(null!==t&&l){var e=setInterval((function(){d.current&&d.current()}),t);return i.current=e,function(){i.current=null,clearInterval(e)}}}),[t,l]),(n=[b,m,i.current]).start=b,n.stop=m,n.intervalId=i.current,n},o=n(91),s=n(119),l=n(1);function u(e){var t,n=Object(c.useRef)(e);n.current=e;var a=Object(c.useState)(!1),o=Object(r.a)(a,2),s=o[0],l=o[1],u=Object(c.useState)(!1),d=Object(r.a)(u,2),b=d[0],m=d[1],f=Object(c.useCallback)((function(){if(n.current.end)return Math.max(n.current.end.valueOf()-Date.now(),0)}),[]),j=i((function(){var e,t,a,r,c=f();(null===(e=(t=n.current).onTick)||void 0===e||e.call(t,null!==c&&void 0!==c?c:0),0===c)&&(l(!1),v(),null===(a=(r=n.current).onEnd)||void 0===a||a.call(r))}),null!==(t=e.delay)&&void 0!==t?t:1e3,!1),p=Object(r.a)(j,2),h=p[0],v=p[1];return Object(c.useEffect)((function(){var t,a,r;(!e.end||Date.now()<e.end)&&(l(!0),h(),null===(t=(a=n.current).onStart)||void 0===t||t.call(a,null!==(r=f())&&void 0!==r?r:0));return function(){l(!1),v()}}),[e.end]),Object(c.useMemo)((function(){return{isStarted:s,isRunning:b,start:function(){var e,t,a;l(!0),m(!0),h(),null===(e=(t=n.current).onStart)||void 0===e||e.call(t,null!==(a=f())&&void 0!==a?a:0)},stop:function(){var e,t,a;m(!1),l(!1),v(),null===(e=(t=n.current).onStop)||void 0===e||e.call(t,null!==(a=f())&&void 0!==a?a:0)},pause:function(){m(!1),v()},resume:function(){m(!0),h()}}}),[b,v,h])}var d=function(e){var t,n=Object(o.b)().windowState,i=Object(s.a)(),d=Object(r.a)(i,1)[0],b=Object(c.useRef)(),m=u(Object(a.a)(Object(a.a)({},e),{},{onStart:function(t){var n;b.current=t,d(),null===(n=e.onStart)||void 0===n||n.call(e,t)},onStop:function(t){var n;b.current=t,d(),null===(n=e.onStop)||void 0===n||n.call(e,t)},onTick:function(t){var n;b.current=t,d(),null===(n=e.onTick)||void 0===n||n.call(e,t)}})),f=m.isStarted,j=m.isRunning,p=m.pause,h=m.resume;return Object(c.useEffect)((function(){f&&(!j&&n.isVisible&&h(),j&&!n.isVisible&&p())}),[n.isVisible,f,j]),Object(l.jsx)(l.Fragment,{children:e.children(null!==(t=b.current)&&void 0!==t?t:0)})}},1430:function(e,t,n){"use strict";var a=n(4),r=n(17),c=n(0),i=n.n(c),o=n(1452),s=n.n(o),l=n(8),u=n.n(l),d=n(33),b=n(1573),m=n.n(b),f=n(1),j=["className","type"];t.a=function(e){var t=e.className,n=e.type,c=void 0===n?"info":n,o=Object(r.a)(e,j),l=i.a.useMemo((function(){if("info"===c)return Object(f.jsx)(d.a,{name:"info"})}),[c]);return Object(f.jsx)(s.a,Object(a.a)({className:u()(m.a.component,t),type:c,showIcon:!0,icon:l},o))}},1452:function(e,t,n){"use strict";var a=n(26),r=n(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(44)),i=r(n(72)),o=r(n(57)),s=a(n(0)),l=r(n(328)),u=r(n(438)),d=r(n(440)),b=r(n(441)),m=r(n(439)),f=r(n(431)),j=r(n(437)),p=r(n(657)),h=r(n(327)),v=r(n(92)),O=r(n(8)),y=n(70),g=r(n(1574)),x=r(n(1575)),w=n(251),N=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},k={success:f.default,info:p.default,error:h.default,warning:j.default},S={success:u.default,info:b.default,error:m.default,warning:d.default},E=function(e){var t,n=e.description,a=e.prefixCls,r=e.message,u=e.banner,d=e.className,b=void 0===d?"":d,m=e.style,f=e.onMouseEnter,j=e.onMouseLeave,p=e.onClick,h=e.afterClose,x=e.showIcon,E=e.closable,_=e.closeText,C=e.action,T=N(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),I=s.useState(!1),M=(0,o.default)(I,2),D=M[0],L=M[1],W=s.useRef(),P=s.useContext(y.ConfigContext),R=P.getPrefixCls,Y=P.direction,A=R("alert",a),F=function(e){var t;L(!0),null===(t=T.onClose)||void 0===t||t.call(T,e)},H=!!_||E,B=function(){var e=T.type;return void 0!==e?e:u?"warning":"info"}(),U=!(!u||void 0!==x)||x,V=(0,O.default)(A,"".concat(A,"-").concat(B),(t={},(0,i.default)(t,"".concat(A,"-with-description"),!!n),(0,i.default)(t,"".concat(A,"-no-icon"),!U),(0,i.default)(t,"".concat(A,"-banner"),!!u),(0,i.default)(t,"".concat(A,"-rtl"),"rtl"===Y),t),b),J=(0,g.default)(T);return s.createElement(v.default,{visible:!D,motionName:"".concat(A,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:h},(function(e){var t=e.className,a=e.style;return s.createElement("div",(0,c.default)({ref:W,"data-show":!D,className:(0,O.default)(V,t),style:(0,c.default)((0,c.default)({},m),a),onMouseEnter:f,onMouseLeave:j,onClick:p,role:"alert"},J),U?function(){var e=T.icon,t=(n?S:k)[B]||null;return e?(0,w.replaceElement)(e,s.createElement("span",{className:"".concat(A,"-icon")},e),(function(){return{className:(0,O.default)("".concat(A,"-icon"),(0,i.default)({},e.props.className,e.props.className))}})):s.createElement(t,{className:"".concat(A,"-icon")})}():null,s.createElement("div",{className:"".concat(A,"-content")},s.createElement("div",{className:"".concat(A,"-message")},r),s.createElement("div",{className:"".concat(A,"-description")},n)),C?s.createElement("div",{className:"".concat(A,"-action")},C):null,H?s.createElement("button",{type:"button",onClick:F,className:"".concat(A,"-close-icon"),tabIndex:0},_?s.createElement("span",{className:"".concat(A,"-close-text")},_):s.createElement(l.default,null)):null)}))};E.ErrorBoundary=x.default;var _=E;t.default=_},1573:function(e,t,n){e.exports={component:"s_component__bp6jU"}},1574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||"data-__"===n.substr(0,7)||(t[n]=e[n]),t}),{})}},1575:function(e,t,n){"use strict";var a=n(26),r=n(22);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(42)),i=r(n(54)),o=r(n(89)),s=r(n(90)),l=a(n(0)),u=r(n(1452)),d=function(e){(0,o.default)(n,e);var t=(0,s.default)(n);function n(){var e;return(0,c.default)(this,n),(e=t.apply(this,arguments)).state={error:void 0,info:{componentStack:""}},e}return(0,i.default)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.description,a=e.children,r=this.state,c=r.error,i=r.info,o=i&&i.componentStack?i.componentStack:null,s="undefined"===typeof t?(c||"").toString():t,d="undefined"===typeof n?o:n;return c?l.createElement(u.default,{type:"error",message:s,description:l.createElement("pre",null,d)}):a}}]),n}(l.Component);t.default=d},1607:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return f}));var a=n(4),r=n(13),c=n(17),i=(n(0),n(8)),o=n.n(i),s=n(1608),l=n.n(s),u=n(1),d=["children","selected"],b=["className"],m=function(e){var t=e.children,n=e.selected,i=void 0!==n&&n,s=Object(c.a)(e,d);return Object(u.jsx)("button",Object(a.a)(Object(a.a)({type:"button",className:o()(l.a.card,Object(r.a)({},l.a.selected,i))},s),{},{children:t}))},f=function(e){var t=e.className,n=Object(c.a)(e,b);return Object(u.jsx)("div",Object(a.a)({className:o()(l.a.cards,t)},n))}},1608:function(e,t,n){e.exports={cards:"s_cards__SMmvy",card:"s_card__3ZxAU",selected:"s_selected__5uLwB"}},2241:function(e,t,n){e.exports={alertLink:"s_alertLink__ZHw1S"}},2284:function(e,t,n){"use strict";n.r(t),n.d(t,"WITHDRAW_TWO_STEP_KEY",(function(){return x})),n.d(t,"WITHDRAW_INSTANT_KEY",(function(){return w}));var a=n(5),r=n(0),c=n.n(r),i=n(56),o=n(65),s=n(1430),l=n(74),u=n(99),d=n(38),b=n(48),m=n(63),f=n(12),j=n(1607),p=n(1393),h=n(1406),v=n(60),O=n(2241),y=n.n(O),g=n(1),x="two-step",w="instant";t.default=function(){var e,t,n=Object(i.g)(),O=Object(h.b)(),N=O.pool,k=O.marketId,S=O.tokenId,E=Object(r.useState)(),_=Object(a.a)(E,2),C=_[0],T=_[1],I=Object(r.useState)(),M=Object(a.a)(I,2),D=M[0],L=M[1];c.a.useEffect((function(){N&&N.contracts.smartYield.balance&&O.actions.getForfeitsFor(N.contracts.smartYield.balance).then(L)}),[null===N||void 0===N?void 0:N.contracts.smartYield.balance]);var W=c.a.useMemo((function(){var e;return null===N||void 0===N||null===(e=N.contracts.smartYield.balance)||void 0===e?void 0:e.multipliedBy(null===N||void 0===N?void 0:N.state.jTokenPrice)}),[null===N||void 0===N?void 0:N.contracts.smartYield.balance,null===N||void 0===N?void 0:N.state.jTokenPrice]),P=c.a.useMemo((function(){if(D)return null===W||void 0===W?void 0:W.minus(D)}),[W,D]);return Object(g.jsxs)("div",{className:"card p-24",children:[Object(g.jsx)(f.b,{type:"h3",weight:"semibold",color:"primary",className:"mb-16",children:"Initiate Withdraw"}),Object(g.jsxs)(f.b,{type:"p2",weight:"semibold",className:"mb-32",children:["In order to access your liquidity and profits you can withdraw it from the pool.",Object(g.jsx)("br",{}),"To do so, you have 2 options:"]}),Object(g.jsxs)(b.a,{flow:"col",gap:32,colsTemplate:"1fr 1fr",className:"mb-32",children:[Object(g.jsxs)(j.a,{selected:C===x,onClick:function(){T(x)},children:[Object(g.jsx)(m.a,{name:"withdrawal_regular",width:64,height:64,className:"mb-16"}),Object(g.jsx)(f.b,{type:"p1",weight:"semibold",color:"primary",className:"mb-16",children:"2 step withdraw"}),Object(g.jsx)(f.b,{type:"small",weight:"semibold",className:"mb-4",children:"Wait time"}),Object(g.jsx)(p.a,{end:1e3*(null!==(e=null===N||void 0===N||null===(t=N.contracts.smartYield.abond)||void 0===t?void 0:t.maturesAt)&&void 0!==e?e:0),delay:1e3,children:function(e){var t,n;return Object(g.jsx)(f.b,{type:"p1",weight:"semibold",color:"primary",className:"mb-16",children:e>0?Object(v.b)(0,1e3*(null!==(t=null===N||void 0===N||null===(n=N.contracts.smartYield.abond)||void 0===n?void 0:n.maturesAt)&&void 0!==t?t:0)):"0s"})}}),Object(g.jsxs)(u.a,{title:Object(o.a)(Object(o.h)(W,null===N||void 0===N?void 0:N.underlyingDecimals),null===N||void 0===N?void 0:N.underlyingDecimals),children:[Object(g.jsx)(f.a,{text:Object(g.jsxs)(b.a,{flow:"row",gap:8,align:"start",children:[Object(g.jsx)(f.b,{type:"p2",children:"This value is based on current junior token prices. At the actual maturity date of the junior bond, the price may differ and be higher or lower."}),Object(g.jsx)(d.d,{href:"https://integrations.barnbridge.com/specs/smart-yield-specifications#steps-for-exit",className:"link-blue",style:{fontWeight:600},children:"Learn more"})]}),children:Object(g.jsx)(f.b,{type:"small",weight:"semibold",className:"mb-4",children:"Total withdrawable amount"})}),Object(g.jsxs)(f.b,{type:"p1",weight:"semibold",color:"primary",children:[Object(o.a)(Object(o.h)(W,null===N||void 0===N?void 0:N.underlyingDecimals))," ",null===N||void 0===N?void 0:N.underlyingSymbol]})]})]}),Object(g.jsxs)(j.a,{selected:C===w,onClick:function(){T(w)},children:[Object(g.jsx)(m.a,{name:"withdrawal_instant",width:64,height:64,className:"mb-16"}),Object(g.jsx)(f.b,{type:"p1",weight:"semibold",color:"primary",className:"mb-16",children:"Instant withdraw"}),Object(g.jsx)(f.b,{type:"small",weight:"semibold",className:"mb-4",children:"Wait time"}),Object(g.jsx)(f.b,{type:"p1",weight:"semibold",color:"primary",className:"mb-16",children:"None"}),Object(g.jsxs)(u.a,{title:Object(o.a)(Object(o.h)(P,null===N||void 0===N?void 0:N.underlyingDecimals),null===N||void 0===N?void 0:N.underlyingDecimals),children:[Object(g.jsx)(f.b,{type:"small",weight:"semibold",className:"mb-4",children:"Total withdrawable amount"}),Object(g.jsxs)(f.b,{type:"p1",weight:"semibold",color:"primary",children:[Object(o.a)(Object(o.h)(P,null===N||void 0===N?void 0:N.underlyingDecimals))," ",null===N||void 0===N?void 0:N.underlyingSymbol]})]}),Object(g.jsxs)(f.b,{type:"small",weight:"semibold",color:"red",children:["Forfeits: ",Object(o.a)(Object(o.h)(D,null===N||void 0===N?void 0:N.underlyingDecimals),null===N||void 0===N?void 0:N.underlyingDecimals)," ",null===N||void 0===N?void 0:N.underlyingSymbol," ",Object(g.jsx)(m.a,{name:"arrow-top-right",width:9,height:8,rotate:90,color:"red"})]})]})]}),C===x&&Object(g.jsx)(s.a,{className:"mb-32",type:"warning",message:"Warning!",description:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"mb-8",children:"The 2-step process allows a user to first signal the intention of exiting the pool. In return they receive an NFT that can be redeemed after the current seniors reach their maturity dates."}),Object(g.jsx)(d.d,{href:"https://integrations.barnbridge.com/specs/smart-yield-specifications#steps-for-exit",className:y.a.alertLink,children:"Learn more"})]})}),C===w&&Object(g.jsx)(s.a,{className:"mb-32",type:"warning",message:"Warning!",description:Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"mb-8",children:["The instant withdrawal allows juniors to instantly withdraw their underlying tokens.",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),"However, in order to ensure the guaranteed gains for the current senior bonds, a locked part of each junior position is burnt in favor of the existing junior token holders, increasing the price.",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),"Using this function, you forfeit your locked underlying."]}),Object(g.jsx)(d.d,{href:"https://integrations.barnbridge.com/specs/smart-yield-specifications#steps-for-exit",className:y.a.alertLink,children:"Learn more"})]})}),Object(g.jsxs)(b.a,{flow:"col",gap:64,align:"center",justify:"space-between",children:[Object(g.jsxs)("button",{type:"button",className:"button-back",onClick:function(){n.push("/smart-yield/portfolio/junior")},children:[Object(g.jsx)(m.a,{name:"arrow-back",width:16,height:16,className:"mr-8",color:"inherit"}),"Cancel"]}),Object(g.jsx)(l.a,{type:"primary",disabled:!C,onClick:function(){C&&n.push({pathname:"/smart-yield/withdraw/".concat(C),search:"?m=".concat(k,"&t=").concat(S)})},children:"Next step"})]})]})}}}]);
//# sourceMappingURL=48.81db9846.chunk.js.map