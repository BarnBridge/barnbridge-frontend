{"version":3,"sources":["components/antd/form/index.tsx","components/antd/divider/index.tsx","components/antd/form/s.module.scss","components/custom/spinner/index.tsx","components/antd/divider/s.module.scss","hooks/useContract.tsx","components/antd/input/index.tsx","components/custom/slider/index.tsx","components/custom/token-amount-new/index.tsx","components/custom/dropdown/index.tsx","components/custom/dropdown/s.module.scss","components/custom/slider/s.module.scss","components/custom/token-amount-new/s.module.scss","components/custom/spinner/s.module.scss","components/antd/input/s.module.scss","components/custom/transaction-details/index.tsx","components/custom/transaction-details/s.module.scss","components/custom/tooltip/index.tsx","components/custom/enable-token/index.tsx","modules/smart-exposure/views/deposit-view/Deposit.tsx","modules/smart-exposure/contracts/seUniswapRouterContract.ts","modules/smart-exposure/views/deposit-view/Swap.tsx","modules/smart-exposure/views/deposit-view/index.tsx"],"names":["Form","props","className","children","formProps","cn","s","form","layout","requiredMark","Item","label","hint","extra","itemProps","item","flow","gap","align","title","name","size","List","listProps","Divider","dividerProps","divider","module","exports","Spinner","spinning","restProps","container","classNames","spinner","useDeepCompareMemoize","value","ref","useRef","isEqual","current","useContract","address","loadBalance","loadCommon","loadAllowance","useWallet","provider","account","useReload","reload","useContractManager","getContract","contract","useMemo","Erc20Contract","on","Web3Contract","UPDATE_DATA","useEffect","setAccount","then","catch","Error","memoisedAllowance","Array","isArray","forEach","i","useContractFactory","options","listeners","walletProvider","activeProvider","useWeb3","version","activeProviderRef","walletProviderRef","accountRef","contractsRef","Map","createContract","useCallback","factory","setCallProvider","setProvider","set","instance","afterInit","updateContracts","useDebounce","meta","onDestroy","getOrCreateContract","has","get","Listeners","from","map","key","useWeb3Contract","Input","disabled","inputProps","component","autoComplete","Slider","rest","max","Number","slicedMax","Math","floor","percent","type","input","style","TokenAmount","forwardRef","onChange","before","secondary","classNameBefore","slider","errors","decimals","maxValue","BigNumber","ZERO","tokenAmount","error","length","tokenAmountBefore","tokenAmountValues","tokenAmountValue","inputMode","pattern","onWheel","ev","currentTarget","blur","e","target","tokenAmountHint","isZero","alignSelf","onClick","toString","idx","weight","color","marginTop","tokenAmountSlider","min","step","TokenAmountPreview","tokenAmountPreview","tokenAmountPreviewBefore","tokenAmountPreviewValues","tokenAmountPreviewValue","readOnly","tokenAmountPreviewHint","TokenSelect","tokens","getTokenBySymbol","useKnownTokens","foundToken","items","reduce","acc","token","found","icon","symbol","setOpen","open","isOpen","tokenAmountSelectToken","marginLeft","modifiers","offset","enabled","phase","requires","fn","state","styles","popper","minWidth","rects","reference","width","effect","elements","offsetWidth","DropdownBase","content","React","useState","referenceElement","popperElement","usePopper","placement","strategy","attributes","forceUpdate","outyInstance","nodes","referenceWrapEl","push","popperEl","outy","remove","ReactDOM","createPortal","display","document","querySelector","body","DropdownList","tokenSelectList","href","tokenSelectListButton","to","Dropdown","dropdown","dropdownChevron","transform","SLIPPAGE_OPTIONS","TransactionCustomization","showSlippage","slippage","showDeadline","deadline","Antd","useForm","handleValuesChange","values","strValue","String","slice","setFieldsValue","handleReset","resetFields","handleFinish","initialValues","validateTrigger","onValuesChange","onFinish","opt","rules","required","message","validator","_","Promise","resolve","reject","noStyle","deadlineInput","suffix","htmlType","TransactionDetails","slippageHint","visible","setVisible","handleChange","overlayStyle","onVisibleChange","text","InfoTooltip","flexShrink","EnableTokens","tokenAContract","tokenBContract","poolAddress","tranche","isAllowedOf","EnableTokenButton","tokenSymbol","tokenA","tokenB","loading","setLoading","flexGrow","approve","finally","Deposit","tokenEContract","useParams","pool","trancheAddress","tokenAState","setTokenAState","tokenBState","setTokenBState","tokenEState","setTokenEState","ePoolContract","useEPoolContract","ePoolHelperContract","useSEPools","getTokenIconBySymbol","tokenAIcon","tokenBIcon","tokenAMax","balance","unscaleBy","tokenBMax","handleAmountTokenA","amount","scaleBy","getTokenBForTokenA","amountB","handleAmountTokenB","getTokenAForTokenB","amountA","getETokenForTokenATokenB","val","undefined","handleDeposit","a","preventDefault","deposit","tokenAErrors","match","isLessThan","tokenBErrors","disableSubmit","onSubmit","formatPercent","tokenARatio","formatUSD","multipliedBy","price","placeholder","height","margin","tokenBRatio","eTokenSymbol","eTokenPrice","name1","name2","formatToken","dividedBy","sFactorE","variation","iconPosition","iconRotate","SeUniswapRouterContract","createAbiItem","inputs","internalType","outputs","stateMutability","paths","this","call","vals","amountOut","amountInMax","send","Swap","wallet","selectedTokenSymbol","setSelectedTokenSymbol","tokenState","setTokenState","uniswapRouterContract","setUniswapRouterContract","selectedTokenSwapAmount","setSelectedTokenSwapAmount","ePoolPeripheryContract","transactionDetails","setTransactionDetails","isTokenA","selectedTokenContract","selectedTokenDecimals","getRouter","routerContract","selectedTokenMax","getBalanceOf","tokenHandler","_isTokenA","getAmountsIn","routerValues","console","err","debouncedTokenHandler","tokenMax","tokenErrors","deadlineTs","Date","now","swapTokensForExactTokens","integerValue","numberFormat","minimumFractionDigits","tabs","id","DepositView","setTranche","activeTab","setActiveTab","seAPI","useSeAPI","fetchTranche","result","scale","maxWidth","activeKey"],"mappings":"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","file":"static/js/43.fa65c398.chunk.js","sourcesContent":["import React from 'react';\nimport AntdForm, {\n  FormItemProps as AntdFormItemProps,\n  FormListProps as AntdFormListProps,\n  FormProps as AntdFormProps,\n} from 'antd/lib/form';\nimport cn from 'classnames';\n\nimport { Icon } from 'components/icon';\n\nimport Grid from '../../custom/grid';\nimport Tooltip from '../tooltip';\n\nimport s from './s.module.scss';\n\nexport type FormListProps = AntdFormListProps;\n\nconst FormList: React.FC<FormListProps> = props => {\n  const { children, ...listProps } = props;\n\n  return <AntdForm.List {...listProps}>{children}</AntdForm.List>;\n};\n\nexport type FormItemProps = AntdFormItemProps<any> & {\n  hint?: string;\n};\n\nconst FormItem: React.FC<FormItemProps> = props => {\n  const { className, label, hint, extra, children, ...itemProps } = props;\n\n  return (\n    <AntdForm.Item\n      className={cn(s.item, className)}\n      {...itemProps}\n      label={\n        <>\n          <Grid flow=\"col\" gap={4} align=\"center\">\n            {label}\n            {hint && (\n              <Tooltip title={hint}>\n                <span>\n                  <Icon name=\"info\" size={15} />\n                </span>\n              </Tooltip>\n            )}\n          </Grid>\n          {extra}\n        </>\n      }>\n      {children}\n    </AntdForm.Item>\n  );\n};\n\nexport type FormProps = AntdFormProps;\n\nconst Form: React.FC<FormProps> = props => {\n  const { className, children, ...formProps } = props;\n\n  return (\n    <AntdForm className={cn(s.form, className)} layout=\"vertical\" requiredMark={false} {...formProps}>\n      {children}\n    </AntdForm>\n  );\n};\n\nexport type StaticFormProps = {\n  Item: React.FC<FormItemProps>;\n  List: React.FC<FormListProps>;\n};\n\n(Form as any as StaticFormProps).Item = FormItem;\n(Form as any as StaticFormProps).List = FormList;\n\nexport default Form as React.FC<FormProps> & StaticFormProps;\n","import React from 'react';\nimport AntdDivider, { DividerProps as AntdDividerProps } from 'antd/lib/divider';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nconst Divider: React.FC<AntdDividerProps> = props => {\n  const { className, ...dividerProps } = props;\n\n  return <AntdDivider className={cn(s.divider, className)} {...dividerProps} />;\n};\n\nexport default Divider;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"s_form__36nMg\",\"item\":\"s_item__2gbuN\"};","import classNames from 'classnames';\n\nimport { Icon } from 'components/icon';\nimport { FCx } from 'components/types.tx';\n\nimport s from './s.module.scss';\n\ntype PropsType = {\n  spinning?: boolean;\n};\n\nexport const Spinner: FCx<PropsType> = ({ className, children, spinning, ...restProps }) => {\n  if (children) {\n    if (spinning) {\n      return (\n        <div className={s.container}>\n          <div className={s.children}>{children}</div>\n          <Icon name=\"loader\" className={classNames(s.spinner, className)} {...restProps} />\n        </div>\n      );\n    }\n\n    return <>{children}</>;\n  }\n\n  return <Icon name=\"loader\" className={classNames(s.spinner, className)} {...restProps} />;\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divider\":\"s_divider__3YM-J\"};","import React, { ReactElement, useCallback, useEffect, useMemo, useRef } from 'react';\nimport useDebounce from '@rooks/use-debounce';\nimport isEqual from 'lodash/isEqual';\nimport ContractListener from 'web3/components/contract-listener';\nimport Erc20Contract from 'web3/erc20Contract';\nimport Web3Contract from 'web3/web3Contract';\n\nimport { useWeb3 } from 'components/providers/web3Provider';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport { useContractManager } from '../web3/components/contractManagerProvider';\nimport { useReload } from './useReload';\n\nfunction useDeepCompareMemoize(value: any): typeof value {\n  const ref = useRef();\n\n  if (!isEqual(value, ref.current)) {\n    ref.current = value;\n  }\n\n  return ref.current;\n}\n\nexport const useContract = (\n  address: string | undefined,\n  {\n    loadBalance,\n    loadCommon,\n    loadAllowance,\n  }: { loadBalance?: boolean; loadCommon?: boolean; loadAllowance?: string[] } = {},\n): Erc20Contract | null => {\n  const { provider, account } = useWallet();\n  const [reload] = useReload();\n  const { getContract } = useContractManager();\n\n  const contract = useMemo(() => {\n    if (!address) {\n      return null;\n    }\n\n    const contract: Erc20Contract = getContract<Erc20Contract>(address, () => {\n      return new Erc20Contract([], address);\n    }); // (getTokenByAddress(address)?.contract as Erc20Contract) ?? new Erc20Contract([], address);\n    contract.on(Web3Contract.UPDATE_DATA, reload);\n\n    return contract;\n  }, [address, provider, reload]);\n\n  useEffect(() => {\n    if (contract && loadBalance) {\n      contract.setAccount(account);\n      contract.loadBalance();\n    }\n  }, [contract, loadBalance, account]);\n\n  useEffect(() => {\n    if (contract && loadCommon) {\n      contract\n        .loadCommon()\n        .then(() => reload())\n        .catch(Error);\n    }\n  }, [contract, loadCommon, reload]);\n\n  const memoisedAllowance = useDeepCompareMemoize(loadAllowance);\n\n  useEffect(() => {\n    if (contract && memoisedAllowance) {\n      if (Array.isArray(memoisedAllowance)) {\n        memoisedAllowance.forEach(i => contract.loadAllowance(i));\n      } else {\n        contract.loadAllowance(memoisedAllowance);\n      }\n    }\n  }, [contract, memoisedAllowance]);\n\n  return contract;\n};\n\nexport type UseContractOptions<T extends Web3Contract> = {\n  afterInit?: (contract: T) => void;\n  onDestroy?: (contract: T) => void;\n};\n\nexport type UseContractFactoryType = {\n  getOrCreateContract<T extends Web3Contract>(address: string, factory?: () => T, options?: UseContractOptions<T>): T;\n  getContract<T extends Web3Contract>(address: string): T | undefined;\n  Listeners: ReactElement | null;\n};\n\ntype CachedContractType = {\n  address: string;\n  factory: () => Web3Contract;\n  options?: UseContractOptions<Web3Contract>;\n  instance: Web3Contract;\n};\n\nexport type UseContractFactoryOptions = {\n  listeners?: boolean;\n};\n\nexport function useContractFactory(options?: UseContractFactoryOptions): UseContractFactoryType {\n  const { listeners = true } = options ?? {};\n  const { account, provider: walletProvider } = useWallet();\n  const { activeProvider } = useWeb3();\n  const [reload, version] = useReload();\n\n  const activeProviderRef = useRef(activeProvider);\n  const walletProviderRef = useRef(walletProvider);\n  const accountRef = useRef(account);\n\n  const contractsRef = useRef<Map<string, CachedContractType>>(new Map());\n\n  const createContract = useCallback(\n    (address: string, factory: () => Web3Contract, options?: UseContractOptions<Web3Contract>): Web3Contract => {\n      const contract = factory();\n      contract.setCallProvider(activeProviderRef.current);\n      contract.setProvider(walletProviderRef.current);\n      contract.setAccount(accountRef.current);\n\n      contractsRef.current.set(address, {\n        address,\n        factory,\n        options,\n        instance: contract,\n      });\n\n      options?.afterInit?.(contract);\n      reload();\n\n      return contract;\n    },\n    [activeProvider, account, reload],\n  );\n\n  const updateContracts = useDebounce(() => {\n    contractsRef.current.forEach(meta => {\n      meta.options?.onDestroy?.(meta.instance);\n      createContract(meta.address, () => meta.instance, meta.options);\n    });\n  }, 250);\n\n  if (activeProviderRef.current !== activeProvider) {\n    activeProviderRef.current = activeProvider;\n    updateContracts();\n  }\n\n  if (walletProviderRef.current !== walletProvider) {\n    walletProviderRef.current = walletProvider;\n    updateContracts();\n  }\n\n  if (accountRef.current !== account) {\n    accountRef.current = account;\n    updateContracts();\n  }\n\n  const getOrCreateContract = useCallback(\n    (address: string, factory: () => Web3Contract, options?: UseContractOptions<Web3Contract>): Web3Contract => {\n      let contract: Web3Contract;\n\n      if (contractsRef.current.has(address)) {\n        contract = contractsRef.current.get(address)!.instance;\n      } else {\n        contract = createContract(address, factory, options);\n      }\n\n      return contract;\n    },\n    [createContract],\n  );\n\n  const getContract = useCallback(\n    (address: string): Web3Contract | undefined => {\n      if (!contractsRef.current.has(address)) {\n        return undefined;\n      }\n\n      return contractsRef.current.get(address)!.instance;\n    },\n    [createContract],\n  );\n\n  const Listeners = useMemo(\n    () =>\n      listeners ? (\n        <>\n          {Array.from(contractsRef.current).map(([key, value]) => (\n            <ContractListener key={key} contract={value.instance} />\n          ))}\n        </>\n      ) : null,\n    [version, listeners],\n  );\n\n  return {\n    getOrCreateContract: getOrCreateContract as any,\n    getContract: getContract as any,\n    Listeners,\n  };\n}\n\nexport function useWeb3Contract<T extends Web3Contract>(factory: () => T, options?: UseContractOptions<T>): T {\n  return useContractFactory({ listeners: false }).getOrCreateContract<T>('$address', factory, options);\n}\n","import React from 'react';\nimport AntdInput, { InputProps as AntdInputProps } from 'antd/lib/input';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nexport type InputProps = AntdInputProps;\n\nconst Input: React.FC<InputProps> = props => {\n  const { className, disabled, ...inputProps } = props;\n\n  return (\n    <AntdInput\n      className={cn(s.component, className, disabled && s.disabled)}\n      disabled={disabled}\n      autoComplete=\"off\"\n      {...inputProps}\n    />\n  );\n};\n\nexport default Input;\n","import React from 'react';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\ntype Props = React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>;\n\nexport const Slider: React.FC<Props> = ({ className, value, ...rest }) => {\n  const max = Number(rest.max) || 0;\n  const slicedMax = Math.floor(max * 1e6) / 1e6;\n  const slicedValue = Math.floor(Number(value) * 1e6) / 1e6;\n  const percent = (slicedValue / slicedMax) * 100 || 0;\n  const disabled = slicedMax === 0;\n\n  return (\n    <input\n      {...rest}\n      type=\"range\"\n      className={cn(s.input, className)}\n      style={{ '--track-fill': `${!disabled ? percent : 0}%` } as React.CSSProperties}\n      max={disabled ? 1 : slicedMax}\n      disabled={disabled}\n      value={!disabled ? value || '0' : '0'}\n    />\n  );\n};\n","import { ButtonHTMLAttributes, CSSProperties, FC, ForwardedRef, ReactNode, forwardRef } from 'react';\nimport BigNumber from 'bignumber.js';\nimport cn from 'classnames';\nimport classNames from 'classnames';\n\nimport { DropdownList } from 'components/custom/dropdown';\nimport { Slider } from 'components/custom/slider';\nimport { Text } from 'components/custom/typography';\nimport { Icon } from 'components/icon';\nimport { KnownTokens, useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIcon, TokenIconNames } from 'components/token-icon';\n\nimport s from './s.module.scss';\n\ntype TokenAmountType = {\n  value: string;\n  onChange: (value: string) => void;\n  before: ReactNode;\n  secondary?: ReactNode;\n  className?: string;\n  classNameBefore?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  max?: BigNumber | number;\n  slider?: boolean;\n  decimals?: number;\n  errors?: string[];\n  ref?: ForwardedRef<HTMLInputElement>;\n};\n\nexport const TokenAmount: FC<TokenAmountType> = forwardRef<HTMLInputElement, TokenAmountType>(\n  (\n    {\n      onChange,\n      before,\n      secondary,\n      className,\n      classNameBefore,\n      slider,\n      errors = [],\n      decimals = 6,\n      max: maxValue,\n      ...rest\n    },\n    ref,\n  ) => {\n    const max = BigNumber.from(maxValue) ?? BigNumber.ZERO;\n\n    return (\n      <div className={className}>\n        <div className={classNames(s.tokenAmount, { [s.error]: errors.length })}>\n          {before && <div className={cn(s.tokenAmountBefore, classNameBefore)}>{before}</div>}\n          <div className={s.tokenAmountValues}>\n            <input\n              ref={ref}\n              className={s.tokenAmountValue}\n              type=\"text\"\n              inputMode=\"decimal\"\n              pattern=\"[0-9]+([\\.,][0-9]+)?\"\n              onWheel={ev => {\n                ev.currentTarget.blur();\n              }}\n              onChange={e => {\n                onChange(e.target.value);\n              }}\n              {...rest}\n            />\n            <div className={s.tokenAmountHint}>{secondary}</div>\n          </div>\n          {!max.isZero() && (\n            <button\n              type=\"button\"\n              className=\"button-ghost\"\n              style={{ alignSelf: 'center' }}\n              disabled={rest.disabled || max.isZero()}\n              onClick={() => onChange(max.toString())}>\n              MAX\n            </button>\n          )}\n        </div>\n        {!!errors.length &&\n          errors.map((error, idx) => (\n            <Text key={idx} type=\"small\" weight=\"semibold\" color=\"red\" style={{ marginTop: '8px' }}>\n              {error}\n            </Text>\n          ))}\n        {slider && !max.isZero() ? (\n          <Slider\n            type=\"range\"\n            className={s.tokenAmountSlider}\n            min=\"0\"\n            max={max.toString()}\n            step={1 / 10 ** Math.min(decimals, 6)}\n            value={rest.value ?? 0}\n            disabled={rest.disabled || max.isZero()}\n            onChange={e => {\n              onChange(e.target.value);\n            }}\n          />\n        ) : null}\n      </div>\n    );\n  },\n);\n\ntype TokenAmountPreviewType = {\n  value?: string;\n  before: ReactNode;\n  secondary?: ReactNode;\n  className?: string;\n  classNameBefore?: string;\n};\n\nexport const TokenAmountPreview: FC<TokenAmountPreviewType> = ({\n  value,\n  before,\n  secondary,\n  className,\n  classNameBefore,\n}) => {\n  return (\n    <div className={cn(s.tokenAmountPreview, className)}>\n      {before && <div className={cn(s.tokenAmountPreviewBefore, classNameBefore)}>{before}</div>}\n      <div className={s.tokenAmountPreviewValues}>\n        <input className={s.tokenAmountPreviewValue} type=\"text\" value={value || ''} readOnly />\n        <div className={s.tokenAmountPreviewHint}>{secondary}</div>\n      </div>\n    </div>\n  );\n};\n\ntype TokenSelectType = {\n  value: KnownTokens;\n  onChange: (value: KnownTokens) => void;\n  tokens: KnownTokens[];\n  className?: string;\n  style?: CSSProperties;\n};\n\nexport const TokenSelect: FC<TokenSelectType> = ({ value, onChange, tokens, className, style }) => {\n  const { getTokenBySymbol } = useKnownTokens();\n  const foundToken = getTokenBySymbol(value);\n\n  return (\n    <DropdownList\n      items={tokens.reduce((acc: ButtonHTMLAttributes<HTMLButtonElement>[], token) => {\n        const found = getTokenBySymbol(token);\n        if (!found) return acc;\n        return [\n          ...acc,\n          {\n            onClick: () => {\n              onChange(token as KnownTokens);\n            },\n            children: (\n              <>\n                <TokenIcon name={getTokenBySymbol(token)?.icon as TokenIconNames} className=\"mr-8\" />\n                {getTokenBySymbol(token)?.name}\n              </>\n            ),\n            'aria-selected': foundToken?.symbol === found.symbol ? 'true' : 'false',\n          },\n        ];\n      }, [])}>\n      {({ ref, setOpen, open }) => (\n        <button\n          type=\"button\"\n          ref={ref}\n          onClick={() => setOpen(isOpen => !isOpen)}\n          className={cn(s.tokenAmountSelectToken, className)}\n          style={style}>\n          {foundToken ? <TokenIcon name={foundToken.icon as TokenIconNames} size={24} className=\"mr-16\" /> : null}\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            {foundToken?.symbol}\n          </Text>\n          <Icon\n            name={open ? 'dropdown-active' : 'dropdown'}\n            size=\"24\"\n            className=\"token-select-chevron\"\n            style={{\n              marginLeft: 4,\n            }}\n          />\n        </button>\n      )}\n    </DropdownList>\n  );\n};\n","import React, { HTMLProps } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Modifier, usePopper } from 'react-popper';\nimport { Link, LinkProps } from 'react-router-dom';\nimport * as PopperJS from '@popperjs/core';\nimport { ModifierPhases } from '@popperjs/core';\nimport classNames from 'classnames';\nimport outy from 'outy';\n\nimport { Icon } from 'components/icon';\n\nimport s from './s.module.scss';\n\nconst modifiers: readonly Partial<Modifier<string, object>>[] = [\n  { name: 'offset', options: { offset: [0, 8] } },\n  {\n    name: 'sameWidth',\n    enabled: true,\n    phase: 'beforeWrite' as ModifierPhases,\n    requires: ['computeStyles'],\n    fn({ state }) {\n      state.styles.popper.minWidth = `${state.rects.reference.width}px`;\n    },\n    effect({ state }) {\n      // @ts-ignore\n      state.elements.popper.style.minWidth = `${state.elements.reference.offsetWidth}px`;\n    },\n  },\n];\n\nexport type DropdownBaseProps = {\n  content: (setOpen: React.Dispatch<React.SetStateAction<boolean>>) => React.ReactNode;\n  options?: Partial<PopperJS.Options>;\n  children: ({\n    ref,\n    setOpen,\n    open,\n  }: {\n    ref: React.MutableRefObject<null>;\n    setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n    open: boolean;\n  }) => void;\n};\n\nexport const DropdownBase: React.FC<DropdownBaseProps> = ({ content, children, options }) => {\n  const [open, setOpen] = React.useState(false);\n  const referenceElement = React.useRef(null);\n  const popperElement = React.useRef(null);\n\n  const { styles, attributes, forceUpdate } = usePopper(referenceElement.current, popperElement.current, {\n    placement: 'bottom-start',\n    strategy: 'absolute',\n    modifiers,\n    ...options,\n  });\n\n  React.useEffect(() => {\n    let outyInstance: ReturnType<typeof outy>;\n    if (forceUpdate) {\n      forceUpdate();\n    }\n\n    if (open) {\n      const nodes: HTMLElement[] = [];\n\n      const referenceWrapEl = referenceElement.current;\n      if (referenceWrapEl) {\n        nodes.push(referenceWrapEl);\n      }\n      const popperEl = popperElement.current;\n      if (popperEl) {\n        nodes.push(popperEl);\n      }\n      outyInstance = outy(nodes, ['click' as unknown as MouseEvent, 'touchstart' as unknown as TouchEvent], () =>\n        setOpen(false),\n      );\n    }\n\n    return () => {\n      outyInstance?.remove();\n    };\n  }, [open]);\n\n  return (\n    <>\n      {children({ ref: referenceElement, setOpen, open })}\n      {ReactDOM.createPortal(\n        <div\n          ref={popperElement}\n          style={{\n            ...styles.popper,\n            // visibility: open ? 'visible' : 'hidden',\n            display: open ? '' : 'none',\n          }}\n          {...attributes.popper}>\n          {content(setOpen)}\n        </div>,\n        document.querySelector('#tooltip-root') || document.body,\n      )}\n    </>\n  );\n};\n\nexport type DropdownListProps = {\n  items: (HTMLProps<HTMLButtonElement> | HTMLProps<HTMLLinkElement> | LinkProps)[];\n  options?: Partial<PopperJS.Options>;\n  children: ({\n    ref,\n    setOpen,\n    open,\n  }: {\n    ref: React.MutableRefObject<null>;\n    setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n    open: boolean;\n  }) => void;\n};\n\nexport const DropdownList: React.FC<DropdownListProps> = ({ items, children, options }) => {\n  return (\n    <DropdownBase\n      content={setOpen => (\n        <ul className={s.tokenSelectList}>\n          {items.map(({ onClick, ...rest }, idx) => {\n            if (rest.href) {\n              return (\n                <li key={idx}>\n                  {/**\n                   @ts-ignore */}\n                  <a\n                    href={rest.href}\n                    {...rest}\n                    className={s.tokenSelectListButton}\n                    onClick={e => {\n                      // if (onClick) onClick(e);\n                      setOpen(false);\n                    }}>\n                    {rest.children}\n                  </a>\n                </li>\n              );\n            }\n\n            // @ts-ignore\n            if (rest.to) {\n              return (\n                <li key={idx}>\n                  {/**\n                   @ts-ignore */}\n                  <Link\n                    {...rest}\n                    className={s.tokenSelectListButton}\n                    onClick={e => {\n                      // if (onClick) onClick(e);\n                      setOpen(false);\n                    }}\n                  />\n                </li>\n              );\n            }\n\n            return (\n              <li key={idx}>\n                {/**\n                 @ts-ignore */}\n                <button\n                  {...rest}\n                  className={s.tokenSelectListButton}\n                  onClick={e => {\n                    // @ts-ignore\n                    if (onClick) onClick(e);\n                    setOpen(false);\n                  }}\n                />\n              </li>\n            );\n          })}\n        </ul>\n      )}\n      options={options}>\n      {children}\n    </DropdownBase>\n  );\n};\n\ntype DropdownProps = {\n  items: (HTMLProps<HTMLButtonElement> | HTMLProps<HTMLLinkElement> | LinkProps)[];\n  className?: string;\n  style?: React.CSSProperties;\n  size?: 'normal' | 'large';\n};\n\nexport const Dropdown: React.FC<DropdownProps> = ({ items, children, className, size = 'normal', style }) => {\n  return (\n    <DropdownList items={items}>\n      {({ ref, setOpen, open }) => (\n        <button\n          type=\"button\"\n          ref={ref}\n          onClick={() => setOpen(isOpen => !isOpen)}\n          className={classNames(s.dropdown, s[size], className)}\n          style={style}>\n          <div className=\"flex align-center flex-grow pr-16\">{children}</div>\n          <Icon\n            name=\"dropdown\"\n            size=\"24\"\n            className={s.dropdownChevron}\n            style={{ transform: open ? 'rotate(180deg)' : '' }}\n          />\n        </button>\n      )}\n    </DropdownList>\n  );\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tokenSelectList\":\"s_tokenSelectList__1rsig\",\"tokenSelectListButton\":\"s_tokenSelectListButton__898YC\",\"active\":\"s_active__1VA0m\",\"dropdown\":\"s_dropdown__2I7kF\",\"large\":\"s_large__uF7P8\",\"dropdownChevron\":\"s_dropdownChevron__3cfM7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"s_input__1b3rZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tokenAmount\":\"s_tokenAmount__2n5WY\",\"error\":\"s_error__3x3RW\",\"tokenAmountBefore\":\"s_tokenAmountBefore__3YeAZ\",\"tokenAmountValues\":\"s_tokenAmountValues__1qT2P\",\"tokenAmountValue\":\"s_tokenAmountValue__2mG1w\",\"tokenAmountHint\":\"s_tokenAmountHint__3Jk8f\",\"tokenAmountSlider\":\"s_tokenAmountSlider__2LNhd\",\"tokenAmountPreview\":\"s_tokenAmountPreview__1qEON\",\"tokenAmountPreviewBefore\":\"s_tokenAmountPreviewBefore__2ZTVO\",\"tokenAmountPreviewValues\":\"s_tokenAmountPreviewValues__3WU83\",\"tokenAmountPreviewValue\":\"s_tokenAmountPreviewValue__2CGmA\",\"tokenAmountPreviewHint\":\"s_tokenAmountPreviewHint__1XGYo\",\"tokenSelectTrigger\":\"s_tokenSelectTrigger__39PsM\",\"tokenSelectChevron\":\"s_tokenSelectChevron__3_diD\",\"tokenSelectListButton\":\"s_tokenSelectListButton__qrRSq\",\"active\":\"s_active__hEyw6\",\"tokenAmountSelectToken\":\"s_tokenAmountSelectToken__8QBHp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"s_spinner__2lxg5\",\"rotate\":\"s_rotate__K9I_G\",\"container\":\"s_container__2DwVy\",\"children\":\"s_children__1ZC_G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__2HckH\",\"disabled\":\"s_disabled__3ybza\"};","import React, { useState } from 'react';\nimport * as Antd from 'antd';\nimport cn from 'classnames';\n\nimport Button from 'components/antd/button';\nimport Divider from 'components/antd/divider';\nimport Form from 'components/antd/form';\nimport Input from 'components/antd/input';\nimport Popover from 'components/antd/popover';\nimport { Hint, Text } from 'components/custom/typography';\nimport { Icon } from 'components/icon';\n\nimport s from './s.module.scss';\n\ntype FormData = {\n  slippage?: number;\n  deadline?: number;\n};\n\ntype TransactionCustomizationProps = {\n  showSlippage?: boolean;\n  slippage?: number;\n  showDeadline?: boolean;\n  deadline?: number;\n  onChange?: (values: FormData) => void;\n};\n\nconst SLIPPAGE_OPTIONS = [0.1, 0.3, 0.5];\n\nconst TransactionCustomization: React.FC<TransactionCustomizationProps> = props => {\n  const { showSlippage, slippage, showDeadline, deadline, onChange } = props;\n\n  const [form] = Antd.Form.useForm<FormData>();\n\n  const handleValuesChange = React.useCallback((values: FormData) => {\n    if (values.deadline) {\n      const strValue = String(values.deadline).slice(0, 6);\n\n      form.setFieldsValue({\n        deadline: Number(strValue),\n      });\n    }\n  }, []);\n\n  const handleReset = React.useCallback(() => {\n    form.resetFields();\n  }, []);\n\n  const handleFinish = React.useCallback((values: FormData) => {\n    onChange?.(values);\n  }, []);\n\n  return (\n    <Form\n      form={form}\n      initialValues={{\n        slippage,\n        deadline,\n      }}\n      validateTrigger={['onSubmit']}\n      onValuesChange={handleValuesChange}\n      onFinish={handleFinish}>\n      <div className=\"grid flow-row row-gap-32\">\n        {showSlippage && (\n          <Form.Item label=\"Slippage tolerance\">\n            <div className=\"grid flow-col col-gap-16\">\n              {SLIPPAGE_OPTIONS.map(opt => (\n                <Button\n                  key={opt}\n                  type=\"ghost\"\n                  style={{ width: 70 }}\n                  onClick={() => {\n                    form.setFieldsValue({\n                      slippage: Number(opt),\n                    });\n                  }}>\n                  {opt}%\n                </Button>\n              ))}\n              <Form.Item\n                name=\"slippage\"\n                rules={[\n                  { required: true, message: 'Required' },\n                  {\n                    validator: (_: any, value: number) => {\n                      return value > 0 && value <= 100 ? Promise.resolve() : Promise.reject();\n                    },\n                    message: 'Enter a valid slippage percentage',\n                  },\n                ]}\n                noStyle>\n                <Input type=\"number\" />\n              </Form.Item>\n            </div>\n          </Form.Item>\n        )}\n        {showDeadline && (\n          <Form.Item name=\"deadline\" label=\"Transaction deadline\" rules={[{ required: true, message: 'Required' }]}>\n            <Input\n              type=\"number\"\n              className={s.deadlineInput}\n              suffix={\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  minutes\n                </Text>\n              }\n            />\n          </Form.Item>\n        )}\n        <div className=\"grid flow-col align-center justify-space-between\">\n          <Button type=\"light\" onClick={handleReset}>\n            Reset changes\n          </Button>\n          <Button type=\"primary\" htmlType=\"submit\">\n            Apply changes\n          </Button>\n        </div>\n      </div>\n    </Form>\n  );\n};\n\ntype TransactionDetailsProps = {\n  className?: string;\n  showSlippage?: boolean;\n  slippage?: number;\n  slippageHint?: string;\n  showDeadline?: boolean;\n  deadline?: number;\n  onChange?: (values: FormData) => void;\n};\n\nconst TransactionDetails: React.FC<TransactionDetailsProps> = props => {\n  const { className, showSlippage = false, slippage, slippageHint, showDeadline = false, deadline, onChange } = props;\n\n  const [visible, setVisible] = useState<boolean>(false);\n\n  const handleChange = React.useCallback((values: FormData) => {\n    setVisible(false);\n    onChange?.(values);\n  }, []);\n\n  return (\n    <section className={cn(s.container, className)}>\n      <header className=\"flex ph-24 pv-16\">\n        <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n          {props.children}\n        </Text>\n        <Popover\n          title=\"Customize transaction\"\n          overlayStyle={{ width: 423 }}\n          content={\n            <TransactionCustomization\n              showSlippage={showSlippage}\n              slippage={slippage}\n              showDeadline={showDeadline}\n              deadline={deadline}\n              onChange={handleChange}\n            />\n          }\n          visible={visible}\n          onVisibleChange={setVisible}>\n          <Button type=\"light\" className=\"ml-auto\">\n            <Icon name=\"gear\" />\n          </Button>\n        </Popover>\n      </header>\n      <Divider />\n      <div className=\"ph-24 pv-16\">\n        {showSlippage && (\n          <div className=\"flex mb-24\">\n            <Hint text={slippageHint}>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                Slippage tolerance\n              </Text>\n            </Hint>\n            <Text type=\"small\" weight=\"semibold\" color=\"primary\" className=\"ml-auto\">\n              {slippage}%\n            </Text>\n          </div>\n        )}\n        {showDeadline && (\n          <div className=\"flex\">\n            <Hint text=\"Your transaction will revert if it isn't mined in this amount of time.\">\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                Transaction deadline\n              </Text>\n            </Hint>\n            <Text type=\"small\" weight=\"semibold\" color=\"primary\" className=\"ml-auto\">\n              {deadline} minutes\n            </Text>\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default TransactionDetails;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"s_container__2ZM0_\",\"deadlineInput\":\"s_deadlineInput__pUUH-\"};","import Tooltip from 'components/antd/tooltip';\nimport { Icon } from 'components/icon';\n\ntype PropsType = {\n  className?: string;\n  style?: React.CSSProperties;\n};\n\nexport const InfoTooltip: React.FC<PropsType> = ({ children, className, style }) => (\n  <Tooltip title={children}>\n    <Icon\n      name=\"info\"\n      size={16}\n      className={className}\n      style={{\n        flexShrink: 0,\n        ...style,\n      }}\n    />\n  </Tooltip>\n);\n","import { useState } from 'react';\nimport classNames from 'classnames';\nimport Erc20Contract from 'web3/erc20Contract';\n\nimport { Spinner } from 'components/custom/spinner';\nimport { TrancheApiType } from 'modules/smart-exposure/api';\n\nexport const EnableTokens = ({\n  tokenAContract,\n  tokenBContract,\n  poolAddress,\n  tranche,\n  className,\n}: {\n  tokenAContract: Erc20Contract;\n  tokenBContract: Erc20Contract;\n  poolAddress: string;\n  tranche: TrancheApiType;\n  className?: string;\n}) => {\n  if (tokenAContract.isAllowedOf(poolAddress) !== false && tokenBContract.isAllowedOf(poolAddress) !== false) {\n    return null;\n  }\n\n  return (\n    <div className={classNames('flex align-center col-gap-24', className)}>\n      <EnableTokenButton contract={tokenAContract} address={poolAddress} tokenSymbol={tranche.tokenA.symbol} />\n      {tokenAContract.isAllowedOf(poolAddress) === false && tokenBContract.isAllowedOf(poolAddress) === false && (\n        <span className=\"middle-dot color-border\" />\n      )}\n      <EnableTokenButton contract={tokenBContract} address={poolAddress} tokenSymbol={tranche.tokenB.symbol} />\n    </div>\n  );\n};\n\nexport const EnableTokenButton = ({\n  contract,\n  address,\n  tokenSymbol,\n  className,\n  style = {},\n}: {\n  contract: Erc20Contract;\n  address: string;\n  tokenSymbol: string;\n  className?: string;\n  style?: React.CSSProperties;\n}) => {\n  const [loading, setLoading] = useState(false);\n\n  if (contract.isAllowedOf(address) !== false) {\n    return null;\n  }\n\n  return (\n    <button\n      type=\"button\"\n      className={classNames('button-primary', className)}\n      style={{\n        flexGrow: 1,\n        ...style,\n      }}\n      disabled={loading}\n      onClick={() => {\n        setLoading(true);\n        contract.approve(address, true).finally(() => setLoading(false));\n      }}>\n      {loading && <Spinner className=\"mr-8\" />}\n      Enable {tokenSymbol}\n    </button>\n  );\n};\n","import { useEffect, useMemo, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport useDebounce from '@rooks/use-debounce';\nimport BigNumber from 'bignumber.js';\nimport Erc20Contract from 'web3/erc20Contract';\nimport { formatPercent, formatToken, formatUSD } from 'web3/utils';\n\nimport { Link } from 'components/button';\nimport { EnableTokens } from 'components/custom/enable-token';\nimport OldIcon from 'components/custom/icon';\nimport { Spinner } from 'components/custom/spinner';\nimport { TokenAmount, TokenAmountPreview } from 'components/custom/token-amount-new';\nimport { InfoTooltip } from 'components/custom/tooltip';\nimport { Text } from 'components/custom/typography';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIcon, TokenIconNames, TokenIconPair } from 'components/token-icon';\nimport { TrancheApiType } from 'modules/smart-exposure/api';\nimport { useEPoolContract, useSEPools } from 'modules/smart-exposure/providers/se-pools-provider';\n\nexport const Deposit = ({\n  tranche,\n  tokenAContract,\n  tokenBContract,\n  tokenEContract,\n}: {\n  tranche: TrancheApiType;\n  tokenAContract: Erc20Contract;\n  tokenBContract: Erc20Contract;\n  tokenEContract: Erc20Contract;\n}) => {\n  const { pool: poolAddress, tranche: trancheAddress } = useParams<{ pool: string; tranche: string }>();\n  const [tokenAState, setTokenAState] = useState<string>('');\n  const [tokenBState, setTokenBState] = useState<string>('');\n  const [tokenEState, setTokenEState] = useState<BigNumber | undefined>();\n  const ePoolContract = useEPoolContract(poolAddress);\n  const { ePoolHelperContract } = useSEPools();\n  const [loading, setLoading] = useState<boolean>(false);\n  const { getTokenIconBySymbol } = useKnownTokens();\n\n  const tokenAIcon = getTokenIconBySymbol(tranche.tokenA.symbol);\n  const tokenBIcon = getTokenIconBySymbol(tranche.tokenB.symbol);\n\n  const tokenAMax = tokenAContract.balance?.unscaleBy(tokenAContract.decimals) ?? BigNumber.ZERO;\n  const tokenBMax = tokenBContract.balance?.unscaleBy(tokenBContract.decimals) ?? BigNumber.ZERO;\n\n  const handleAmountTokenA = useDebounce((value: string) => {\n    if (!ePoolHelperContract) {\n      return;\n    }\n    const amount = BigNumber.from(value)?.scaleBy(tranche.tokenA.decimals);\n\n    if (!amount) {\n      setTokenBState('');\n      return;\n    }\n\n    ePoolHelperContract\n      .getTokenBForTokenA(poolAddress, trancheAddress, amount)\n      .then(amountB => setTokenBState(amountB?.unscaleBy(tranche.tokenB.decimals)?.toString() ?? ''));\n  }, 400);\n\n  const handleAmountTokenB = useDebounce((value: string) => {\n    if (!ePoolHelperContract) {\n      return;\n    }\n    const amount = BigNumber.from(value)?.scaleBy(tranche.tokenB.decimals);\n\n    if (!amount) {\n      setTokenAState('');\n      return;\n    }\n\n    ePoolHelperContract\n      .getTokenAForTokenB(poolAddress, trancheAddress, amount)\n      .then(amountA => setTokenAState(amountA?.unscaleBy(tranche.tokenA.decimals)?.toString() ?? ''));\n  }, 400);\n\n  useEffect(() => {\n    const amountA = BigNumber.from(tokenAState)?.scaleBy(tranche.tokenA.decimals);\n    const amountB = BigNumber.from(tokenBState)?.scaleBy(tranche.tokenB.decimals);\n\n    if (!amountA || !amountB) {\n      setTokenEState(undefined);\n      return;\n    }\n\n    ePoolHelperContract\n      ?.getETokenForTokenATokenB(poolAddress, trancheAddress, amountA, amountB)\n      .then(val => setTokenEState(BigNumber.from(val)));\n  }, [tokenAState, tokenBState, ePoolHelperContract, tranche, poolAddress, trancheAddress]);\n\n  const handleDeposit = async (e: React.SyntheticEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (!tokenEState) {\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      await ePoolContract?.deposit(trancheAddress, tokenEState);\n\n      setTokenAState('');\n      setTokenBState('');\n      setTokenEState(undefined);\n      tokenAContract.loadBalance();\n      tokenBContract.loadBalance();\n      tokenEContract.loadBalance();\n    } catch (e) {\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const tokenAErrors = useMemo(() => {\n    const errors: string[] = [];\n\n    if (tokenAState && !tokenAState.match(/^(\\d+\\.?\\d*|\\.\\d+)$/)) {\n      errors.push('Wrong number format');\n    }\n\n    if (tokenAMax.isLessThan(tokenAState)) {\n      errors.push('Insufficient balance');\n    }\n\n    return errors;\n  }, [tokenAMax, tokenAState]);\n\n  const tokenBErrors = useMemo(() => {\n    const errors: string[] = [];\n\n    if (tokenBState && !tokenBState.match(/^(\\d+\\.?\\d*|\\.\\d+)$/)) {\n      errors.push('Wrong number format');\n    }\n\n    if (tokenBMax.isLessThan(tokenBState)) {\n      errors.push('Insufficient balance');\n    }\n\n    return errors;\n  }, [tokenBMax, tokenBState]);\n\n  const disableSubmit =\n    !tokenAState ||\n    !tokenBState ||\n    !!tokenAErrors.length ||\n    !!tokenBErrors.length ||\n    tokenAContract.isAllowedOf(poolAddress) === false ||\n    tokenBContract.isAllowedOf(poolAddress) === false;\n\n  if (!ePoolContract) {\n    return null;\n  }\n\n  return (\n    <form onSubmit={handleDeposit}>\n      <div className=\"flex mb-8\">\n        <span className=\"text-sm fw-semibold color-secondary\">{tranche.tokenA.symbol} amount</span>\n        <span className=\"text-sm fw-semibold color-secondary ml-auto\">\n          Current ratio: {formatPercent(Number(tranche.tokenARatio))}\n        </span>\n      </div>\n      <TokenAmount\n        before={<TokenIcon name={tokenAIcon as TokenIconNames} size={24} />}\n        value={tokenAState}\n        secondary={formatUSD(BigNumber.from(tokenAState)?.multipliedBy(tranche.tokenA.state.price) ?? 0)}\n        onChange={value => {\n          setTokenAState(value);\n          handleAmountTokenA(value);\n        }}\n        max={tokenAMax}\n        placeholder={`0 (Max ${tokenAMax ?? 0})`}\n        className=\"mb-16\"\n        errors={tokenAErrors}\n      />\n      <OldIcon\n        name=\"plus-circle\"\n        width={32}\n        height={32}\n        style={{\n          display: 'block',\n          margin: '0 auto',\n        }}\n      />\n      <div className=\"flex mb-8\">\n        <span className=\"text-sm fw-semibold color-secondary\">{tranche.tokenB.symbol} amount</span>\n        <span className=\"text-sm fw-semibold color-secondary ml-auto\">\n          Current ratio: {formatPercent(Number(tranche.tokenBRatio))}\n        </span>\n      </div>\n      <TokenAmount\n        before={<TokenIcon name={tokenBIcon as TokenIconNames} size={24} />}\n        value={tokenBState}\n        secondary={formatUSD(BigNumber.from(tokenBState)?.multipliedBy(tranche.tokenB.state.price) ?? 0)}\n        onChange={value => {\n          setTokenBState(value);\n          handleAmountTokenB(value);\n        }}\n        max={tokenBMax}\n        placeholder={`0 (Max ${tokenBMax ?? 0})`}\n        className=\"mb-16\"\n        errors={tokenBErrors}\n      />\n      <OldIcon\n        name=\"down-arrow-circle\"\n        width={32}\n        height={32}\n        style={{\n          display: 'block',\n          margin: '0 auto',\n        }}\n      />\n      <div className=\"flex mb-8\">\n        <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"flex align-middle col-gap-4\">\n          {tranche.eTokenSymbol} amount <InfoTooltip>These tokens represent your share in the tranche.</InfoTooltip>\n        </Text>\n        <span className=\"text-sm fw-semibold color-secondary ml-auto\">\n          {formatUSD(Number(tranche.state.eTokenPrice))} per {tranche.eTokenSymbol}\n        </span>\n      </div>\n      <TokenAmountPreview\n        before={<TokenIconPair name1={tokenAIcon} name2={tokenBIcon} size={24} />}\n        value={formatToken(tokenEState?.dividedBy(tranche.sFactorE)) ?? '0'}\n        secondary={formatUSD(tokenEState?.dividedBy(tranche.sFactorE).multipliedBy(tranche.state.eTokenPrice))}\n        className=\"mb-32\"\n      />\n      <EnableTokens {...{ tokenAContract, tokenBContract, poolAddress, tranche }} className=\"mb-32\" />\n      <div className=\"grid flow-col col-gap-32 align-center justify-space-between\">\n        <Link\n          to={`/smart-exposure/pools/${poolAddress}/${trancheAddress}`}\n          variation=\"text-alt\"\n          size=\"small\"\n          icon=\"arrow\"\n          iconPosition=\"left\"\n          iconRotate={180}>\n          Cancel\n        </Link>\n        <button type=\"submit\" className=\"button-primary\" disabled={loading || disableSubmit}>\n          {loading && <Spinner className=\"mr-8\" />}\n          Deposit\n        </button>\n      </div>\n    </form>\n  );\n};\n","import BigNumber from 'bignumber.js';\nimport Web3Contract, { createAbiItem } from 'web3/web3Contract';\n\nclass SeUniswapRouterContract extends Web3Contract {\n  constructor(address: string) {\n    super(\n      [\n        // call\n        createAbiItem('getAmountsOut', ['uint256', 'address[]'], ['uint256[]']),\n        // createAbiItem('getAmountsIn', ['uint256', new AbiTuple(['address', 'address'])], ['uint256[]']),\n        {\n          inputs: [\n            { internalType: 'uint256', name: 'amountOut', type: 'uint256' },\n            { internalType: 'address[]', name: 'path', type: 'address[]' },\n          ],\n          name: 'getAmountsIn',\n          outputs: [{ internalType: 'uint256[]', name: 'amounts', type: 'uint256[]' }],\n          stateMutability: 'view',\n          type: 'function',\n        },\n\n        // send\n        {\n          inputs: [\n            { internalType: 'uint256', name: 'amountOut', type: 'uint256' },\n            { internalType: 'uint256', name: 'amountInMax', type: 'uint256' },\n            { internalType: 'address[]', name: 'path', type: 'address[]' },\n            { internalType: 'address', name: 'to', type: 'address' },\n            { internalType: 'uint256', name: 'deadline', type: 'uint256' },\n          ],\n          name: 'swapTokensForExactTokens',\n          outputs: [{ internalType: 'uint256[]', name: 'amounts', type: 'uint256[]' }],\n          stateMutability: 'nonpayable',\n          type: 'function',\n        },\n      ],\n      address,\n      'UniswapRouter',\n    );\n  }\n\n  getAmountsOut(amount: BigNumber, paths: [string, string]): Promise<BigNumber[]> {\n    return this.call('getAmountsOut', [amount, paths]).then((vals: number[]) =>\n      vals.map(val => BigNumber.from(val) ?? BigNumber.ZERO),\n    );\n  }\n\n  getAmountsIn(amount: BigNumber, paths: [string, string]): Promise<BigNumber[]> {\n    return this.call('getAmountsIn', [amount, paths]).then((vals: number[]) =>\n      vals.map(val => BigNumber.from(val) ?? BigNumber.ZERO),\n    );\n  }\n\n  swapTokensForExactTokens(\n    amountOut: BigNumber,\n    amountInMax: BigNumber,\n    paths: [string, string],\n    to: string,\n    deadline: number,\n  ): Promise<void> {\n    return this.send('swapTokensForExactTokens', [amountOut, amountInMax, paths, to, deadline]);\n  }\n}\n\nexport default SeUniswapRouterContract;\n","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport useDebounce from '@rooks/use-debounce';\nimport BigNumber from 'bignumber.js';\nimport { useContractManager } from 'web3/components/contractManagerProvider';\nimport Erc20Contract from 'web3/erc20Contract';\nimport { formatUSD } from 'web3/utils';\n\nimport { Link } from 'components/button';\nimport { EnableTokenButton } from 'components/custom/enable-token';\nimport OldIcon from 'components/custom/icon';\nimport { Spinner } from 'components/custom/spinner';\nimport { TokenAmount, TokenAmountPreview, TokenSelect } from 'components/custom/token-amount-new';\nimport TransactionDetails from 'components/custom/transaction-details';\nimport { KnownTokens, useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIcon } from 'components/token-icon';\nimport { TrancheApiType } from 'modules/smart-exposure/api';\nimport SeUniswapRouterContract from 'modules/smart-exposure/contracts/seUniswapRouterContract';\nimport { useSEPools } from 'modules/smart-exposure/providers/se-pools-provider';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport { numberFormat } from '../../../../utils';\n\nexport const Swap = ({\n  tranche,\n  tokenAContract,\n  tokenBContract,\n  tokenEContract,\n}: {\n  tranche: TrancheApiType;\n  tokenAContract: Erc20Contract;\n  tokenBContract: Erc20Contract;\n  tokenEContract: Erc20Contract;\n}) => {\n  const wallet = useWallet();\n  const { pool: poolAddress, tranche: trancheAddress } = useParams<{ pool: string; tranche: string }>();\n  const tokens: [KnownTokens, KnownTokens] = [tranche.tokenA.symbol, tranche.tokenB.symbol];\n\n  const { getTokenIconBySymbol } = useKnownTokens();\n  const [selectedTokenSymbol, setSelectedTokenSymbol] = useState<KnownTokens>(tokens[0]);\n  const [tokenState, setTokenState] = useState<string>('');\n  const [tokenAState, setTokenAState] = useState<BigNumber | undefined>();\n  const [tokenBState, setTokenBState] = useState<BigNumber | undefined>();\n  const [uniswapRouterContract, setUniswapRouterContract] = useState<SeUniswapRouterContract | undefined>();\n  const [selectedTokenSwapAmount, setSelectedTokenSwapAmount] = useState<BigNumber | undefined>();\n  const { ePoolPeripheryContract, ePoolHelperContract } = useSEPools();\n  const [transactionDetails, setTransactionDetails] = useState<{ deadline?: number; slippage?: number }>({\n    deadline: 20,\n    slippage: 0.5,\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const { getContract } = useContractManager();\n\n  const isTokenA = selectedTokenSymbol === tranche.tokenA.symbol;\n\n  const selectedTokenContract = isTokenA ? tokenAContract : tokenBContract;\n  const selectedTokenDecimals = tranche[isTokenA ? 'tokenA' : 'tokenB'].decimals;\n\n  useEffect(() => {\n    setTokenState('');\n    setTokenAState(undefined);\n    setTokenBState(undefined);\n    setSelectedTokenSwapAmount(undefined);\n  }, [isTokenA]);\n\n  useEffect(() => {\n    ePoolPeripheryContract?.getRouter().then(address => {\n      const routerContract = getContract(address, () => new SeUniswapRouterContract(address));\n      setUniswapRouterContract(routerContract);\n    });\n  }, [ePoolPeripheryContract]);\n\n  useEffect(() => {\n    if (uniswapRouterContract?.address) {\n      selectedTokenContract.loadAllowance(uniswapRouterContract?.address);\n    }\n  }, [selectedTokenContract, uniswapRouterContract?.address]);\n\n  const tokenAIcon = getTokenIconBySymbol(tranche.tokenA.symbol);\n  const tokenBIcon = getTokenIconBySymbol(tranche.tokenB.symbol);\n\n  const selectedTokenMax =\n    selectedTokenContract.getBalanceOf(wallet.account)?.unscaleBy(selectedTokenDecimals) ?? BigNumber.ZERO;\n\n  const tokenHandler = useCallback(\n    (value: string, _isTokenA: boolean) => {\n      setSelectedTokenSwapAmount(undefined);\n      const amount = BigNumber.from(value)?.scaleBy(selectedTokenDecimals);\n      if (!amount || !ePoolHelperContract) {\n        return;\n      }\n\n      ePoolHelperContract?.[_isTokenA ? 'getTokenATokenBForTokenA' : 'getTokenATokenBForTokenB'](\n        poolAddress,\n        trancheAddress,\n        amount,\n      )\n        .then(({ amountA, amountB }) => {\n          setTokenAState(amountA);\n          setTokenBState(amountB);\n\n          uniswapRouterContract\n            ?.getAmountsIn(\n              _isTokenA ? amountB : amountA,\n              _isTokenA\n                ? [tranche.tokenA.address, tranche.tokenB.address]\n                : [tranche.tokenB.address, tranche.tokenA.address],\n            )\n            .then(routerValues => {\n              setSelectedTokenSwapAmount(routerValues[_isTokenA ? 0 : 1]);\n            })\n            .catch(e => {\n              console.error(e);\n            });\n        })\n        .catch(err => {\n          console.error(err);\n        });\n    },\n    [\n      ePoolHelperContract,\n      poolAddress,\n      trancheAddress,\n      selectedTokenDecimals,\n      tranche.tokenA.address,\n      tranche.tokenB.address,\n      uniswapRouterContract,\n    ],\n  );\n\n  const debouncedTokenHandler = useDebounce(tokenHandler, 400);\n\n  useEffect(() => {\n    setTokenAState(undefined);\n    setTokenBState(undefined);\n    debouncedTokenHandler(tokenState, isTokenA);\n  }, [debouncedTokenHandler, tokenState, isTokenA]);\n\n  const handleSubmit = (e: React.SyntheticEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    const amountOut = isTokenA ? tokenBState : tokenAState;\n\n    if (!amountOut || !wallet.account) return;\n\n    setLoading(true);\n    const deadlineTs = Math.floor(Date.now() / 1_000 + Number(transactionDetails.deadline) * 60);\n    uniswapRouterContract\n      ?.swapTokensForExactTokens(\n        amountOut,\n        selectedTokenSwapAmount?.multipliedBy(1 + (transactionDetails.slippage ?? 0) / 100).integerValue() ??\n          BigNumber.ZERO,\n        isTokenA ? [tranche.tokenA.address, tranche.tokenB.address] : [tranche.tokenB.address, tranche.tokenA.address],\n        wallet.account,\n        deadlineTs,\n      )\n      .then(() => {\n        setTokenState('');\n        tokenAContract.loadBalance();\n        tokenBContract.loadBalance();\n        tokenEContract.loadBalance();\n      })\n      .catch(e => {\n        console.error(e);\n      });\n\n    setLoading(false);\n  };\n\n  const tokenMax = selectedTokenContract.balance?.unscaleBy(selectedTokenContract.decimals) ?? BigNumber.ZERO;\n\n  const tokenErrors = useMemo(() => {\n    const errors: string[] = [];\n\n    if (tokenState && !tokenState.match(/^(\\d+\\.?\\d*|\\.\\d+)$/)) {\n      errors.push('Wrong number format');\n    }\n\n    if (tokenMax.isLessThan(tokenState)) {\n      errors.push('Insufficient balance');\n    }\n\n    return errors;\n  }, [tokenMax, tokenState]);\n\n  const disableSubmit =\n    !tokenState ||\n    !!tokenErrors.length ||\n    (uniswapRouterContract?.address\n      ? selectedTokenContract.isAllowedOf(uniswapRouterContract?.address ?? '') === false\n      : false);\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"flex mb-8\">\n        <span className=\"text-sm fw-semibold color-secondary\">{selectedTokenSymbol} amount</span>\n      </div>\n      <TokenAmount\n        before={<TokenSelect value={selectedTokenSymbol} onChange={setSelectedTokenSymbol} tokens={tokens} />}\n        value={tokenState}\n        secondary={formatUSD(\n          BigNumber.from(tokenState)?.multipliedBy(tranche[isTokenA ? 'tokenA' : 'tokenB'].state.price) ?? 0,\n        )}\n        onChange={setTokenState}\n        max={selectedTokenMax}\n        placeholder={`0 (Max ${selectedTokenMax})`}\n        className=\"mb-16\"\n        classNameBefore=\"ph-0\"\n        errors={tokenErrors}\n      />\n      <OldIcon\n        name=\"down-arrow-circle\"\n        width={32}\n        height={32}\n        style={{\n          display: 'block',\n          margin: '0 auto',\n        }}\n      />\n      <div className=\"css-grid mb-32\" style={{ '--gap': '32px' } as React.CSSProperties}>\n        <div>\n          <div className=\"flex mb-8\">\n            <span className=\"text-sm fw-semibold color-secondary\">{tranche.tokenA.symbol} amount</span>\n            <span className=\"text-sm fw-semibold color-secondary ml-auto\">\n              {numberFormat(Number(tranche.tokenARatio) * 100, { minimumFractionDigits: 2 })}%\n            </span>\n          </div>\n          <TokenAmountPreview\n            before={<TokenIcon name={tokenAIcon} size={24} />}\n            value={tokenAState?.unscaleBy(tranche.tokenA.decimals)?.toString() || '0'}\n            secondary={formatUSD(\n              tokenAState?.unscaleBy(tranche.tokenA.decimals)?.multipliedBy(tranche.tokenA.state.price) ?? 0,\n            )}\n          />\n        </div>\n        <div>\n          <div className=\"flex mb-8\">\n            <span className=\"text-sm fw-semibold color-secondary\">{tranche.tokenB.symbol} amount</span>\n            <span className=\"text-sm fw-semibold color-secondary ml-auto\">\n              {numberFormat(Number(tranche.tokenBRatio) * 100, { minimumFractionDigits: 2 })}%\n            </span>\n          </div>\n          <TokenAmountPreview\n            before={<TokenIcon name={tokenBIcon} size={24} />}\n            value={tokenBState?.unscaleBy(tranche.tokenB.decimals)?.toString() || '0'}\n            secondary={formatUSD(\n              tokenBState?.unscaleBy(tranche.tokenB.decimals)?.multipliedBy(tranche.tokenB.state.price) ?? 0,\n            )}\n          />\n        </div>\n      </div>\n\n      <TransactionDetails\n        className=\"mb-32\"\n        showSlippage\n        slippage={transactionDetails.slippage}\n        slippageHint=\"Your transaction will revert if the amount of tokens you actually receive is smaller by this percentage.\"\n        showDeadline\n        deadline={transactionDetails.deadline}\n        onChange={setTransactionDetails}>\n        Swap transaction details\n      </TransactionDetails>\n\n      {uniswapRouterContract?.address ? (\n        <EnableTokenButton\n          contract={selectedTokenContract}\n          address={uniswapRouterContract.address}\n          tokenSymbol={selectedTokenSymbol}\n          className=\"mb-32\"\n          style={{ width: '100%' }}\n        />\n      ) : null}\n\n      <div className=\"grid flow-col col-gap-32 align-center justify-space-between\">\n        <Link\n          to={`/smart-exposure/pools/${poolAddress}/${trancheAddress}`}\n          variation=\"text-alt\"\n          size=\"small\"\n          icon=\"arrow\"\n          iconPosition=\"left\"\n          iconRotate={180}>\n          Cancel\n        </Link>\n        <button type=\"submit\" className=\"button-primary\" disabled={loading || disableSubmit}>\n          {loading && <Spinner className=\"mr-8\" />}\n          Swap\n        </button>\n      </div>\n    </form>\n  );\n};\n","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { formatToken } from 'web3/utils';\n\nimport { Link } from 'components/button';\nimport { Spinner } from 'components/custom/spinner';\nimport { Tabs } from 'components/custom/tabs';\nimport { Text } from 'components/custom/typography';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIconPair } from 'components/token-icon';\nimport { useContract } from 'hooks/useContract';\nimport { TrancheApiType, useSeAPI } from 'modules/smart-exposure/api';\nimport { useSEPools } from 'modules/smart-exposure/providers/se-pools-provider';\n\nimport { Deposit } from './Deposit';\nimport { Swap } from './Swap';\n\nconst tabs = [\n  {\n    children: 'Deposit',\n    id: 'deposit',\n  },\n  {\n    children: 'Swap',\n    id: 'swap',\n  },\n];\n\nconst DepositView: React.FC = () => {\n  const { pool: poolAddress, tranche: trancheAddress } = useParams<{ pool: string; tranche: string }>();\n  const { getTokenBySymbol, getTokenIconBySymbol } = useKnownTokens();\n  const [tranche, setTranche] = useState<TrancheApiType>();\n  const [activeTab, setActiveTab] = useState<string>('deposit');\n  const { ePoolPeripheryContract } = useSEPools();\n  const seAPI = useSeAPI();\n  const tokenAContract = useContract(tranche?.tokenA.address, {\n    loadAllowance: [poolAddress, ePoolPeripheryContract.address],\n    loadCommon: true,\n    loadBalance: true,\n  });\n  const tokenBContract = useContract(tranche?.tokenB.address, {\n    loadAllowance: [poolAddress, ePoolPeripheryContract.address],\n    loadCommon: true,\n    loadBalance: true,\n  });\n  const tokenEContract = useContract(trancheAddress, {\n    loadCommon: true,\n    loadBalance: true,\n  });\n\n  useEffect(() => {\n    seAPI.fetchTranche(trancheAddress).then(result => {\n      setTranche(result);\n    });\n  }, [trancheAddress]);\n\n  if (!tranche || !tokenAContract || !tokenBContract || !tokenEContract) {\n    return <Spinner className=\"mh-auto\" />;\n  }\n\n  const tokenA = getTokenBySymbol(tranche.tokenA.symbol);\n  const tokenB = getTokenBySymbol(tranche.tokenB.symbol);\n  const tokenAIcon = getTokenIconBySymbol(tranche.tokenA.symbol);\n  const tokenBIcon = getTokenIconBySymbol(tranche.tokenB.symbol);\n\n  return (\n    <>\n      <div className=\"flex mb-16\">\n        <Link\n          to={`/smart-exposure/pools/${poolAddress}/${trancheAddress}`}\n          variation=\"text-alt\"\n          icon=\"arrow\"\n          iconPosition=\"left\"\n          iconRotate={180}>\n          Tranche details\n        </Link>\n      </div>\n      <div className=\"flex justify-center row-gap-12 col-gap-64 mb-40\">\n        <div className=\"flex\">\n          <TokenIconPair name1={tokenAIcon} name2={tokenBIcon} size={40} className=\"mr-16\" />\n          <div>\n            <div className=\"text-p1 fw-semibold color-primary mr-4\">{`${Number(tranche.tokenARatio) * 100}% ${\n              tranche.tokenA.symbol\n            } / ${Number(tranche.tokenBRatio) * 100}% ${tranche.tokenB.symbol}`}</div>\n            <div className=\"text-sm fw-semibold color-secondary\">{`${tokenA?.name} / ${tokenB?.name}`}</div>\n          </div>\n        </div>\n        <div>\n          <div className=\"text-sm fw-semibold color-secondary mb-4\">Wallet {tranche.tokenA.symbol} balance</div>\n          <div>\n            <span className=\"text-p1 fw-semibold color-primary mr-8\">\n              {formatToken(tokenAContract.balance, {\n                scale: tranche.tokenA.decimals,\n              }) ?? '-'}\n            </span>\n            <span className=\"text-sm fw-semibold color-secondary\">{tranche.tokenA.symbol}</span>\n          </div>\n        </div>\n        <div>\n          <div className=\"text-sm fw-semibold color-secondary mb-4\">Wallet {tranche.tokenB.symbol} balance</div>\n          <div>\n            <span className=\"text-p1 fw-semibold color-primary mr-8\">\n              {' '}\n              {formatToken(tokenBContract.balance, {\n                scale: tranche.tokenB.decimals,\n              }) ?? '-'}\n            </span>\n            <span className=\"text-sm fw-semibold color-secondary\">{tranche.tokenB.symbol}</span>\n          </div>\n        </div>\n        <div>\n          <div className=\"text-sm fw-semibold color-secondary mb-4\">Wallet {tranche.eTokenSymbol} balance</div>\n          <div>\n            <span className=\"text-p1 fw-semibold color-primary mr-8\">\n              {formatToken(tokenEContract.balance, {\n                scale: tokenEContract.decimals,\n              }) ?? '-'}\n            </span>\n            <span className=\"text-sm fw-semibold color-secondary\">{tranche.eTokenSymbol}</span>\n          </div>\n        </div>\n      </div>\n      <div\n        className=\"card ph-32 pv-32 mh-auto\"\n        style={{\n          width: '100%',\n          maxWidth: 640,\n        }}>\n        <Text type=\"h3\" weight=\"semibold\" color=\"primary\" className=\"mb-16\">\n          {activeTab === 'deposit' ? 'Deposit' : 'Swap'}\n        </Text>\n        <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"mb-32\">\n          {activeTab === 'deposit'\n            ? 'Build your SMART Exposure position by minting eTokens with both the tokens in the tranche according to the current tranche ratio.'\n            : 'Start building your SMART Exposure position by swapping a specified amount of input token, in order to be able to purchase eTokens. This is where the slippage and deadline parameters will be used.'}\n        </Text>\n        <Tabs\n          tabs={tabs}\n          activeKey={activeTab}\n          onClick={setActiveTab}\n          className=\"mb-32\"\n          variation=\"elastic\"\n          size=\"small\"\n        />\n        {activeTab === 'deposit' ? (\n          <Deposit\n            tranche={tranche}\n            tokenAContract={tokenAContract}\n            tokenBContract={tokenBContract}\n            tokenEContract={tokenEContract}\n          />\n        ) : (\n          <Swap\n            tranche={tranche}\n            tokenAContract={tokenAContract}\n            tokenBContract={tokenBContract}\n            tokenEContract={tokenEContract}\n          />\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default DepositView;\n"],"sourceRoot":""}