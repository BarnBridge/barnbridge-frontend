(this["webpackJsonpbarnbridge-frontend"]=this["webpackJsonpbarnbridge-frontend"]||[]).push([[16],{1605:function(e,o,t){"use strict";t.d(o,"a",(function(){return u})),t.d(o,"b",(function(){return m}));var s=t(4),a=t(13),n=t(17),c=(t(0),t(8)),i=t.n(c),l=t(1606),r=t.n(l),d=t(1),b=["children","selected"],j=["className"],u=function(e){var o=e.children,t=e.selected,c=void 0!==t&&t,l=Object(n.a)(e,b);return Object(d.jsx)("button",Object(s.a)(Object(s.a)({type:"button",className:i()(r.a.card,Object(a.a)({},r.a.selected,c))},l),{},{children:o}))},m=function(e){var o=e.className,t=Object(n.a)(e,j);return Object(d.jsx)("div",Object(s.a)({className:i()(r.a.cards,o)},t))}},1606:function(e,o,t){e.exports={cards:"s_cards__SMmvy",card:"s_card__3ZxAU",selected:"s_selected__5uLwB"}},2255:function(e,o,t){"use strict";t.r(o);var s=t(29),a=t(5),n=t(9),c=t.n(n),i=t(0),l=t(56),r=t(80),d=t(65),b=t(37),j=t(38),u=t(1361),m=t(12),p=t(250),h=t(415),O=t(1365),v=t(116),x=t(424),f=t(1436),y=t(19),g=t.n(y),w=t(8),N=t.n(w),k=t(1377),T=t(1614),S=t(1383),C=t(33),A=t(45),B=t(1591),_=t(73),J=t(1909),U=t.n(J),z=t(1),D=function(e){var o,t,n,r,b,x,f=e.pool,y=e.smartAlphaContract,w=e.poolTokenContract,J=Object(l.i)().tranche.toLowerCase(),D=Object(A.b)().contracts,E=Object(_.c)(),M=Object(p.e)(),q=M.getToken,P=M.getAsset,R=Object(v.a)(),I=Object(a.a)(R,2),L=I[0],F=I[1],Q=Object(i.useState)(""),Y=Object(a.a)(Q,2),W=Y[0],Z=Y[1],G=Object(i.useState)(),H=Object(a.a)(G,2),K=H[0],V=H[1],X=Object(i.useState)(),$=Object(a.a)(X,2),ee=$[0],oe=$[1],te=Object(i.useState)(!1),se=Object(a.a)(te,2),ae=se[0],ne=se[1],ce=Object(i.useState)(!1),ie=Object(a.a)(ce,2),le=ie[0],re=ie[1],de=Object(i.useState)(!1),be=Object(a.a)(de,2),je=be[0],ue=be[1],me="senior"===J,pe=q(f.poolToken.symbol),he=P(f.oracleAssetSymbol),Oe=null===w||void 0===w||null===(o=w.getBalanceOf())||void 0===o?void 0:o.unscaleBy(f.poolToken.decimals),ve=null===w||void 0===w?void 0:w.isAllowedOf(f.poolAddress),xe=Object(O.b)().getOrCreateContract,fe=Object(i.useMemo)((function(){var e,o=null===(e=D.sa)||void 0===e?void 0:e.loupe;if(o)return xe(o,(function(){return new B.a(o)}))}),[null===(t=D.sa)||void 0===t?void 0:t.loupe]);function ye(){return(ye=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),e.prev=1,e.next=4,null===w||void 0===w?void 0:w.approve(null===y||void 0===y?void 0:y.address,!0);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:ne(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function ge(){return(ge=Object(s.a)(c.a.mark((function e(o){var t,s,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ue(!1),re(!0),e.prev=2,!(s=null===(t=g.a.from(W))||void 0===t?void 0:t.scaleBy(f.poolToken.decimals))){e.next=9;break}return e.next=7,null===(a=me?null===y||void 0===y?void 0:y.depositSenior:null===y||void 0===y?void 0:y.depositJunior)||void 0===a?void 0:a.call(y,s,o);case 7:Z(""),L();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:re(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){var e,o;E.account&&(null===w||void 0===w||w.loadBalance(),null===w||void 0===w||w.loadAllowance(f.poolAddress),null===(e=me?null===y||void 0===y?void 0:y.seniorEntryQueue:null===y||void 0===y?void 0:y.juniorEntryQueue)||void 0===e||e.call(y,E.account).then((function(e){var o=Object(a.a)(e,2),t=(o[0],o[1]);V(t)})),null===(o=me?null===fe||void 0===fe?void 0:fe.getUserRedeemableSeniorTokens:null===fe||void 0===fe?void 0:fe.getUserRedeemableJuniorTokens)||void 0===o||o.call(fe,null===y||void 0===y?void 0:y.address,E.account).then((function(e){oe(e)})))}),[E.account,F]),Object(z.jsxs)("div",{className:"card p-24",children:[Object(z.jsxs)(m.b,{type:"h3",weight:"bold",color:"primary",tag:"h3",className:"mb-16",children:[me?"Senior":"Junior"," deposit"]}),Object(z.jsxs)(m.b,{type:"p2",weight:"semibold",color:"secondary",tag:"p",className:"mb-32",children:["Choose the amount of tokens you want to deposit in the ",J," side. Make sure you double check the amounts."]}),Object(z.jsxs)("div",{className:N()(U.a.depositBalance,"flex col-gap-32 mb-32"),children:[Object(z.jsxs)("div",{children:[Object(z.jsx)(m.a,{text:"This amount of ".concat(f.poolToken.symbol," is already in the deposit queue and will be considered towards your overall position in the next epoch."),className:"mb-4",children:Object(z.jsx)(m.b,{type:"small",weight:"semibold",color:"secondary",children:"Balance in deposit queue"})}),Object(z.jsxs)(m.b,{type:"p1",weight:"semibold",color:"primary",className:"flex align-center",children:[null!==(n=Object(d.d)(null===K||void 0===K?void 0:K.unscaleBy(f.poolToken.decimals)))&&void 0!==n?n:"-",Object(z.jsx)(h.a,{name:null===pe||void 0===pe?void 0:pe.icon,size:16,className:"ml-8"})]})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)(m.a,{text:"This amount of ".concat(me?"senior":"junior"," tokens is available to be redeemed from your deposits made in either the ongoing or previous epochs. It will be automatically redeemed if you add more ").concat(f.poolToken.symbol," to the deposit queue."),className:"mb-4",children:Object(z.jsxs)(m.b,{type:"small",weight:"semibold",color:"secondary",children:["Unclaimed ",J," tokens"]})}),Object(z.jsxs)(m.b,{type:"p1",weight:"semibold",color:"primary",className:"flex align-center",children:[null!==(r=Object(d.d)(null===ee||void 0===ee?void 0:ee.unscaleBy(f.poolToken.decimals)))&&void 0!==r?r:"-",Object(z.jsx)(h.a,{className:"ml-8",name:null===pe||void 0===pe?void 0:pe.icon,outline:me?"green":"purple",bubble1Name:"bond",bubble2Name:null===he||void 0===he?void 0:he.icon,size:16})]})]})]}),Object(z.jsxs)(m.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-8",children:[f.poolToken.symbol," amount"]}),Object(z.jsx)(S.a,{before:Object(z.jsx)(h.a,{name:null===pe||void 0===pe?void 0:pe.icon,size:24}),value:W,onChange:Z,slider:!0,max:Oe,placeholder:"0 (Max ".concat(null!==Oe&&void 0!==Oe?Oe:0,")"),className:"mb-32"}),Object(z.jsx)(T.a,{type:"info",className:"mb-32",children:"Deposits made during an epoch will be added to the deposit queue and will count toward your position in the next epoch."}),Object(z.jsxs)("div",{className:"flex justify-end align-center",children:[!1===ve&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(j.a,{variation:"primary",disabled:ae,onClick:function(){return ye.apply(this,arguments)},children:[ae&&Object(z.jsx)(u.a,{className:"mr-8"}),"Enable ",f.poolToken.symbol]}),Object(z.jsx)(C.a,{name:"chevron",size:16,color:"icon",className:"ml-12 mr-12"})]}),Object(z.jsxs)(j.a,{variation:"primary",disabled:le||!ve||!W,onClick:function(){return ue(!0)},children:[le&&Object(z.jsx)(u.a,{className:"mr-8"}),"Deposit"]})]}),je&&Object(z.jsx)(k.a,{title:"Initiate deposit",header:Object(z.jsxs)("div",{className:"flex flow-row row-gap-16",children:[Object(z.jsxs)(m.b,{type:"p2",weight:"semibold",color:"secondary",children:["Your balance of"," ",Object(z.jsxs)(m.b,{tag:"span",type:"p2",weight:"bold",color:"primary",children:[Object(d.d)(g.a.from(W),{decimals:f.poolToken.decimals})," ",f.poolToken.symbol]})," ","will be added to the deposit queue for the next epoch."]}),Object(z.jsxs)("div",{className:"container-box flex flow-col col-gap-32",children:[Object(z.jsxs)("div",{className:"flex flow-row",children:[Object(z.jsx)(m.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Deposited amount"}),Object(z.jsxs)(m.b,{type:"p1",weight:"semibold",color:"primary",className:"flex align-center",children:[null!==(b=Object(d.d)(g.a.from(W)))&&void 0!==b?b:"-",Object(z.jsx)(h.a,{name:null===pe||void 0===pe?void 0:pe.icon,size:16,className:"ml-8"})]})]}),Object(z.jsxs)("div",{className:"flex flow-row",children:[Object(z.jsx)(m.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Redeemable unclaimed tokens"}),Object(z.jsxs)(m.b,{type:"p1",weight:"semibold",color:"primary",className:"flex align-center",children:[null!==(x=Object(d.d)(null===ee||void 0===ee?void 0:ee.unscaleBy(f.poolToken.decimals)))&&void 0!==x?x:"-",Object(z.jsx)(h.a,{name:null===pe||void 0===pe?void 0:pe.icon,bubble1Name:"bond",bubble2Name:null===he||void 0===he?void 0:he.icon,outline:me?"green":"purple",className:"ml-8"})]})]})]})]}),submitText:"Confirm your deposit",onCancel:function(){return ue(!1)},onConfirm:function(e){return function(e){return ge.apply(this,arguments)}(e.gasPrice)}})]})},E=t(63),M=t(1605),q=function(e){e.pool;var o=Object(l.h)(),t=Object(i.useState)(),s=Object(a.a)(t,2),n=s[0],c=s[1];return Object(z.jsxs)("div",{className:"card p-24",children:[Object(z.jsx)(m.b,{type:"h3",weight:"bold",color:"primary",tag:"h3",className:"mb-16",children:"Select your preferred side"}),Object(z.jsx)(m.b,{type:"p2",weight:"semibold",color:"secondary",tag:"p",className:"mb-32",children:"You can choose between senior or junior positions. Be aware of the risk involved and read the warnings before going further."}),Object(z.jsxs)(M.b,{className:"mb-32",children:[Object(z.jsxs)(M.a,{selected:"senior"===n,onClick:function(){return c("senior")},children:[Object(z.jsx)(E.a,{name:"senior-side",width:64,height:64,className:"mb-24"}),Object(z.jsx)(m.b,{type:"p1",weight:"semibold",color:"primary",className:"mb-8",children:"Senior side"})]}),Object(z.jsxs)(M.a,{selected:"junior"===n,onClick:function(){return c("junior")},children:[Object(z.jsx)(E.a,{name:"junior-side",width:64,height:64,className:"mb-24"}),Object(z.jsx)(m.b,{type:"p1",weight:"semibold",color:"primary",className:"mb-8",children:"Junior side"})]})]}),"senior"===n?Object(z.jsx)(T.a,{type:"warning",className:"mb-32",children:"Senior positions offer dampened exposure to the underlying asset's price volatility. Because the position's upside exposure is limited and its downside is protected, it will experience low volatility relative to the underlying asset."}):null,"junior"===n?Object(z.jsx)(T.a,{type:"warning",className:"mb-32",children:"Junior positions offer leveraged exposure to the underlying asset's price volatility. The junior positions have amplified exposure to both upside and downside price volatility. Upside and downside leverage are NOT symmetrical and both will vary week-to-week."}):null,Object(z.jsx)("div",{className:"flex",children:Object(z.jsx)(j.e,{to:"".concat(o.pathname,"/").concat(n),variation:"primary","aria-disabled":!n,className:"ml-auto",children:"Next step"})})]})};o.default=function(){var e,o,t=Object(l.i)().id,n=Object(v.a)(),y=Object(a.a)(n,1)[0],g=Object(x.e)(t).data,w=Object(p.e)(),N=w.getToken,k=w.getAsset,T=Object(O.b)(),S=T.getOrCreateContract,C=T.Listeners,A=Object(i.useMemo)((function(){if(g)return S(g.poolAddress,(function(){return new f.b(g.poolAddress)}),{afterInit:function(){var e=Object(s.a)(c.a.mark((function e(o){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.onUpdateData(y),e.next=3,o.loadCommon();case 3:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}()})}),[g]),B=Object(i.useMemo)((function(){if(g)return S(g.poolToken.address,(function(){var e=new r.a([],g.poolToken.address);return e.on(b.d.UPDATE_DATA,y),e}),{afterInit:function(){var e=Object(s.a)(c.a.mark((function e(o){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.loadBalance();case 2:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}()})}),[null===g||void 0===g?void 0:g.poolToken.address]);if(!g)return Object(z.jsx)(u.a,{style:{margin:"auto"}});var _=N(g.poolToken.symbol),J=k(g.oracleAssetSymbol);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"container-fit",children:[Object(z.jsx)("div",{className:"mb-16",children:Object(z.jsxs)(l.d,{children:[Object(z.jsx)(l.b,{path:"/smart-alpha/pools/:id/deposit",exact:!0,children:Object(z.jsx)(j.e,{to:"/smart-alpha/pools/".concat(t),variation:"text-alt",icon:"arrow",iconPosition:"left",iconRotate:180,children:"Pool details"})}),Object(z.jsx)(l.b,{path:"/smart-alpha/pools/:id/deposit",children:Object(z.jsx)(j.e,{to:"/smart-alpha/pools/".concat(t,"/deposit"),variation:"text-alt",icon:"arrow",iconPosition:"left",iconRotate:180,children:"Sides"})})]})}),Object(z.jsxs)("div",{className:"flex col-gap-64 align-center mb-32",children:[Object(z.jsxs)("div",{className:"flex align-center",children:[Object(z.jsx)(h.a,{name:null===_||void 0===_?void 0:_.icon,size:40,bubble2Name:null===J||void 0===J?void 0:J.icon,className:"mr-16"}),Object(z.jsxs)("div",{children:[Object(z.jsx)(m.b,{type:"p1",weight:"semibold",color:"primary",tag:"h2",className:"mb-4",children:g.poolName}),Object(z.jsxs)(m.b,{type:"small",weight:"semibold",color:"red",children:["Epoch ",g.state.epoch]})]})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)(m.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Wallet balance"}),Object(z.jsxs)("div",{className:"flex align-center",children:[Object(z.jsx)(m.b,{type:"p1",weight:"semibold",color:"primary",className:"mr-4",children:null!==(e=Object(d.d)(null===B||void 0===B||null===(o=B.getBalanceOf())||void 0===o?void 0:o.unscaleBy(g.poolToken.decimals)))&&void 0!==e?e:"-"}),Object(z.jsx)(m.b,{type:"small",weight:"semibold",color:"secondary",children:g.poolToken.symbol})]})]}),Object(z.jsxs)(l.d,{children:[Object(z.jsx)(l.b,{path:"/smart-alpha/pools/:id/deposit/senior",children:Object(z.jsxs)("div",{children:[Object(z.jsx)(m.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Side"}),Object(z.jsx)(m.b,{type:"p1",weight:"semibold",color:"primary",className:"mr-4",children:"Senior"})]})}),Object(z.jsx)(l.b,{path:"/smart-alpha/pools/:id/deposit/junior",children:Object(z.jsxs)("div",{children:[Object(z.jsx)(m.b,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Side"}),Object(z.jsx)(m.b,{type:"p1",weight:"semibold",color:"primary",className:"mr-4",children:"Junior"})]})})]})]}),Object(z.jsx)(i.Suspense,{fallback:Object(z.jsx)(u.a,{}),children:Object(z.jsxs)(l.d,{children:[Object(z.jsx)(l.b,{path:"/smart-alpha/pools/:id/deposit",exact:!0,children:Object(z.jsx)(q,{pool:g})}),Object(z.jsx)(l.b,{path:"/smart-alpha/pools/:id/deposit/:tranche(senior|junior)",exact:!0,children:Object(z.jsx)(D,{pool:g,smartAlphaContract:A,poolTokenContract:B})}),Object(z.jsx)(l.a,{to:"/smart-alpha/pools/".concat(t,"/deposit")})]})})]}),C]})}}}]);
//# sourceMappingURL=sa-deposit-view.1760b635.chunk.js.map