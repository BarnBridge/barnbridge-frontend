(this["webpackJsonpbarnbridge-frontend"]=this["webpackJsonpbarnbridge-frontend"]||[]).push([[41],{1356:function(e,t,n){"use strict";var a=n(4),c=n(17),s=(n(0),n(1364)),o=n.n(s),l=n(8),r=n.n(l),i=n(33),d=n(48),u=n(99),b=n(1360),m=n.n(b),j=n(1),h=["children"],O=["className","label","hint","extra","children"],p=["className","children"],f=function(e){var t=e.className,n=e.children,s=Object(c.a)(e,p);return Object(j.jsx)(o.a,Object(a.a)(Object(a.a)({className:r()(m.a.form,t),layout:"vertical",requiredMark:!1},s),{},{children:n}))};f.Item=function(e){var t=e.className,n=e.label,s=e.hint,l=e.extra,b=e.children,h=Object(c.a)(e,O);return Object(j.jsx)(o.a.Item,Object(a.a)(Object(a.a)({className:r()(m.a.item,t)},h),{},{label:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(d.a,{flow:"col",gap:4,align:"center",children:[n,s&&Object(j.jsx)(u.a,{title:s,children:Object(j.jsx)("span",{children:Object(j.jsx)(i.a,{name:"info",size:15})})})]}),l]}),children:b}))},f.List=function(e){var t=e.children,n=Object(c.a)(e,h);return Object(j.jsx)(o.a.List,Object(a.a)(Object(a.a)({},n),{},{children:t}))},t.a=f},1357:function(e,t,n){"use strict";var a=n(4),c=n(17),s=(n(0),n(1393)),o=n.n(s),l=n(8),r=n.n(l),i=n(1362),d=n.n(i),u=n(1),b=["className"];t.a=function(e){var t=e.className,n=Object(c.a)(e,b);return Object(u.jsx)(o.a,Object(a.a)({className:r()(d.a.divider,t)},n))}},1360:function(e,t,n){e.exports={form:"s_form__36nMg",item:"s_item__2gbuN"}},1361:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(4),c=n(17),s=n(8),o=n.n(s),l=n(33),r=n(1429),i=n.n(r),d=n(1),u=["className","children","spinning"],b=function(e){var t=e.className,n=e.children,s=e.spinning,r=Object(c.a)(e,u);return n?s?Object(d.jsxs)("div",{className:i.a.container,children:[Object(d.jsx)("div",{className:i.a.children,children:n}),Object(d.jsx)(l.a,Object(a.a)({name:"loader",className:o()(i.a.spinner,t)},r))]}):Object(d.jsx)(d.Fragment,{children:n}):Object(d.jsx)(l.a,Object(a.a)({name:"loader",className:o()(i.a.spinner,t)},r))}},1362:function(e,t,n){e.exports={divider:"s_divider__3YM-J"}},1365:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return v}));var a=n(5),c=n(0),s=n(423),o=n(419),l=n.n(o),r=n(425),i=n(80),d=n(37),u=n(20),b=n(73),m=n(66),j=n(116),h=n(1);function O(e){var t=Object(c.useRef)();return l()(e,t.current)||(t.current=e),t.current}var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.loadBalance,s=t.loadCommon,o=t.loadAllowance,l=Object(b.c)(),r=l.provider,u=l.account,h=Object(j.a)(),p=Object(a.a)(h,1),f=p[0],v=Object(m.c)(),x=v.getContract,y=Object(c.useMemo)((function(){if(!e)return null;var t=x(e,(function(){return new i.a([],e)}));return t.on(d.d.UPDATE_DATA,f),t}),[e,r,f]);Object(c.useEffect)((function(){y&&n&&(y.setAccount(u),y.loadBalance())}),[y,n,u]),Object(c.useEffect)((function(){y&&s&&y.loadCommon().then((function(){return f()})).catch(Error)}),[y,s,f]);var k=O(o);return Object(c.useEffect)((function(){y&&k&&(Array.isArray(k)?k.forEach((function(e){return y.loadAllowance(e)})):y.loadAllowance(k))}),[y,k]),y};function f(e){var t=(null!==e&&void 0!==e?e:{}).listeners,n=void 0===t||t,o=Object(b.c)(),l=o.account,i=o.provider,d=Object(u.h)().activeProvider,m=Object(j.a)(),O=Object(a.a)(m,2),p=O[0],f=O[1],v=Object(c.useRef)(d),x=Object(c.useRef)(i),y=Object(c.useRef)(l),k=Object(c.useRef)(new Map),g=Object(c.useCallback)((function(e,t,n){var a,c=t();return c.setCallProvider(v.current),c.setProvider(x.current),c.setAccount(y.current),k.current.set(e,{address:e,factory:t,options:n,instance:c}),null===n||void 0===n||null===(a=n.afterInit)||void 0===a||a.call(n,c),p(),c}),[d,l,p]),w=Object(s.a)((function(){k.current.forEach((function(e){var t,n;null===(t=e.options)||void 0===t||null===(n=t.onDestroy)||void 0===n||n.call(t,e.instance),g(e.address,(function(){return e.instance}),e.options)}))}),250);v.current!==d&&(v.current=d,w()),x.current!==i&&(x.current=i,w()),y.current!==l&&(y.current=l,w());var N=Object(c.useCallback)((function(e,t,n){return k.current.has(e)?k.current.get(e).instance:g(e,t,n)}),[g]);return{getOrCreateContract:N,getContract:Object(c.useCallback)((function(e){if(k.current.has(e))return k.current.get(e).instance}),[g]),Listeners:Object(c.useMemo)((function(){return n?Object(h.jsx)(h.Fragment,{children:Array.from(k.current).map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(h.jsx)(r.a,{contract:c.instance},n)}))}):null}),[f,n])}}function v(e,t){return f({listeners:!1}).getOrCreateContract("$address",e,t)}},1378:function(e,t,n){"use strict";var a=n(4),c=n(17),s=(n(0),n(1461)),o=n.n(s),l=n(8),r=n.n(l),i=n(1430),d=n.n(i),u=n(1),b=["className","disabled"];t.a=function(e){var t=e.className,n=e.disabled,s=Object(c.a)(e,b);return Object(u.jsx)(o.a,Object(a.a)({className:r()(d.a.component,t,n&&d.a.disabled),disabled:n,autoComplete:"off"},s))}},1383:function(e,t,n){"use strict";n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return A}));var a=n(15),c=n(4),s=n(13),o=n(17),l=n(0),r=n(19),i=n.n(r),d=n(8),u=n.n(d),b=n(1394),m=n(1402),j=n.n(m),h=n(1),O=["className","value"],p=function(e){var t=e.className,n=e.value,a=Object(o.a)(e,O),s=Number(a.max)||0,l=Math.floor(1e6*s)/1e6,r=Math.floor(1e6*Number(n))/1e6/l*100||0,i=0===l;return Object(h.jsx)("input",Object(c.a)(Object(c.a)({},a),{},{type:"range",className:u()(j.a.input,t),style:{"--track-fill":"".concat(i?0:r,"%")},max:i?1:l,disabled:i,value:i?"0":n||"0"}))},f=n(12),v=n(33),x=n(183),y=n(415),k=n(1403),g=n.n(k),w=["onChange","before","secondary","className","classNameBefore","slider","errors","decimals","max"],N=Object(l.forwardRef)((function(e,t){var n,a,l=e.onChange,r=e.before,d=e.secondary,b=e.className,m=e.classNameBefore,j=e.slider,O=e.errors,v=void 0===O?[]:O,x=e.decimals,y=void 0===x?6:x,k=e.max,N=Object(o.a)(e,w),_=null!==(n=i.a.from(k))&&void 0!==n?n:i.a.ZERO;return Object(h.jsxs)("div",{className:b,children:[Object(h.jsxs)("div",{className:u()(g.a.tokenAmount,Object(s.a)({},g.a.error,v.length)),children:[r&&Object(h.jsx)("div",{className:u()(g.a.tokenAmountBefore,m),children:r}),Object(h.jsxs)("div",{className:g.a.tokenAmountValues,children:[Object(h.jsx)("input",Object(c.a)({ref:t,className:g.a.tokenAmountValue,type:"text",inputMode:"decimal",pattern:"[0-9]+([\\.,][0-9]+)?",onWheel:function(e){e.currentTarget.blur()},onChange:function(e){l(e.target.value)}},N)),Object(h.jsx)("div",{className:g.a.tokenAmountHint,children:d})]}),!_.isZero()&&Object(h.jsx)("button",{type:"button",className:"button-ghost",style:{alignSelf:"center"},disabled:N.disabled||_.isZero(),onClick:function(){return l(_.toString())},children:"MAX"})]}),!!v.length&&v.map((function(e,t){return Object(h.jsx)(f.b,{type:"small",weight:"semibold",color:"red",style:{marginTop:"8px"},children:e},t)})),j&&!_.isZero()?Object(h.jsx)(p,{type:"range",className:g.a.tokenAmountSlider,min:"0",max:_.toString(),step:1/Math.pow(10,Math.min(y,6)),value:null!==(a=N.value)&&void 0!==a?a:0,disabled:N.disabled||_.isZero(),onChange:function(e){l(e.target.value)}}):null]})})),_=function(e){var t=e.value,n=e.before,a=e.secondary,c=e.className,s=e.classNameBefore;return Object(h.jsxs)("div",{className:u()(g.a.tokenAmountPreview,c),children:[n&&Object(h.jsx)("div",{className:u()(g.a.tokenAmountPreviewBefore,s),children:n}),Object(h.jsxs)("div",{className:g.a.tokenAmountPreviewValues,children:[Object(h.jsx)("input",{className:g.a.tokenAmountPreviewValue,type:"text",value:t||"",readOnly:!0}),Object(h.jsx)("div",{className:g.a.tokenAmountPreviewHint,children:a})]})]})},A=function(e){var t=e.value,n=e.onChange,c=e.tokens,s=e.className,o=e.style,l=Object(x.c)().getTokenBySymbol,r=l(t);return Object(h.jsx)(b.b,{items:c.reduce((function(e,t){var c,s,o=l(t);return o?[].concat(Object(a.a)(e),[{onClick:function(){n(t)},children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(y.a,{name:null===(c=l(t))||void 0===c?void 0:c.icon,className:"mr-8"}),null===(s=l(t))||void 0===s?void 0:s.name]}),"aria-selected":(null===r||void 0===r?void 0:r.symbol)===o.symbol?"true":"false"}]):e}),[]),children:function(e){var t=e.ref,n=e.setOpen,a=e.open;return Object(h.jsxs)("button",{type:"button",ref:t,onClick:function(){return n((function(e){return!e}))},className:u()(g.a.tokenAmountSelectToken,s),style:o,children:[r?Object(h.jsx)(y.a,{name:r.icon,size:24,className:"mr-16"}):null,Object(h.jsx)(f.b,{type:"p1",weight:"semibold",color:"primary",children:null===r||void 0===r?void 0:r.symbol}),Object(h.jsx)(v.a,{name:a?"dropdown-active":"dropdown",size:"24",className:"token-select-chevron",style:{marginLeft:4}})]})}})}},1394:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return w}));var a=n(17),c=n(4),s=n(5),o=n(0),l=n.n(o),r=n(51),i=n.n(r),d=n(2286),u=n(58),b=n(8),m=n.n(b),j=n(1545),h=n.n(j),O=n(33),p=n(1397),f=n.n(p),v=n(1),x=["onClick"],y=[{name:"offset",options:{offset:[0,8]}},{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;t.styles.popper.minWidth="".concat(t.rects.reference.width,"px")},effect:function(e){var t=e.state;t.elements.popper.style.minWidth="".concat(t.elements.reference.offsetWidth,"px")}}],k=function(e){var t=e.content,n=e.children,a=e.options,o=l.a.useState(!1),r=Object(s.a)(o,2),u=r[0],b=r[1],m=l.a.useRef(null),j=l.a.useRef(null),O=Object(d.a)(m.current,j.current,Object(c.a)({placement:"bottom-start",strategy:"absolute",modifiers:y},a)),p=O.styles,f=O.attributes,x=O.forceUpdate;return l.a.useEffect((function(){var e;if(x&&x(),u){var t=[],n=m.current;n&&t.push(n);var a=j.current;a&&t.push(a),e=h()(t,["click","touchstart"],(function(){return b(!1)}))}return function(){var t;null===(t=e)||void 0===t||t.remove()}}),[u]),Object(v.jsxs)(v.Fragment,{children:[n({ref:m,setOpen:b,open:u}),i.a.createPortal(Object(v.jsx)("div",Object(c.a)(Object(c.a)({ref:j,style:Object(c.a)(Object(c.a)({},p.popper),{},{display:u?"":"none"})},f.popper),{},{children:t(b)})),document.querySelector("#tooltip-root")||document.body)]})},g=function(e){var t=e.items,n=e.children,s=e.options;return Object(v.jsx)(k,{content:function(e){return Object(v.jsx)("ul",{className:f.a.tokenSelectList,children:t.map((function(t,n){var s=t.onClick,o=Object(a.a)(t,x);return o.href?Object(v.jsx)("li",{children:Object(v.jsx)("a",Object(c.a)(Object(c.a)({href:o.href},o),{},{className:f.a.tokenSelectListButton,onClick:function(t){e(!1)},children:o.children}))},n):o.to?Object(v.jsx)("li",{children:Object(v.jsx)(u.b,Object(c.a)(Object(c.a)({},o),{},{className:f.a.tokenSelectListButton,onClick:function(t){e(!1)}}))},n):Object(v.jsx)("li",{children:Object(v.jsx)("button",Object(c.a)(Object(c.a)({},o),{},{className:f.a.tokenSelectListButton,onClick:function(t){s&&s(t),e(!1)}}))},n)}))})},options:s,children:n})},w=function(e){var t=e.items,n=e.children,a=e.className,c=e.size,s=void 0===c?"normal":c,o=e.style;return Object(v.jsx)(g,{items:t,children:function(e){var t=e.ref,c=e.setOpen,l=e.open;return Object(v.jsxs)("button",{type:"button",ref:t,onClick:function(){return c((function(e){return!e}))},className:m()(f.a.dropdown,f.a[s],a),style:o,children:[Object(v.jsx)("div",{className:"flex align-center flex-grow pr-16",children:n}),Object(v.jsx)(O.a,{name:"dropdown",size:"24",className:f.a.dropdownChevron,style:{transform:l?"rotate(180deg)":""}})]})}})}},1397:function(e,t,n){e.exports={tokenSelectList:"s_tokenSelectList__1rsig",tokenSelectListButton:"s_tokenSelectListButton__898YC",active:"s_active__1VA0m",dropdown:"s_dropdown__2I7kF",large:"s_large__uF7P8",dropdownChevron:"s_dropdownChevron__3cfM7"}},1402:function(e,t,n){e.exports={input:"s_input__1b3rZ"}},1403:function(e,t,n){e.exports={tokenAmount:"s_tokenAmount__2n5WY",error:"s_error__3x3RW",tokenAmountBefore:"s_tokenAmountBefore__3YeAZ",tokenAmountValues:"s_tokenAmountValues__1qT2P",tokenAmountValue:"s_tokenAmountValue__2mG1w",tokenAmountHint:"s_tokenAmountHint__3Jk8f",tokenAmountSlider:"s_tokenAmountSlider__2LNhd",tokenAmountPreview:"s_tokenAmountPreview__1qEON",tokenAmountPreviewBefore:"s_tokenAmountPreviewBefore__2ZTVO",tokenAmountPreviewValues:"s_tokenAmountPreviewValues__3WU83",tokenAmountPreviewValue:"s_tokenAmountPreviewValue__2CGmA",tokenAmountPreviewHint:"s_tokenAmountPreviewHint__1XGYo",tokenSelectTrigger:"s_tokenSelectTrigger__39PsM",tokenSelectChevron:"s_tokenSelectChevron__3_diD",tokenSelectListButton:"s_tokenSelectListButton__qrRSq",active:"s_active__hEyw6",tokenAmountSelectToken:"s_tokenAmountSelectToken__8QBHp"}},1429:function(e,t,n){e.exports={spinner:"s_spinner__2lxg5",rotate:"s_rotate__K9I_G",container:"s_container__2DwVy",children:"s_children__1ZC_G"}},1430:function(e,t,n){e.exports={component:"s_component__2HckH",disabled:"s_disabled__3ybza"}},1456:function(e,t,n){"use strict";var a=n(5),c=n(0),s=n.n(c),o=n(2287),l=n(8),r=n.n(l),i=n(74),d=n(1357),u=n(1356),b=n(1378),m=n(214),j=n(12),h=n(33),O=n(1457),p=n.n(O),f=n(1),v=[.1,.3,.5],x=function(e){var t=e.showSlippage,n=e.slippage,c=e.showDeadline,l=e.deadline,r=e.onChange,d=o.a.useForm(),m=Object(a.a)(d,1)[0],h=s.a.useCallback((function(e){if(e.deadline){var t=String(e.deadline).slice(0,6);m.setFieldsValue({deadline:Number(t)})}}),[]),O=s.a.useCallback((function(){m.resetFields()}),[]),x=s.a.useCallback((function(e){null===r||void 0===r||r(e)}),[]);return Object(f.jsx)(u.a,{form:m,initialValues:{slippage:n,deadline:l},validateTrigger:["onSubmit"],onValuesChange:h,onFinish:x,children:Object(f.jsxs)("div",{className:"grid flow-row row-gap-32",children:[t&&Object(f.jsx)(u.a.Item,{label:"Slippage tolerance",children:Object(f.jsxs)("div",{className:"grid flow-col col-gap-16",children:[v.map((function(e){return Object(f.jsxs)(i.a,{type:"ghost",style:{width:70},onClick:function(){m.setFieldsValue({slippage:Number(e)})},children:[e,"%"]},e)})),Object(f.jsx)(u.a.Item,{name:"slippage",rules:[{required:!0,message:"Required"},{validator:function(e,t){return t>0&&t<=100?Promise.resolve():Promise.reject()},message:"Enter a valid slippage percentage"}],noStyle:!0,children:Object(f.jsx)(b.a,{type:"number"})})]})}),c&&Object(f.jsx)(u.a.Item,{name:"deadline",label:"Transaction deadline",rules:[{required:!0,message:"Required"}],children:Object(f.jsx)(b.a,{type:"number",className:p.a.deadlineInput,suffix:Object(f.jsx)(j.b,{type:"p1",weight:"semibold",color:"primary",children:"minutes"})})}),Object(f.jsxs)("div",{className:"grid flow-col align-center justify-space-between",children:[Object(f.jsx)(i.a,{type:"light",onClick:O,children:"Reset changes"}),Object(f.jsx)(i.a,{type:"primary",htmlType:"submit",children:"Apply changes"})]})]})})};t.a=function(e){var t=e.className,n=e.showSlippage,o=void 0!==n&&n,l=e.slippage,u=e.slippageHint,b=e.showDeadline,O=void 0!==b&&b,v=e.deadline,y=e.onChange,k=Object(c.useState)(!1),g=Object(a.a)(k,2),w=g[0],N=g[1],_=s.a.useCallback((function(e){N(!1),null===y||void 0===y||y(e)}),[]);return Object(f.jsxs)("section",{className:r()(p.a.container,t),children:[Object(f.jsxs)("header",{className:"flex ph-24 pv-16",children:[Object(f.jsx)(j.b,{type:"p2",weight:"semibold",color:"secondary",children:e.children}),Object(f.jsx)(m.a,{title:"Customize transaction",overlayStyle:{width:423},content:Object(f.jsx)(x,{showSlippage:o,slippage:l,showDeadline:O,deadline:v,onChange:_}),visible:w,onVisibleChange:N,children:Object(f.jsx)(i.a,{type:"light",className:"ml-auto",children:Object(f.jsx)(h.a,{name:"gear"})})})]}),Object(f.jsx)(d.a,{}),Object(f.jsxs)("div",{className:"ph-24 pv-16",children:[o&&Object(f.jsxs)("div",{className:"flex mb-24",children:[Object(f.jsx)(j.a,{text:u,children:Object(f.jsx)(j.b,{type:"small",weight:"semibold",color:"secondary",children:"Slippage tolerance"})}),Object(f.jsxs)(j.b,{type:"small",weight:"semibold",color:"primary",className:"ml-auto",children:[l,"%"]})]}),O&&Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)(j.a,{text:"Your transaction will revert if it isn't mined in this amount of time.",children:Object(f.jsx)(j.b,{type:"small",weight:"semibold",color:"secondary",children:"Transaction deadline"})}),Object(f.jsxs)(j.b,{type:"small",weight:"semibold",color:"primary",className:"ml-auto",children:[v," minutes"]})]})]})]})}},1457:function(e,t,n){e.exports={container:"s_container__2ZM0_",deadlineInput:"s_deadlineInput__pUUH-"}},1683:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}));var a=n(4),c=n(5),s=n(0),o=n(8),l=n.n(o),r=n(1361),i=n(1),d=function(e){var t=e.tokenAContract,n=e.tokenBContract,a=e.poolAddress,c=e.tranche,s=e.className;return!1!==t.isAllowedOf(a)&&!1!==n.isAllowedOf(a)?null:Object(i.jsxs)("div",{className:l()("flex align-center col-gap-24",s),children:[Object(i.jsx)(u,{contract:t,address:a,tokenSymbol:c.tokenA.symbol}),!1===t.isAllowedOf(a)&&!1===n.isAllowedOf(a)&&Object(i.jsx)("span",{className:"middle-dot color-border"}),Object(i.jsx)(u,{contract:n,address:a,tokenSymbol:c.tokenB.symbol})]})},u=function(e){var t=e.contract,n=e.address,o=e.tokenSymbol,d=e.className,u=e.style,b=void 0===u?{}:u,m=Object(s.useState)(!1),j=Object(c.a)(m,2),h=j[0],O=j[1];return!1!==t.isAllowedOf(n)?null:Object(i.jsxs)("button",{type:"button",className:l()("button-primary",d),style:Object(a.a)({flexGrow:1},b),disabled:h,onClick:function(){O(!0),t.approve(n,!0).finally((function(){return O(!1)}))},children:[h&&Object(i.jsx)(r.a,{className:"mr-8"}),"Enable ",o]})}},2230:function(e,t,n){e.exports={section:"s_section__CJ806",header:"s_header__11m5y",item:"s_item__1_GBJ"}},2292:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n(0),s=n(56),o=n(58),l=n(65),r=n(63),i=n(1361),d=n(1368),u=n(12),b=n(183),m=n(415),j=n(1365),h=n(1437),O=n(1618),p=n(73),f=n(29),v=n(9),x=n.n(v),y=n(423),k=n(19),g=n.n(k),w=n(425),N=n(1683),_=n(1383),A=n(8),B=n.n(A),C=n(2230),S=n.n(C),T=n(1),P=function(e){var t=e.items,n=e.heading,c=e.className;return Object(T.jsxs)("section",{className:B()(S.a.section,c),children:[Object(T.jsx)("header",{className:S.a.header,children:n||Object(T.jsx)(u.b,{type:"p2",weight:"semibold",color:"secondary",children:"Transaction summary"})}),Object(T.jsx)("div",{className:"ph-24 pv-16",children:t.map((function(e,t){var n=Object(a.a)(e,2),c=n[0],s=n[1];return Object(T.jsxs)("div",{className:S.a.item,children:[Object(T.jsx)("div",{children:c}),Object(T.jsx)("div",{className:"ml-auto",children:s})]},t)}))})]})},E=function(e){var t,n,d,j,h,p,v,k,A,B,C,S,E,M,R,F=e.tranche,V=e.tokenAContract,W=e.tokenBContract,L=e.tokenEContract,I=Object(b.c)().getTokenIconBySymbol,Z=Object(s.i)(),H=Z.pool,D=Z.tranche,q=Object(c.useState)(""),z=Object(a.a)(q,2),G=z[0],Y=z[1],J=Object(c.useState)(),U=Object(a.a)(J,2),$=U[0],K=U[1],X=Object(c.useState)(),Q=Object(a.a)(X,2),ee=Q[0],te=Q[1],ne=Object(O.b)(H),ae=Object(O.c)(),ce=ae.ePoolHelperContract,se=ae.ePoolPeripheryContract,oe=Object(c.useState)(!1),le=Object(a.a)(oe,2),re=le[0],ie=le[1],de=I(F.tokenA.symbol),ue=I(F.tokenB.symbol),be=Object(y.a)((function(e){var t,n;if(se){var a=null!==(t=null===(n=g.a.from(e))||void 0===n?void 0:n.multipliedBy(F.sFactorE))&&void 0!==t?t:g.a.ZERO;a&&ce.getTokenATokenBForEToken(H,D,a).then((function(e){var t=e.amountA,n=e.amountB;K(t),te(n)}))}}),400),me=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=null!==(n=g.a.from(G))&&void 0!==n?n:g.a.ZERO){e.next=4;break}return e.abrupt("return");case 4:return ie(!0),e.prev=5,e.next=8,ne.redeem(F.eTokenAddress,a.multipliedBy(F.sFactorE));case 8:Y(""),K(void 0),te(void 0),V.loadBalance(),W.loadBalance(),L.loadBalance(),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(5);case 18:return e.prev=18,ie(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[5,16,18,21]])})));return function(t){return e.apply(this,arguments)}}(),je=null!==(t=null===(n=g.a.from(null!==(d=ne.feeRate)&&void 0!==d?d:0))||void 0===n?void 0:n.unscaleBy(18))&&void 0!==t?t:0,he=null!==(j=null===(h=L.balance)||void 0===h?void 0:h.unscaleBy(null===L||void 0===L?void 0:L.decimals))&&void 0!==j?j:g.a.ZERO,Oe=Object(c.useMemo)((function(){var e=[];return G&&!G.toString().match(/^(\d+\.?\d*|\.\d+)$/)&&e.push("Wrong number format"),he.isLessThan(G)&&e.push("Insufficient balance"),e}),[he,G]),pe=!G||!!Oe.length||!1===L.isAllowedOf(H);return Object(T.jsxs)("form",{onSubmit:me,children:[Object(T.jsx)("div",{className:"flex mb-8",children:Object(T.jsxs)("span",{className:"text-sm fw-semibold color-secondary",children:[F.eTokenSymbol," amount"]})}),Object(T.jsx)(_.a,{before:Object(T.jsx)(m.b,{name1:de,name2:ue,size:24}),value:G,onChange:function(e){Y(e),be(e)},max:he,placeholder:"0 (Max ".concat(null!==he&&void 0!==he?he:0,")"),className:"mb-8",slider:!0,errors:Oe}),Object(T.jsx)(r.a,{name:"down-arrow-circle",width:32,height:32,style:{display:"block",margin:"0 auto"}}),Object(T.jsxs)("div",{className:"flex mb-8",children:[Object(T.jsxs)("span",{className:"text-sm fw-semibold color-secondary",children:[F.tokenA.symbol," amount"]}),Object(T.jsxs)("span",{className:"text-sm fw-semibold color-secondary ml-auto",children:["Current ratio: ",Object(l.c)(Number(F.tokenARatio))]})]}),Object(T.jsx)(_.b,{before:Object(T.jsx)(r.a,{name:de,width:24,height:24}),value:(null===$||void 0===$||null===(p=$.unscaleBy(F.tokenA.decimals))||void 0===p?void 0:p.toString())||"0",secondary:Object(l.e)(null!==(v=null===$||void 0===$||null===(k=$.unscaleBy(F.tokenA.decimals))||void 0===k?void 0:k.multipliedBy(F.tokenA.state.price))&&void 0!==v?v:0),className:"mb-16"}),Object(T.jsx)(r.a,{name:"plus-circle",width:32,height:32,style:{display:"block",margin:"0 auto"}}),Object(T.jsxs)("div",{className:"flex mb-8",children:[Object(T.jsxs)("span",{className:"text-sm fw-semibold color-secondary",children:[F.tokenB.symbol," amount"]}),Object(T.jsxs)("span",{className:"text-sm fw-semibold color-secondary ml-auto",children:["Current ratio: ",Object(l.c)(Number(F.tokenBRatio))]})]}),Object(T.jsx)(_.b,{before:Object(T.jsx)(r.a,{name:ue,width:24,height:24}),value:(null===ee||void 0===ee||null===(A=ee.unscaleBy(F.tokenB.decimals))||void 0===A?void 0:A.toString())||"0",secondary:Object(l.e)(null!==(B=null===ee||void 0===ee||null===(C=ee.unscaleBy(F.tokenB.decimals))||void 0===C?void 0:C.multipliedBy(F.tokenB.state.price))&&void 0!==B?B:0),className:"mb-32"}),Object(T.jsx)(P,{className:"mb-32",items:[[Object(T.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",children:"Transaction fees"}),Object(T.jsxs)(u.b,{type:"p2",weight:"semibold",color:"primary",children:[Object(l.e)(null!==(S=null===(E=g.a.from(G))||void 0===E?void 0:E.multipliedBy(F.state.eTokenPrice).multipliedBy(je))&&void 0!==S?S:0)," ","(",Object(l.c)(je),")"]})],[Object(T.jsxs)(u.b,{type:"small",weight:"semibold",color:"secondary",children:[F.tokenA.symbol," amount"]}),Object(T.jsxs)(u.b,{type:"p1",weight:"bold",color:"primary",children:[Object(l.d)(null===$||void 0===$||null===(M=$.minus($.multipliedBy(je)))||void 0===M?void 0:M.unscaleBy(F.tokenA.decimals))||"0"," ",F.tokenA.symbol]})],[Object(T.jsxs)(u.b,{type:"small",weight:"semibold",color:"secondary",children:[F.tokenB.symbol," amount"]}),Object(T.jsxs)(u.b,{type:"p1",weight:"bold",color:"primary",children:[Object(l.d)(null===ee||void 0===ee||null===(R=ee.minus(ee.multipliedBy(je)))||void 0===R?void 0:R.unscaleBy(F.tokenB.decimals))||"0"," ",F.tokenB.symbol]})]]}),Object(T.jsx)(N.a,{contract:L,address:H,tokenSymbol:F.eTokenSymbol,className:"mb-32",style:{width:"100%"}}),Object(T.jsxs)("div",{className:"grid flow-col col-gap-32 align-center justify-space-between",children:[Object(T.jsxs)(o.b,{to:"/smart-exposure/pools/".concat(H,"/").concat(D),className:"button-back",children:[Object(T.jsx)(r.a,{name:"arrow-back",width:16,height:16,className:"mr-8",color:"inherit"}),"Cancel"]}),Object(T.jsxs)("button",{type:"submit",className:"button-primary",disabled:re||pe,children:[re&&Object(T.jsx)(i.a,{className:"mr-8"}),"Withdraw"]})]}),Object(T.jsx)(w.a,{contract:ne})]})},M=n(1456),R=function(e){var t,n,d,j,h,p,v,k,A,B,C,S=e.tranche,E=e.tokenAContract,R=e.tokenBContract,F=e.tokenEContract,V=Object(b.c)(),W=V.getTokenBySymbol,L=V.getTokenIconBySymbol,I=Object(s.i)(),Z=I.pool,H=I.tranche,D=Object(c.useState)(""),q=Object(a.a)(D,2),z=q[0],G=q[1],Y=Object(c.useState)(),J=Object(a.a)(Y,2),U=J[0],$=J[1],K=[S.tokenA.symbol,S.tokenB.symbol],X=Object(c.useState)(K[0]),Q=Object(a.a)(X,2),ee=Q[0],te=Q[1],ne=Object(O.b)(Z),ae=Object(O.c)().ePoolPeripheryContract,ce=Object(c.useState)({deadline:20,slippage:.5}),se=Object(a.a)(ce,2),oe=se[0],le=se[1],re=Object(c.useState)(!1),ie=Object(a.a)(re,2),de=ie[0],ue=ie[1],be=W(ee),me=L(S.tokenA.symbol),je=L(S.tokenB.symbol),he=ee===S.tokenA.symbol,Oe=he?S.tokenA.decimals:S.tokenB.decimals,pe=null===U||void 0===U?void 0:U.multipliedBy(1-(null!==(t=oe.slippage)&&void 0!==t?t:0)/100),fe=Object(c.useCallback)((function(e,t){var n,a=null===(n=g.a.from(e))||void 0===n?void 0:n.multipliedBy(S.sFactorE);a&&(null===ae||void 0===ae||ae[t?"getMaxOutputAmountAForEToken":"getMaxOutputAmountBForEToken"](Z,H,a).then((function(e){$(e)})))}),[ae,Z,S.sFactorE,H]),ve=Object(y.a)(fe,400);Object(c.useEffect)((function(){$(void 0),ve(z,he)}),[ve,z,he]);var xe=function(){var e=Object(f.a)(x.a.mark((function e(t){var n,a,c,s,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(s=null!==(n=null===(a=g.a.from(z))||void 0===a?void 0:a.multipliedBy(S.sFactorE))&&void 0!==n?n:g.a.ZERO)&&pe){e.next=4;break}return e.abrupt("return");case 4:return o=Math.floor(Date.now()/1e3+60*Number(null!==(c=oe.deadline)&&void 0!==c?c:0)),ue(!0),e.prev=6,e.next=9,null===ae||void 0===ae?void 0:ae[he?"redeemForMinTokenA":"redeemForMinTokenB"](Z,H,s,pe.integerValue(),o);case 9:G(""),$(void 0),E.loadBalance(),R.loadBalance(),F.loadBalance(),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(6);case 18:return e.prev=18,ue(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[6,16,18,21]])})));return function(t){return e.apply(this,arguments)}}(),ye=null!==(n=null===(d=g.a.from(null!==(j=ne.feeRate)&&void 0!==j?j:0))||void 0===d?void 0:d.unscaleBy(18))&&void 0!==n?n:0,ke=null!==(h=null===(p=F.balance)||void 0===p?void 0:p.unscaleBy(F.decimals))&&void 0!==h?h:g.a.ZERO,ge=Object(c.useMemo)((function(){var e=[];return z&&!z.match(/^(\d+\.?\d*|\.\d+)$/)&&e.push("Wrong number format"),ke.isLessThan(z)&&e.push("Insufficient balance"),e}),[ke,z]),we=!z||!!ge.length||!1===F.isAllowedOf(ae.address);return Object(T.jsxs)("form",{onSubmit:xe,children:[Object(T.jsx)("div",{className:"flex mb-8",children:Object(T.jsxs)("span",{className:"text-sm fw-semibold color-secondary",children:[S.eTokenSymbol," amount"]})}),Object(T.jsx)(_.a,{before:Object(T.jsx)(m.b,{name1:me,name2:je,size:24}),value:z,onChange:G,max:ke,placeholder:"0 (Max ".concat(null!==ke&&void 0!==ke?ke:0,")"),className:"mb-8",slider:!0,errors:ge}),Object(T.jsx)(r.a,{name:"down-arrow-circle",width:32,height:32,style:{display:"block",margin:"0 auto"}}),Object(T.jsx)("div",{className:"flex mb-8",children:Object(T.jsxs)("span",{className:"text-sm fw-semibold color-secondary",children:[null===be||void 0===be?void 0:be.symbol," amount"]})}),Object(T.jsx)(_.b,{before:Object(T.jsx)(_.c,{value:ee,onChange:te,tokens:K,style:{backgroundColor:"var(--theme-card-color)"}}),value:null!==(v=Object(l.d)(null===pe||void 0===pe?void 0:pe.unscaleBy(Oe)))&&void 0!==v?v:"-",secondary:Object(l.e)(null!==(k=null===pe||void 0===pe||null===(A=pe.unscaleBy(Oe))||void 0===A?void 0:A.multipliedBy(S[he?"tokenA":"tokenB"].state.price))&&void 0!==k?k:0),className:"mb-40",classNameBefore:"ph-0"}),Object(T.jsx)(M.a,{className:"mb-32",showSlippage:!0,slippage:oe.slippage,slippageHint:"Your transaction will revert if the amount of tokens you actually receive is smaller by this percentage.",showDeadline:!0,deadline:oe.deadline,onChange:le,children:"Swap transaction details"}),Object(T.jsx)(P,{className:"mb-32",items:[[Object(T.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",children:"Transaction fees"}),Object(T.jsxs)(u.b,{type:"p2",weight:"semibold",color:"primary",children:[Object(l.e)(null!==(B=null===(C=g.a.from(z))||void 0===C?void 0:C.multipliedBy(S.state.eTokenPrice).multipliedBy(ye))&&void 0!==B?B:0)," ","(",Object(l.c)(ye),")"]})],[Object(T.jsxs)(u.b,{type:"small",weight:"semibold",color:"secondary",children:[ee," amount"]}),Object(T.jsxs)(u.b,{type:"p1",weight:"bold",color:"primary",children:[Object(l.d)(null===pe||void 0===pe?void 0:pe.unscaleBy(Oe))||"0"," ",ee]})]]}),Object(T.jsx)(N.a,{contract:F,address:ae.address,tokenSymbol:S.eTokenSymbol,className:"mb-32",style:{width:"100%"}}),Object(T.jsxs)("div",{className:"grid flow-col col-gap-32 align-center justify-space-between",children:[Object(T.jsxs)(o.b,{to:"/smart-exposure/pools/".concat(Z,"/").concat(H),className:"button-back",children:[Object(T.jsx)(r.a,{name:"arrow-back",width:16,height:16,className:"mr-8",color:"inherit"}),"Cancel"]}),Object(T.jsxs)("button",{type:"submit",className:"button-primary",disabled:de||we,children:[de&&Object(T.jsx)(i.a,{className:"mr-8"}),"Withdraw"]})]}),Object(T.jsx)(w.a,{contract:ne})]})},F=[{children:"Multiple tokens",id:"multiple"},{children:"Single token",id:"single"}];t.default=function(){var e,t,n,f=Object(p.c)(),v=Object(b.c)(),x=v.getTokenBySymbol,y=v.getTokenIconBySymbol,k=Object(s.i)(),g=k.pool,w=k.tranche,N=Object(c.useState)(),_=Object(a.a)(N,2),A=_[0],B=_[1],C=Object(c.useState)("multiple"),S=Object(a.a)(C,2),P=S[0],M=S[1],V=Object(O.c)().ePoolPeripheryContract,W=Object(h.c)();Object(c.useEffect)((function(){W.fetchTranche(w).then((function(e){B(e)}))}),[w]);var L=Object(j.a)(null===A||void 0===A?void 0:A.tokenA.address,{loadAllowance:[g,V.address],loadCommon:!0,loadBalance:!0}),I=Object(j.a)(null===A||void 0===A?void 0:A.tokenB.address,{loadAllowance:[g,V.address],loadCommon:!0,loadBalance:!0}),Z=Object(j.a)(w,{loadAllowance:[g,V.address],loadCommon:!0,loadBalance:!0});if(!A||!Z||!L||!I)return Object(T.jsx)(i.a,{className:"mh-auto"});var H=x(A.tokenA.symbol),D=x(A.tokenB.symbol),q=y(A.tokenA.symbol),z=y(A.tokenB.symbol);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"flex mb-16",children:Object(T.jsxs)(o.b,{to:"/smart-exposure/pools/".concat(g,"/").concat(w),className:"button-text",children:[Object(T.jsx)(r.a,{name:"arrow-back",color:"inherit",className:"mr-8"}),"Tranche details"]})}),Object(T.jsxs)("div",{className:"flex justify-center row-gap-12 col-gap-64 mb-40",children:[Object(T.jsxs)("div",{className:"flex",children:[Object(T.jsx)(m.b,{name1:q,name2:z,size:40,className:"mr-16"}),Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"text-p1 fw-semibold color-primary mr-4",children:"".concat(100*Number(A.tokenARatio),"% ").concat(A.tokenA.symbol," / ").concat(100*Number(A.tokenBRatio),"% ").concat(A.tokenB.symbol)}),Object(T.jsx)("div",{className:"text-sm fw-semibold color-secondary",children:"".concat(null===H||void 0===H?void 0:H.name," / ").concat(null===D||void 0===D?void 0:D.name)})]})]}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"text-sm fw-semibold color-secondary mb-4",children:["Wallet ",A.tokenA.symbol," balance"]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("span",{className:"text-p1 fw-semibold color-primary mr-8",children:null!==(e=Object(l.d)(L.getBalanceOf(f.account),{scale:A.tokenA.decimals}))&&void 0!==e?e:"-"}),Object(T.jsx)("span",{className:"text-sm fw-semibold color-secondary",children:A.tokenA.symbol})]})]}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"text-sm fw-semibold color-secondary mb-4",children:["Wallet ",A.tokenB.symbol," balance"]}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("span",{className:"text-p1 fw-semibold color-primary mr-8",children:[" ",null!==(t=Object(l.d)(I.getBalanceOf(f.account),{scale:A.tokenB.decimals}))&&void 0!==t?t:"-"]}),Object(T.jsx)("span",{className:"text-sm fw-semibold color-secondary",children:A.tokenB.symbol})]})]}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"text-sm fw-semibold color-secondary mb-4",children:["Wallet ",A.eTokenSymbol," balance"]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("span",{className:"text-p1 fw-semibold color-primary mr-8",children:null!==(n=Object(l.d)(Z.getBalanceOf(f.account),{scale:Z.decimals}))&&void 0!==n?n:"-"}),Object(T.jsx)("span",{className:"text-sm fw-semibold color-secondary",children:A.eTokenSymbol})]})]})]}),Object(T.jsxs)("div",{className:"card ph-32 pv-32 mh-auto",style:{width:"100%",maxWidth:640},children:[Object(T.jsx)(u.b,{type:"h3",weight:"semibold",color:"primary",className:"mb-16",children:"Withdraw"}),Object(T.jsx)(u.b,{type:"p2",weight:"semibold",color:"secondary",className:"mb-32",children:"multiple"===P?"Withdraw from your position by burning eTokens of this tranche for the underlying tranche tokens according to the current tranche ratio.":"Withdraw from your position by burning eTokens of this tranche for one of the underlying tranche tokens. The second underlying token will be swapped for the token you want to receive, which is where the slippage and deadline parameters will be used."}),Object(T.jsx)(d.g,{tabs:F,activeKey:P,onClick:M,className:"mb-32",variation:"elastic",size:"small"}),"multiple"===P?Object(T.jsx)(E,{tranche:A,tokenAContract:L,tokenBContract:I,tokenEContract:Z}):Object(T.jsx)(R,{tranche:A,tokenAContract:L,tokenBContract:I,tokenEContract:Z})]})]})}}}]);
//# sourceMappingURL=41.981a8199.chunk.js.map