(this["webpackJsonpbarnbridge-frontend"]=this["webpackJsonpbarnbridge-frontend"]||[]).push([[22],{1365:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return v}));var r=n(5),i=n(0),c=n(423),o=n(419),a=n.n(o),s=n(425),u=n(80),l=n(37),d=n(20),h=n(73),b=n(66),p=n(116),j=n(1);function m(e){var t=Object(i.useRef)();return a()(e,t.current)||(t.current=e),t.current}var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.loadBalance,c=t.loadCommon,o=t.loadAllowance,a=Object(h.c)(),s=a.provider,d=a.account,j=Object(p.a)(),f=Object(r.a)(j,1),O=f[0],v=Object(b.c)(),y=v.getContract,x=Object(i.useMemo)((function(){if(!e)return null;var t=y(e,(function(){return new u.a([],e)}));return t.on(l.d.UPDATE_DATA,O),t}),[e,s,O]);Object(i.useEffect)((function(){x&&n&&(x.setAccount(d),x.loadBalance())}),[x,n,d]),Object(i.useEffect)((function(){x&&c&&x.loadCommon().then((function(){return O()})).catch(Error)}),[x,c,O]);var g=m(o);return Object(i.useEffect)((function(){x&&g&&(Array.isArray(g)?g.forEach((function(e){return x.loadAllowance(e)})):x.loadAllowance(g))}),[x,g]),x};function O(e){var t=(null!==e&&void 0!==e?e:{}).listeners,n=void 0===t||t,o=Object(h.c)(),a=o.account,u=o.provider,l=Object(d.h)().activeProvider,b=Object(p.a)(),m=Object(r.a)(b,2),f=m[0],O=m[1],v=Object(i.useRef)(l),y=Object(i.useRef)(u),x=Object(i.useRef)(a),g=Object(i.useRef)(new Map),w=Object(i.useCallback)((function(e,t,n){var r,i=t();return i.setCallProvider(v.current),i.setProvider(y.current),i.setAccount(x.current),g.current.set(e,{address:e,factory:t,options:n,instance:i}),null===n||void 0===n||null===(r=n.afterInit)||void 0===r||r.call(n,i),f(),i}),[l,a,f]),k=Object(c.a)((function(){g.current.forEach((function(e){var t,n;null===(t=e.options)||void 0===t||null===(n=t.onDestroy)||void 0===n||n.call(t,e.instance),w(e.address,(function(){return e.instance}),e.options)}))}),250);v.current!==l&&(v.current=l,k()),y.current!==u&&(y.current=u,k()),x.current!==a&&(x.current=a,k());var N=Object(i.useCallback)((function(e,t,n){return g.current.has(e)?g.current.get(e).instance:w(e,t,n)}),[w]);return{getOrCreateContract:N,getContract:Object(i.useCallback)((function(e){if(g.current.has(e))return g.current.get(e).instance}),[w]),Listeners:Object(i.useMemo)((function(){return n?Object(j.jsx)(j.Fragment,{children:Array.from(g.current).map((function(e){var t=Object(r.a)(e,2),n=t[0],i=t[1];return Object(j.jsx)(s.a,{contract:i.instance},n)}))}):null}),[O,n])}}function v(e,t){return O({listeners:!1}).getOrCreateContract("$address",e,t)}},1366:function(e,t,n){"use strict";var r=n(4),i=n(17),c=n(0),o=n.n(c),a=n(1619),s=n(249),u=n.n(s),l=n(8),d=n.n(l),h=n(1382),b=n.n(h),p=n(1),j=["type","className"];t.a=function(e){var t=e.type,n=void 0===t?"default":t,c=e.className,s=Object(i.a)(e,j),l=o.a.useMemo((function(){if("circle"===n)return Object(p.jsx)(a.a,{spin:!0})}),[n]);return Object(p.jsx)(u.a,Object(r.a)({indicator:l,className:d()(b.a.spin,c)},s))}},1382:function(e,t,n){e.exports={spin:"s_spin__1EZtC"}},1436:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(5),i=n(29),c=n(14),o=n(16),a=n(23),s=n(24),u=n(9),l=n.n(u),d=n(19),h=n.n(d),b=n(432),p=n(37),j=n(250),m=[Object(p.c)("epoch",[],["uint256"]),Object(p.c)("getCurrentEpoch",[],["uint256"]),Object(p.c)("epoch1Start",[],["uint256"]),Object(p.c)("epochDuration",[],["uint256"]),Object(p.c)("epochSeniorLiquidity",[],["uint256"]),Object(p.c)("epochJuniorLiquidity",[],["uint256"]),Object(p.c)("epochDownsideProtectionRate",[],["uint256"]),Object(p.c)("epochUpsideExposureRate",[],["uint256"]),Object(p.c)("epochEntryPrice",[],["uint256"]),Object(p.c)("getEpochSeniorTokenPrice",[],["uint256"]),Object(p.c)("getEpochJuniorTokenPrice",[],["uint256"]),Object(p.c)("estimateCurrentSeniorTokenPrice",[],["uint256"]),Object(p.c)("estimateCurrentJuniorTokenPrice",[],["uint256"]),Object(p.c)("queuedJuniorsUnderlyingIn",[],["uint256"]),Object(p.c)("queuedJuniorsUnderlyingOut",[],["uint256"]),Object(p.c)("queuedJuniorTokensBurn",[],["uint256"]),Object(p.c)("queuedSeniorsUnderlyingIn",[],["uint256"]),Object(p.c)("queuedSeniorsUnderlyingOut",[],["uint256"]),Object(p.c)("queuedSeniorTokensBurn",[],["uint256"]),Object(p.c)("feesAccrued",[],["uint256"]),Object(p.c)("priceOracle",[],["address"]),Object(p.c)("seniorEntryQueue",["address"],["uint256","uint256"]),Object(p.c)("seniorExitQueue",["address"],["uint256","uint256"]),Object(p.c)("juniorEntryQueue",["address"],["uint256","uint256"]),Object(p.c)("juniorExitQueue",["address"],["uint256","uint256"]),Object(p.c)("depositJunior",["uint256"],[]),Object(p.c)("exitJunior",["uint256"],[]),Object(p.c)("redeemJuniorTokens",[],[]),Object(p.c)("redeemJuniorUnderlying",[],[]),Object(p.c)("depositSenior",["uint256"],[]),Object(p.c)("exitSenior",["uint256"],[]),Object(p.c)("redeemSeniorTokens",[],[]),Object(p.c)("redeemSeniorUnderlying",[],[]),Object(p.c)("transferFees",[],[]),Object(p.c)("advanceEpoch",[],[])],f=18,O=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,[Object(p.c)("getPrice",[],["uint256"])],e,"SA Price Oracle")}return Object(o.a)(n,[{key:"getPrice",value:function(){return this.call("getPrice").then((function(e){return h.a.from(e)}))}}]),n}(p.d),v=function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,m,e,"Smart Alpha")).epoch=void 0,r.currentEpoch=void 0,r.epoch1Start=void 0,r.epochDuration=void 0,r.epochSeniorLiquidity=void 0,r.epochJuniorLiquidity=void 0,r.epochDownsideProtectionRate=void 0,r.epochUpsideExposureRate=void 0,r.epochEntryPrice=void 0,r.epochSeniorTokenPrice=void 0,r.epochJuniorTokenPrice=void 0,r.queuedJuniorsUnderlyingIn=void 0,r.queuedJuniorsUnderlyingOut=void 0,r.queuedJuniorTokensBurn=void 0,r.queuedSeniorsUnderlyingIn=void 0,r.queuedSeniorsUnderlyingOut=void 0,r.queuedSeniorTokensBurn=void 0,r.estimateCurrentSeniorTokenPrice=void 0,r.estimateCurrentJuniorTokenPrice=void 0,r.feesAccrued=void 0,r.priceOracleContract=void 0,r.priceOracle=void 0,r}return Object(o.a)(n,[{key:"nextEpochStart",get:function(){if(void 0!==this.currentEpoch&&void 0!==this.epochDuration&&void 0!==this.epoch1Start)return this.epoch1Start+this.currentEpoch*this.epochDuration}},{key:"tillNextEpoch",get:function(){var e=this.nextEpochStart;if(void 0!==e)return Math.max(0,e-Object(b.a)(Date.now()))}},{key:"epochsGap",get:function(){if(void 0!==this.epoch&&void 0!==this.currentEpoch)return this.currentEpoch-this.epoch}},{key:"requireEpochAdvance",get:function(){var e=this.epochsGap;return void 0!==e&&e>0}},{key:"epochTotalLiquidityRate",get:function(){if(this.epochSeniorLiquidity&&this.epochJuniorLiquidity)return this.epochSeniorLiquidity.plus(this.epochJuniorLiquidity)}},{key:"epochSeniorLiquidityRate",get:function(){if(this.epochSeniorLiquidity&&this.epochTotalLiquidityRate)return this.epochSeniorLiquidity.div(this.epochTotalLiquidityRate).toNumber()}},{key:"epochJuniorLiquidityRate",get:function(){if(this.epochJuniorLiquidity&&this.epochTotalLiquidityRate)return this.epochJuniorLiquidity.div(this.epochTotalLiquidityRate).toNumber()}},{key:"epochUpsideLeverage",get:function(){if(this.epochSeniorLiquidity&&this.epochJuniorLiquidity&&this.epochUpsideExposureRate)return this.epochJuniorLiquidity.eq(0)?new h.a(1).scaleBy(f):this.epochSeniorLiquidity.div(this.epochJuniorLiquidity).multipliedBy(new h.a(1).minus(this.epochUpsideExposureRate.unscaleBy(f))).plus(1).scaleBy(f)}},{key:"epochDownsideLeverage",get:function(){if(this.epochSeniorLiquidity&&this.epochJuniorLiquidity)return this.epochJuniorLiquidity.eq(0)?new h.a(1).scaleBy(f):this.epochSeniorLiquidity.div(this.epochJuniorLiquidity).plus(1).scaleBy(f)}},{key:"loadCommon",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,i,c,o,a,s,u,d,b,j,m,f,v,y,x,g,w,k,N,S,P;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.batch([{method:"epoch"},{method:"getCurrentEpoch"},{method:"epoch1Start"},{method:"epochDuration"},{method:"epochSeniorLiquidity"},{method:"epochJuniorLiquidity"},{method:"epochDownsideProtectionRate"},{method:"epochUpsideExposureRate"},{method:"epochEntryPrice"},{method:"getEpochSeniorTokenPrice"},{method:"getEpochJuniorTokenPrice"},{method:"queuedJuniorsUnderlyingIn"},{method:"queuedJuniorsUnderlyingOut"},{method:"queuedJuniorTokensBurn"},{method:"queuedSeniorsUnderlyingIn"},{method:"queuedSeniorsUnderlyingOut"},{method:"queuedSeniorTokensBurn"},{method:"estimateCurrentSeniorTokenPrice"},{method:"estimateCurrentJuniorTokenPrice"},{method:"priceOracle"}]);case 2:return t=e.sent,n=Object(r.a)(t,20),i=n[0],c=n[1],o=n[2],a=n[3],s=n[4],u=n[5],d=n[6],b=n[7],j=n[8],m=n[9],f=n[10],v=n[11],y=n[12],x=n[13],g=n[14],w=n[15],k=n[16],N=n[17],S=n[18],P=n[19],this.epoch=Number(i),this.currentEpoch=Number(c),this.epoch1Start=Number(o),this.epochDuration=Number(a),this.epochSeniorLiquidity=h.a.from(s),this.epochJuniorLiquidity=h.a.from(u),this.epochDownsideProtectionRate=h.a.from(d),this.epochUpsideExposureRate=h.a.from(b),this.epochEntryPrice=h.a.from(j),this.epochSeniorTokenPrice=h.a.from(m),this.epochJuniorTokenPrice=h.a.from(f),this.queuedJuniorsUnderlyingIn=h.a.from(v),this.queuedJuniorsUnderlyingOut=h.a.from(y),this.queuedJuniorTokensBurn=h.a.from(x),this.queuedSeniorsUnderlyingIn=h.a.from(g),this.queuedSeniorsUnderlyingOut=h.a.from(w),this.queuedSeniorTokensBurn=h.a.from(k),this.estimateCurrentSeniorTokenPrice=h.a.from(N),this.estimateCurrentJuniorTokenPrice=h.a.from(S),this.priceOracleContract=new O(P),this.priceOracleContract.setCallProvider(this.callProvider),e.next=47,this.priceOracleContract.getPrice();case 47:this.priceOracle=e.sent,this.emit(p.d.UPDATE_DATA);case 49:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEntryPriceDecimals",value:function(e){return Object(j.c)(e)?18:8}},{key:"seniorEntryQueue",value:function(e){return this.call("seniorEntryQueue",[e],{}).then((function(e){return[Number(e[0]),h.a.from(e[1])]}))}},{key:"seniorExitQueue",value:function(e){return this.call("seniorExitQueue",[e],{}).then((function(e){return[Number(e[0]),h.a.from(e[1])]}))}},{key:"juniorEntryQueue",value:function(e){return this.call("juniorEntryQueue",[e],{}).then((function(e){return[Number(e[0]),h.a.from(e[1])]}))}},{key:"juniorExitQueue",value:function(e){return this.call("juniorExitQueue",[e],{}).then((function(e){return[Number(e[0]),h.a.from(e[1])]}))}},{key:"getFeesAccrued",value:function(){var e=this;return this.call("feesAccrued",[],{}).then((function(t){return e.feesAccrued=h.a.from(t),e.emit(p.d.UPDATE_DATA),e.feesAccrued}))}},{key:"depositJunior",value:function(){var e=Object(i.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("depositJunior",[t],{},n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"withdrawJunior",value:function(){var e=Object(i.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("exitJunior",[t],{},n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"redeemJuniorTokens",value:function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("redeemJuniorTokens",[],{},t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"redeemJuniorUnderlying",value:function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("redeemJuniorUnderlying",[],{},t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"depositSenior",value:function(){var e=Object(i.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("depositSenior",[t],{},n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"withdrawSenior",value:function(){var e=Object(i.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("exitSenior",[t],{},n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"redeemSeniorTokens",value:function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("redeemSeniorTokens",[],{},t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"redeemSeniorUnderlying",value:function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("redeemSeniorUnderlying",[],{},t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transferFees",value:function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("transferFees",[],{},t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"advanceEpoch",value:function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("advanceEpoch",[],{});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(p.d);t.b=v},1464:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),i=n(99),c=n(33),o=n(1),a=function(e){var t=e.children,n=e.className,a=e.style;return Object(o.jsx)(i.a,{title:t,children:Object(o.jsx)(c.a,{name:"info",size:16,className:n,style:Object(r.a)({flexShrink:0},a)})})}},1555:function(e,t,n){"use strict";n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return g})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return S}));var r=n(4),i=n(29),c=n(9),o=n.n(c),a=n(0),s=n(1574),u=n(8),l=n.n(u),d=n(1602),h=n(12),b=n(59),p=n(1603),j=n.n(p),m=n(1),f=function(e){var t=e.condition,n=e.wrapper,r=e.children;return t?n(r):r},O=Object(a.createContext)(Object(b.a)("Form"));function v(e){return{values:e,errors:{}}}function y(e,t){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(o.a.mark((function e(t,n){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.validate)(null===n||void 0===n?void 0:n.scheme,t);case 2:return r=e.sent,i=r.getErrors(),e.abrupt("return",{values:t,errors:Object.keys(i).reduce((function(e,t){var n=Object.keys(i[t])[0];return n&&(e[t]={type:n,message:i[t][n]}),e}),{})});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){var t=e.validationScheme,n=e.defaultValues,r=e.onSubmit,i=t?y:v,c=Object(s.b)({mode:"all",resolver:i,context:{scheme:t},defaultValues:n,shouldUnregister:!0}),o=c.handleSubmit(r);return Object.assign(c,{updateValue:function(e,t){c.setValue(e,t,{shouldDirty:!0,shouldValidate:!0})},submit:o})}function w(e){var t=e.children,n=e.className,r=e.form,i=e.disabled,c=void 0!==i&&i,o=Object(a.useCallback)((function(e){e.preventDefault(),r.submit()}),[r.submit]),s={form:r};return Object(m.jsx)(O.Provider,{value:s,children:Object(m.jsx)("form",{className:l()(j.a.form,n,c&&j.a.disabled),onSubmit:o,children:t})})}function k(e){var t=e.children,n=e.className,r=e.label,i=e.hint,c=e.extra;return Object(m.jsxs)("div",{className:l()("flex flow-row row-gap-8",n),children:[Object(m.jsxs)("div",{className:"flex flow-col col-gap-4 justify-space-between",children:[Object(m.jsx)("div",{className:"flex flow-col col-gap-4 align-center",children:Object(m.jsx)(h.a,{text:i,children:"string"===typeof r?Object(m.jsx)(h.b,{type:"small",weight:"semibold",color:"secondary",children:r}):r})}),c]}),t]})}function N(e){var t,n=e.children,r=e.name,i=Object(a.useContext)(O).form.formState.errors[r];return i?Object(m.jsx)(h.b,{type:"small",weight:"semibold",color:"red",children:null!==(t=i.message)&&void 0!==t?t:n}):null}function S(e){var t=e.children,n=e.name,i=e.label,c=e.labelProps,o=void 0===c?{}:c,u=e.showError,l=void 0===u||u,d=e.className,h=Object(a.useContext)(O).form;return Object(m.jsxs)(f,{condition:!!i,wrapper:function(e){return Object(m.jsx)(k,Object(r.a)(Object(r.a)({label:i,className:d},o),{},{children:e}))},children:[Object(m.jsx)(s.a,{name:n,control:h.control,render:t,shouldUnregister:!0}),l&&Object(m.jsx)(N,{name:n})]})}},1603:function(e,t,n){e.exports={form:"s_form__373JW",disabled:"s_disabled__gL2Qr"}},1808:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(4),i=n(13),c=n(17),o=n(0),a=n(8),s=n.n(a),u=n(224),l=n(33),d=n(1809),h=n.n(d),b=n(1),p=["id","before","className","dimension"],j=function(e){var t=e.id,n=e.before,a=e.className,d=e.dimension,j=void 0===d?"normal":d,m=Object(c.a)(e,p),f=Object(o.useMemo)((function(){return null!==t&&void 0!==t?t:Object(u.a)()}),[t]),O="search"===m.type;return Object(b.jsxs)("label",{htmlFor:f,className:s()(h.a.inputWrapper,a),children:[n&&Object(b.jsx)("div",{className:s()(h.a.before,h.a[j]),children:n}),O&&Object(b.jsx)(l.a,{name:"search",size:16,className:h.a.searchIcon,color:"icon"}),Object(b.jsx)("input",Object(r.a)({type:"text",id:f,className:s()(h.a.input,h.a[j],Object(i.a)({},h.a.inputSearch,O))},m))]})}},1809:function(e,t,n){e.exports={inputWrapper:"s_inputWrapper__2SYqe",input:"s_input__ak8Ur",large:"s_large__RjV7F",inputSearch:"s_inputSearch__3tqk-",before:"s_before__lvzM0",searchIcon:"s_searchIcon__1NFiP"}},2220:function(e,t,n){e.exports={cards:"s_cards__1WHxN",legend:"s_legend__1-skQ",legendItem:"s_legendItem__1Dh-Z",legendTitle:"s_legendTitle__lyOUm"}},2252:function(e,t,n){"use strict";n.r(t);var r=n(29),i=n(5),c=n(9),o=n.n(c),a=n(0),s=n(56),u=n(38),l=n(1361),d=n(12),h=n(250),b=n(415),p=n(1365),j=n(116),m=n(424),f=n(1436),O=n(19),v=n.n(O),y=n(8),x=n.n(y),g=n(2275),w=n(2127),k=n(2280),N=n(1613),S=n(1819),P=n(1913),q=n(65),E=n(1366),J=n(1555),T=n(1464),C=n(33),R=n(1808),_=n(14),L=n(16),U=n(23),A=n(24),B=n(37),D=[Object(B.c)("calcJuniorProfits",["uint256","uint256","uint256","uint256","uint256"],["uint256"]),Object(B.c)("calcSeniorProfits",["uint256","uint256","uint256","uint256","uint256"],["uint256"])],I=function(e){Object(U.a)(n,e);var t=Object(A.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,D,e,"SA Chainlink Oracle")).price=void 0,r}return Object(L.a)(n,[{key:"calcJuniorProfits",value:function(e,t,n,r){return this.call("calcJuniorProfits",[e,t,n,r,v.a.ZERO],{}).then(v.a.from)}},{key:"calcSeniorProfits",value:function(e,t,n,r){return this.call("calcSeniorProfits",[e,t,n,r,v.a.ZERO],{}).then(v.a.from)}}]),n}(B.d),F=[Object(B.c)("getRates",["uint256","uint256"],["uint256","uint256"])],M=function(e){Object(U.a)(n,e);var t=Object(A.a)(n);function n(e){var r;return Object(_.a)(this,n),(r=t.call(this,F,e,"SA Chainlink Oracle")).price=void 0,r}return Object(L.a)(n,[{key:"getRates",value:function(e,t){return this.call("getRates",[e,t],{}).then((function(e){return[v.a.from(e[0]),v.a.from(e[1])]}))}}]),n}(B.d),Q=n(2220),V=n.n(Q),z=n(1),H="0x5e42beeBbD5Be0C5Dc0F5B7d0350Da5053D041b0",W="0x978989400fd9ee1f317ca08e764198f63f5acb16",Y=function(e){var t,n,c,s,h,b,j=e.pool,m=Object(a.useState)(!1),O=Object(i.a)(m,2),y=O[0],_=O[1],L=Object(a.useState)(),U=Object(i.a)(L,2),A=U[0],B=U[1],D=Object(a.useState)(),F=Object(i.a)(D,2),Q=F[0],Y=F[1],Z=Object(a.useState)(),K=Object(i.a)(Z,2),G=K[0],$=K[1],X=Object(a.useState)(),ee=Object(i.a)(X,2),te=ee[0],ne=ee[1],re=Object(a.useState)(),ie=Object(i.a)(re,2),ce=ie[0],oe=ie[1],ae=Object(a.useState)(),se=Object(i.a)(ae,2),ue=se[0],le=se[1],de=Object(a.useState)(),he=Object(i.a)(de,2),be=he[0],pe=he[1],je=Object(p.b)().getOrCreateContract,me=Object(a.useMemo)((function(){var e;return je(null!==(e=j.seniorRateModelAddress)&&void 0!==e?e:H,(function(){var e;return new M(null!==(e=j.seniorRateModelAddress)&&void 0!==e?e:H)}))}),[j]),fe=Object(a.useMemo)((function(){var e;return je(null!==(e=j.accountingModelAddress)&&void 0!==e?e:W,(function(){var e;return new I(null!==(e=j.accountingModelAddress)&&void 0!==e?e:W)}))}),[j]),Oe=Object(J.d)({defaultValues:{pricePerf:"",juniorDominance:""},validationScheme:{pricePerf:{rules:{min:-100,decimals:function(e){var t,n;return(null!==(t=null===(n=v.a.from(e))||void 0===n?void 0:n.decimalPlaces())&&void 0!==t?t:Number.POSITIVE_INFINITY)<f.a}},messages:{decimals:"Maximum ".concat(f.a," decimals allowed")}},juniorDominance:{rules:{min:0,max:100,decimals:function(e){var t,n;return(null!==(t=null===(n=v.a.from(e))||void 0===n?void 0:n.decimalPlaces())&&void 0!==t?t:Number.POSITIVE_INFINITY)<f.a}},messages:{decimals:"Maximum ".concat(f.a," decimals allowed")}}},onSubmit:function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r,c,a,s,u,l,d,h,b,p,j,m,O,y,x,g,w,k,N,S,P,q,E,J,T;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(!0),b=null===(n=v.a.from(t.juniorDominance))||void 0===n?void 0:n.div(100).scaleBy(f.a),p=null===b||void 0===b?void 0:b.minus(new v.a(1).scaleBy(f.a)).multipliedBy(-1),j=null===(r=v.a.from(t.pricePerf))||void 0===r?void 0:r.div(100).scaleBy(f.a),!(me&&p&&b&&j)){e.next=33;break}return e.prev=5,e.next=8,me.getRates(b,p);case 8:m=e.sent,O=Object(i.a)(m,2),c=O[0],a=O[1],e.next=16;break;case 14:e.prev=14,e.t0=e.catch(5);case 16:if(!a||!c){e.next=33;break}if(!(fe&&p&&b&&j)){e.next=33;break}return y=new v.a(1).scaleBy(f.a),x=y.plus(j),e.prev=20,e.next=23,Promise.all([fe.calcSeniorProfits(y,x,a,p),fe.calcJuniorProfits(y,x,c,p)]);case 23:g=e.sent,w=Object(i.a)(g,2),k=w[0],N=w[1],k&&N&&(s=j.unscaleBy(f.a).toNumber(),S=p.plus(k).minus(N),P=y.multipliedBy(p).unscaleBy(f.a),q=x.multipliedBy(S).unscaleBy(f.a),u=P.eq(0)?0:q.minus(P).div(P).toNumber(),E=b.plus(N).minus(k),J=y.multipliedBy(b).unscaleBy(f.a),T=x.multipliedBy(E).unscaleBy(f.a),l=J.eq(0)?0:T.minus(J).div(J).toNumber()),e.next=32;break;case 30:e.prev=30,e.t1=e.catch(20);case 32:b.eq(0)||(d=p.div(b).multipliedBy(new v.a(1).minus(c.unscaleBy(f.a))).plus(1),h=p.div(b).plus(1));case 33:B(a),Y(c),$(s),ne(u),oe(l),le(d),pe(h),_(!1);case 41:case"end":return e.stop()}}),e,null,[[5,14],[20,30]])})));return function(t){return e.apply(this,arguments)}}()});return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(J.a,{form:Oe,children:Object(z.jsxs)("div",{className:"card p-24 flex wrap col-gap-24 row-gap-16 flex-grow mb-32 align-end",children:[Object(z.jsx)(J.b,{name:"pricePerf",label:"Price performance (%)",labelProps:{hint:"How much the underlying asset\u2019s price changed during the epoch"},className:"flex-grow",children:function(e){var t=e.field;return Object(z.jsx)(R.a,{placeholder:"0",dimension:"large",before:Object(z.jsx)(C.a,{name:"percentage",color:"icon"}),className:"flex-grow",disabled:y,value:t.value,onChange:t.onChange})}}),Object(z.jsx)(J.b,{name:"juniorDominance",label:"Junior dominance (%)",labelProps:{hint:"What percentage of the pool was composed of junior positions"},className:"flex-grow",children:function(e){var t=e.field;return Object(z.jsx)(R.a,{placeholder:"0",dimension:"large",before:Object(z.jsx)(C.a,{name:"percentage",color:"icon"}),className:"flex-grow",disabled:y,value:t.value,onChange:t.onChange})}}),Object(z.jsxs)(u.a,{variation:"primary",size:"big",children:[y&&Object(z.jsx)(l.a,{className:"mr-8"}),"Simulate"]})]})}),Object(z.jsxs)("div",{className:V.a.cards,children:[Object(z.jsxs)("section",{className:"card",children:[Object(z.jsx)("header",{className:"card-header",children:Object(z.jsx)(d.b,{type:"p1",weight:"semibold",color:"primary",children:"Epoch outcomes (before fees)"})}),Object(z.jsx)("div",{className:"pv-24",children:Object(z.jsx)(E.a,{spinning:y,children:Object(z.jsxs)("dl",{children:[Object(z.jsxs)("div",{className:"flex align-center mb-24 ph-24",children:[Object(z.jsx)("dt",{className:"mr-8",children:Object(z.jsxs)(d.b,{type:"small",weight:"semibold",color:"secondary",className:"flex align-middle col-gap-4",children:["Senior performance",Object(z.jsx)(T.a,{children:"Change in the fair price of the senior token over the course of the epoch"})]})}),Object(z.jsx)("dd",{className:"ml-auto",children:Object(z.jsx)(d.b,{type:"p1",weight:"semibold",color:"primary",children:null!==(t=Object(q.c)(te))&&void 0!==t?t:"-"})})]}),Object(z.jsxs)("div",{className:"flex align-center mb-24 ph-24",children:[Object(z.jsx)("dt",{className:"mr-8",children:Object(z.jsxs)(d.b,{type:"small",weight:"semibold",color:"secondary",className:"flex align-middle col-gap-4",children:["Senior downside protection (Absolute %)",Object(z.jsx)(T.a,{children:"How much the underlying asset can decline before a senior position takes on losses."})]})}),Object(z.jsx)("dd",{className:"ml-auto",children:Object(z.jsx)(d.b,{type:"p1",weight:"bold",color:"primary",children:null!==(n=Object(q.c)(null===(c=A)||void 0===c?void 0:c.unscaleBy(f.a)))&&void 0!==n?n:"-"})})]}),Object(z.jsxs)("div",{className:"flex align-center mb-24 ph-24",children:[Object(z.jsx)("dt",{className:"mr-8",children:Object(z.jsxs)(d.b,{type:"small",weight:"semibold",color:"secondary",className:"flex align-middle col-gap-4",children:["Senior upside exposure (Relative %)",Object(z.jsx)(T.a,{children:"How much of every 1% move to the upside in the underlying asset a senior position will have exposure to."})]})}),Object(z.jsx)("dd",{className:"ml-auto",children:Object(z.jsx)(d.b,{type:"p1",weight:"semibold",color:"primary",children:null!==(s=Object(q.c)(null===(h=Q)||void 0===h?void 0:h.unscaleBy(f.a)))&&void 0!==s?s:"-"})})]}),Object(z.jsx)("hr",{className:"mb-24"}),Object(z.jsxs)("div",{className:"flex align-center mb-24 ph-24",children:[Object(z.jsx)("dt",{className:"mr-8",children:Object(z.jsxs)(d.b,{type:"small",weight:"semibold",color:"secondary",className:"flex align-middle col-gap-4",children:["Junior performance",Object(z.jsx)(T.a,{children:"Change in the fair price of the junior token over the course of the epoch"})]})}),Object(z.jsx)("dd",{className:"ml-auto",children:Object(z.jsx)(d.b,{type:"p1",weight:"semibold",color:"primary",children:null!==(b=Object(q.c)(ce))&&void 0!==b?b:"-"})})]}),Object(z.jsxs)("div",{className:"flex align-center mb-24 ph-24",children:[Object(z.jsx)("dt",{className:"mr-8",children:Object(z.jsxs)(d.b,{type:"small",weight:"semibold",color:"secondary",className:"flex align-middle col-gap-4",children:["Upside leverage",Object(z.jsx)(T.a,{children:"How much of every 1% move to the upside in the underlying asset a senior position will have exposure to."})]})}),Object(z.jsx)("dd",{className:"ml-auto",children:Object(z.jsx)(d.b,{type:"p1",weight:"semibold",color:"primary",children:ue?"".concat(ue.toFormat(2),"x"):"-"})})]}),Object(z.jsxs)("div",{className:"flex align-center ph-24",children:[Object(z.jsx)("dt",{className:"mr-8",children:Object(z.jsxs)(d.b,{type:"small",weight:"semibold",color:"secondary",className:"flex align-middle col-gap-4",children:["Downside leverage",Object(z.jsxs)(T.a,{children:["How much of every 1% move to the downside in the underlying asset a junior position will have exposure to.",Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),"The downside leverage is only applicable until senior downside protection is fully covered, and junior losses are fully realized."]})]})}),Object(z.jsx)("dd",{className:"ml-auto",children:Object(z.jsx)(d.b,{type:"p1",weight:"semibold",color:"primary",tooltip:"You have this amount of downside leverage, until the underlying token's price drops by more than the senior downside protection - after which there is no more downside leverage - or you can consider it as being 1x",children:be?"\u2264".concat(be.toFormat(2),"x"):"-"})})]})]})})})]}),Object(z.jsxs)("section",{className:"card",children:[Object(z.jsx)("header",{className:"card-header",children:Object(z.jsx)(d.b,{type:"p1",weight:"semibold",color:"primary",children:"Performance"})}),Object(z.jsx)("div",{className:"p-24",children:Object(z.jsx)(E.a,{spinning:y,children:Object(z.jsx)(g.a,{width:"99%",height:300,children:Object(z.jsxs)(w.a,{data:[{pricePerfRate:G,seniorProfitsRate:te,juniorProfitsRate:ce}],children:[Object(z.jsx)(k.a,{strokeDasharray:"3 3",vertical:!1}),Object(z.jsx)(N.a,{axisLine:!1,tickLine:!1,tickFormatter:function(e){var t;return null!==(t=Object(q.c)(e,0))&&void 0!==t?t:""}}),Object(z.jsx)(S.a,{dataKey:"pricePerfRate",fill:"var(--theme-red-color)",radius:[4,4,0,0]}),Object(z.jsx)(S.a,{dataKey:"seniorProfitsRate",fill:"var(--theme-green-color)",radius:[4,4,0,0]}),Object(z.jsx)(S.a,{dataKey:"juniorProfitsRate",fill:"var(--theme-purple-color)",radius:[4,4,0,0]}),Object(z.jsx)(P.a,{content:function(e){var t=e.payload;return t?Object(z.jsx)("div",{className:V.a.legend,children:t.map((function(e,t){var n,r,i;return Object(z.jsx)("span",{className:V.a.legendItem,style:{"--dot-color":e.color},children:Object(z.jsxs)("div",{className:"flex flow-row",children:[Object(z.jsxs)(d.b,{type:"small",weight:"semibold",color:"secondary",className:x()(V.a.legendTitle,"mb-4"),children:["pricePerfRate"===e.value&&"Price performance","seniorProfitsRate"===e.value&&"Senior performance","juniorProfitsRate"===e.value&&"Junior performance"]}),Object(z.jsxs)(d.b,{type:"p1",weight:"bold",color:"primary",children:[null!==(n="pricePerfRate"===e.value&&Object(q.c)(G))&&void 0!==n?n:"-%",null!==(r="seniorProfitsRate"===e.value&&Object(q.c)(te))&&void 0!==r?r:"-%",null!==(i="juniorProfitsRate"===e.value&&Object(q.c)(ce))&&void 0!==i?i:"-%"]})]})},t)}))}):null}})]})})})})]})]})]})};t.default=function(){var e,t,n=Object(s.i)().id,c=Object(m.e)(n).data,O=Object(h.e)(),v=O.getToken,y=O.getAsset,x=Object(j.a)(),g=Object(i.a)(x,1)[0],w=Object(p.b)().getOrCreateContract,k=Object(a.useMemo)((function(){if(c)return w(c.poolAddress,(function(){return new f.b(c.poolAddress)}),{afterInit:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.onUpdateData(g),e.next=3,t.loadCommon();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),[c]);if(!c)return Object(z.jsx)(l.a,{style:{margin:"auto"}});var N=v(c.poolToken.symbol),S=y(c.oracleAssetSymbol);return Object(z.jsxs)("div",{className:"container-limit",children:[Object(z.jsx)("div",{className:"mb-16",children:Object(z.jsx)(u.e,{to:"/smart-alpha/pools/".concat(n),variation:"text-alt",icon:"arrow",iconPosition:"left",iconRotate:180,children:"Pool details"})}),Object(z.jsxs)("div",{className:"flex align-center mb-40",children:[Object(z.jsx)(b.a,{name:null===N||void 0===N?void 0:N.icon,size:40,bubble2Name:null===S||void 0===S?void 0:S.icon,className:"mr-16"}),Object(z.jsxs)("div",{children:[Object(z.jsx)(d.b,{type:"p1",weight:"semibold",color:"primary",tag:"h2",className:"mb-4",children:c.poolName}),Object(z.jsxs)(d.b,{type:"small",weight:"semibold",color:"secondary",children:["Epoch ",null!==(e=null!==(t=null===k||void 0===k?void 0:k.epoch)&&void 0!==t?t:c.state.epoch)&&void 0!==e?e:"-"]})]})]}),Object(z.jsx)(Y,{pool:c})]})}}}]);
//# sourceMappingURL=sa-simulate-epoch-view.42079e12.chunk.js.map