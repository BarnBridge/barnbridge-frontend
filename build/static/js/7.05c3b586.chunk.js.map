{"version":3,"sources":["components/antd/tabs/s.module.scss","components/antd/divider/s.module.scss","components/antd/skeleton/s.module.scss","modules/governance/components/voting-detailed-modal/s.module.scss","modules/governance/components/voting-header/s.module.scss","components/antd/progress/s.module.scss","components/antd/table/s.module.scss","modules/governance/views/overview-view/components/voting-stat-list/s.module.scss","components/custom/tabs/s.module.scss","components/antd/form/s.module.scss","components/antd/radio-button/s.module.scss","components/custom/gas-fee-list/s.module.scss","web3/components/tx-confirm-modal/s.module.scss","components/antd/alert/s.module.scss","components/custom/form/s.module.scss","components/custom/spinner/s.module.scss","components/custom/status-tag/s.module.scss","components/antd/input/s.module.scss","components/custom/token-input/s.module.scss","components/radio-card/s.module.scss","components/custom/dropdown/s.module.scss","components/custom/slider/s.module.scss","components/custom/token-amount-new/s.module.scss","components/antd/datepicker/s.module.scss","components/input/s.module.scss","components/antd/textarea/s.module.scss","components/antd/yes-no-selector/s.module.scss","components/antd/popover-menu/s.module.scss","components/custom/expandable-card/s.module.scss","modules/governance/components/proposal-action-card/s.module.scss","modules/governance/components/create-proposal-action-modal/s.module.scss","modules/governance/views/proposal-create-view/s.module.scss","modules/governance/views/proposal-detail-view/components/abrogation-voters-modal/s.module.scss","modules/governance/views/proposal-detail-view/components/abrogation-vote-modal/s.module.scss","modules/governance/views/proposal-detail-view/components/abrogation-proposal-modal/s.module.scss","modules/governance/views/proposal-detail-view/components/proposal-voters-modal/s.module.scss","modules/governance/views/proposal-detail-view/components/proposal-vote-modal/s.module.scss","modules/governance/views/proposal-detail-view/components/queue-for-execution-modal/s.module.scss","modules/governance/views/proposal-detail-view/s.module.scss","modules/governance/views/proposals-view/s.module.scss","components/custom/pagination/s.module.scss","components/custom/table/s.module.scss","modules/governance/s.module.scss","components/antd/tabs/index.tsx","modules/governance/api.tsx","modules/governance/contracts/daoBarn.ts","modules/governance/contracts/daoGovernance.ts","modules/governance/contracts/daoReward.ts","modules/governance/components/dao-provider/index.tsx","components/antd/divider/index.tsx","components/antd/skeleton/index.tsx","hooks/useLeftTime.tsx","components/custom/tabs/index.tsx","modules/governance/components/voting-detailed-modal/index.tsx","modules/governance/components/voting-header/index.tsx","components/antd/progress/index.tsx","modules/governance/views/overview-view/components/activation-threshold/index.tsx","components/antd/table/index.tsx","modules/governance/views/overview-view/components/voters-table/index.tsx","modules/governance/views/overview-view/components/voting-stat-list/index.tsx","modules/governance/views/overview-view/index.tsx","components/antd/form/index.tsx","components/antd/radio-button/index.tsx","components/custom/gas-fee-list/index.tsx","web3/components/tx-confirm-modal/index.tsx","hooks/useIsUnmount.ts","components/antd/alert/index.tsx","components/custom/form/index.tsx","components/custom/spinner/index.tsx","components/custom/status-tag/index.tsx","components/antd/input/index.tsx","components/custom/token-input/index.tsx","components/radio-card/index.tsx","modules/governance/views/portfolio-view/portfolio-delegate/index.tsx","components/custom/slider/index.tsx","components/custom/token-amount-new/index.tsx","modules/governance/views/portfolio-view/portfolio-deposit/components/wallet-deposit-confirm-modal/index.tsx","modules/governance/views/portfolio-view/portfolio-deposit/index.tsx","components/antd/datepicker/index.tsx","modules/governance/views/portfolio-view/portfolio-lock/index.tsx","components/input/index.tsx","modules/governance/views/portfolio-view/portfolio-stake/index.tsx","modules/governance/views/portfolio-view/portfolio-withdraw/index.tsx","modules/governance/views/portfolio-view/index.tsx","components/antd/textarea/index.tsx","web3/abiInterface.ts","components/antd/yes-no-selector/index.tsx","modules/governance/components/add-zeros-popup/index.tsx","components/antd/popover-menu/index.tsx","components/custom/expandable-card/index.tsx","modules/governance/components/proposal-action-card/index.tsx","modules/governance/components/simulated-proposal-action-modal/index.tsx","modules/governance/components/create-proposal-action-modal/index.tsx","modules/governance/components/delete-proposal-action-modal/index.tsx","modules/governance/views/proposal-create-view/index.tsx","modules/governance/views/proposal-detail-view/providers/ProposalProvider/index.tsx","modules/governance/views/proposal-detail-view/providers/AbrogationProvider/index.tsx","modules/governance/views/proposal-detail-view/components/abrogation-approval-card/index.tsx","modules/governance/views/proposal-detail-view/components/abrogation-details-card/index.tsx","modules/governance/views/proposal-detail-view/providers/AbrogationVotersProvider/index.tsx","modules/governance/views/proposal-detail-view/components/abrogation-vote-modal/index.tsx","modules/governance/views/proposal-detail-view/components/abrogation-voters-modal/index.tsx","modules/governance/views/proposal-detail-view/components/abrogation-vote-results-card/index.tsx","modules/governance/views/proposal-detail-view/components/abrogation-votes-card/index.tsx","modules/governance/views/proposal-detail-view/components/abrogation-proposal-modal/index.tsx","modules/governance/views/proposal-detail-view/components/proposal-abrogation-card/index.tsx","modules/governance/views/proposal-detail-view/components/proposal-approval-card/index.tsx","modules/governance/views/proposal-detail-view/components/proposal-details-card/index.tsx","modules/governance/views/proposal-detail-view/components/proposal-quorum-card/index.tsx","modules/governance/views/proposal-detail-view/components/proposal-status-card/index.tsx","modules/governance/views/proposal-detail-view/providers/ProposalVotersProvider/index.tsx","modules/governance/views/proposal-detail-view/components/proposal-vote-modal/index.tsx","modules/governance/views/proposal-detail-view/components/proposal-voters-modal/index.tsx","modules/governance/views/proposal-detail-view/components/proposal-vote-results-card/index.tsx","modules/governance/views/proposal-detail-view/components/proposal-votes-card/index.tsx","modules/governance/views/proposal-detail-view/components/queue-for-execution-modal/index.tsx","modules/governance/views/proposal-detail-view/index.tsx","modules/governance/views/proposals-view/providers/ProposalsProvider/index.tsx","modules/governance/views/proposals-view/components/proposal-status-tag/index.tsx","modules/governance/views/proposals-view/components/proposals-table/index.tsx","modules/governance/views/proposals-view/index.tsx","components/custom/pagination/index.tsx","components/custom/table/index.tsx","components/custom/table-filter/index.tsx","hooks/useContract.tsx","modules/governance/views/treasury-view/treasury-holdings/index.tsx","modules/governance/views/treasury-view/index.tsx","modules/governance/index.tsx"],"names":["module","exports","Tabs","props","className","simple","tabsProps","cn","s","tabs","tabBarGutter","Tab","tabProps","TabPane","tab","APIProposalState","APIProposalStateId","APIProposalStateMap","Map","CREATED","WARMUP","ACTIVE","CANCELED","FAILED","ACCEPTED","QUEUED","GRACE","EXPIRED","EXECUTED","ABROGATED","Context","createContext","InvariantContext","useDaoAPI","useContext","DaoAPIProvider","config","useConfig","value","fetchOverviewData","url","URL","api","baseUrl","fetch","toString","then","result","json","data","totalDelegatedPower","getHumanValue","BigNumber","from","totalVbond","fetchVoters","page","limit","map","item","bondStaked","delegatedPower","votingPower","fetchProposals","state","search","query","QueryString","stringify","String","title","skipNull","skipEmptyString","encode","status","Promise","reject","proposal","forVotes","againstVotes","fetchProposal","proposalId","fetchProposalVoters","support","vote","power","fetchAbrogation","fetchAbrogationVoters","fetchTreasuryTokens","contracts","dao","governance","fetchTreasuryHistory","tokenFilter","directionFilter","address","tokenAddress","transactionDirection","amount","Number","Provider","children","DaoBarnABI","createAbiItem","DaoBarnContract","balance","userLockedUntil","userDelegatedTo","on","Web3Contract","UPDATE_ACCOUNT","undefined","this","Date","now","a","batch","method","unscaleBy","emit","UPDATE_DATA","account","assertAccount","methodArgs","timestamp","call","gasPrice","send","to","DaoGovernanceABI","AbiTuple","DaoGovernanceContract","isActive","Boolean","voterAddress","hasVoted","votes","creator","createTime","description","targets","values","signatures","calldatas","DaoRewardABI","DaoRewardContract","pullFeature","toClaim","startTs","endTs","totalDuration","totalAmount","ZERO","multipliedBy","div","source","callArgs","InitialState","minThreshold","activationRate","thresholdRate","React","useDAO","DAOProvider","walletCtx","useWallet","daoBarn","useContract","barn","daoGovernance","daoReward","reward","projectToken","useKnownTokens","useMergeState","setState","useEffect","loadCommonData","bondContract","contract","setAccount","loadUserData","loadAllowance","catch","Error","activationThreshold","toNumber","Math","min","gt","actions","activate","hasThreshold","hasActiveProposal","getLatestProposalIds","getState","proposalState","includes","resolve","Divider","dividerProps","divider","Skeleton","width","height","loading","skeletonProps","skeleton","style","active","paragraph","rows","useLeftTime","options","optsRef","useRef","current","useState","isStarted","setStarted","isRunning","setRunning","getLeftTime","useCallback","end","max","valueOf","useInterval","leftTime","onTick","stopInterval","onEnd","delay","startInterval","onStart","useMemo","start","stop","onStop","pause","resume","PeriodTabsKey","UseLeftTime","windowState","useGeneral","useReload","reload","leftTimeRef","isVisible","leftBonus","leftTotalVotingPower","VotingDetailedModal","myBondBalance","isDelegated","isValidAddress","loadedUserLockedUntil","bonus","minus","plus","component","list","row","term","name","termIcon","formatToken","color","dataIcon","separator","type","weight","tag","claiming","showDetailedView","VotingHeader","daoCtx","decimals","myStakedBalance","multiplier","setMultiplier","getMultiplierAtTs","getNowTs","flow","gap","items","align","icon","hasLess","disabled","isZero","onClick","claim","loadBalance","spinning","onCancel","leftMultiplier","text","href","variation","ratio","inRange","formatBigValue","getFormattedDuration","Progress","acceptance","progressProps","acceptanceMode","acceptanceFulfilled","percent","fulfilled","showInfo","success","strokeColor","trailColor","ActivationThreshold","activating","setActivating","symbol","colsTemplate","strokeWidth","Table","pagination","tableProps","bordered","showSorterTooltip","showSizeChanger","Columns","dataIndex","render","ellipsis","wrap","shortenAddr","VotersTable","daoAPI","setLoading","voters","setVoters","totalVoters","setTotal","setPage","meta","count","columns","dataSource","rowKey","total","pageSize","position","showTotal","onChange","scroll","x","VotingStatList","convertTokenInUSD","overview","setOverview","cards","rel","target","size","formatUSD","fontWeight","avgLockTimeSeconds","bondRewards","totalSupply","holdersStakingExcluded","barnUsers","OverviewView","NavTabs","shadows","idx","restTab","activeClassName","activeKey","elasticTabs","id","tabRest","small","PortfolioPeriodTabsKey","day","week","month","Form","formProps","form","layout","requiredMark","Item","label","hint","extra","itemProps","List","listProps","RadioButton","radioProps","GasFeeList","groupProps","activeNetwork","useNetwork","selected","explorer","apiUrl","key","veryFast","FastGasPrice","fast","ProposeGasPrice","average","round","SafeGasPrice","safeLow","length","Group","ev","option","TxConfirmModal","header","submitText","onConfirm","modalProps","Antd","useForm","submitting","setSubmitting","isUnmountRef","useIsUnmount","validateTrigger","onFinish","features","gasFees","rules","required","message","htmlType","Alert","alertProps","showIcon","ConditionalWrapper","condition","wrapper","InternalContext","VFormEmptyResolver","errors","VFormValidationResolver","context","validate","scheme","validationResult","getErrors","Object","keys","reduce","res","path","errKey","validationScheme","defaultValues","onSubmit","resolver","rhForm","rhUseForm","mode","shouldUnregister","submit","handleSubmit","assign","updateValue","fieldName","setValue","shouldDirty","shouldValidate","preventDefault","classnames","FieldLabel","FormError","err","formState","FormItem","labelProps","showError","control","Spinner","restProps","container","classNames","spinner","StatusTag","statusTag","Input","inputProps","autoComplete","TokenInput","forwardRef","addonBefore","isAddress","RadioCard","rest","card","MANUAL_KEY","DELEGATED_KEY","PortfolioDelegate","wallet","isLoading","isSubmitting","confirmModalVisible","setConfirmModalVisible","stakedBalance","bondBalance","isLocked","delegateAddress","_","obj","votingType","isSelf","toLowerCase","isSame","messages","loadData","reset","watch","canSubmit","isDirty","doDelegate","stopDelegate","delegate","console","error","minHeight","field","handleConfirm","Slider","slicedMax","floor","input","TokenAmount","ref","before","secondary","classNameBefore","slider","maxValue","tokenAmount","tokenAmountBefore","tokenAmountValues","tokenAmountValue","inputMode","pattern","onWheel","currentTarget","blur","e","tokenAmountHint","alignSelf","marginTop","tokenAmountSlider","step","WalletDepositConfirmModal","deposit","lockDuration","justify","onOk","PortfolioDeposit","isEnabling","setEnabling","depositConfirmModal","showDepositConfirmModal","projectTokenContract","barnAllowance","getAllowanceOf","bnAmount","isEnabled","isValid","approve","doDeposit","depositAmount","scaleBy","faucets","DateFNSPicker","generatePicker","dateFnsGenerateConfig","DatePicker","datePickerProps","dropdownClassName","dropdown","DURATION_1_MONTH","DURATION_3_MONTH","DURATION_6_MONTH","DURATION_OPTIONS","getLockEndDate","startDate","duration","addDays","addMonths","PortfolioLock","lockEndDate","addMinutes","addYears","doLock","lockUntil","getUnixTime","lock","trim","showTime","showNow","format","dimension","inputId","nanoid","isSearch","htmlFor","inputWrapper","searchIcon","inputSearch","NETWORK","stakeConfirmModal","showStakeConfirmModal","p2pkey","dataType","p2pKey","doDepositAndLock","network","placeholder","PortfolioWithdraw","doWithdraw","withdrawAmount","withdraw","PortfolioView","initialized","PortfolioStake","Textarea","TextArea","parseValues","JSON","parse","AbiInterface","fragments","abi","Interface","functions","filter","fn","stateMutability","functionFragment","encodeFunctionData","fragment","FunctionFragment","fromString","defaultAbiCoder","inputs","hexData","indexOf","decode","signature","param","Array","isArray","YesNoOptions","YesNoSelector","optionType","buttonStyle","AddZerosPopup","onAdd","popoverProps","visible","setVisible","content","val","isNaN","placement","overlayStyle","onVisibleChange","PopoverMenu","popoverRef","overlayClassName","trigger","info","close","ExpandableCard","footer","cardProps","ProposalActionCard","callData","showSettings","onDeleteAction","onEditAction","setEllipsis","expanded","setExpanded","isSignature","showSignature","getFunctionFragmentFrom","functionParamValues","decodeFunctionData","stringParams","params","stringifyParamValue","join","ActionMenuItems","handleShowSignature","prevState","handleActionMenu","Paragraph","maxWidth","overflowWrap","expandable","onEllipsis","isEllipsis","SimulatedProposalActionModal","targetAddress","functionSignature","functionEncodedParams","InitialFormValues","isProxyAddress","implementationAddress","addValueAttribute","actionValue","addFunctionCall","abiLoading","abiInterface","functionMeta","functionParams","functionStrParams","showSimulatedActionModal","simulatedAction","simulationResolve","simulationReject","formDirty","CreateProposalActionModal","edit","initialValues","web3","useWeb3","AntdForm","loadAbiInterface","setFieldsValue","some","action","AntdNotification","cancel","validateFields","encodedFunction","tryCall","resetFields","handleSimulatedAction","answer","confirmClose","confirmText","headerLabel","onValuesChange","allValues","forEach","selectedFunctionMeta","writableFunctions","find","paramsStr","paramsValues","encodedParams","isFieldsTouched","noStyle","dependencies","getFieldsValue","hidden","preserve","shouldUpdate","prevValue","prevActionValue","zeros","repeat","prevValues","functionOptions","fixScroll","test","textarea","DeleteProposalActionModal","showCreateActionModal","showDeleteActionModal","selectedAction","ProposalCreateView","history","useHistory","payload","c","push","propose","waitUntil","intervalBetweenAttempts","timeout","Infinity","hasCreateRestrictions","canCreateProposal","cardsContainer","validator","fields","index","fieldData","getFieldValue","addActionBtn","ErrorList","useProposal","ProposalProvider","version","forRate","againstRate","quorum","isCanceled","warmUpDuration","getBondStakedAtTs","bondStakedAt","getAbrogationProposals","isEqualTo","proposer","getVotingPower","receipt","getReceipt","getVotingPowerAtTs","cancelProposal","queueProposalForExecution","queue","executeProposal","execute","proposalCastVote","castVote","proposalCancelVote","cancelVote","startAbrogationProposal","acceptanceThreshold","useAbrogation","AbrogationProvider","abrogation","approvalRate","getAbrogationProposalReceipt","abrogationProposalCastVote","abrogationProposalCancelVote","AbrogationApprovalCard","abrogationCtx","passed","toFixed","AbrogationDetailsCard","padding","caller","supportFilter","VoteAbrogationState","AbrogationVotersProvider","changeSupportFilter","changePage","powerCell","forTag","againstTag","AbrogationVotersModalInner","abrogationVotesCtx","defaultActiveKey","stateFilter","table","locale","emptyText","AbrogationVotersModal","AbrogationVoteResultsCard","votersModal","showVotersModal","toFormat","changeOption","AbrogationVoteModal","voteState","proposalCtx","VoteInitiate","VoteFor","VoteAgainst","VoteChange","VoteCancel","changeGroup","isDisabled","actionBtn","showVoteModal","None","AbrogationVotesCard","AbrogationProposalModalInner","AbrogationProposalModal","abrogationVoteModal","abrogationViewModal","showWhyReason","cancelling","ProposalAbrogationCard","ProposalApprovalCard","ProposalDetailsCard","ownProposal","isThresholdBelow","canBeCancelled","ProposalQuorumCard","minQuorum","getEventIcon","formatEventTime","mStart","mEnd","dist","formatDistance","addSuffix","includeSeconds","ProposalStatusCard","event","get","txHash","endTimestamp","startTimestamp","VoteState","ProposalVotersProvider","ProposalVotersModalInner","proposalVotesCtx","ProposalVotersModal","ProposalVoteResultsCard","ProposalVoteModal","ProposalVotesCard","QueueForExecutionModal","showQueueForExecution","executing","ProposalDetailViewInner","cardsAndSidebarContainer","sidebarContainer","ProposalDetailView","useRouteMatch","proposals","searchFilter","useProposals","ProposalsProvider","stateTimeLeftTs","stateTimeLeft","changeStateFilter","changeSearchFilter","ProposalStatusTag","ProposalsTable","proposalsCtx","ProposalsViewInner","handleSearchChange","useDebounce","prefix","ProposalsView","Pagination","pages","ceil","paginationList","last","l","delta","left","right","range","rangeWithDots","i","prev","rotate","next","link","tableContainer","clickable","dataIdx","heading","itemIdx","Render","arrowIcon","marginLeft","TableFooter","generatedText","generateText","tableFooter","TableFilter","filters","defaultValue","countApplied","Content","itemRender","useContractFactory","listeners","walletProvider","provider","activeProvider","activeProviderRef","walletProviderRef","accountRef","contractsRef","createContract","factory","setCallProvider","setProvider","set","instance","afterInit","updateContracts","onDestroy","getOrCreateContract","has","getContract","Listeners","entity","token","tokenSymbol","transactionHash","blockTimestamp","tokenDecimals","tokenName","amountUSD","counterpartyAddress","accountAddress","counterpartyLabel","accountLabel","TreasuryHoldings","useTokens","getAmountInUSD","getToken","historyPage","setHistoryPage","setTokenFilter","setDirectionFilter","filterValue","direction","useFetch","transform","useFetchTreasuryTokens","treasuryTokens","queryfy","useFetchTreasuryHistory","historyResult","historyLoading","historyItems","historyItemsCount","tokensSource","tokens","treasuryToken","tokenContract","balanceAmount","getBalanceOf","balanceAmountUSD","sort","b","totalHoldingsUSD","sumEach","historySource","historyFilters","tokenOpts","Erc20Contract","loadCommon","gridTemplateColumns","TreasuryView","activeTab","setActiveTab","tabKey","exact","GovernanceViewInternal","vt","GovernanceView"],"mappings":"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","file":"static/js/7.05c3b586.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"s_tabs__28uev\",\"simple\":\"s_simple__3E-6U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divider\":\"s_divider__3YM-J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"skeleton\":\"s_skeleton__3FB8I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__2OyQF\",\"separator\":\"s_separator__2jXLs\",\"list\":\"s_list__1TTsx\",\"row\":\"s_row__1G0VL\",\"term\":\"s_term__1Hf4T\",\"termIcon\":\"s_termIcon__2ojvb\",\"data\":\"s_data__PBmCp\",\"dataIcon\":\"s_dataIcon__2hNBh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__3Mvxm\",\"items\":\"s_items__12xaa\",\"ratio\":\"s_ratio__2PnO1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__1YiEf\",\"acceptance\":\"s_acceptance__3YfK4\",\"fulfilled\":\"s_fulfilled__3gPu5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component___p2il\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cards\":\"s_cards__Stj_L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"s_tabs__32Wke\",\"shadows\":\"s_shadows__12PQF\",\"tab\":\"s_tab__2wEah\",\"active\":\"s_active__1mayN\",\"disabled\":\"s_disabled__xaH2p\",\"elasticTabs\":\"s_elasticTabs__2URoC\",\"elasticToggle\":\"s_elasticToggle__3M_xZ\",\"small\":\"s_small__c6etg\",\"horizontalMenu\":\"s_horizontalMenu__3BcI1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"s_form__36nMg\",\"item\":\"s_item__2gbuN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__2RWFR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"s_list__mhVNU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divider\":\"s_divider__1jS-8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__bp6jU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"s_form__373JW\",\"disabled\":\"s_disabled__gL2Qr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"s_spinner__2lxg5\",\"rotate\":\"s_rotate__K9I_G\",\"container\":\"s_container__2DwVy\",\"children\":\"s_children__1ZC_G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statusTag\":\"s_statusTag__qs55u\",\"red\":\"s_red__1poW_\",\"green\":\"s_green__2QiFO\",\"blue\":\"s_blue__1mk4Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__2HckH\",\"disabled\":\"s_disabled__3ybza\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__2hCqz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cards\":\"s_cards__SMmvy\",\"card\":\"s_card__3ZxAU\",\"selected\":\"s_selected__5uLwB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tokenSelectList\":\"s_tokenSelectList__1rsig\",\"tokenSelectListButton\":\"s_tokenSelectListButton__898YC\",\"active\":\"s_active__1VA0m\",\"dropdown\":\"s_dropdown__2I7kF\",\"large\":\"s_large__uF7P8\",\"dropdownChevron\":\"s_dropdownChevron__3cfM7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"s_input__1b3rZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tokenAmount\":\"s_tokenAmount__2n5WY\",\"error\":\"s_error__3x3RW\",\"tokenAmountBefore\":\"s_tokenAmountBefore__3YeAZ\",\"tokenAmountValues\":\"s_tokenAmountValues__1qT2P\",\"tokenAmountValue\":\"s_tokenAmountValue__2mG1w\",\"tokenAmountHint\":\"s_tokenAmountHint__3Jk8f\",\"tokenAmountSlider\":\"s_tokenAmountSlider__2LNhd\",\"tokenAmountPreview\":\"s_tokenAmountPreview__1qEON\",\"tokenAmountPreviewBefore\":\"s_tokenAmountPreviewBefore__2ZTVO\",\"tokenAmountPreviewValues\":\"s_tokenAmountPreviewValues__3WU83\",\"tokenAmountPreviewValue\":\"s_tokenAmountPreviewValue__2CGmA\",\"tokenAmountPreviewHint\":\"s_tokenAmountPreviewHint__1XGYo\",\"tokenSelectTrigger\":\"s_tokenSelectTrigger__39PsM\",\"tokenSelectChevron\":\"s_tokenSelectChevron__3_diD\",\"tokenSelectListButton\":\"s_tokenSelectListButton__qrRSq\",\"active\":\"s_active__hEyw6\",\"tokenAmountSelectToken\":\"s_tokenAmountSelectToken__8QBHp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__3feGb\",\"dropdown\":\"s_dropdown__ggOEG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputWrapper\":\"s_inputWrapper__2SYqe\",\"input\":\"s_input__ak8Ur\",\"large\":\"s_large__RjV7F\",\"inputSearch\":\"s_inputSearch__3tqk-\",\"before\":\"s_before__lvzM0\",\"searchIcon\":\"s_searchIcon__1NFiP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__HvMmO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__QDW8F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__1YTqh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__lLKM4\",\"content\":\"s_content__VOUyb\",\"footer\":\"s_footer__teV8K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"s_content__3uru7\",\"address\":\"s_address__1a35W\",\"paragraph\":\"s_paragraph__2QppP\",\"expanded\":\"s_expanded__1OewS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__2wkK2\",\"wrap\":\"s_wrap__s3gkd\",\"form\":\"s_form__2n-lq\",\"textarea\":\"s_textarea__2EyBJ\",\"actions\":\"s_actions__2fHLy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addActionBtn\":\"s_addActionBtn__mtRzB\",\"cardsContainer\":\"s_cardsContainer__1ejSo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__3DYra\",\"tabs\":\"s_tabs__WlGiL\",\"table\":\"s_table__KDN67\",\"powerCell\":\"s_powerCell__2ikNm\",\"forTag\":\"s_forTag__3hKyp\",\"againstTag\":\"s_againstTag__2mGqw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__3p9EE\",\"row\":\"s_row__2g1jK\",\"changeGroup\":\"s_changeGroup__139DU\",\"actionBtn\":\"s_actionBtn__3HPoz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__3oQBs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__1YyNj\",\"tabs\":\"s_tabs__2j20Y\",\"table\":\"s_table__1-kJz\",\"powerCell\":\"s_powerCell__21xuC\",\"forTag\":\"s_forTag__3h46w\",\"againstTag\":\"s_againstTag__3ZoLW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__9_R9p\",\"row\":\"s_row__1roRu\",\"changeGroup\":\"s_changeGroup__1yheK\",\"actionBtn\":\"s_actionBtn__1d105\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"s_component__rqoCF\",\"row\":\"s_row__2-bC9\",\"actionBtn\":\"s_actionBtn__33Ovt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cardsAndSidebarContainer\":\"s_cardsAndSidebarContainer__1Pd9o\",\"cardsContainer\":\"s_cardsContainer__29QWl\",\"sidebarContainer\":\"s_sidebarContainer__288P0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"s_tabs__3o4xa\",\"search\":\"s_search__1fxlk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"s_pagination__3UMZt\",\"page\":\"s_page__29oPu\",\"separator\":\"s_separator__1n_F1\",\"prev\":\"s_prev__2g1Q9\",\"next\":\"s_next__d_WwI\",\"active\":\"s_active__ec-7d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tableContainer\":\"s_tableContainer__2Dki2\",\"loading\":\"s_loading__1OMuZ\",\"table\":\"s_table__Nd1Ke\",\"clickable\":\"s_clickable__1x0tg\",\"arrowIcon\":\"s_arrowIcon__1zygh\",\"tableFooter\":\"s_tableFooter__3iZZl\",\"spinner\":\"s_spinner__1axuf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"s_tabs__2blvo\"};","import React from 'react';\nimport AntdTabs, { TabPaneProps as AntdTabPaneProps, TabsProps as AntdTabsProps } from 'antd/lib/tabs';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nexport type TabProps = AntdTabPaneProps;\n\nconst Tab: React.FC<TabProps> = props => {\n  const { className, ...tabProps } = props;\n\n  return <AntdTabs.TabPane className={cn(s.tab, className)} {...tabProps} />;\n};\n\nexport type TabsProps = AntdTabsProps & {\n  simple?: boolean;\n};\n\nexport type StaticTabsProps = {\n  Tab: React.FC<TabProps>;\n};\n\nconst Tabs: React.FC<TabsProps> & StaticTabsProps = ((props: TabsProps) => {\n  const { className, simple = false, ...tabsProps } = props;\n\n  return <AntdTabs className={cn(s.tabs, className, simple && s.simple)} tabBarGutter={32} {...tabsProps} />;\n}) as any;\n\nTabs.Tab = Tab;\n\nexport default Tabs;\n","import { FC, createContext, useContext } from 'react';\nimport BigNumber from 'bignumber.js';\nimport QueryString from 'query-string';\nimport { getHumanValue } from 'web3/utils';\n\nimport { useConfig } from 'components/providers/configProvider';\n\nimport { InvariantContext } from 'utils/context';\nimport { PaginatedResult, UseFetchReturn, queryfy, useFetch } from 'utils/fetch';\n\nexport type APIOverviewData = {\n  avgLockTimeSeconds: number;\n  totalDelegatedPower: BigNumber;\n  totalVbond: BigNumber;\n  holders: number;\n  holdersStakingExcluded: number;\n  voters: number;\n  barnUsers: number;\n};\n\nexport type APIVoterEntity = {\n  address: string;\n  bondStaked: BigNumber;\n  lockedUntil: number;\n  delegatedPower: BigNumber;\n  votes: number;\n  proposals: number;\n  votingPower: BigNumber;\n  hasActiveDelegation: boolean;\n};\n\nexport enum APIProposalState {\n  CREATED = 'CREATED',\n  WARMUP = 'WARMUP',\n  ACTIVE = 'ACTIVE',\n  CANCELED = 'CANCELED',\n  FAILED = 'FAILED',\n  ACCEPTED = 'ACCEPTED',\n  QUEUED = 'QUEUED',\n  GRACE = 'GRACE',\n  EXPIRED = 'EXPIRED',\n  EXECUTED = 'EXECUTED',\n  ABROGATED = 'ABROGATED',\n}\n\nexport enum APIProposalStateId {\n  WARMUP = 0,\n  ACTIVE,\n  CANCELED,\n  FAILED,\n  ACCEPTED,\n  QUEUED,\n  GRACE,\n  EXPIRED,\n  EXECUTED,\n  ABROGATED,\n}\n\nexport const APIProposalStateMap = new Map<APIProposalState, string>([\n  [APIProposalState.CREATED, 'Created'],\n  [APIProposalState.WARMUP, 'Warm-Up'],\n  [APIProposalState.ACTIVE, 'Voting'],\n  [APIProposalState.CANCELED, 'Canceled'],\n  [APIProposalState.FAILED, 'Failed'],\n  [APIProposalState.ACCEPTED, 'Accepted'],\n  [APIProposalState.QUEUED, 'Queued for execution'],\n  [APIProposalState.GRACE, 'Pending execution'],\n  [APIProposalState.EXPIRED, 'Expired'],\n  [APIProposalState.EXECUTED, 'Executed'],\n  [APIProposalState.ABROGATED, 'Abrogated'],\n]);\n\nexport type APILiteProposalEntity = {\n  proposalId: number;\n  proposer: string;\n  title: string;\n  description: string;\n  createTime: number;\n  state: APIProposalState;\n  stateTimeLeft: number | null;\n  forVotes: BigNumber;\n  againstVotes: BigNumber;\n};\n\nexport type APIProposalHistoryEntity = {\n  name: string;\n  startTimestamp: number;\n  endTimestamp: number;\n  txHash: string;\n};\n\nexport type APIProposalEntity = APILiteProposalEntity & {\n  blockTimestamp: number;\n  warmUpDuration: number;\n  activeDuration: number;\n  queueDuration: number;\n  gracePeriodDuration: number;\n  minQuorum: number;\n  acceptanceThreshold: number;\n  targets: string[];\n  values: string[];\n  signatures: string[];\n  calldatas: string[];\n  history: APIProposalHistoryEntity[];\n};\n\nexport type APIVoteEntity = {\n  address: string;\n  power: BigNumber;\n  support: boolean;\n  blockTimestamp: number;\n};\n\nexport type APIAbrogationEntity = {\n  proposalId: number;\n  caller: string;\n  createTime: number;\n  description: string;\n  forVotes: BigNumber;\n  againstVotes: BigNumber;\n};\n\nexport type APIAbrogationVoteEntity = {\n  address: string;\n  power: BigNumber;\n  support: boolean;\n  blockTimestamp: number;\n};\n\nexport type APITreasuryToken = {\n  address: string;\n  symbol: string;\n  decimals: number;\n};\n\nexport type APITreasuryHistory = {\n  accountAddress: string;\n  accountLabel: string;\n  counterpartyAddress: string;\n  counterpartyLabel: string;\n  amount: number;\n  transactionDirection: string;\n  tokenAddress: string;\n  tokenSymbol: string;\n  tokenDecimals: number;\n  transactionHash: string;\n  blockTimestamp: number;\n  blockNumber: number;\n};\n\nexport type DaoAPIType = {\n  fetchOverviewData(): Promise<APIOverviewData>;\n  fetchVoters(page: number, limit: number): Promise<PaginatedResult<APIVoterEntity>>;\n  fetchProposals(\n    page: number,\n    limit: number,\n    state?: string,\n    search?: string,\n  ): Promise<PaginatedResult<APILiteProposalEntity>>;\n  fetchProposal(proposalId: number): Promise<APIProposalEntity>;\n  fetchProposalVoters(\n    proposalId: number,\n    page: number,\n    limit: number,\n    support?: boolean,\n  ): Promise<PaginatedResult<APIVoteEntity>>;\n  fetchAbrogation(proposalId: number): Promise<APIAbrogationEntity>;\n  fetchAbrogationVoters(\n    proposalId: number,\n    page: number,\n    limit: number,\n    support?: boolean,\n  ): Promise<PaginatedResult<APIAbrogationVoteEntity>>;\n  fetchTreasuryTokens(): Promise<APITreasuryToken[]>;\n  fetchTreasuryHistory(\n    page: number,\n    limit: number,\n    tokenFilter: string,\n    directionFilter: string,\n  ): Promise<PaginatedResult<APITreasuryHistory>>;\n};\n\nconst Context = createContext<DaoAPIType>(InvariantContext('DaoAPIProvider'));\n\nexport function useDaoAPI(): DaoAPIType {\n  return useContext(Context);\n}\n\nconst DaoAPIProvider: FC = props => {\n  const config = useConfig();\n\n  function fetchOverviewData(): Promise<APIOverviewData> {\n    const url = new URL(`/api/governance/overview`, config.api.baseUrl);\n\n    return fetch(url.toString())\n      .then(result => result.json())\n      .then(result => ({\n        ...result.data,\n        totalDelegatedPower: getHumanValue(BigNumber.from(result.data.totalDelegatedPower), 18),\n        totalVbond: getHumanValue(BigNumber.from(result.data.totalVbond), 18),\n      }));\n  }\n\n  function fetchVoters(page = 1, limit = 10): Promise<PaginatedResult<APIVoterEntity>> {\n    const url = new URL(`/api/governance/voters?page=${page}&limit=${limit}`, config.api.baseUrl);\n\n    return fetch(url.toString())\n      .then(result => result.json())\n      .then((result: PaginatedResult<APIVoterEntity>) => ({\n        ...result,\n        data: (result.data ?? []).map((item: APIVoterEntity) => ({\n          ...item,\n          bondStaked: getHumanValue(BigNumber.from(item.bondStaked), 18)!, // bond decimals\n          delegatedPower: getHumanValue(BigNumber.from(item.delegatedPower), 18)!,\n          votingPower: getHumanValue(BigNumber.from(item.votingPower), 18)!,\n        })),\n      }));\n  }\n\n  function fetchProposals(\n    page = 1,\n    limit = 10,\n    state?: string,\n    search?: string,\n  ): Promise<PaginatedResult<APILiteProposalEntity>> {\n    const query = QueryString.stringify(\n      {\n        page: String(page),\n        limit: String(limit),\n        state,\n        title: search,\n      },\n      {\n        skipNull: true,\n        skipEmptyString: true,\n        encode: true,\n      },\n    );\n\n    const url = new URL(`/api/governance/proposals?${query}`, config.api.baseUrl);\n\n    return fetch(url.toString())\n      .then(result => result.json())\n      .then(({ status, ...data }) => {\n        if (status !== 200) {\n          return Promise.reject(status);\n        }\n\n        return data;\n      })\n      .then((result: PaginatedResult<APILiteProposalEntity>) => ({\n        ...result,\n        data: (result.data ?? []).map(proposal => ({\n          ...proposal,\n          forVotes: getHumanValue(BigNumber.from(proposal.forVotes), 18)!,\n          againstVotes: getHumanValue(BigNumber.from(proposal.againstVotes), 18)!,\n        })),\n      }));\n  }\n\n  function fetchProposal(proposalId: number): Promise<APIProposalEntity> {\n    const url = new URL(`/api/governance/proposals/${proposalId}`, config.api.baseUrl);\n\n    return fetch(url.toString())\n      .then(result => result.json())\n      .then(({ data, status }) => {\n        if (status !== 200) {\n          return Promise.reject(status);\n        }\n\n        return data;\n      })\n      .then((data: APIProposalEntity) => ({\n        ...data,\n        forVotes: getHumanValue(BigNumber.from(data.forVotes), 18)!,\n        againstVotes: getHumanValue(BigNumber.from(data.againstVotes), 18)!,\n      }));\n  }\n\n  function fetchProposalVoters(\n    proposalId: number,\n    page = 1,\n    limit = 10,\n    support?: boolean,\n  ): Promise<PaginatedResult<APIVoteEntity>> {\n    const query = QueryString.stringify(\n      {\n        page: String(page),\n        limit: String(limit),\n        support,\n      },\n      {\n        skipNull: true,\n        skipEmptyString: true,\n        encode: true,\n      },\n    );\n\n    const url = new URL(`/api/governance/proposals/${proposalId}/votes?${query}`, config.api.baseUrl);\n\n    return fetch(url.toString())\n      .then(result => result.json())\n      .then(({ status, ...data }) => {\n        if (status !== 200) {\n          return Promise.reject(status);\n        }\n\n        return data;\n      })\n      .then((result: PaginatedResult<APIVoteEntity>) => ({\n        ...result,\n        data: (result.data ?? []).map(vote => ({\n          ...vote,\n          power: getHumanValue(BigNumber.from(vote.power), 18)!,\n        })),\n      }));\n  }\n\n  function fetchAbrogation(proposalId: number): Promise<APIAbrogationEntity> {\n    const url = new URL(`/api/governance/abrogation-proposals/${proposalId}`, config.api.baseUrl);\n\n    return fetch(url.toString())\n      .then(result => result.json())\n      .then(({ data, status }) => {\n        if (status !== 200) {\n          return Promise.reject(status);\n        }\n\n        return data;\n      })\n      .then((data: APIAbrogationEntity) => ({\n        ...data,\n        forVotes: getHumanValue(BigNumber.from(data.forVotes), 18)!,\n        againstVotes: getHumanValue(BigNumber.from(data.againstVotes), 18)!,\n      }));\n  }\n\n  function fetchAbrogationVoters(\n    proposalId: number,\n    page = 1,\n    limit = 10,\n    support?: boolean,\n  ): Promise<PaginatedResult<APIAbrogationVoteEntity>> {\n    const query = QueryString.stringify(\n      {\n        page: String(page),\n        limit: String(limit),\n        support,\n      },\n      {\n        skipNull: true,\n        skipEmptyString: true,\n        encode: true,\n      },\n    );\n\n    const url = new URL(`/api/governance/abrogation-proposals/${proposalId}/votes?${query}`, config.api.baseUrl);\n\n    return fetch(url.toString())\n      .then(result => result.json())\n      .then(({ status, ...data }) => {\n        if (status !== 200) {\n          return Promise.reject(status);\n        }\n\n        return data;\n      })\n      .then((result: PaginatedResult<APIVoteEntity>) => ({\n        ...result,\n        data: (result.data ?? []).map(vote => ({\n          ...vote,\n          power: getHumanValue(BigNumber.from(vote.power), 18)!,\n        })),\n      }));\n  }\n\n  function fetchTreasuryTokens(): Promise<APITreasuryToken[]> {\n    const url = new URL(\n      `/api/governance/treasury/tokens?address=${config.contracts.dao?.governance}`,\n      config.api.baseUrl,\n    );\n\n    return fetch(url.toString())\n      .then(result => result.json())\n      .then(({ status, data }) => {\n        if (status !== 200) {\n          return Promise.reject(status);\n        }\n\n        return data;\n      });\n  }\n\n  function fetchTreasuryHistory(\n    page = 1,\n    limit = 10,\n    tokenFilter: string,\n    directionFilter: string,\n  ): Promise<PaginatedResult<APITreasuryHistory>> {\n    const query = QueryString.stringify(\n      {\n        address: config.contracts.dao?.governance,\n        page: String(page),\n        limit: String(limit),\n        tokenAddress: tokenFilter,\n        transactionDirection: directionFilter,\n      },\n      {\n        skipNull: true,\n        skipEmptyString: true,\n        encode: true,\n      },\n    );\n\n    const url = new URL(`/api/governance/treasury/transactions?${query}`, config.api.baseUrl);\n\n    return fetch(url.toString())\n      .then(result => result.json())\n      .then(({ status, ...data }) => {\n        if (status !== 200) {\n          return Promise.reject(status);\n        }\n\n        return data;\n      })\n      .then((result: PaginatedResult<APITreasuryHistory>) => ({\n        ...result,\n        data: (result.data ?? []).map(item => ({\n          ...item,\n          amount: Number(item.amount),\n        })),\n      }));\n  }\n\n  const value = {\n    fetchOverviewData,\n    fetchVoters,\n    fetchProposals,\n    fetchProposal,\n    fetchProposalVoters,\n    fetchAbrogation,\n    fetchAbrogationVoters,\n    fetchTreasuryTokens,\n    fetchTreasuryHistory,\n  };\n\n  return <Context.Provider value={value}>{props.children}</Context.Provider>;\n};\n\nexport default DaoAPIProvider;\n\nexport function useFetchTreasuryTokens(): UseFetchReturn<APITreasuryToken[]> {\n  const config = useConfig();\n  const url = new URL(\n    `/api/governance/treasury/tokens?address=${config.contracts.dao?.governance}`,\n    config.api.baseUrl,\n  );\n\n  return useFetch(url, {\n    transform: ({ data }) => data,\n  });\n}\n\nexport function useFetchTreasuryHistory(\n  page: number = 1,\n  tokenFilter: string,\n  directionFilter: string,\n): UseFetchReturn<PaginatedResult<APITreasuryHistory>> {\n  const config = useConfig();\n  const query = queryfy({\n    address: config.contracts.dao?.governance,\n    limit: 10,\n    page,\n    tokenAddress: tokenFilter,\n    transactionDirection: directionFilter,\n  });\n\n  const url = new URL(`/api/governance/treasury/transactions?${query}`, config.api.baseUrl);\n\n  return useFetch(url, {\n    transform: ({ data = [], meta }) => ({\n      meta,\n      data: data.map((item: APITreasuryHistory) => ({\n        ...item,\n        amount: Number(item.amount),\n      })),\n    }),\n  });\n}\n","import BigNumber from 'bignumber.js';\nimport { AbiItem } from 'web3-utils';\nimport Web3Contract, { createAbiItem } from 'web3/web3Contract';\n\nconst DaoBarnABI: AbiItem[] = [\n  // call\n  createAbiItem('bondStaked', [], ['uint256']),\n  createAbiItem('balanceOf', ['address'], ['uint256']),\n  createAbiItem('votingPower', ['address'], ['uint256']),\n  createAbiItem('userLockedUntil', ['address'], ['uint256']),\n  createAbiItem('delegatedPower', ['address'], ['uint256']),\n  createAbiItem('userDelegatedTo', ['address'], ['address']),\n  createAbiItem('bondStakedAtTs', ['uint256'], ['uint256']),\n  createAbiItem('votingPowerAtTs', ['address', 'uint256'], ['uint256']),\n  createAbiItem('multiplierAtTs', ['address', 'uint256'], ['uint256']),\n  // send\n  createAbiItem('deposit', ['uint256'], []),\n  createAbiItem('withdraw', ['uint256'], []),\n  createAbiItem('delegate', ['address'], []),\n  createAbiItem('stopDelegate', [], []),\n  createAbiItem('lock', ['uint256'], []),\n];\n\nclass DaoBarnContract extends Web3Contract {\n  constructor(address: string) {\n    super(DaoBarnABI, address, 'DAO Barn');\n\n    this.on(Web3Contract.UPDATE_ACCOUNT, () => {\n      this.balance = undefined;\n      this.votingPower = undefined;\n      this.userLockedUntil = undefined;\n      this.delegatedPower = undefined;\n      this.userDelegatedTo = undefined;\n    });\n  }\n\n  // common data\n  bondStaked?: BigNumber;\n\n  // user data\n  balance?: BigNumber;\n  votingPower?: BigNumber;\n  userLockedUntil?: number;\n  delegatedPower?: BigNumber;\n  userDelegatedTo?: string;\n\n  // computed data\n  get isUserLocked(): boolean {\n    return (this.userLockedUntil ?? 0) > Date.now() / 1_000;\n  }\n\n  async loadCommonData(): Promise<void> {\n    const [bondStaked] = await this.batch([{ method: 'bondStaked' }]);\n\n    this.bondStaked = new BigNumber(bondStaked).unscaleBy(18); /// TODO: re-check\n    this.emit(Web3Contract.UPDATE_DATA);\n  }\n\n  async loadUserData(): Promise<void> {\n    const account = this.account;\n    this.assertAccount();\n\n    const [balance, votingPower, userLockedUntil, delegatedPower, userDelegatedTo] = await this.batch([\n      { method: 'balanceOf', methodArgs: [account] },\n      { method: 'votingPower', methodArgs: [account] },\n      { method: 'userLockedUntil', methodArgs: [account] },\n      { method: 'delegatedPower', methodArgs: [account] },\n      { method: 'userDelegatedTo', methodArgs: [account] },\n    ]);\n\n    this.balance = new BigNumber(balance).unscaleBy(18); /// TODO: re-check\n    this.votingPower = new BigNumber(votingPower).unscaleBy(18); /// TODO: re-check\n    this.userLockedUntil = Number(userLockedUntil);\n    this.delegatedPower = new BigNumber(delegatedPower).unscaleBy(18); /// TODO: re-check\n    this.userDelegatedTo = userDelegatedTo;\n    this.emit(Web3Contract.UPDATE_DATA);\n  }\n\n  getBondStakedAtTs(timestamp: number): Promise<BigNumber> {\n    return this.call('bondStakedAtTs', [timestamp]).then(value => new BigNumber(value).unscaleBy(18)!); /// TODO: re-check\n  }\n\n  getVotingPower(address: string): Promise<BigNumber> {\n    return this.call('votingPower', [address]).then(value => new BigNumber(value).unscaleBy(18)!); /// TODO: re-check\n  }\n\n  getVotingPowerAtTs(address: string, timestamp: number): Promise<BigNumber> {\n    return this.call('votingPowerAtTs', [address, timestamp]).then(value => new BigNumber(value).unscaleBy(18)!); /// TODO: re-check\n  }\n\n  getMultiplierAtTs(address: string, timestamp: number): Promise<BigNumber> {\n    return this.call('votingPowerAtTs', [address, timestamp]).then(value => new BigNumber(value).unscaleBy(18)!); /// TODO: re-check\n  }\n\n  deposit(amount: BigNumber, gasPrice?: number): Promise<void> {\n    return this.send('deposit', [amount], {}, gasPrice);\n  }\n\n  withdraw(amount: BigNumber, gasPrice?: number): Promise<void> {\n    return this.send('withdraw', [amount], {}, gasPrice);\n  }\n\n  delegate(to: string, gasPrice?: number): Promise<void> {\n    return this.send('delegate', [to], {}, gasPrice);\n  }\n\n  stopDelegate(gasPrice?: number): Promise<void> {\n    return this.send('stopDelegate', [], {}, gasPrice);\n  }\n\n  lock(timestamp: number, gasPrice?: number): Promise<void> {\n    return this.send('lock', [timestamp], {}, gasPrice);\n  }\n}\n\nexport default DaoBarnContract;\n","import { AbiItem } from 'web3-utils';\nimport Web3Contract, { AbiTuple, createAbiItem } from 'web3/web3Contract';\n\nexport type ProposalReceipt = {\n  hasVoted: boolean;\n  votes: number;\n  support: boolean;\n};\n\nexport type AbrogationProposal = {\n  creator: string;\n  createTime: number;\n  forVotes: number;\n  againstVotes: number;\n};\n\nexport type AbrogationProposalReceipt = {\n  hasVoted: boolean;\n  votes: number;\n  support: boolean;\n};\n\nconst DaoGovernanceABI: AbiItem[] = [\n  // call\n  createAbiItem('isActive', [], ['bool']),\n  createAbiItem('state', ['uint256'], ['uint8']),\n  createAbiItem('latestProposalIds', ['address'], ['uint256']),\n  createAbiItem('getReceipt', ['uint256', 'address'], [new AbiTuple(['bool', 'uint256', 'bool'])]),\n  createAbiItem('abrogationProposals', ['uint256'], ['address', 'uint256', 'string', 'uint256', 'uint256']),\n  createAbiItem('getAbrogationProposalReceipt', ['uint256', 'address'], [new AbiTuple(['bool', 'uint256', 'bool'])]),\n  // send\n  createAbiItem('activate', [], []),\n  createAbiItem('propose', ['address[]', 'uint256[]', 'string[]', 'bytes[]', 'string', 'string'], ['uint256']),\n  createAbiItem('cancelProposal', ['uint256'], []),\n  createAbiItem('queue', ['uint256'], []),\n  createAbiItem('execute', ['uint256'], []),\n  createAbiItem('castVote', ['uint256', 'bool'], []),\n  createAbiItem('cancelVote', ['uint256'], []),\n  createAbiItem('startAbrogationProposal', ['uint256', 'string'], []),\n  createAbiItem('abrogationProposal_castVote', ['uint256', 'bool'], []),\n  createAbiItem('abrogationProposal_cancelVote', ['uint256'], []),\n];\n\nclass DaoGovernanceContract extends Web3Contract {\n  constructor(address: string) {\n    super(DaoGovernanceABI, address, 'DAO Governance');\n\n    this.on(Web3Contract.UPDATE_ACCOUNT, () => {});\n  }\n\n  // common data\n  isActive?: boolean;\n\n  async loadCommonData(): Promise<void> {\n    const [isActive] = await this.batch([{ method: 'isActive' }]);\n\n    this.isActive = Boolean(isActive);\n    this.emit(Web3Contract.UPDATE_DATA);\n  }\n\n  async loadUserData(): Promise<void> {\n    this.assertAccount();\n\n    this.emit(Web3Contract.UPDATE_DATA);\n  }\n\n  getState(proposalId: number): Promise<number> {\n    return this.call('state', [proposalId]).then(value => Number(value));\n  }\n\n  getLatestProposalIds(address: string): Promise<number> {\n    return this.call('latestProposalIds', [address]).then(value => Number(value));\n  }\n\n  getReceipt(proposalId: number, voterAddress: string): Promise<ProposalReceipt> {\n    return this.call('getReceipt', [proposalId, voterAddress]).then(value => ({\n      hasVoted: Boolean(value[0]),\n      votes: Number(value[1]),\n      support: Boolean(value[2]),\n    }));\n  }\n\n  getAbrogationProposals(proposalId: number): Promise<AbrogationProposal> {\n    return this.call('abrogationProposals', [proposalId]).then(value => ({\n      creator: value[0],\n      createTime: Number(value[1]),\n      description: value[2],\n      forVotes: Number(value[3]),\n      againstVotes: Number(value[4]),\n    }));\n  }\n\n  getAbrogationProposalReceipt(proposalId: number, voterAddress: string): Promise<AbrogationProposalReceipt> {\n    return this.call('getAbrogationProposalReceipt', [proposalId, voterAddress]).then(value => ({\n      hasVoted: Boolean(value[0]),\n      votes: Number(value[1]),\n      support: Boolean(value[2]),\n    }));\n  }\n\n  activate(gasPrice?: number): Promise<void> {\n    return this.send('activate', [], {}, gasPrice);\n  }\n\n  propose(\n    title: string,\n    description: string,\n    targets: string[],\n    values: string[],\n    signatures: string[],\n    calldatas: string[],\n    gasPrice?: number,\n  ): Promise<number> {\n    return this.send('propose', [targets, values, signatures, calldatas, description, title], {}, gasPrice);\n  }\n\n  cancelProposal(proposalId: number, gasPrice?: number): Promise<void> {\n    return this.send('cancelProposal', [proposalId], {}, gasPrice);\n  }\n\n  queue(proposalId: number, gasPrice?: number): Promise<void> {\n    return this.send('queue', [proposalId], {}, gasPrice);\n  }\n\n  execute(proposalId: number, gasPrice?: number): Promise<void> {\n    return this.send('execute', [proposalId], {}, gasPrice);\n  }\n\n  castVote(proposalId: number, support: boolean, gasPrice?: number): Promise<void> {\n    return this.send('castVote', [proposalId, support], {}, gasPrice);\n  }\n\n  cancelVote(proposalId: number, gasPrice?: number): Promise<void> {\n    return this.send('cancelVote', [proposalId], {}, gasPrice);\n  }\n\n  startAbrogationProposal(proposalId: number, description: string, gasPrice?: number): Promise<void> {\n    return this.send('startAbrogationProposal', [proposalId, description], {}, gasPrice);\n  }\n\n  abrogationProposalCastVote(proposalId: number, support: boolean, gasPrice?: number): Promise<void> {\n    return this.send('abrogationProposal_castVote', [proposalId, support], {}, gasPrice);\n  }\n\n  abrogationProposalCancelVote(proposalId: number, gasPrice?: number): Promise<void> {\n    return this.send('abrogationProposal_cancelVote', [proposalId], {}, gasPrice);\n  }\n}\n\nexport default DaoGovernanceContract;\n","import BigNumber from 'bignumber.js';\nimport { AbiItem } from 'web3-utils';\nimport Web3Contract, { createAbiItem } from 'web3/web3Contract';\n\nconst DaoRewardABI: AbiItem[] = [\n  // call\n  createAbiItem('pullFeature', [], ['address', 'uint256', 'uint256', 'uint256', 'uint256']),\n  // send\n  createAbiItem('claim', [], ['uint256']),\n];\n\nclass DaoRewardContract extends Web3Contract {\n  constructor(address: string) {\n    super(DaoRewardABI, address, 'DAO Reward');\n\n    this.on(Web3Contract.UPDATE_ACCOUNT, () => {\n      this.toClaim = undefined;\n    });\n  }\n\n  // common data\n  pullFeature?: {\n    source: string;\n    startTs: number;\n    endTs: number;\n    totalDuration: number;\n    totalAmount: BigNumber;\n  };\n  // user data\n  toClaim?: BigNumber;\n\n  // computed data\n  get bondRewards(): BigNumber | undefined {\n    if (!this.pullFeature) {\n      return undefined;\n    }\n\n    const { startTs, endTs, totalDuration, totalAmount } = this.pullFeature;\n    const now = Date.now() / 1_000;\n\n    if (startTs > now) {\n      return BigNumber.ZERO;\n    }\n\n    if (endTs <= now) {\n      return totalAmount;\n    }\n\n    return totalAmount.multipliedBy(now - startTs).div(totalDuration);\n  }\n\n  async loadCommonData(): Promise<void> {\n    const [pullFeature] = await this.batch([{ method: 'pullFeature' }]);\n\n    this.pullFeature = {\n      source: pullFeature[0],\n      startTs: Number(pullFeature[1]),\n      endTs: Number(pullFeature[2]),\n      totalDuration: Number(pullFeature[3]),\n      totalAmount: new BigNumber(pullFeature[4]).unscaleBy(18)!, /// TODO: re-check\n    };\n    this.emit(Web3Contract.UPDATE_DATA);\n  }\n\n  async loadUserData(): Promise<void> {\n    const account = this.account;\n    this.assertAccount();\n\n    const [toClaim] = await this.batch([{ method: 'claim', callArgs: { from: account } }]);\n\n    this.toClaim = BigNumber.from(toClaim)?.unscaleBy(18); /// TODO: re-check\n    this.emit(Web3Contract.UPDATE_DATA);\n  }\n\n  async claim(gasPrice?: number): Promise<void> {\n    await this.send('claim', [], {}, gasPrice);\n  }\n}\n\nexport default DaoRewardContract;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\nimport { useContract } from 'web3/components/contractManagerProvider';\nimport Erc20Contract from 'web3/erc20Contract';\n\nimport { useConfig } from 'components/providers/configProvider';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport useMergeState from 'hooks/useMergeState';\nimport { APIProposalStateId } from 'modules/governance/api';\nimport DaoBarnContract from 'modules/governance/contracts/daoBarn';\nimport DaoGovernanceContract from 'modules/governance/contracts/daoGovernance';\nimport DaoRewardContract from 'modules/governance/contracts/daoReward';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport { InvariantContext } from 'utils/context';\n\nexport type DAOProviderState = {\n  minThreshold: number;\n  isActive?: boolean;\n  bondStaked?: BigNumber;\n  activationRate?: number;\n  thresholdRate?: number;\n};\n\nconst InitialState: DAOProviderState = {\n  minThreshold: 1,\n  isActive: undefined,\n  bondStaked: undefined,\n  activationRate: undefined,\n  thresholdRate: undefined,\n};\n\ntype DAOContextType = DAOProviderState & {\n  daoBarn: DaoBarnContract;\n  daoGovernance: DaoGovernanceContract;\n  daoReward: DaoRewardContract;\n  actions: {\n    activate: () => Promise<void>;\n    hasActiveProposal: () => Promise<boolean>;\n    hasThreshold(): boolean | undefined;\n  };\n};\n\nconst Context = React.createContext<DAOContextType>(InvariantContext('DAOProvider'));\n\nexport function useDAO(): DAOContextType {\n  return React.useContext(Context);\n}\n\nconst DAOProvider: React.FC = props => {\n  const { children } = props;\n\n  const config = useConfig();\n  const walletCtx = useWallet();\n\n  const daoBarn = useContract<DaoBarnContract>(config.contracts.dao?.barn!, () => {\n    return new DaoBarnContract(config.contracts.dao?.barn!);\n  });\n  const daoGovernance = useContract<DaoGovernanceContract>(config.contracts.dao?.governance!, () => {\n    return new DaoGovernanceContract(config.contracts.dao?.governance!);\n  });\n  const daoReward = useContract<DaoRewardContract>(config.contracts.dao?.reward!, () => {\n    return new DaoRewardContract(config.contracts.dao?.reward!);\n  });\n  const { projectToken } = useKnownTokens();\n\n  const [state, setState] = useMergeState<DAOProviderState>(InitialState);\n\n  React.useEffect(() => {\n    daoGovernance.loadCommonData();\n    daoReward.loadCommonData();\n    daoBarn.loadCommonData();\n  }, []);\n\n  React.useEffect(() => {\n    const bondContract = projectToken.contract as Erc20Contract;\n\n    bondContract.setAccount(walletCtx.account); // ?\n\n    if (walletCtx.account) {\n      daoGovernance.loadUserData();\n      daoReward.loadUserData();\n      daoBarn.loadUserData();\n      bondContract.loadAllowance(config.contracts.dao?.barn!).catch(Error);\n    }\n  }, [walletCtx.account]);\n\n  React.useEffect(() => {\n    const { isActive } = daoGovernance;\n    const { bondStaked, votingPower } = daoBarn;\n    const activationThreshold = config.dao?.activationThreshold;\n\n    let activationRate: number | undefined;\n\n    if (bondStaked && activationThreshold && activationThreshold > 0) {\n      activationRate = bondStaked.multipliedBy(100).div(activationThreshold).toNumber();\n      activationRate = Math.min(activationRate!, 100);\n    }\n\n    let thresholdRate: number | undefined;\n\n    if (votingPower && bondStaked?.gt(BigNumber.ZERO)) {\n      thresholdRate = votingPower.multipliedBy(100).div(bondStaked).toNumber();\n      thresholdRate = Math.min(thresholdRate!, 100);\n    }\n\n    setState({\n      isActive,\n      bondStaked,\n      activationRate,\n      thresholdRate,\n    });\n  }, [daoGovernance.isActive, daoBarn.bondStaked, daoBarn.votingPower]);\n\n  function activate() {\n    return daoGovernance.activate().then(() => {\n      // daoGovernance.reload(); /// TODO: check\n      // daoBarn.reload(); /// TODO: check\n    });\n  }\n\n  function hasActiveProposal(): Promise<boolean> {\n    if (!walletCtx.account) {\n      return Promise.resolve(false);\n    }\n\n    return daoGovernance.getLatestProposalIds(walletCtx.account).then(proposalId => {\n      if (!proposalId) {\n        return Promise.resolve(false);\n      }\n\n      return daoGovernance.getState(proposalId).then(proposalState => {\n        return ![\n          APIProposalStateId.CANCELED,\n          APIProposalStateId.EXECUTED,\n          APIProposalStateId.FAILED,\n          APIProposalStateId.EXPIRED,\n          APIProposalStateId.ABROGATED,\n        ].includes(proposalState as any);\n      });\n    });\n  }\n\n  function hasThreshold(): boolean | undefined {\n    if (state.thresholdRate === undefined) {\n      return undefined;\n    }\n\n    return state.thresholdRate >= state.minThreshold;\n  }\n\n  return (\n    <Context.Provider\n      value={{\n        ...state,\n        daoBarn,\n        daoReward,\n        daoGovernance,\n        actions: {\n          activate,\n          hasThreshold,\n          hasActiveProposal,\n        },\n      }}>\n      {children}\n    </Context.Provider>\n  );\n};\n\nexport default DAOProvider;\n","import React from 'react';\nimport AntdDivider, { DividerProps as AntdDividerProps } from 'antd/lib/divider';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nconst Divider: React.FC<AntdDividerProps> = props => {\n  const { className, ...dividerProps } = props;\n\n  return <AntdDivider className={cn(s.divider, className)} {...dividerProps} />;\n};\n\nexport default Divider;\n","import React from 'react';\nimport AntdSkeleton, { SkeletonProps as AntdSkeletonProps } from 'antd/lib/skeleton';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nexport type SkeletonProps = AntdSkeletonProps & {\n  width?: number;\n  height?: number;\n};\n\nconst Skeleton: React.FC<SkeletonProps> = props => {\n  const { className, width, height, loading, children, ...skeletonProps } = props;\n\n  return (\n    <AntdSkeleton\n      className={cn(s.skeleton, className)}\n      title={{ width, style: { height } }}\n      active\n      loading={loading !== false}\n      paragraph={{ rows: 0 }}\n      {...skeletonProps}>\n      {children}\n    </AntdSkeleton>\n  );\n};\n\nexport default Skeleton;\n","import React, { FC, ReactNode, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport useInterval from '@rooks/use-interval';\n\nimport { useGeneral } from 'components/providers/generalProvider';\nimport { useReload } from 'hooks/useReload';\n\nexport type UseLeftTimeOptions = {\n  end?: number | Date;\n  delay?: number;\n  onStart?: (left: number) => void;\n  onStop?: (left: number) => void;\n  onTick?: (left: number) => void;\n  onEnd?: () => void;\n};\n\nexport type UseLeftTimeReturn = {\n  isStarted: boolean;\n  isRunning: boolean;\n  start: () => void;\n  stop: () => void;\n  pause: () => void;\n  resume: () => void;\n};\n\nexport function useLeftTime(options: UseLeftTimeOptions): UseLeftTimeReturn {\n  const optsRef = useRef(options);\n  optsRef.current = options;\n\n  const [isStarted, setStarted] = useState(false);\n  const [isRunning, setRunning] = useState(false);\n\n  const getLeftTime = useCallback(() => {\n    if (!optsRef.current.end) {\n      return undefined;\n    }\n\n    return Math.max(optsRef.current.end.valueOf() - Date.now(), 0);\n  }, []);\n\n  const [startInterval, stopInterval] = useInterval(\n    () => {\n      const leftTime = getLeftTime();\n      optsRef.current.onTick?.(leftTime ?? 0);\n\n      if (leftTime === 0) {\n        setStarted(false);\n        stopInterval();\n        optsRef.current.onEnd?.();\n      }\n    },\n    options.delay ?? 1_000,\n    false,\n  );\n\n  useEffect(() => {\n    if (!options.end || Date.now() < options.end) {\n      setStarted(true);\n      startInterval();\n      optsRef.current.onStart?.(getLeftTime() ?? 0);\n    }\n\n    return () => {\n      setStarted(false);\n      stopInterval();\n    };\n  }, [options.end]);\n\n  return useMemo(() => {\n    return {\n      isStarted,\n      isRunning,\n      start: () => {\n        setStarted(true);\n        setRunning(true);\n        startInterval();\n        optsRef.current.onStart?.(getLeftTime() ?? 0);\n      },\n      stop: () => {\n        setRunning(false);\n        setStarted(false);\n        stopInterval();\n        optsRef.current.onStop?.(getLeftTime() ?? 0);\n      },\n      pause: () => {\n        setRunning(false);\n        stopInterval();\n      },\n      resume: () => {\n        setRunning(true);\n        startInterval();\n      },\n    };\n  }, [isRunning, stopInterval, startInterval]);\n}\n\nexport type UseLeftTimeProps = UseLeftTimeOptions & {\n  children: (leftTime: number) => ReactNode;\n};\n\nexport const UseLeftTime: FC<UseLeftTimeProps> = props => {\n  const { windowState } = useGeneral();\n  const [reload] = useReload();\n  const leftTimeRef = useRef<number | undefined>();\n\n  const { isStarted, isRunning, pause, resume } = useLeftTime({\n    ...props,\n    onStart: value => {\n      leftTimeRef.current = value;\n      reload();\n      props.onStart?.(value);\n    },\n    onStop: value => {\n      leftTimeRef.current = value;\n      reload();\n      props.onStop?.(value);\n    },\n    onTick: value => {\n      leftTimeRef.current = value;\n      reload();\n      props.onTick?.(value);\n    },\n  });\n\n  useEffect(() => {\n    if (!isStarted) {\n      return;\n    }\n\n    if (!isRunning && windowState.isVisible) {\n      resume();\n    }\n\n    if (isRunning && !windowState.isVisible) {\n      pause();\n    }\n  }, [windowState.isVisible, isStarted, isRunning]);\n\n  return <>{props.children(leftTimeRef.current ?? 0)}</>;\n};\n","import React, { CSSProperties, FC, HTMLProps, ReactNode } from 'react';\nimport { NavLink, NavLinkProps } from 'react-router-dom';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\ntype NavTabProps = NavLinkProps | HTMLProps<HTMLAnchorElement>;\n\ntype NavTabsProps = {\n  tabs: NavTabProps[];\n  className?: string;\n  /**\n   * @example\n   * <Tabs shadows=\"--theme-card-color\" /> in case of string, place background color variable,\n   * <Tabs shadows /> `--theme-body-color` will be used in case of `true`\n   */\n  shadows?: boolean | string;\n};\n\nexport const NavTabs: FC<NavTabsProps> = ({ className, tabs, shadows = false }) => {\n  return (\n    <div\n      className={cn(s.tabs, className, {\n        [s.shadows]: shadows,\n      })}\n      style={\n        {\n          '--tabs-bg': `var(${typeof shadows === 'string' ? shadows : '--theme-body-color'})`,\n        } as CSSProperties\n      }>\n      {tabs.map(({ className, children, ...restTab }, idx) => {\n        // @ts-ignore\n        if (restTab.to) {\n          return (\n            // @ts-ignore\n            <NavLink key={idx} className={cn(s.tab, className)} activeClassName={s.active} {...restTab}>\n              {children}\n            </NavLink>\n          );\n        }\n\n        return (\n          <a key={idx} className={cn(s.tab, className)} rel=\"noopener noreferrer\" target=\"_blank\" {...restTab}>\n            {children}\n          </a>\n        );\n      })}\n    </div>\n  );\n};\n\nexport const HorizontalMenu: FC<NavTabsProps> = ({ className, ...rest }) => {\n  return <NavTabs {...rest} className={cn(s.horizontalMenu, className)} />;\n};\n\ntype TabProps<T> = {\n  id: T;\n  children: ReactNode;\n  className?: string;\n  disabled?: boolean;\n  onClick?: (id: T) => void;\n};\n\ntype TabsProps<T> = {\n  variation?: 'normal' | 'elastic';\n  tabs: TabProps<T>[];\n  activeKey: TabProps<T>['id'];\n  size?: 'normal' | 'small';\n  className?: string;\n  style?: CSSProperties;\n  onClick?: (id: TabProps<T>['id']) => void;\n};\n\nexport const Tabs = <T extends string>(props: TabsProps<T>) => {\n  const { variation = 'normal', tabs, activeKey, size, className, style } = props;\n\n  return (\n    <div\n      className={cn(className, {\n        [s.tabs]: variation === 'normal',\n        [s.elasticTabs]: variation === 'elastic',\n      })}\n      style={style}>\n      {tabs.map(({ id, className, onClick, ...tabRest }) => (\n        <button\n          key={id}\n          className={cn(s.tab, className, {\n            [s.active]: id === activeKey,\n            [s.small]: size === 'small',\n          })}\n          type=\"button\"\n          onClick={() => {\n            props.onClick?.(id);\n            onClick?.(id);\n          }}\n          {...tabRest}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport enum PeriodTabsKey {\n  day = '24h',\n  week = '1w',\n  month = '30d',\n}\n\nconst periodTabs = [\n  {\n    id: PeriodTabsKey.day,\n    children: '24h',\n  },\n  {\n    id: PeriodTabsKey.week,\n    children: '1w',\n  },\n  {\n    id: PeriodTabsKey.month,\n    children: '1mo',\n  },\n];\n\ntype PeriodChartTabsProps = Omit<TabsProps<PeriodTabsKey>, 'tabs' | 'variation'>;\n\nexport const PeriodChartTabs: React.FC<PeriodChartTabsProps> = props => {\n  return <Tabs<PeriodTabsKey> {...props} tabs={periodTabs} variation=\"elastic\" />;\n};\n\nexport enum PortfolioPeriodTabsKey {\n  week = '1w',\n  month = '30d',\n}\n\nconst portfolioPeriodTabs = [\n  {\n    id: PortfolioPeriodTabsKey.week,\n    children: '1w',\n  },\n  {\n    id: PortfolioPeriodTabsKey.month,\n    children: '1mo',\n  },\n];\n\ntype PortfolioPeriodChartTabsProps = Omit<TabsProps<PortfolioPeriodTabsKey>, 'tabs' | 'variation'>;\n\nexport const PortfolioPeriodChartTabs: React.FC<PortfolioPeriodChartTabsProps> = props => {\n  return <Tabs<PortfolioPeriodTabsKey> {...props} tabs={portfolioPeriodTabs} variation=\"elastic\" />;\n};\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\nimport { formatToken } from 'web3/utils';\n\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\nimport { useLeftTime } from 'hooks/useLeftTime';\nimport useMergeState from 'hooks/useMergeState';\nimport { useDAO } from 'modules/governance/components/dao-provider';\n\nimport { isValidAddress } from 'utils';\n\nimport s from './s.module.scss';\n\nexport type VotingDetailedModalProps = ModalProps;\n\ntype VotingDetailedModalState = {\n  leftBonus?: BigNumber;\n  leftTotalVotingPower?: BigNumber;\n};\n\nconst InitialState: VotingDetailedModalState = {\n  leftBonus: undefined,\n  leftTotalVotingPower: undefined,\n};\n\nconst VotingDetailedModal: React.FC<VotingDetailedModalProps> = props => {\n  const daoCtx = useDAO();\n  const { votingPower, userDelegatedTo, delegatedPower, userLockedUntil, balance: myBondBalance } = daoCtx.daoBarn!;\n\n  const [state, setState] = useMergeState<VotingDetailedModalState>(InitialState);\n\n  const isDelegated = isValidAddress(userDelegatedTo);\n  const loadedUserLockedUntil = React.useMemo(() => (userLockedUntil ?? Date.now()) - Date.now(), [userLockedUntil]);\n\n  useLeftTime({\n    end: !isDelegated ? userLockedUntil ?? 0 : 0,\n    delay: 1_000,\n    onTick: leftTime => {\n      let bonus = votingPower?.minus(delegatedPower ?? BigNumber.ZERO);\n\n      if (!isDelegated) {\n        bonus = bonus?.minus(myBondBalance ?? BigNumber.ZERO);\n      }\n\n      const leftBonus = bonus?.multipliedBy(leftTime).div(loadedUserLockedUntil);\n      const leftTotalVotingPower = votingPower?.minus(bonus ?? BigNumber.ZERO).plus(leftBonus ?? BigNumber.ZERO);\n\n      setState({\n        leftBonus,\n        leftTotalVotingPower,\n      });\n    },\n  });\n\n  React.useEffect(() => {\n    setState({\n      leftBonus: isDelegated\n        ? BigNumber.ZERO\n        : votingPower?.minus(myBondBalance ?? BigNumber.ZERO).minus(delegatedPower ?? BigNumber.ZERO),\n      leftTotalVotingPower: votingPower,\n    });\n  }, [isDelegated]);\n\n  return (\n    <Modal className={s.component} title=\"Voting power detailed view\" {...props}>\n      <dl className={s.list}>\n        <div className={s.row}>\n          <dt className={s.term}>\n            <Icon name=\"wallet-outlined\" width={20} height={20} className={s.termIcon} />\n            My staked balance\n          </dt>\n          <dd className={s.data}>\n            {formatToken(myBondBalance)}\n            <Icon name=\"circle-plus-outlined\" width={18} height={18} color=\"green\" className={s.dataIcon} />\n          </dd>\n        </div>\n        <div className={s.row}>\n          <dt className={s.term}>\n            <Icon name=\"wallet-outlined\" width={20} height={20} className={s.termIcon} />\n            Delegated by me\n          </dt>\n          <dd className={s.data}>\n            {isDelegated ? formatToken(myBondBalance) : 0}\n            <Icon name=\"circle-minus-outlined\" width={18} height={18} color=\"red\" className={s.dataIcon} />\n          </dd>\n        </div>\n        <div className={s.row}>\n          <dt className={s.term}>\n            <Icon name=\"rate-outlined\" width={20} height={20} className={s.termIcon} />\n            Locked balance bonus\n          </dt>\n          <dd className={s.data}>\n            {state.leftBonus?.gt(BigNumber.ZERO) ? '> ' : ''}\n            {formatToken(state.leftBonus)}\n            <Icon name=\"circle-plus-outlined\" width={18} height={18} color=\"green\" className={s.dataIcon} />\n          </dd>\n        </div>\n        <div className={s.row}>\n          <dt className={s.term}>\n            <Icon name=\"handshake-outlined\" width={20} height={20} className={s.termIcon} />\n            Delegated to me\n          </dt>\n          <dd className={s.data}>\n            {formatToken(delegatedPower)}\n            <Icon name=\"circle-plus-outlined\" width={18} height={18} color=\"green\" className={s.dataIcon} />\n          </dd>\n        </div>\n        <div className={s.separator} />\n        <div className={s.row}>\n          <dt className={s.term}>\n            <Icon name=\"stamp-outlined\" width={20} height={20} className={s.termIcon} />\n            My total voting power\n          </dt>\n          <Text type=\"h3\" weight=\"bold\" tag=\"dd\" className={s.data}>\n            {formatToken(state.leftTotalVotingPower)}\n          </Text>\n        </div>\n      </dl>\n    </Modal>\n  );\n};\n\nexport default VotingDetailedModal;\n","import React, { useEffect, useState } from 'react';\nimport { Spin } from 'antd';\nimport cn from 'classnames';\nimport Erc20Contract from 'web3/erc20Contract';\nimport { formatBigValue, formatToken } from 'web3/utils';\n\nimport Button from 'components/antd/button';\nimport Divider from 'components/antd/divider';\nimport Skeleton from 'components/antd/skeleton';\nimport Tooltip from 'components/antd/tooltip';\nimport { ExternalLink } from 'components/button';\nimport Grid from 'components/custom/grid';\nimport { Hint, Text } from 'components/custom/typography';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIcon } from 'components/token-icon';\nimport { UseLeftTime } from 'hooks/useLeftTime';\nimport useMergeState from 'hooks/useMergeState';\nimport { useDAO } from 'modules/governance/components/dao-provider';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport VotingDetailedModal from '../voting-detailed-modal';\n\nimport { getFormattedDuration, getNowTs, inRange } from 'utils';\n\nimport s from './s.module.scss';\n\ntype VotingHeaderState = {\n  claiming: boolean;\n  showDetailedView: boolean;\n};\n\nconst InitialState: VotingHeaderState = {\n  claiming: false,\n  showDetailedView: false,\n};\n\nconst VotingHeader: React.FC = () => {\n  const daoCtx = useDAO();\n  const walletCtx = useWallet();\n  const { projectToken } = useKnownTokens();\n  const [state, setState] = useMergeState<VotingHeaderState>(InitialState);\n\n  const { toClaim } = daoCtx.daoReward;\n  const bondBalance = (projectToken.contract as Erc20Contract).balance?.unscaleBy(projectToken.decimals);\n  const { votingPower, userLockedUntil, balance: myStakedBalance } = daoCtx.daoBarn;\n  const [multiplier, setMultiplier] = useState(1);\n\n  useEffect(() => {\n    if (walletCtx.account) {\n      daoCtx.daoBarn.getMultiplierAtTs(walletCtx.account, getNowTs()).then(value => setMultiplier(value.toNumber()));\n    }\n  }, [walletCtx.account]);\n\n  const loadedUserLockedUntil = (userLockedUntil ?? Date.now()) - Date.now();\n\n  function handleLeftTimeEnd() {\n    // daoCtx.daoBarn.reload(); /// TODO: check\n  }\n\n  function handleClaim() {\n    setState({ claiming: true });\n\n    daoCtx.daoReward\n      .claim()\n      .catch(Error)\n      .then(() => {\n        // daoCtx.daoReward.reload(); /// TODO: check\n        (projectToken.contract as Erc20Contract).loadBalance().catch(Error);\n        setState({ claiming: false });\n      });\n  }\n\n  return (\n    <div className={cn(s.component, 'pv-24 ph-64 sm-ph-16')}>\n      <Text type=\"lb2\" weight=\"semibold\" color=\"blue\" className=\"mb-16\">\n        My Account status\n      </Text>\n      <Grid flow=\"col\" gap={24} className={s.items}>\n        <Grid flow=\"row\" gap={4}>\n          <Text type=\"p2\" color=\"secondary\">\n            Current staked\n          </Text>\n          <Grid flow=\"col\" gap={16} align=\"center\">\n            <Skeleton loading={myStakedBalance === undefined}>\n              <Text type=\"h3\" weight=\"bold\" color=\"primary\">\n                {formatToken(myStakedBalance)}\n              </Text>\n            </Skeleton>\n            <TokenIcon name={projectToken.icon} />\n          </Grid>\n        </Grid>\n        <Divider type=\"vertical\" />\n        <Grid flow=\"row\" gap={4}>\n          <Text type=\"p2\" color=\"secondary\">\n            Current reward\n          </Text>\n          <Grid flow=\"col\" gap={16} align=\"center\">\n            <Tooltip\n              title={formatToken(toClaim ?? 0, {\n                decimals: projectToken.decimals,\n              })}>\n              <Text type=\"h3\" weight=\"bold\" color=\"primary\">\n                {formatToken(toClaim ?? 0, {\n                  hasLess: true,\n                })}\n              </Text>\n            </Tooltip>\n            <TokenIcon name={projectToken.icon} />\n            <Button type=\"light\" disabled={toClaim?.isZero()} onClick={handleClaim}>\n              {!state.claiming ? 'Claim' : <Spin spinning />}\n            </Button>\n          </Grid>\n        </Grid>\n        <Divider type=\"vertical\" />\n        <Grid flow=\"row\" gap={4}>\n          <Text type=\"p2\" color=\"secondary\">\n            Total voting power\n          </Text>\n          <Grid flow=\"col\" gap={16} align=\"center\">\n            <Skeleton loading={votingPower === undefined}>\n              <Text type=\"h3\" weight=\"bold\" color=\"primary\">\n                {formatToken(votingPower)}\n              </Text>\n            </Skeleton>\n            <Button type=\"light\" onClick={() => setState({ showDetailedView: true })}>\n              Detailed view\n            </Button>\n\n            {state.showDetailedView && <VotingDetailedModal onCancel={() => setState({ showDetailedView: false })} />}\n          </Grid>\n        </Grid>\n\n        <UseLeftTime end={userLockedUntil ?? 0} delay={1_000} onEnd={handleLeftTimeEnd}>\n          {leftTime => {\n            const leftMultiplier = (multiplier - 1) * (leftTime / loadedUserLockedUntil) + 1;\n\n            return leftMultiplier > 1 ? (\n              <>\n                <Divider type=\"vertical\" />\n                <Grid flow=\"row\" gap={4}>\n                  <Hint\n                    text={\n                      <>\n                        <Text type=\"p2\">\n                          The multiplier mechanic allows users to lock $BOND for a period up to 1 year and get a bonus\n                          of up to 2x vBOND. The bonus is linear, as per the following example:\n                        </Text>\n                        <ul>\n                          <li>\n                            <Text type=\"p2\">lock 1000 $BOND for 1 year  get back 2000 vBOND</Text>\n                          </li>\n                          <li>\n                            <Text type=\"p2\">lock 1000 $BOND for 6 months  get back 1500 vBOND</Text>\n                          </li>\n                        </ul>\n                        <ExternalLink\n                          href=\"https://docs.barnbridge.com/governance/barnbridge-dao/multiplier-and-voting-power\"\n                          variation=\"link\">\n                          Learn more\n                        </ExternalLink>\n                      </>\n                    }>\n                    <Text type=\"p2\" color=\"secondary\">\n                      Multiplier & Lock timer\n                    </Text>\n                  </Hint>\n\n                  <Grid flow=\"col\" gap={8} align=\"center\">\n                    <Tooltip title={`x${leftMultiplier}`}>\n                      <Text type=\"lb1\" weight=\"bold\" color=\"blue\" className={s.ratio}>\n                        {inRange(multiplier, 1, 1.01) ? '>' : ''} {formatBigValue(leftMultiplier, 2, '-', 2)}x\n                      </Text>\n                    </Tooltip>\n                    <Text type=\"p2\" color=\"secondary\">\n                      for\n                    </Text>\n                    <Text type=\"h3\" weight=\"bold\" color=\"primary\">\n                      {getFormattedDuration(0, userLockedUntil)}\n                    </Text>\n                  </Grid>\n                </Grid>\n              </>\n            ) : undefined;\n          }}\n        </UseLeftTime>\n      </Grid>\n    </div>\n  );\n};\n\nexport default VotingHeader;\n","import React from 'react';\nimport AntdProgress, { ProgressProps as AntdProgressProps } from 'antd/lib/progress';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nexport type ProgressProps = AntdProgressProps & {\n  className?: string;\n  acceptance?: number;\n};\n\nconst Progress: React.FC<ProgressProps> = props => {\n  const { className, acceptance, ...progressProps } = props;\n  const acceptanceMode = acceptance !== undefined;\n  const acceptanceFulfilled = Number(acceptance) <= Number(props.percent);\n\n  return (\n    <AntdProgress\n      className={cn(s.component, acceptanceMode && s.acceptance, acceptanceFulfilled && s.fulfilled, className)}\n      showInfo={false}\n      success={\n        acceptanceMode\n          ? {\n              percent: acceptance,\n              strokeColor: acceptanceFulfilled ? String(props.strokeColor) : props.trailColor,\n            }\n          : undefined\n      }\n      {...progressProps}\n    />\n  );\n};\n\nexport default Progress;\n","import React from 'react';\nimport cn from 'classnames';\nimport { formatToken } from 'web3/utils';\n\nimport Button from 'components/antd/button';\nimport Progress from 'components/antd/progress';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport { Hint, Text } from 'components/custom/typography';\nimport { useConfig } from 'components/providers/configProvider';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIcon } from 'components/token-icon';\n\nimport { useDAO } from '../../../../components/dao-provider';\n\nexport type ActivationThresholdProps = {\n  className?: string;\n};\n\nconst ActivationThreshold: React.FC<ActivationThresholdProps> = props => {\n  const { projectToken } = useKnownTokens();\n  const config = useConfig();\n  const daoCtx = useDAO();\n  const [activating, setActivating] = React.useState<boolean>(false);\n\n  function handleActivate() {\n    setActivating(true);\n    daoCtx.actions\n      .activate()\n      .catch(Error)\n      .then(() => {\n        setActivating(false);\n      });\n  }\n\n  return (\n    <div className={cn('card p-24', props.className)}>\n      <Grid flow=\"row\" gap={24} align=\"start\">\n        <Hint\n          text={\n            <Text type=\"p2\">\n              For the DAO to be activated, a threshold of {formatToken(config.dao?.activationThreshold)} $\n              {projectToken.symbol} tokens staked has to be met.\n            </Text>\n          }>\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Activation threshold\n          </Text>\n        </Hint>\n        <Grid gap={12} colsTemplate=\"auto 24px\" width=\"100%\">\n          <Progress\n            percent={daoCtx.activationRate}\n            trailColor=\"var(--theme-border-color)\"\n            strokeWidth={24}\n            strokeColor={{\n              '0%': 'var(--theme-blue-color)',\n              '100%': 'var(--theme-green-color)',\n            }}\n          />\n          <Icon name=\"ribbon-outlined\" />\n        </Grid>\n        <Grid flow=\"col\" gap={8}>\n          <TokenIcon name={projectToken.icon} />\n          <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n            {formatToken(daoCtx.bondStaked)}\n          </Text>\n          <Text type=\"p1\" weight=\"semibold\" color=\"secondary\">\n            / {formatToken(config.dao?.activationThreshold)} already staked.\n          </Text>\n        </Grid>\n        {daoCtx.activationRate === 100 && !daoCtx.isActive && (\n          <Button type=\"primary\" loading={activating} onClick={handleActivate}>\n            Activate\n          </Button>\n        )}\n      </Grid>\n    </div>\n  );\n};\n\nexport default ActivationThreshold;\n","import React from 'react';\nimport AntdTable, { TableProps as AntdTableProps } from 'antd/lib/table';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nconst Table = <T extends Record<string, any>>(\n  props: React.PropsWithChildren<AntdTableProps<T>>,\n): React.ReactElement => {\n  const { className, pagination, ...tableProps } = props;\n\n  return (\n    <AntdTable<T>\n      className={cn(s.component, className)}\n      bordered={false}\n      showSorterTooltip={false}\n      pagination={\n        pagination\n          ? {\n              showSizeChanger: false,\n              ...pagination,\n            }\n          : false\n      }\n      {...tableProps}\n    />\n  );\n};\n\nexport default Table;\n","import React from 'react';\nimport { ColumnsType } from 'antd/lib/table/interface';\nimport BigNumber from 'bignumber.js';\nimport cn from 'classnames';\nimport { formatBigValue, shortenAddr } from 'web3/utils';\n\nimport Table from 'components/antd/table';\nimport { ExplorerAddressLink } from 'components/button';\nimport Identicon from 'components/custom/identicon';\nimport { Text } from 'components/custom/typography';\nimport { APIVoterEntity, useDaoAPI } from 'modules/governance/api';\n\nconst Columns: ColumnsType<APIVoterEntity> = [\n  {\n    title: 'Address',\n    dataIndex: 'address',\n    render: function Render(value: string) {\n      return (\n        <div className=\"flex col-gap-16 align-center\">\n          <Identicon address={value} width={32} height={32} />\n          <ExplorerAddressLink address={value} variation=\"link\">\n            <Text type=\"p1\" weight=\"semibold\" ellipsis className=\"hidden-mobile hidden-tablet\">\n              {value}\n            </Text>\n            <Text type=\"p1\" weight=\"semibold\" wrap={false} className=\"hidden-desktop\">\n              {shortenAddr(value)}\n            </Text>\n          </ExplorerAddressLink>\n        </div>\n      );\n    },\n  },\n  {\n    title: 'Staked Balance',\n    dataIndex: 'bondStaked',\n    width: 200,\n    align: 'right',\n    render: (value: BigNumber) => (\n      <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className=\"ml-auto\">\n        {formatBigValue(value, 2, '-', 2)}\n      </Text>\n    ),\n  },\n  {\n    title: 'Voting Power',\n    dataIndex: 'votingPower',\n    width: 200,\n    align: 'right',\n    render: (value: BigNumber) => (\n      <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className=\"ml-auto\">\n        {formatBigValue(value, 2, '-', 2)}\n      </Text>\n    ),\n  },\n  {\n    title: 'Votes',\n    dataIndex: 'votes',\n    width: 150,\n    align: 'right',\n    render: (value: number) => (\n      <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className=\"ml-auto\">\n        {value}\n      </Text>\n    ),\n  },\n  {\n    title: 'Proposals',\n    dataIndex: 'proposals',\n    width: 150,\n    align: 'right',\n    render: (value: number) => (\n      <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className=\"ml-auto\">\n        {value}\n      </Text>\n    ),\n  },\n];\n\nexport type VotersTableProps = {\n  className?: string;\n};\n\nconst VotersTable: React.FC<VotersTableProps> = props => {\n  const { className } = props;\n\n  const daoAPI = useDaoAPI();\n  const [loading, setLoading] = React.useState<boolean>(false);\n  const [voters, setVoters] = React.useState<APIVoterEntity[]>([]);\n  const [totalVoters, setTotal] = React.useState<number>(0);\n  const [page, setPage] = React.useState<number>(1);\n  const pageSize = 10;\n\n  React.useEffect(() => {\n    setLoading(true);\n\n    daoAPI\n      .fetchVoters(page, pageSize)\n      .then(data => {\n        setVoters(data.data);\n        setTotal(data.meta.count);\n        setLoading(false);\n      })\n      .catch(() => {\n        setLoading(false);\n      });\n  }, [page, pageSize]);\n\n  return (\n    <div className={cn('card', className)}>\n      <div className=\"card-header\">\n        <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n          Voter weights\n        </Text>\n      </div>\n      <Table<APIVoterEntity>\n        columns={Columns}\n        dataSource={voters}\n        rowKey=\"address\"\n        loading={loading}\n        pagination={{\n          total: totalVoters,\n          pageSize,\n          current: page,\n          position: ['bottomRight'],\n          showTotal: (total: number, [from, to]: [number, number]) => (\n            <>\n              <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"hidden-mobile\">\n                Showing {from} to {to} out of {total} stakers\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"hidden-tablet hidden-desktop\">\n                {from}..{to} of {total}\n              </Text>\n            </>\n          ),\n          onChange: setPage,\n        }}\n        scroll={{\n          x: true,\n        }}\n      />\n    </div>\n  );\n};\n\nexport default VotersTable;\n","import React from 'react';\nimport cn from 'classnames';\nimport Erc20Contract from 'web3/erc20Contract';\nimport { formatToken, formatUSD } from 'web3/utils';\n\nimport Tooltip from 'components/antd/tooltip';\nimport { ExternalLink } from 'components/button';\nimport Grid from 'components/custom/grid';\nimport { Hint, Text } from 'components/custom/typography';\nimport { Icon } from 'components/icon';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { UseLeftTime } from 'hooks/useLeftTime';\nimport { APIOverviewData, useDaoAPI } from 'modules/governance/api';\nimport { useDAO } from 'modules/governance/components/dao-provider';\n\nimport { getFormattedDuration } from 'utils';\n\nimport s from './s.module.scss';\n\nexport type VotingStatListProps = {\n  className?: string;\n};\n\nconst VotingStatList: React.FC<VotingStatListProps> = props => {\n  const { className } = props;\n\n  const daoAPI = useDaoAPI();\n  const daoCtx = useDAO();\n  const { projectToken, convertTokenInUSD } = useKnownTokens();\n  const [overview, setOverview] = React.useState<APIOverviewData | undefined>();\n\n  React.useEffect(() => {\n    daoAPI.fetchOverviewData().then(setOverview);\n  }, []);\n\n  return (\n    <div className={cn(s.cards, className)}>\n      <div className=\"card p-24\">\n        <Grid flow=\"row\" gap={48}>\n          <Hint\n            text={\n              <Text type=\"p2\">\n                This number shows the amount of $BOND (and their USD value) currently staked in the DAO.\n              </Text>\n            }>\n            <Text type=\"lb2\" weight=\"semibold\" color=\"blue\">\n              Total Staked\n            </Text>\n          </Hint>\n          <Grid flow=\"row\" gap={4}>\n            <Grid flow=\"col\" gap={4} align=\"end\">\n              <Text type=\"h2\" weight=\"bold\" color=\"primary\">\n                {formatToken(daoCtx.daoBarn.bondStaked)}\n              </Text>\n              <Text type=\"p1\" color=\"secondary\">\n                {projectToken.symbol}\n              </Text>\n              <Tooltip\n                title={\n                  <>\n                    The BarnBridge Governance contracts are covered by: <br />- Bridge Mutual,{' '}\n                    <a\n                      href=\"https://app.bridgemutual.io/user/cover/0xdb9A242cfD588507106919051818e771778202e9\"\n                      rel=\"noopener noreferrer\"\n                      target=\"_blank\">\n                      click here\n                    </a>{' '}\n                    to purchase coverage\n                  </>\n                }>\n                <Icon name=\"insured\" color=\"green\" size={32} />\n              </Tooltip>\n            </Grid>\n            <Text type=\"p1\" color=\"secondary\">\n              {formatUSD(convertTokenInUSD(daoCtx.daoBarn.bondStaked, projectToken.symbol))}\n            </Text>\n          </Grid>\n        </Grid>\n      </div>\n\n      <div className=\"card p-24\">\n        <Grid flow=\"row\" gap={48}>\n          <Hint\n            text={\n              <Grid flow=\"row\" gap={8} align=\"start\">\n                <Text type=\"p2\">\n                  This number shows the amount of vBOND currently minted. This number may differ from the amount of\n                  $BOND staked because of the multiplier mechanic\n                </Text>\n                <ExternalLink\n                  href=\"https://integrations.barnbridge.com/specs/dao-specifications#multiplier-and-voting-power\"\n                  className=\"link-blue\"\n                  style={{ fontWeight: 600 }}>\n                  Learn more\n                </ExternalLink>\n              </Grid>\n            }>\n            <Text type=\"lb2\" weight=\"semibold\" color=\"blue\">\n              VSWINGBY\n            </Text>\n          </Hint>\n          <Grid flow=\"row\" gap={4}>\n            <Text type=\"h2\" weight=\"bold\" color=\"primary\">\n              {formatToken(overview?.totalVbond)}\n            </Text>\n          </Grid>\n        </Grid>\n      </div>\n\n      <div className=\"card p-24\">\n        <Grid flow=\"row\" gap={48}>\n          <Hint\n            text={\n              <Grid flow=\"row\" gap={8} align=\"start\">\n                <Text type=\"p2\">\n                  This counter shows the average amount of time $BOND stakers locked their deposits in order to take\n                  advantage of the voting power bonus.\n                </Text>\n                <ExternalLink\n                  href=\"https://integrations.barnbridge.com/specs/dao-specifications#users-can-lock-bond-for-vbond\"\n                  className=\"link-blue\"\n                  style={{ fontWeight: 600 }}>\n                  Learn more\n                </ExternalLink>\n              </Grid>\n            }>\n            <Text type=\"lb2\" weight=\"semibold\" color=\"blue\">\n              Avg. Lock Time\n            </Text>\n          </Hint>\n          <Grid flow=\"row\" gap={4}>\n            <Text type=\"h2\" weight=\"bold\" color=\"primary\">\n              {overview?.avgLockTimeSeconds ? getFormattedDuration(overview?.avgLockTimeSeconds) : '-'}\n            </Text>\n            <Text type=\"p1\" color=\"secondary\">\n              average time\n            </Text>\n          </Grid>\n        </Grid>\n      </div>\n\n      <div className=\"card p-24\">\n        <Grid flow=\"row\" gap={48}>\n          <Hint\n            text={\n              <Text type=\"p2\">\n                This number shows the $BOND token rewards distributed so far out of the total of{' '}\n                {formatToken(daoCtx.daoReward.pullFeature?.totalAmount)} that are going to be available for the DAO\n                Staking.\n              </Text>\n            }>\n            <Text type=\"lb2\" weight=\"semibold\" color=\"blue\">\n              Staking rewards\n            </Text>\n          </Hint>\n          <Grid flow=\"row\" gap={4}>\n            <UseLeftTime end={(daoCtx.daoReward.pullFeature?.endTs ?? 0) * 1000} delay={5_000}>\n              {() => (\n                <Text type=\"h2\" weight=\"bold\" color=\"primary\">\n                  {formatToken(daoCtx.daoReward.bondRewards)}\n                </Text>\n              )}\n            </UseLeftTime>\n            <Text type=\"p1\" color=\"secondary\">\n              out of {formatToken(daoCtx.daoReward.pullFeature?.totalAmount)}\n            </Text>\n          </Grid>\n        </Grid>\n      </div>\n\n      <div className=\"card p-24\">\n        <Grid flow=\"row\" gap={48}>\n          <Hint\n            text={\n              <Grid flow=\"row\" gap={8} align=\"start\">\n                <Text type=\"p2\">This number shows the amount of vBOND that is delegated to other addresses.</Text>\n                <ExternalLink\n                  href=\"https://integrations.barnbridge.com/specs/dao-specifications#users-can-delegate-vbond-to-other-users\"\n                  className=\"link-blue\"\n                  style={{ fontWeight: 600 }}>\n                  Learn more\n                </ExternalLink>\n              </Grid>\n            }>\n            <Text type=\"lb2\" weight=\"semibold\" color=\"blue\">\n              Delegated\n            </Text>\n          </Hint>\n          <Grid flow=\"row\" gap={4}>\n            <Text type=\"h2\" weight=\"bold\" color=\"primary\">\n              {formatToken(overview?.totalDelegatedPower)}\n            </Text>\n            <Text type=\"p1\" color=\"secondary\">\n              out of{' '}\n              {formatToken((projectToken.contract as Erc20Contract).totalSupply?.unscaleBy(projectToken.decimals))}\n            </Text>\n          </Grid>\n        </Grid>\n      </div>\n\n      <div className=\"card p-24\">\n        <Grid flow=\"row\" gap={48}>\n          <Hint\n            text={\n              <Text type=\"p2\">\n                This card shows the number of holders of $BOND and compares it to the number of stakers and voters in\n                the DAO.\n              </Text>\n            }>\n            <Text type=\"lb2\" weight=\"semibold\" color=\"blue\">\n              Addresses\n            </Text>\n          </Hint>\n          <Grid flow=\"row\" gap={4}>\n            <Grid flow=\"col\" gap={4} align=\"end\">\n              <Text type=\"h2\" weight=\"bold\" color=\"primary\">\n                {overview?.holdersStakingExcluded}\n              </Text>\n              <Text type=\"p1\" color=\"secondary\">\n                holders\n              </Text>\n            </Grid>\n            <Text type=\"p1\" color=\"secondary\">\n              {overview?.barnUsers} stakers & {overview?.voters} voters\n            </Text>\n          </Grid>\n        </Grid>\n      </div>\n    </div>\n  );\n};\n\nexport default VotingStatList;\n","import React from 'react';\n\nimport { useDAO } from '../../components/dao-provider';\nimport ActivationThreshold from './components/activation-threshold';\nimport VotersTable from './components/voters-table';\nimport VotingStatList from './components/voting-stat-list';\n\nconst OverviewView: React.FC = () => {\n  const daoCtx = useDAO();\n\n  return (\n    <>\n      {daoCtx.isActive === false && <ActivationThreshold className=\"full-width mb-32\" />}\n      <VotingStatList className=\"mb-32\" />\n      <VotersTable />\n    </>\n  );\n};\n\nexport default OverviewView;\n","import React from 'react';\nimport AntdForm, {\n  FormItemProps as AntdFormItemProps,\n  FormListProps as AntdFormListProps,\n  FormProps as AntdFormProps,\n} from 'antd/lib/form';\nimport cn from 'classnames';\n\nimport { Icon } from 'components/icon';\n\nimport Grid from '../../custom/grid';\nimport Tooltip from '../tooltip';\n\nimport s from './s.module.scss';\n\nexport type FormListProps = AntdFormListProps;\n\nconst FormList: React.FC<FormListProps> = props => {\n  const { children, ...listProps } = props;\n\n  return <AntdForm.List {...listProps}>{children}</AntdForm.List>;\n};\n\nexport type FormItemProps = AntdFormItemProps<any> & {\n  hint?: string;\n};\n\nconst FormItem: React.FC<FormItemProps> = props => {\n  const { className, label, hint, extra, children, ...itemProps } = props;\n\n  return (\n    <AntdForm.Item\n      className={cn(s.item, className)}\n      {...itemProps}\n      label={\n        <>\n          <Grid flow=\"col\" gap={4} align=\"center\">\n            {label}\n            {hint && (\n              <Tooltip title={hint}>\n                <span>\n                  <Icon name=\"info\" size={15} />\n                </span>\n              </Tooltip>\n            )}\n          </Grid>\n          {extra}\n        </>\n      }>\n      {children}\n    </AntdForm.Item>\n  );\n};\n\nexport type FormProps = AntdFormProps;\n\nconst Form: React.FC<FormProps> = props => {\n  const { className, children, ...formProps } = props;\n\n  return (\n    <AntdForm className={cn(s.form, className)} layout=\"vertical\" requiredMark={false} {...formProps}>\n      {children}\n    </AntdForm>\n  );\n};\n\nexport type StaticFormProps = {\n  Item: React.FC<FormItemProps>;\n  List: React.FC<FormListProps>;\n};\n\n(Form as any as StaticFormProps).Item = FormItem;\n(Form as any as StaticFormProps).List = FormList;\n\nexport default Form as React.FC<FormProps> & StaticFormProps;\n","import React from 'react';\nimport AntdRadio, { RadioProps as AntdRadioProps } from 'antd/lib/radio';\nimport cn from 'classnames';\n\nimport Grid from 'components/custom/grid';\n\nimport s from './s.module.scss';\n\nexport type RadioButtonProps = {\n  label: React.ReactNode;\n  hint?: React.ReactNode;\n};\n\nconst RadioButton: React.FC<AntdRadioProps & RadioButtonProps> = props => {\n  const { label, hint, className, ...radioProps } = props;\n\n  return (\n    <AntdRadio className={cn(s.component, className)} {...radioProps}>\n      <Grid flow=\"row\" gap={4}>\n        {label}\n        {hint}\n      </Grid>\n    </AntdRadio>\n  );\n};\n\nexport default RadioButton;\n","import React from 'react';\nimport AntdRadio, { RadioChangeEvent, RadioGroupProps } from 'antd/lib/radio';\nimport AntdSpin from 'antd/lib/spin';\n\nimport RadioButton from 'components/antd/radio-button';\nimport Grid from 'components/custom/grid';\nimport { Text } from 'components/custom/typography';\nimport { useNetwork } from 'components/providers/networkProvider';\nimport useMergeState from 'hooks/useMergeState';\n\nimport s from './s.module.scss';\n\ntype GasFeeOption = {\n  key: string;\n  name: string;\n  value: number;\n};\n\ntype GasFeeListState = {\n  options: GasFeeOption[];\n  loading: boolean;\n  selected?: GasFeeOption;\n};\n\nexport type GasFeeListProps = RadioGroupProps & {\n  value?: GasFeeOption;\n  onChange?: (value: GasFeeOption) => void;\n};\n\nconst GasFeeList: React.FC<GasFeeListProps> = props => {\n  const { className, value, onChange, ...groupProps } = props;\n\n  const { activeNetwork } = useNetwork();\n  const [state, setState] = useMergeState<GasFeeListState>({\n    options: [],\n    loading: false,\n    selected: undefined,\n  });\n\n  React.useEffect(() => {\n    setState({\n      loading: true,\n    });\n\n    const url = `${activeNetwork.explorer.apiUrl}/api?module=gastracker&action=gasoracle&apikey=${activeNetwork.explorer.key}`;\n\n    fetch(url)\n      .then(result => result.json())\n      .then(result => result.result)\n      .then(result => {\n        return {\n          veryFast: Number(result.FastGasPrice),\n          fast: Number(result.ProposeGasPrice),\n          average: Math.round((Number(result.ProposeGasPrice) + Number(result.SafeGasPrice)) / 2),\n          safeLow: Number(result.SafeGasPrice),\n        };\n      })\n      .then(result => {\n        const options = [\n          {\n            key: 'fastest',\n            name: 'Very fast',\n            value: result.veryFast,\n          },\n          {\n            key: 'fast',\n            name: 'Fast',\n            value: result.fast,\n          },\n          {\n            key: 'average',\n            name: 'Standard',\n            value: result.average,\n          },\n          {\n            key: 'safeLow',\n            name: 'Slow',\n            value: result.safeLow,\n          },\n        ];\n\n        setState({\n          loading: false,\n          options,\n        });\n      })\n      .catch(() => {\n        setState({\n          loading: false,\n        });\n      });\n  }, []);\n\n  React.useEffect(() => {\n    if (value === undefined && state.options.length > 2) {\n      props.onChange?.(state.options[2]);\n    }\n  }, [value, state.options]);\n\n  function handleChange(ev: RadioChangeEvent) {\n    props.onChange?.(ev.target.value);\n  }\n\n  React.useEffect(() => {\n    setState({\n      selected: value,\n    });\n  }, [value]);\n\n  return (\n    <AntdRadio.Group\n      className={className}\n      style={{ width: '100%' }}\n      {...groupProps}\n      value={state.selected}\n      onChange={handleChange}>\n      {state.loading ? (\n        <AntdSpin />\n      ) : (\n        <div className={s.list}>\n          {state.options.map(option => (\n            <RadioButton\n              key={option.key}\n              label={\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {option.name}\n                </Text>\n              }\n              hint={\n                <Grid flow=\"col\" gap={4}>\n                  <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                    {option.value}\n                  </Text>\n                  <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n                    Gwei\n                  </Text>\n                </Grid>\n              }\n              value={option}\n            />\n          ))}\n        </div>\n      )}\n    </AntdRadio.Group>\n  );\n};\n\nexport default GasFeeList;\n","import React from 'react';\nimport * as Antd from 'antd';\n\nimport Button from 'components/antd/button';\nimport Divider from 'components/antd/divider';\nimport Form from 'components/antd/form';\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport GasFeeList from 'components/custom/gas-fee-list';\nimport Grid from 'components/custom/grid';\nimport { useNetwork } from 'components/providers/networkProvider';\n\nimport { useIsUnmount } from '../../../hooks/useIsUnmount';\n\nimport s from './s.module.scss';\n\nexport type ConfirmTxModalArgs = {\n  gasPrice?: number;\n};\n\ntype FormValues = {\n  gasPrice?: {\n    value: number;\n  };\n};\n\ntype ChildrenProps = {\n  form: Antd.FormInstance;\n  submitting: boolean;\n};\n\ntype Props = ModalProps & {\n  header?: React.ReactNode;\n  submitText: string;\n  children?: (props: ChildrenProps) => React.ReactNode;\n  onConfirm: <A extends ConfirmTxModalArgs>(args: A) => Promise<void>;\n};\n\nconst TxConfirmModal: React.FC<Props> = props => {\n  const { header, submitText, children, onConfirm, ...modalProps } = props;\n\n  const { activeNetwork } = useNetwork();\n  const [form] = Antd.Form.useForm<FormValues>();\n  const [submitting, setSubmitting] = React.useState<boolean>(false);\n\n  const isUnmountRef = useIsUnmount();\n\n  async function handleSubmit(values: FormValues) {\n    const { gasPrice } = values;\n\n    setSubmitting(true);\n\n    try {\n      await onConfirm({\n        ...values,\n        gasPrice: gasPrice?.value,\n      });\n      props.onCancel?.();\n    } catch {}\n\n    if (!isUnmountRef.current) {\n      setSubmitting(false);\n    }\n  }\n\n  return (\n    <Modal width={560} {...modalProps}>\n      <Form form={form} validateTrigger={['onSubmit']} onFinish={handleSubmit}>\n        {header && (\n          <>\n            {header}\n            <Divider className={s.divider} />\n          </>\n        )}\n        <Grid flow=\"row\" gap={32}>\n          {children?.({ form, submitting })}\n\n          {activeNetwork.config.features.gasFees && (\n            <Form.Item name=\"gasPrice\" label=\"Gas Fee (Gwei)\" rules={[{ required: true, message: 'Required' }]}>\n              <GasFeeList disabled={submitting} />\n            </Form.Item>\n          )}\n\n          <Button htmlType=\"submit\" type=\"primary\" loading={submitting}>\n            {submitText}\n          </Button>\n        </Grid>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default TxConfirmModal;\n","import { MutableRefObject, useEffect, useRef } from 'react';\n\nexport function useIsUnmount(): MutableRefObject<boolean> {\n  const isUnmountRef = useRef(false);\n\n  useEffect(() => {\n    return () => {\n      isUnmountRef.current = true;\n    };\n  }, []);\n\n  return isUnmountRef;\n}\n","import React from 'react';\nimport AntdAlert, { AlertProps as AntdAlertProps } from 'antd/lib/alert';\nimport cn from 'classnames';\n\nimport { Icon } from 'components/icon';\n\nimport s from './s.module.scss';\n\nexport type AlertProps = AntdAlertProps;\n\nconst Alert: React.FC<AlertProps> = props => {\n  const { className, type = 'info', ...alertProps } = props;\n\n  const icon = React.useMemo<React.ReactNode>(() => {\n    switch (type) {\n      case 'info':\n        return <Icon name=\"info\" />;\n      default:\n        return undefined;\n    }\n  }, [type]);\n\n  return <AntdAlert className={cn(s.component, className)} type={type} showIcon icon={icon} {...alertProps} />;\n};\n\nexport default Alert;\n","import React, { FormEvent, ReactElement, ReactNode, createContext, useCallback, useContext } from 'react';\nimport { Controller, FieldValues, useForm as rhUseForm, UseFormReturn as rhUseFormReturn } from 'react-hook-form';\nimport { UseFormStateReturn } from 'react-hook-form/dist/types';\nimport { ControllerFieldState, ControllerRenderProps } from 'react-hook-form/dist/types/controller';\nimport { DefaultValues, UnpackNestedValue } from 'react-hook-form/dist/types/form';\nimport { Resolver, ResolverResult } from 'react-hook-form/dist/types/resolvers';\nimport { FieldPath, FieldPathValue } from 'react-hook-form/dist/types/utils';\nimport classnames from 'classnames';\nimport { validate } from 'valirator';\n\nimport { Hint, Text } from 'components/custom/typography';\nimport { CP } from 'components/types.tx';\n\nimport { InvariantContext } from 'utils/context';\n\nimport s from './s.module.scss';\n\nconst ConditionalWrapper = ({ condition, wrapper, children }) => (condition ? wrapper(children) : children);\n\ntype SchemeType = {\n  [field: string]: Record<string, any>;\n};\n\ntype FormContext = {\n  scheme?: SchemeType;\n};\n\ntype UseFormReturn<V extends FieldValues = FieldValues> = rhUseFormReturn<V> & {\n  updateValue: (fieldName: FieldPath<V>, value: UnpackNestedValue<FieldPathValue<V, FieldPath<V>>>) => void;\n  submit: () => void | Promise<void>;\n};\n\ntype InternalContextType<V extends FieldValues = FieldValues> = {\n  form: UseFormReturn<V>;\n};\n\nconst InternalContext = createContext<InternalContextType>(InvariantContext('Form'));\n\nfunction VFormEmptyResolver(values: FieldValues): ResolverResult {\n  return {\n    values,\n    errors: {},\n  };\n}\n\nexport async function VFormValidationResolver(values: FieldValues, context?: FormContext): Promise<ResolverResult> {\n  const validationResult = await validate(context?.scheme, values);\n  const errors = validationResult.getErrors();\n\n  return {\n    values,\n    errors: Object.keys(errors).reduce((res, path) => {\n      const errKey = Object.keys(errors[path])[0];\n\n      if (errKey) {\n        res[path] = {\n          type: errKey,\n          message: errors[path][errKey],\n        };\n      }\n\n      return res;\n    }, {} as Record<string, any>),\n  };\n}\n\ntype useFormProps<V extends FieldValues = FieldValues> = {\n  validationScheme?: SchemeType;\n  defaultValues?: DefaultValues<V>;\n  onSubmit: (values: UnpackNestedValue<V>) => any | Promise<any>;\n};\n\nexport function useForm<V extends FieldValues = FieldValues>(props: useFormProps<V>): UseFormReturn<V> {\n  const { validationScheme, defaultValues, onSubmit } = props;\n\n  const resolver = (validationScheme ? VFormValidationResolver : VFormEmptyResolver) as Resolver<V, FormContext>;\n\n  const rhForm = rhUseForm<V, FormContext>({\n    mode: 'all',\n    resolver,\n    context: {\n      scheme: validationScheme,\n    },\n    defaultValues,\n    shouldUnregister: true,\n  });\n\n  const submit = rhForm.handleSubmit(onSubmit);\n\n  const updateValue = (fieldName: FieldPath<V>, value: UnpackNestedValue<FieldPathValue<V, FieldPath<V>>>) => {\n    rhForm.setValue(fieldName, value, {\n      shouldDirty: true,\n      shouldValidate: true,\n    });\n  };\n\n  return Object.assign(rhForm, {\n    updateValue,\n    submit,\n  });\n}\n\nexport type FormProps<V extends FieldValues = FieldValues> = {\n  form: UseFormReturn<V>;\n  disabled?: boolean;\n};\n\nexport function Form<V extends FieldValues = FieldValues>(props: CP<FormProps<V>>) {\n  const { children, className, form, disabled = false } = props;\n\n  const handleSubmit = useCallback(\n    (ev: FormEvent) => {\n      ev.preventDefault();\n      form.submit();\n    },\n    [form.submit],\n  );\n\n  const value: InternalContextType = {\n    form: form as any,\n  };\n\n  return (\n    <InternalContext.Provider value={value as InternalContextType}>\n      <form className={classnames(s.form, className, disabled && s.disabled)} onSubmit={handleSubmit}>\n        {children}\n      </form>\n    </InternalContext.Provider>\n  );\n}\n\nexport type FieldLabelProps = {\n  label: ReactNode;\n  hint?: ReactNode;\n  extra?: ReactNode;\n};\n\nexport function FieldLabel(props: CP<FieldLabelProps>) {\n  const { children, className, label, hint, extra } = props;\n\n  return (\n    <div className={classnames('flex flow-row row-gap-8', className)}>\n      <div className=\"flex flow-col col-gap-4 justify-space-between\">\n        <div className=\"flex flow-col col-gap-4 align-center\">\n          <Hint text={hint}>\n            {typeof label === 'string' ? (\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                {label}\n              </Text>\n            ) : (\n              label\n            )}\n          </Hint>\n        </div>\n        {extra}\n      </div>\n      {children}\n    </div>\n  );\n}\n\nexport type FormErrorProps = {\n  name: string;\n  children?: ReactElement;\n};\n\nexport function FormError(props: CP<FormErrorProps>) {\n  const { children, name } = props;\n  const { form } = useContext(InternalContext);\n\n  const err = form.formState.errors[name];\n\n  if (!err) {\n    return null;\n  }\n\n  return (\n    <Text type=\"small\" weight=\"semibold\" color=\"red\">\n      {err.message ?? children}\n    </Text>\n  );\n}\n\nexport type FormItemRender = {\n  field: ControllerRenderProps<FieldValues, string>;\n  fieldState: ControllerFieldState;\n  formState: UseFormStateReturn<FieldValues>;\n};\n\nexport type FormItemProps = {\n  name: string;\n  label?: string;\n  labelProps?: Omit<FieldLabelProps, 'label'>;\n  showError?: boolean;\n  children: (field: FormItemRender) => ReactElement;\n};\n\nexport function FormItem(props: CP<FormItemProps>) {\n  const { children, name, label, labelProps = {}, showError = true, className } = props;\n  const { form } = useContext(InternalContext);\n\n  return (\n    <ConditionalWrapper\n      condition={!!label}\n      wrapper={children => (\n        <FieldLabel label={label} className={className} {...labelProps}>\n          {children}\n        </FieldLabel>\n      )}>\n      <Controller name={name} control={form.control} render={children} shouldUnregister />\n      {showError && <FormError name={name} />}\n    </ConditionalWrapper>\n  );\n}\n","import classNames from 'classnames';\n\nimport { Icon } from 'components/icon';\nimport { FCx } from 'components/types.tx';\n\nimport s from './s.module.scss';\n\ntype PropsType = {\n  spinning?: boolean;\n};\n\nexport const Spinner: FCx<PropsType> = ({ className, children, spinning, ...restProps }) => {\n  if (children) {\n    if (spinning) {\n      return (\n        <div className={s.container}>\n          <div className={s.children}>{children}</div>\n          <Icon name=\"loader\" className={classNames(s.spinner, className)} {...restProps} />\n        </div>\n      );\n    }\n\n    return <>{children}</>;\n  }\n\n  return <Icon name=\"loader\" className={classNames(s.spinner, className)} {...restProps} />;\n};\n","import React from 'react';\nimport cn from 'classnames';\n\nimport { Text } from 'components/custom/typography';\n\nimport s from './s.module.scss';\n\nexport type StatusTagProps = {\n  text: React.ReactNode;\n  color: 'red' | 'green' | 'blue';\n  className?: string;\n  style?: React.CSSProperties;\n};\n\nconst StatusTag: React.FC<StatusTagProps> = props => {\n  const { text, color, className, style } = props;\n\n  return (\n    <div className={cn(s.statusTag, className, s[color])} style={style}>\n      <Text type=\"lb2\" tag=\"label\" weight=\"bold\">\n        {text}\n      </Text>\n    </div>\n  );\n};\n\nexport default StatusTag;\n","import React from 'react';\nimport AntdInput, { InputProps as AntdInputProps } from 'antd/lib/input';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nexport type InputProps = AntdInputProps;\n\nconst Input: React.FC<InputProps> = props => {\n  const { className, disabled, ...inputProps } = props;\n\n  return (\n    <AntdInput\n      className={cn(s.component, className, disabled && s.disabled)}\n      disabled={disabled}\n      autoComplete=\"off\"\n      {...inputProps}\n    />\n  );\n};\n\nexport default Input;\n","import React, { FC, forwardRef } from 'react';\nimport { InputProps as AntdInputProps } from 'antd/lib/input/Input';\nimport cn from 'classnames';\nimport { isAddress } from 'web3-utils';\n\nimport Input from 'components/antd/input';\nimport Identicon from 'components/custom/identicon';\n\nimport s from './s.module.scss';\n\nexport type TokenInputProps = AntdInputProps;\n\nexport const TokenInput: FC<TokenInputProps> = forwardRef<HTMLInputElement, TokenInputProps>(props => {\n  const { className, value, ...inputProps } = props;\n\n  const addonBefore = React.useMemo(\n    () => (isAddress(String(value)) ? <Identicon address={String(value)} width={24} height={24} /> : <div />),\n    [value],\n  );\n\n  return (\n    <Input\n      className={cn(s.component, className)}\n      size=\"large\"\n      addonBefore={addonBefore}\n      value={value}\n      {...inputProps}\n    />\n  );\n});\n\nexport default TokenInput;\n","import React from 'react';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\ntype Props = {\n  children?: any;\n  selected?: boolean;\n  onClick: (e: any) => void;\n};\n\nexport const RadioCard: React.FC<Props> = props => {\n  const { children, selected = false, ...rest } = props;\n\n  return (\n    <button type=\"button\" className={cn(s.card, { [s.selected]: selected })} {...rest}>\n      {children}\n    </button>\n  );\n};\n\nexport const RadioCards: React.FC<{ className?: string }> = ({ className, ...rest }) => (\n  <div className={cn(s.cards, className)} {...rest} />\n);\n","import { FC, useEffect, useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport TxConfirmModal from 'web3/components/tx-confirm-modal';\nimport Erc20Contract from 'web3/erc20Contract';\nimport { formatToken, shortenAddr } from 'web3/utils';\n\nimport Alert from 'components/antd/alert';\nimport { ExplorerAddressLink } from 'components/button';\nimport { Form, FormItem, useForm } from 'components/custom/form';\nimport Identicon from 'components/custom/identicon';\nimport { Spinner } from 'components/custom/spinner';\nimport StatusTag from 'components/custom/status-tag';\nimport TokenInput from 'components/custom/token-input';\nimport { Text } from 'components/custom/typography';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { RadioCard } from 'components/radio-card';\nimport { TokenIcon, TokenIconNames } from 'components/token-icon';\nimport { useDAO } from 'modules/governance/components/dao-provider';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport { isValidAddress } from 'utils';\n\nconst MANUAL_KEY = 'manual';\nconst DELEGATED_KEY = 'delegated';\n\ntype FormType = {\n  votingType: string;\n  delegateAddress: string;\n};\n\nconst PortfolioDelegate: FC = () => {\n  const { projectToken } = useKnownTokens();\n  const wallet = useWallet();\n  const daoCtx = useDAO();\n\n  const [isLoading, setLoading] = useState(false);\n  const [isSubmitting, setSubmitting] = useState(false);\n  const [confirmModalVisible, setConfirmModalVisible] = useState(false);\n\n  const { balance: stakedBalance = BigNumber.ZERO, userLockedUntil = 0, userDelegatedTo } = daoCtx.daoBarn;\n  const projectTokenContract = projectToken.contract as Erc20Contract;\n  const bondBalance = projectTokenContract.balance?.unscaleBy(projectToken.decimals);\n\n  const isLocked = userLockedUntil > Date.now();\n  const isDelegated = isValidAddress(userDelegatedTo);\n\n  const form = useForm<FormType>({\n    validationScheme: {\n      delegateAddress: {\n        rules: {\n          required: (value: string | undefined, _, obj: FormType) => {\n            if (obj.votingType === DELEGATED_KEY) {\n              return Boolean(value);\n            }\n            return true;\n          },\n          isAddress: (value: string | undefined, _, obj: FormType) => {\n            if (obj.votingType === DELEGATED_KEY) {\n              return isValidAddress(value);\n            }\n            return true;\n          },\n          isSelf: (value: string | undefined, _, obj: FormType) => {\n            if (obj.votingType === DELEGATED_KEY) {\n              return wallet.account?.toLowerCase() !== value?.toLowerCase();\n            }\n            return true;\n          },\n          isSame: (value: string | undefined, _, obj: FormType) => {\n            if (obj.votingType === DELEGATED_KEY) {\n              return userDelegatedTo?.toLowerCase() !== value?.toLowerCase();\n            }\n            return true;\n          },\n        },\n        messages: {\n          required: 'Required',\n          isAddress: 'Invalid address',\n          isSelf: `Can't delegate to self`,\n          isSame: `Your voting power is already delegated to this address`,\n        },\n      },\n    },\n    onSubmit: () => {\n      setConfirmModalVisible(true);\n    },\n  });\n\n  async function loadData() {\n    setLoading(true);\n\n    try {\n      await daoCtx.daoBarn.loadUserData();\n      const { userDelegatedTo = '' } = daoCtx.daoBarn;\n      const isDelegated = isValidAddress(userDelegatedTo);\n      form.reset({\n        votingType: isDelegated ? DELEGATED_KEY : MANUAL_KEY,\n        delegateAddress: isDelegated ? userDelegatedTo : '',\n      });\n    } catch {}\n\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    loadData().catch(Error);\n  }, []);\n\n  const { formState, watch } = form;\n  const [votingType, delegateAddress] = watch(['votingType', 'delegateAddress']);\n\n  const canSubmit = formState.isDirty && !isSubmitting && stakedBalance.gt(BigNumber.ZERO);\n\n  async function doDelegate(type: string, address: string, gasPrice?: number) {\n    setSubmitting(true);\n\n    try {\n      if (type === MANUAL_KEY) {\n        await daoCtx.daoBarn.stopDelegate(gasPrice);\n      } else if (type === DELEGATED_KEY) {\n        await daoCtx.daoBarn.delegate(address, gasPrice);\n      }\n\n      await loadData();\n    } catch (e) {\n      console.error(e);\n    }\n\n    setSubmitting(false);\n  }\n\n  function handleCancel() {\n    setConfirmModalVisible(false);\n  }\n\n  async function handleConfirm(gasPrice?: number) {\n    setConfirmModalVisible(false);\n    await doDelegate(votingType, delegateAddress, gasPrice);\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center p-24\" style={{ minHeight: '732px' }}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Form form={form} className=\"flex flow-row row-gap-32 p-24\" disabled={isSubmitting}>\n        <div className=\"container-box flex flow-col col-gap-44\">\n          <div className=\"flex flow-row row-gap-4\">\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Current voting type\n            </Text>\n            <div className=\"flex flow-col col-gap-8 align-center\">\n              <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                {isDelegated ? 'Delegate voting' : 'Manual voting'}\n              </Text>\n            </div>\n          </div>\n          {isDelegated && (\n            <div className=\"flex flow-row row-gap-4\">\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                Delegated address\n              </Text>\n              <div className=\"flex flow-col col-gap-8 align-center\">\n                <ExplorerAddressLink address={userDelegatedTo}>\n                  <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                    {shortenAddr(userDelegatedTo)}\n                  </Text>\n                </ExplorerAddressLink>\n              </div>\n            </div>\n          )}\n        </div>\n        <FormItem name=\"votingType\" label=\"Voting type\">\n          {({ field }) => (\n            <>\n              <RadioCard\n                selected={field.value === MANUAL_KEY}\n                onClick={() => form.updateValue('votingType', MANUAL_KEY)}>\n                <div className=\"flex flow-col col-gap-40 align-center\">\n                  <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                    Manual voting\n                  </Text>\n                  {field.value === MANUAL_KEY && <StatusTag text=\"ACTIVE\" color=\"green\" />}\n                </div>\n              </RadioCard>\n              <RadioCard\n                selected={field.value === DELEGATED_KEY}\n                onClick={() => form.updateValue('votingType', DELEGATED_KEY)}>\n                <div className=\"flex flow-col col-gap-40 align-center\">\n                  <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                    Delegate voting\n                  </Text>\n                  {field.value === DELEGATED_KEY && <StatusTag text=\"ACTIVE\" color=\"green\" />}\n                </div>\n              </RadioCard>\n            </>\n          )}\n        </FormItem>\n        {votingType === DELEGATED_KEY && (\n          <FormItem name=\"delegateAddress\" label=\"Address\">\n            {({ field }) => <TokenInput {...field} />}\n          </FormItem>\n        )}\n        <Alert message=\"Delegating your voting power to this address means that they will be able to vote in your place. You cant delegate the voting bonus, only the staked balance.\" />\n        {isLocked && (\n          <Alert message=\"Switching back to manual voting while a lock is active will put the amount back under lock. Delegation does not stop the lock timer.\" />\n        )}\n        <div className=\"flex flow-col col-gap-12 align-center justify-end\">\n          <button type=\"submit\" className=\"button-primary\" disabled={!canSubmit}>\n            {isSubmitting && <Spinner className=\"mr-4\" />}\n            {votingType === DELEGATED_KEY ? 'Delegate' : 'Stop Delegate'}\n          </button>\n        </div>\n      </Form>\n\n      {confirmModalVisible && (\n        <TxConfirmModal\n          title={votingType === DELEGATED_KEY ? 'Delegate your voting power' : 'Stop delegating voting power'}\n          header={\n            votingType === DELEGATED_KEY ? (\n              <div className=\"container-box flex flow-col col-gap-40\">\n                <div className=\"flow flow-row row-gap-4\">\n                  <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                    Delegate {projectToken.symbol} amount\n                  </Text>\n                  <div className=\"flex flow-col col-gap-8 align-center\">\n                    <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                      {formatToken(bondBalance) ?? '-'}\n                    </Text>\n                    <TokenIcon name={projectToken.icon as TokenIconNames} />\n                  </div>\n                </div>\n                <div className=\"flow flow-row row-gap-4\">\n                  <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                    Delegate address\n                  </Text>\n                  <div className=\"flex flow-col col-gap-8 align-center\">\n                    <Identicon address={delegateAddress} />\n                    <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                      {shortenAddr(delegateAddress)}\n                    </Text>\n                  </div>\n                </div>\n              </div>\n            ) : null\n          }\n          submitText={votingType === DELEGATED_KEY ? 'Delegate voting power' : 'Stop delegate'}\n          onCancel={handleCancel}\n          onConfirm={({ gasPrice }) => handleConfirm(gasPrice)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default PortfolioDelegate;\n","import React from 'react';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\ntype Props = React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>;\n\nexport const Slider: React.FC<Props> = ({ className, value, ...rest }) => {\n  const max = Number(rest.max) || 0;\n  const slicedMax = Math.floor(max * 1e6) / 1e6;\n  const slicedValue = Math.floor(Number(value) * 1e6) / 1e6;\n  const percent = (slicedValue / slicedMax) * 100 || 0;\n  const disabled = slicedMax === 0;\n\n  return (\n    <input\n      {...rest}\n      type=\"range\"\n      className={cn(s.input, className)}\n      style={{ '--track-fill': `${!disabled ? percent : 0}%` } as React.CSSProperties}\n      max={disabled ? 1 : slicedMax}\n      disabled={disabled}\n      value={!disabled ? value || '0' : '0'}\n    />\n  );\n};\n","import { ButtonHTMLAttributes, CSSProperties, FC, ForwardedRef, ReactNode, forwardRef } from 'react';\nimport BigNumber from 'bignumber.js';\nimport cn from 'classnames';\nimport classNames from 'classnames';\n\nimport { DropdownList } from 'components/custom/dropdown';\nimport { Slider } from 'components/custom/slider';\nimport { Text } from 'components/custom/typography';\nimport { Icon } from 'components/icon';\nimport { KnownTokens, useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIcon, TokenIconNames } from 'components/token-icon';\n\nimport s from './s.module.scss';\n\ntype TokenAmountType = {\n  value: string;\n  onChange: (value: string) => void;\n  before: ReactNode;\n  secondary?: ReactNode;\n  className?: string;\n  classNameBefore?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  max?: BigNumber | number;\n  slider?: boolean;\n  decimals?: number;\n  errors?: string[];\n  ref?: ForwardedRef<HTMLInputElement>;\n};\n\nexport const TokenAmount: FC<TokenAmountType> = forwardRef<HTMLInputElement, TokenAmountType>(\n  (\n    {\n      onChange,\n      before,\n      secondary,\n      className,\n      classNameBefore,\n      slider,\n      errors = [],\n      decimals = 6,\n      max: maxValue,\n      ...rest\n    },\n    ref,\n  ) => {\n    const max = BigNumber.from(maxValue) ?? BigNumber.ZERO;\n\n    return (\n      <div className={className}>\n        <div className={classNames(s.tokenAmount, { [s.error]: errors.length })}>\n          {before && <div className={cn(s.tokenAmountBefore, classNameBefore)}>{before}</div>}\n          <div className={s.tokenAmountValues}>\n            <input\n              ref={ref}\n              className={s.tokenAmountValue}\n              type=\"text\"\n              inputMode=\"decimal\"\n              pattern=\"[0-9]+([\\.,][0-9]+)?\"\n              onWheel={ev => {\n                ev.currentTarget.blur();\n              }}\n              onChange={e => {\n                onChange(e.target.value);\n              }}\n              {...rest}\n            />\n            <div className={s.tokenAmountHint}>{secondary}</div>\n          </div>\n          {!max.isZero() && (\n            <button\n              type=\"button\"\n              className=\"button-ghost\"\n              style={{ alignSelf: 'center' }}\n              disabled={rest.disabled || max.isZero()}\n              onClick={() => onChange(max.toString())}>\n              MAX\n            </button>\n          )}\n        </div>\n        {!!errors.length &&\n          errors.map((error, idx) => (\n            <Text key={idx} type=\"small\" weight=\"semibold\" color=\"red\" style={{ marginTop: '8px' }}>\n              {error}\n            </Text>\n          ))}\n        {slider && !max.isZero() ? (\n          <Slider\n            type=\"range\"\n            className={s.tokenAmountSlider}\n            min=\"0\"\n            max={max.toString()}\n            step={1 / 10 ** Math.min(decimals, 6)}\n            value={rest.value ?? 0}\n            disabled={rest.disabled || max.isZero()}\n            onChange={e => {\n              onChange(e.target.value);\n            }}\n          />\n        ) : null}\n      </div>\n    );\n  },\n);\n\ntype TokenAmountPreviewType = {\n  value?: string;\n  before: ReactNode;\n  secondary?: ReactNode;\n  className?: string;\n  classNameBefore?: string;\n};\n\nexport const TokenAmountPreview: FC<TokenAmountPreviewType> = ({\n  value,\n  before,\n  secondary,\n  className,\n  classNameBefore,\n}) => {\n  return (\n    <div className={cn(s.tokenAmountPreview, className)}>\n      {before && <div className={cn(s.tokenAmountPreviewBefore, classNameBefore)}>{before}</div>}\n      <div className={s.tokenAmountPreviewValues}>\n        <input className={s.tokenAmountPreviewValue} type=\"text\" value={value || ''} readOnly />\n        <div className={s.tokenAmountPreviewHint}>{secondary}</div>\n      </div>\n    </div>\n  );\n};\n\ntype TokenSelectType = {\n  value: KnownTokens;\n  onChange: (value: KnownTokens) => void;\n  tokens: KnownTokens[];\n  className?: string;\n  style?: CSSProperties;\n};\n\nexport const TokenSelect: FC<TokenSelectType> = ({ value, onChange, tokens, className, style }) => {\n  const { getTokenBySymbol } = useKnownTokens();\n  const foundToken = getTokenBySymbol(value);\n\n  return (\n    <DropdownList\n      items={tokens.reduce((acc: ButtonHTMLAttributes<HTMLButtonElement>[], token) => {\n        const found = getTokenBySymbol(token);\n        if (!found) return acc;\n        return [\n          ...acc,\n          {\n            onClick: () => {\n              onChange(token as KnownTokens);\n            },\n            children: (\n              <>\n                <TokenIcon name={getTokenBySymbol(token)?.icon as TokenIconNames} className=\"mr-8\" />\n                {getTokenBySymbol(token)?.name}\n              </>\n            ),\n            'aria-selected': foundToken?.symbol === found.symbol ? 'true' : 'false',\n          },\n        ];\n      }, [])}>\n      {({ ref, setOpen, open }) => (\n        <button\n          type=\"button\"\n          ref={ref}\n          onClick={() => setOpen(isOpen => !isOpen)}\n          className={cn(s.tokenAmountSelectToken, className)}\n          style={style}>\n          {foundToken ? <TokenIcon name={foundToken.icon as TokenIconNames} size={24} className=\"mr-16\" /> : null}\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            {foundToken?.symbol}\n          </Text>\n          <Icon\n            name={open ? 'dropdown-active' : 'dropdown'}\n            size=\"24\"\n            className=\"token-select-chevron\"\n            style={{\n              marginLeft: 4,\n            }}\n          />\n        </button>\n      )}\n    </DropdownList>\n  );\n};\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\nimport { formatToken } from 'web3/utils';\n\nimport Button from 'components/antd/button';\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\n\nimport { getFormattedDuration } from 'utils';\n\nexport type WalletDepositConfirmModalProps = ModalProps & {\n  deposit?: BigNumber;\n  lockDuration?: number;\n};\n\nconst WalletDepositConfirmModal: React.FC<WalletDepositConfirmModalProps> = props => {\n  const { deposit, lockDuration, ...modalProps } = props;\n\n  const { projectToken } = useKnownTokens();\n\n  return (\n    <Modal width={560} {...modalProps}>\n      <Grid flow=\"row\" gap={32}>\n        <Grid flow=\"row\" gap={16}>\n          <Icon name=\"warning-outlined\" width={40} height={40} color=\"red\" />\n          <Grid flow=\"row\" gap={8}>\n            <Text type=\"h3\" weight=\"semibold\" color=\"primary\">\n              Are you sure you want to deposit?\n            </Text>\n\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n              You are about to deposit {formatToken(deposit)} ${projectToken.symbol}.\n              <br />\n              You have an active lock for {getFormattedDuration(0, lockDuration)}.\n            </Text>\n            <Text type=\"p2\" weight=\"bold\" color=\"primary\">\n              All deposits you make until the lock timer ends will be locked for the same duration.\n            </Text>\n          </Grid>\n        </Grid>\n        <Grid flow=\"col\" justify=\"space-between\">\n          <Button type=\"default\" onClick={modalProps.onCancel}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" onClick={modalProps.onOk}>\n            Deposit\n          </Button>\n        </Grid>\n      </Grid>\n    </Modal>\n  );\n};\n\nexport default WalletDepositConfirmModal;\n","import React, { FC, useEffect, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport BigNumber from 'bignumber.js';\nimport TxConfirmModal from 'web3/components/tx-confirm-modal';\nimport Erc20Contract from 'web3/erc20Contract';\nimport { formatToken } from 'web3/utils';\n\nimport Alert from 'components/antd/alert';\nimport { Form, FormItem, useForm } from 'components/custom/form';\nimport Icon from 'components/custom/icon';\nimport { Spinner } from 'components/custom/spinner';\nimport { TokenAmount } from 'components/custom/token-amount-new';\nimport { Text } from 'components/custom/typography';\nimport { useConfig } from 'components/providers/configProvider';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIcon, TokenIconNames } from 'components/token-icon';\nimport { useDAO } from 'modules/governance/components/dao-provider';\nimport WalletDepositConfirmModal from 'modules/governance/views/portfolio-view/portfolio-deposit/components/wallet-deposit-confirm-modal';\n\ntype FormType = {\n  amount: string;\n};\n\nconst PortfolioDeposit: FC = () => {\n  const config = useConfig();\n  const { projectToken } = useKnownTokens();\n  const daoCtx = useDAO();\n\n  const [isLoading, setLoading] = useState(false);\n  const [isEnabling, setEnabling] = useState(false);\n  const [isSubmitting, setSubmitting] = useState(false);\n  const [confirmModalVisible, setConfirmModalVisible] = useState(false);\n  const [depositConfirmModal, showDepositConfirmModal] = useState(false);\n\n  const { balance: stakedBalance, userLockedUntil } = daoCtx.daoBarn;\n  const projectTokenContract = projectToken.contract as Erc20Contract;\n  const bondBalance = projectTokenContract.balance?.unscaleBy(projectToken.decimals);\n  const barnAllowance = projectTokenContract.getAllowanceOf(config.contracts.dao?.barn!);\n  const isLocked = (userLockedUntil ?? 0) > Date.now();\n\n  const form = useForm<FormType>({\n    validationScheme: {\n      amount: {\n        rules: {\n          required: true,\n          min: 0,\n        },\n        messages: {\n          required: 'Value is required.',\n          min: 'Should be a positive value.',\n        },\n      },\n    },\n    onSubmit: () => {\n      if (isLocked) {\n        showDepositConfirmModal(true);\n        return;\n      }\n\n      setConfirmModalVisible(true);\n    },\n  });\n\n  async function loadData() {\n    setLoading(true);\n\n    try {\n      await projectTokenContract.loadBalance();\n      await daoCtx.daoBarn.loadUserData();\n    } catch {}\n\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    loadData().catch(Error);\n  }, []);\n\n  const { formState, watch } = form;\n  const amount = watch('amount');\n  const bnAmount = BigNumber.from(amount);\n\n  const isEnabled = useMemo(() => barnAllowance?.gt(BigNumber.ZERO) ?? false, [barnAllowance]);\n  const canSubmit = isEnabled && formState.isDirty && formState.isValid && !isSubmitting;\n\n  async function handleTokenEnable() {\n    const barn = config.contracts.dao?.barn;\n\n    if (!barn) {\n      return;\n    }\n\n    setEnabling(true);\n\n    try {\n      await projectTokenContract.approve(barn, true);\n    } catch (e) {\n      console.error(e);\n    }\n\n    setEnabling(false);\n  }\n\n  async function doDeposit(amount: BigNumber, gasPrice?: number) {\n    setSubmitting(true);\n\n    try {\n      const depositAmount = amount.scaleBy(projectToken.decimals);\n\n      if (depositAmount) {\n        await daoCtx.daoBarn.deposit(depositAmount, gasPrice);\n        await loadData();\n      }\n    } catch (e) {\n      console.error(e);\n    }\n\n    setSubmitting(false);\n  }\n\n  function handleCancel() {\n    setConfirmModalVisible(false);\n  }\n\n  async function handleConfirm(gasPrice?: number) {\n    if (!bnAmount) {\n      return;\n    }\n\n    setConfirmModalVisible(false);\n    await doDeposit(bnAmount, gasPrice);\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center p-24\" style={{ minHeight: '518px' }}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {config.features.faucets && (\n        <Link to=\"/faucets\" className=\"button-ghost ml-auto\">\n          Faucets\n        </Link>\n      )}\n      <Form form={form} className=\"flex flow-row row-gap-32 p-24\" disabled={isSubmitting}>\n        <div className=\"container-box flex flow-col col-gap-44\">\n          <div className=\"flex flow-row row-gap-4\">\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Portfolio balance\n            </Text>\n            <div className=\"flex flow-col col-gap-8 align-center\">\n              <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                {formatToken(stakedBalance) ?? '-'}\n              </Text>\n              <TokenIcon name={projectToken.icon as TokenIconNames} />\n            </div>\n          </div>\n          <div className=\"flex flow-row row-gap-4\">\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Wallet balance\n            </Text>\n            <div className=\"flex flow-col col-gap-8 align-center\">\n              <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                {formatToken(bondBalance) ?? '-'}\n              </Text>\n              <TokenIcon name={projectToken.icon as TokenIconNames} />\n            </div>\n          </div>\n        </div>\n        <FormItem name=\"amount\" label=\"Amount\">\n          {({ field }) => (\n            <TokenAmount\n              before={<TokenIcon name={projectToken.icon as TokenIconNames} />}\n              max={bondBalance}\n              disabled={isSubmitting}\n              decimals={projectToken.decimals}\n              slider\n              {...field}\n            />\n          )}\n        </FormItem>\n        <Alert message=\"Deposits made after you have an ongoing lock will be added to the locked balance and will be subjected to the same lock timer.\" />\n        <div className=\"flex flow-col col-gap-12 align-center justify-end\">\n          {!isEnabled && (\n            <>\n              <button type=\"button\" className=\"button-primary align-self-start\" onClick={handleTokenEnable}>\n                {isEnabling && <Spinner className=\"mr-4\" />}\n                Enable {projectToken.symbol}\n              </button>\n              <Icon name=\"arrow-forward\" />\n            </>\n          )}\n          <button type=\"submit\" className=\"button-primary align-self-start\" disabled={!canSubmit}>\n            {isSubmitting && <Spinner className=\"mr-4\" />}\n            Deposit\n          </button>\n        </div>\n      </Form>\n\n      {depositConfirmModal && (\n        <WalletDepositConfirmModal\n          deposit={bnAmount}\n          lockDuration={userLockedUntil}\n          onCancel={() => showDepositConfirmModal(false)}\n          onOk={() => {\n            showDepositConfirmModal(false);\n            // return handleSubmit();\n          }}\n        />\n      )}\n      {confirmModalVisible && (\n        <TxConfirmModal\n          title=\"Confirm deposit\"\n          header={\n            <div className=\"container-box flex flow-row row-gap-4\">\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                Deposit amount\n              </Text>\n              <div className=\"flex flow-col col-gap-8 align-center\">\n                <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                  {formatToken(bnAmount, {\n                    decimals: projectToken.decimals,\n                  })}\n                </Text>\n                <TokenIcon name={projectToken.icon as TokenIconNames} />\n              </div>\n            </div>\n          }\n          submitText=\"Confirm your deposit\"\n          onCancel={handleCancel}\n          onConfirm={({ gasPrice }) => handleConfirm(gasPrice)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default PortfolioDeposit;\n","import React from 'react';\nimport generatePicker, { PickerProps as AntdPickerProps } from 'antd/lib/date-picker/generatePicker';\nimport cn from 'classnames';\nimport dateFnsGenerateConfig from 'rc-picker/lib/generate/dateFns';\n\nimport s from './s.module.scss';\n\nexport type DatePickerProps = AntdPickerProps<Date>;\n\nconst DateFNSPicker = generatePicker<Date>(dateFnsGenerateConfig);\n\nconst DatePicker: React.FC<DatePickerProps> = props => {\n  const { className, ...datePickerProps } = props;\n\n  return <DateFNSPicker className={cn(s.component, className)} dropdownClassName={s.dropdown} {...datePickerProps} />;\n};\n\nexport default DatePicker;\n","import React, { FC, useEffect, useState } from 'react';\nimport classnames from 'classnames';\nimport addDays from 'date-fns/addDays';\nimport addMinutes from 'date-fns/addMinutes';\nimport addMonths from 'date-fns/addMonths';\nimport addYears from 'date-fns/addYears';\nimport getUnixTime from 'date-fns/getUnixTime';\nimport TxConfirmModal from 'web3/components/tx-confirm-modal';\nimport { formatToken } from 'web3/utils';\n\nimport Alert from 'components/antd/alert';\nimport DatePicker from 'components/antd/datepicker';\nimport { Form, FormItem, useForm } from 'components/custom/form';\nimport { Spinner } from 'components/custom/spinner';\nimport { Text } from 'components/custom/typography';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIcon, TokenIconNames } from 'components/token-icon';\nimport { UseLeftTime } from 'hooks/useLeftTime';\nimport { useDAO } from 'modules/governance/components/dao-provider';\n\nimport { getFormattedDuration } from 'utils';\n\nconst DURATION_1_WEEK = '1 w';\nconst DURATION_1_MONTH = '1 mo';\nconst DURATION_3_MONTH = '3 mo';\nconst DURATION_6_MONTH = '6 mo';\nconst DURATION_1_YEAR = '1 y';\n\nconst DURATION_OPTIONS: string[] = [\n  DURATION_1_WEEK,\n  DURATION_1_MONTH,\n  DURATION_3_MONTH,\n  DURATION_6_MONTH,\n  DURATION_1_YEAR,\n];\n\nfunction getLockEndDate(startDate: Date, duration: string): Date | undefined {\n  switch (duration) {\n    case DURATION_1_WEEK:\n      return addDays(startDate, 7);\n    case DURATION_1_MONTH:\n      return addMonths(startDate, 1);\n    case DURATION_3_MONTH:\n      return addMonths(startDate, 3);\n    case DURATION_6_MONTH:\n      return addMonths(startDate, 6);\n    case DURATION_1_YEAR:\n      return addDays(startDate, 365);\n    default:\n      return undefined;\n  }\n}\n\ntype FormType = {\n  lockEndDate: Date | undefined;\n};\n\nconst PortfolioLock: FC = () => {\n  const { projectToken } = useKnownTokens();\n  const daoCtx = useDAO();\n\n  const [isLoading, setLoading] = useState(false);\n  const [isSubmitting, setSubmitting] = useState(false);\n  const [confirmModalVisible, setConfirmModalVisible] = useState(false);\n\n  const { balance: stakedBalance, userLockedUntil } = daoCtx.daoBarn;\n\n  const form = useForm<FormType>({\n    validationScheme: {\n      lockEndDate: {\n        rules: {\n          required: true,\n          min: (value: Date | undefined) => {\n            return addMinutes(Date.now(), 1).valueOf() < (value?.valueOf() ?? 0);\n          },\n          max: (value: Date | undefined) => {\n            return addYears(Date.now(), 1).valueOf() > (value?.valueOf() ?? 0);\n          },\n        },\n        messages: {\n          required: 'Required',\n          min: 'Should be more than 1 minute',\n          max: 'Should be less than 1 year',\n        },\n      },\n    },\n    onSubmit: () => {\n      setConfirmModalVisible(true);\n    },\n  });\n\n  async function loadData() {\n    setLoading(true);\n\n    try {\n      await daoCtx.daoBarn.loadUserData();\n      const { userLockedUntil } = daoCtx.daoBarn;\n      let lockEndDate = userLockedUntil ? new Date(userLockedUntil * 1_000) : undefined;\n\n      if (lockEndDate && lockEndDate.valueOf() <= Date.now()) {\n        lockEndDate = undefined;\n      }\n\n      form.reset({\n        lockEndDate,\n      });\n    } catch {}\n\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    loadData().catch(Error);\n  }, []);\n\n  const { formState, watch } = form;\n  const lockEndDate = watch('lockEndDate');\n\n  const canSubmit = formState.isDirty && !isSubmitting;\n\n  async function doLock(lockUntil: Date | undefined, gasPrice?: number) {\n    setSubmitting(true);\n\n    try {\n      if (lockUntil) {\n        const timestamp = getUnixTime(lockUntil);\n\n        if (timestamp && timestamp > 0) {\n          await daoCtx.daoBarn.lock(timestamp, gasPrice);\n          await loadData();\n        }\n      }\n    } catch (e) {\n      console.error(e);\n    }\n\n    setSubmitting(false);\n  }\n\n  function handleCancel() {\n    setConfirmModalVisible(false);\n  }\n\n  async function handleConfirm(gasPrice?: number) {\n    setConfirmModalVisible(false);\n    await doLock(lockEndDate, gasPrice);\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center p-24\" style={{ minHeight: '518px' }}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Form form={form} className=\"flex flow-row row-gap-32 p-24\" disabled={isSubmitting}>\n        <div className=\"container-box flex flow-col col-gap-44\">\n          <div className=\"flex flow-row row-gap-4\">\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Portfolio balance\n            </Text>\n            <div className=\"flex flow-col col-gap-8 align-center\">\n              <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                {formatToken(stakedBalance) ?? '-'}\n              </Text>\n              <TokenIcon name={projectToken.icon as TokenIconNames} />\n            </div>\n          </div>\n          <div className=\"flex flow-row row-gap-4\">\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Lock duration\n            </Text>\n            <div className=\"flex flow-col col-gap-8 align-center\">\n              <UseLeftTime end={(userLockedUntil ?? getUnixTime(new Date())) * 1_000} delay={1_000}>\n                {leftTime => (\n                  <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                    {getFormattedDuration(leftTime / 1_000)?.trim() || '0s'}\n                  </Text>\n                )}\n              </UseLeftTime>\n            </div>\n          </div>\n        </div>\n        <FormItem name=\"lockEndDate\" label=\"Lock end date\">\n          {({ field: { ref, ...field } }) => (\n            <div className=\"flex flow-row row-gap-16\">\n              <DatePicker showTime showNow={false} format=\"DD/MM/YYYY HH:mm\" size=\"large\" {...field} />\n              <div className=\"flexbox-grid\" style={{ '--gap': '8px' } as React.CSSProperties}>\n                {DURATION_OPTIONS.map(item => (\n                  <button\n                    key={item}\n                    type=\"button\"\n                    className={classnames(\n                      'flex justify-center ph-24 pv-16',\n                      field.value?.valueOf() === getLockEndDate(new Date(), item)?.valueOf()\n                        ? 'button-primary'\n                        : 'button-ghost-monochrome',\n                    )}\n                    onClick={() => {\n                      form.updateValue('lockEndDate', getLockEndDate(new Date(), item));\n                    }}>\n                    {item}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </FormItem>\n        <Alert message=\"All locked balances will be unavailable for withdrawal until the lock timer ends. All future deposits will be locked for the same time.\" />\n        <div className=\"flex flow-col col-gap-12 align-center justify-end\">\n          <button type=\"submit\" className=\"button-primary\" disabled={!canSubmit}>\n            {isSubmitting && <Spinner className=\"mr-4\" />}\n            Lock\n          </button>\n        </div>\n      </Form>\n\n      {confirmModalVisible && (\n        <TxConfirmModal\n          title=\"Are you sure you want to lock your balance?\"\n          header={\n            <div className=\"flex flow-row row-gap-16\">\n              <Text type=\"p2\" weight=\"bold\" color=\"secondary\">\n                You are about to lock{' '}\n                <span className=\"primary-color\">\n                  {formatToken(stakedBalance)} {projectToken.symbol}\n                </span>{' '}\n                for{' '}\n                <span className=\"primary-color\">{getFormattedDuration(Date.now(), lockEndDate?.valueOf() ?? 0)}</span>.\n                You cannot undo this or partially lock your balance. Locked tokens will be unavailable for withdrawal\n                until the lock timer ends. All future deposits you make will be locked for the same time.\n              </Text>\n              <Text type=\"p2\" weight=\"bold\" color=\"primary\">\n                The multiplier you get for locking tokens only applies to your voting power, it does not earn more\n                rewards.\n              </Text>\n            </div>\n          }\n          submitText=\"Lock balance\"\n          onCancel={handleCancel}\n          onConfirm={({ gasPrice }) => handleConfirm(gasPrice)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default PortfolioLock;\n","import { useMemo } from 'react';\nimport classNames from 'classnames';\nimport { nanoid } from 'nanoid';\n\nimport { Icon } from 'components/icon';\n\nimport s from './s.module.scss';\n\ntype InputPropsType = React.InputHTMLAttributes<HTMLInputElement> & {\n  id?: string;\n  /** \"size\" prop sounds better, but this word already reserved in input props */\n  dimension?: 'normal' | 'large';\n  before?: React.ReactNode;\n};\n\nexport const Input: React.FC<InputPropsType> = ({ id, before, className, dimension = 'normal', ...rest }) => {\n  const inputId = useMemo(() => id ?? nanoid(), [id]);\n  const isSearch = rest.type === 'search';\n\n  return (\n    <label htmlFor={inputId} className={classNames(s.inputWrapper, className)}>\n      {before && <div className={classNames(s.before, s[dimension])}>{before}</div>}\n      {isSearch && <Icon name=\"search\" size={16} className={s.searchIcon} color=\"icon\" />}\n      <input\n        type=\"text\"\n        id={inputId}\n        className={classNames(s.input, s[dimension], {\n          [s.inputSearch]: isSearch,\n        })}\n        {...rest}\n      />\n    </label>\n  );\n};\n","import React, { FC, useEffect, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport BigNumber from 'bignumber.js';\nimport TxConfirmModal from 'web3/components/tx-confirm-modal';\nimport Erc20Contract from 'web3/erc20Contract';\nimport { formatToken } from 'web3/utils';\nimport addDays from 'date-fns/addDays';\nimport addMinutes from 'date-fns/addMinutes';\nimport addMonths from 'date-fns/addMonths';\nimport addYears from 'date-fns/addYears';\nimport getUnixTime from 'date-fns/getUnixTime';\nimport classnames from 'classnames';\n\nimport Alert from 'components/antd/alert';\nimport { Form, FormItem, useForm } from 'components/custom/form';\nimport { Input } from 'components/input';\nimport Icon from 'components/custom/icon';\nimport { Spinner } from 'components/custom/spinner';\nimport DatePicker from 'components/antd/datepicker';\nimport { TokenAmount } from 'components/custom/token-amount-new';\nimport { Text } from 'components/custom/typography';\nimport { useConfig } from 'components/providers/configProvider';\nimport { UseLeftTime } from 'hooks/useLeftTime';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIcon, TokenIconNames } from 'components/token-icon';\nimport { useDAO } from 'modules/governance/components/dao-provider';\nimport WalletDepositConfirmModal from 'modules/governance/views/portfolio-view/portfolio-deposit/components/wallet-deposit-confirm-modal';\nimport { getFormattedDuration } from 'utils';\n\nconst DURATION_1_WEEK = '1 w';\nconst DURATION_1_MONTH = '1 mo';\nconst DURATION_3_MONTH = '3 mo';\nconst DURATION_6_MONTH = '6 mo';\nconst DURATION_1_YEAR = '1 y';\n\nconst DURATION_OPTIONS: string[] = [\n  DURATION_1_WEEK,\n  DURATION_1_MONTH,\n  DURATION_3_MONTH,\n  DURATION_6_MONTH,\n  DURATION_1_YEAR,\n];\n\nconst NETWORK: string[] = [\n  \"BTC_ETH\",\n  \"BTC_BSC\",\n]\n\nfunction getNetworkID(network: string): number {\n  if (network == \"BTC_ETH\") {\n    return 1;\n  }\n  if (network == \"BTC_BSC\") {\n    return 2;\n  }\n  return 0;\n}\n\nfunction getLockEndDate(startDate: Date, duration: string): Date | undefined {\n  switch (duration) {\n    case DURATION_1_WEEK:\n      return addDays(startDate, 7);\n    case DURATION_1_MONTH:\n      return addMonths(startDate, 1);\n    case DURATION_3_MONTH:\n      return addMonths(startDate, 3);\n    case DURATION_6_MONTH:\n      return addMonths(startDate, 6);\n    case DURATION_1_YEAR:\n      return addDays(startDate, 365);\n    default:\n      return undefined;\n  }\n}\n\ntype FormType = {\n  amount: string;\n  lockEndDate: Date | undefined;\n  p2pKey: string;\n  dataType: number;\n};\n\nconst PortfolioDeposit: FC = () => {\n  const config = useConfig();\n  const { projectToken } = useKnownTokens();\n  const daoCtx = useDAO();\n\n  const [isLoading, setLoading] = useState(false);\n  const [isEnabling, setEnabling] = useState(false);\n  const [isSubmitting, setSubmitting] = useState(false);\n  const [confirmModalVisible, setConfirmModalVisible] = useState(false);\n  const [stakeConfirmModal, showStakeConfirmModal] = useState(false);\n\n  const { balance: stakedBalance, userLockedUntil } = daoCtx.daoBarn;\n  const projectTokenContract = projectToken.contract as Erc20Contract;\n  const bondBalance = projectTokenContract.balance?.unscaleBy(projectToken.decimals);\n  const barnAllowance = projectTokenContract.getAllowanceOf(config.contracts.dao?.barn!);\n  const isLocked = (userLockedUntil ?? 0) > Date.now();\n\n  const form = useForm<FormType>({\n    validationScheme: {\n      lockEndDate: {\n        rules: {\n          required: true,\n          min: (value: Date | undefined) => {\n            return addMinutes(Date.now(), 1).valueOf() < (value?.valueOf() ?? 0);\n          },\n          max: (value: Date | undefined) => {\n            return addYears(Date.now(), 1).valueOf() > (value?.valueOf() ?? 0);\n          },\n        },\n        messages: {\n          required: 'Required',\n          min: 'Should be more than 1 minute',\n          max: 'Should be less than 1 year',\n        },\n      },\n      amount: {\n        rules: {\n          required: true,\n          min: 0,\n        },\n        messages: {\n          required: 'Value is required.',\n          min: 'Should be a positive value.',\n        },\n      },\n      p2pkey: {\n        rules: {\n          required: false,\n        },\n        messages: {\n        },\n      },\n      dataType: {\n        rules: {\n          required: false,\n        },\n        messages: {\n        },\n      },\n    },\n    onSubmit: () => {\n      if (isLocked) {\n        showStakeConfirmModal(true);\n        return;\n      }\n\n      setConfirmModalVisible(true);\n    },\n  });\n\n  async function loadData() {\n    setLoading(true);\n\n    try {\n      await projectTokenContract.loadBalance();\n      await daoCtx.daoBarn.loadUserData();\n      const { userLockedUntil } = daoCtx.daoBarn;\n      let lockEndDate = userLockedUntil ? new Date(userLockedUntil * 1_000) : undefined;\n\n      if (lockEndDate && lockEndDate.valueOf() <= Date.now()) {\n        lockEndDate = undefined;\n      }\n      form.reset({\n        lockEndDate,\n        p2pKey: \"\",\n        dataType: 1,\n      });\n    } catch { }\n\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    loadData().catch(Error);\n  }, []);\n\n  const { formState, watch } = form;\n  const amount = watch('amount');\n  const bnAmount = BigNumber.from(amount);\n  const lockEndDate = watch('lockEndDate');\n  const p2pKey = watch('p2pKey')\n  const dataType = watch('dataType')\n\n  const isEnabled = useMemo(() => barnAllowance?.gt(BigNumber.ZERO) ?? false, [barnAllowance]);\n  const canSubmit = isEnabled && formState.isDirty && formState.isValid && !isSubmitting;\n\n  async function handleTokenEnable() {\n    const barn = config.contracts.dao?.barn;\n\n    if (!barn) {\n      return;\n    }\n\n    setEnabling(true);\n\n    try {\n      await projectTokenContract.approve(barn, true);\n    } catch (e) {\n      console.error(e);\n    }\n\n    setEnabling(false);\n  }\n\n  async function doDepositAndLock(amount: BigNumber, lockUntil: Date | undefined, type: number, p2pkey: string, gasPrice?: number) {\n    setSubmitting(true);\n\n    try {\n      const depositAmount = amount.scaleBy(projectToken.decimals);\n\n      if (depositAmount && lockUntil) {\n        await daoCtx.daoBarn.deposit(depositAmount, gasPrice);\n\n        const timestamp = getUnixTime(lockUntil);\n\n        if (timestamp && timestamp > 0) {\n          // todo:\n          // await daoCtx.daoBarn.addOrAdjusttimelock(depositAmount, timestamp, type, p2pkey, gasPrice);\n          await loadData();\n        }\n      }\n    } catch (e) {\n      console.error(e);\n    }\n\n    setSubmitting(false);\n  }\n\n  function handleCancel() {\n    setConfirmModalVisible(false);\n  }\n\n  async function handleConfirm(gasPrice?: number) {\n    if (!bnAmount) {\n      return;\n    }\n\n    setConfirmModalVisible(false);\n    await doDepositAndLock(bnAmount, lockEndDate, 2, \"0x831f112\", gasPrice);\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center p-24\" style={{ minHeight: '518px' }}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {config.features.faucets && (\n        <Link to=\"/faucets\" className=\"button-ghost ml-auto\">\n          Faucets\n        </Link>\n      )}\n      <Form form={form} className=\"flex flow-row row-gap-32 p-24\" disabled={isSubmitting}>\n        <div className=\"container-box flex flow-col col-gap-44\">\n          <div className=\"flex flow-row row-gap-4\">\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Portfolio balance\n            </Text>\n            <div className=\"flex flow-col col-gap-8 align-center\">\n              <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                {formatToken(stakedBalance) ?? '-'}\n              </Text>\n              <TokenIcon name={projectToken.icon as TokenIconNames} />\n            </div>\n          </div>\n          <div className=\"flex flow-row row-gap-4\">\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Wallet balance\n            </Text>\n            <div className=\"flex flow-col col-gap-8 align-center\">\n              <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                {formatToken(bondBalance) ?? '-'}\n              </Text>\n              <TokenIcon name={projectToken.icon as TokenIconNames} />\n            </div>\n          </div>\n          <div className=\"flex flow-row row-gap-4\">\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Lock duration\n            </Text>\n            <div className=\"flex flow-col col-gap-8 align-center\">\n              <UseLeftTime end={(userLockedUntil ?? getUnixTime(new Date())) * 1_000} delay={1_000}>\n                {leftTime => (\n                  <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                    {getFormattedDuration(leftTime / 1_000)?.trim() || '0s'}\n                  </Text>\n                )}\n              </UseLeftTime>\n            </div>\n          </div>\n        </div>\n        <FormItem name=\"amount\" label=\"Amount\">\n          {({ field }) => (\n            <TokenAmount\n              before={<TokenIcon name={projectToken.icon as TokenIconNames} />}\n              max={bondBalance}\n              disabled={isSubmitting}\n              decimals={projectToken.decimals}\n              slider\n              {...field}\n            />\n          )}\n        </FormItem>\n        <FormItem name=\"lockEndDate\" label=\"Lock end date\">\n          {({ field: { ref, ...field } }) => (\n            <div className=\"flex flow-row row-gap-16\">\n              <DatePicker showTime showNow={false} format=\"DD/MM/YYYY HH:mm\" size=\"large\" {...field} />\n              <div className=\"flexbox-grid\" style={{ '--gap': '8px' } as React.CSSProperties}>\n                {DURATION_OPTIONS.map(item => (\n                  <button\n                    key={item}\n                    type=\"button\"\n                    className={classnames(\n                      'flex justify-center ph-24 pv-16',\n                      field.value?.valueOf() === getLockEndDate(new Date(), item)?.valueOf()\n                        ? 'button-primary'\n                        : 'button-ghost-monochrome',\n                    )}\n                    onClick={() => {\n                      form.updateValue('lockEndDate', getLockEndDate(new Date(), item));\n                    }}>\n                    {item}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </FormItem>\n        <FormItem\n          name=\"dataType\"\n          label=\"DataType (optional)\"\n          labelProps={{ hint: 'What DataType for your node. 1 => BTC_ETH network, 2 => BTC_BSC network' }}\n          className=\"flex-grow\">\n          {({ field }) => (<>\n            <div className=\"flexbox-grid\" style={{ '--gap': '8px' } as React.CSSProperties}>\n              {NETWORK.map(item => (\n                <button\n                  key={item}\n                  type=\"button\"\n                  className={classnames(\n                    'flex justify-center ph-24 pv-16 button-ghost-monochrome'\n                  )}\n                  onClick={() => {\n                    form.updateValue('dataType', getNetworkID(item));\n                  }}>\n                  {item}\n                </button>\n              ))}\n            </div>\n            <Input\n              placeholder=\"0\"\n              dimension=\"large\"\n              className=\"flex-grow\"\n              disabled={isSubmitting}\n              value={dataType}\n              onChange={field.onChange}\n            />\n          </>\n          )}\n        </FormItem>\n        <FormItem\n          name=\"p2pKey\"\n          label=\"Node P2Pkey (optional)\"\n          labelProps={{ hint: 'What is p2p key (32bytes hexstring) is on your node' }}\n          className=\"flex-grow\">\n          {({ field }) => (\n            <Input\n              placeholder=\"0x0\"\n              dimension=\"large\"\n              className=\"flex-grow\"\n              disabled={isSubmitting}\n              value={p2pKey}\n              onChange={field.onChange}\n            />\n          )}\n        </FormItem>\n\n        <Alert message=\"Deposits made after you have an ongoing lock will be added to the locked balance and will be subjected to the same lock timer.\" />\n        <div className=\"flex flow-col col-gap-12 align-center justify-end\">\n          {!isEnabled && (\n            <>\n              <button type=\"button\" className=\"button-primary align-self-start\" onClick={handleTokenEnable}>\n                {isEnabling && <Spinner className=\"mr-4\" />}\n                Enable {projectToken.symbol}\n              </button>\n              <Icon name=\"arrow-forward\" />\n            </>\n          )}\n          <button type=\"submit\" className=\"button-primary align-self-start\" disabled={!canSubmit}>\n            {isSubmitting && <Spinner className=\"mr-4\" />}\n            Timelock\n          </button>\n        </div>\n      </Form>\n\n      {\n        stakeConfirmModal && (\n          <WalletDepositConfirmModal\n            deposit={bnAmount}\n            lockDuration={userLockedUntil}\n            onCancel={() => showStakeConfirmModal(false)}\n            onOk={() => {\n              showStakeConfirmModal(false);\n              // return handleSubmit();\n            }}\n          />\n        )\n      }\n      {\n        confirmModalVisible && (\n          <TxConfirmModal\n            title=\"Confirm deposit\"\n            header={\n              <div className=\"container-box flex flow-row row-gap-4\">\n                <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                  Deposit amount\n                </Text>\n                <div className=\"flex flow-col col-gap-8 align-center\">\n                  <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                    {formatToken(bnAmount, {\n                      decimals: projectToken.decimals,\n                    })}\n                  </Text>\n                  <TokenIcon name={projectToken.icon as TokenIconNames} />\n                </div>\n              </div>\n            }\n            submitText=\"Confirm your deposit\"\n            onCancel={handleCancel}\n            onConfirm={({ gasPrice }) => handleConfirm(gasPrice)}\n          />\n        )\n      }\n    </>\n  );\n};\n\nexport default PortfolioDeposit;\n","import { FC, useEffect, useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport TxConfirmModal from 'web3/components/tx-confirm-modal';\nimport Erc20Contract from 'web3/erc20Contract';\nimport { formatToken } from 'web3/utils';\n\nimport Alert from 'components/antd/alert';\nimport { Form, FormItem, useForm } from 'components/custom/form';\nimport { Spinner } from 'components/custom/spinner';\nimport { TokenAmount } from 'components/custom/token-amount-new';\nimport { Text } from 'components/custom/typography';\nimport { useKnownTokens } from 'components/providers/knownTokensProvider';\nimport { TokenIcon, TokenIconNames } from 'components/token-icon';\nimport { useDAO } from 'modules/governance/components/dao-provider';\n\ntype FormType = {\n  amount: string;\n};\n\nconst PortfolioWithdraw: FC = () => {\n  const { projectToken } = useKnownTokens();\n  const daoCtx = useDAO();\n\n  const [isLoading, setLoading] = useState(false);\n  const [isSubmitting, setSubmitting] = useState(false);\n  const [confirmModalVisible, setConfirmModalVisible] = useState(false);\n\n  const { balance: stakedBalance, userLockedUntil } = daoCtx.daoBarn;\n  const projectTokenContract = projectToken.contract as Erc20Contract;\n  const bondBalance = projectTokenContract.balance?.unscaleBy(projectToken.decimals);\n\n  const isLocked = (userLockedUntil ?? 0) * 1_000 > Date.now();\n\n  const form = useForm<FormType>({\n    validationScheme: {\n      amount: {\n        rules: {\n          required: true,\n          min: 0,\n        },\n        messages: {\n          required: 'Value is required.',\n          min: 'Should be a positive value.',\n        },\n      },\n    },\n    onSubmit: () => {\n      if (bnAmount) {\n        setConfirmModalVisible(true);\n      }\n    },\n  });\n\n  async function loadData() {\n    setLoading(true);\n\n    try {\n      await projectTokenContract.loadBalance();\n      await daoCtx.daoBarn.loadUserData();\n    } catch {}\n\n    setLoading(false);\n  }\n\n  useEffect(() => {\n    loadData().catch(Error);\n  }, []);\n\n  const { formState, watch } = form;\n  const amount = watch('amount');\n  const bnAmount = BigNumber.from(amount);\n\n  const canSubmit = formState.isDirty && !isSubmitting && !isLocked;\n\n  async function doWithdraw(amount: BigNumber, gasPrice?: number) {\n    setSubmitting(true);\n\n    try {\n      const withdrawAmount = amount.scaleBy(projectToken.decimals);\n\n      if (withdrawAmount) {\n        await daoCtx.daoBarn.withdraw(withdrawAmount, gasPrice);\n        await loadData();\n      }\n    } catch (e) {\n      console.error(e);\n    }\n\n    setSubmitting(false);\n  }\n\n  function handleCancel() {\n    setConfirmModalVisible(false);\n  }\n\n  async function handleConfirm(gasPrice?: number) {\n    if (!bnAmount) {\n      return;\n    }\n\n    setConfirmModalVisible(false);\n    await doWithdraw(bnAmount, gasPrice);\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center p-24\" style={{ minHeight: '518px' }}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Form form={form} className=\"flex flow-row row-gap-32 p-24\" disabled={isSubmitting}>\n        <div className=\"container-box flex flow-col col-gap-44\">\n          <div className=\"flex flow-row row-gap-4\">\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Portfolio balance\n            </Text>\n            <div className=\"flex flow-col col-gap-8 align-center\">\n              <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                {formatToken(stakedBalance) ?? '-'}\n              </Text>\n              <TokenIcon name={projectToken.icon as TokenIconNames} />\n            </div>\n          </div>\n          <div className=\"flex flow-row row-gap-4\">\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Wallet balance\n            </Text>\n            <div className=\"flex flow-col col-gap-8 align-center\">\n              <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                {formatToken(bondBalance) ?? '-'}\n              </Text>\n              <TokenIcon name={projectToken.icon as TokenIconNames} />\n            </div>\n          </div>\n        </div>\n        <FormItem name=\"amount\" label=\"Amount\">\n          {({ field }) => (\n            <TokenAmount\n              before={<TokenIcon name={projectToken.icon as TokenIconNames} />}\n              max={stakedBalance}\n              disabled={isSubmitting}\n              decimals={projectToken.decimals}\n              slider\n              {...field}\n            />\n          )}\n        </FormItem>\n        <Alert message=\"Locked balances are not available for withdrawal until the timer ends. Withdrawal means you will stop earning staking rewards for the amount withdrawn.\" />\n        <div className=\"flex flow-col col-gap-12 align-center justify-end\">\n          <button type=\"submit\" className=\"button-primary\" disabled={!canSubmit}>\n            {isSubmitting && <Spinner className=\"mr-4\" />}\n            Withdraw\n          </button>\n        </div>\n      </Form>\n\n      {confirmModalVisible && (\n        <TxConfirmModal\n          title=\"Confirm withdraw\"\n          header={\n            <div className=\"container-box flex flow-row row-gap-4\">\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                Withdraw amount\n              </Text>\n              <div className=\"flex flow-col col-gap-8 align-center\">\n                <Text type=\"p1\" weight=\"bold\" color=\"primary\">\n                  {formatToken(bnAmount, {\n                    decimals: projectToken.decimals,\n                  })}\n                </Text>\n                <TokenIcon name={projectToken.icon as TokenIconNames} />\n              </div>\n            </div>\n          }\n          submitText=\"Confirm your withdraw\"\n          onCancel={handleCancel}\n          onConfirm={({ gasPrice }) => handleConfirm(gasPrice)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default PortfolioWithdraw;\n","import { Redirect, Route, Switch } from 'react-router-dom';\n\nimport { NavTabs } from 'components/custom/tabs';\nimport { Text } from 'components/custom/typography';\nimport PortfolioDelegate from 'modules/governance/views/portfolio-view/portfolio-delegate';\nimport PortfolioDeposit from 'modules/governance/views/portfolio-view/portfolio-deposit';\nimport PortfolioLock from 'modules/governance/views/portfolio-view/portfolio-lock';\nimport PortfolioStake from 'modules/governance/views/portfolio-view/portfolio-stake';\nimport PortfolioWithdraw from 'modules/governance/views/portfolio-view/portfolio-withdraw';\nimport { useWallet } from 'wallets/walletProvider';\n\nconst PortfolioView: React.FC = () => {\n  const wallet = useWallet();\n  if (!wallet.initialized) {\n    return null;\n  }\n\n  if (!wallet.isActive) {\n    return <Redirect to=\"/governance/overview\" />;\n  }\n\n  return (\n    <div className=\"container-fit\">\n      <Text type=\"h1\" weight=\"bold\" color=\"primary\" className=\"mb-32\">\n        Portfolio\n      </Text>\n      <div className=\"card\">\n        <div className=\"card-header pv-0\">\n          <NavTabs\n            tabs={[\n              {\n                id: 'deposit',\n                children: 'Deposit',\n                to: '/governance/portfolio/deposit',\n              },\n              {\n                id: 'lock',\n                children: 'Lock',\n                to: '/governance/portfolio/lock',\n              },\n              {\n                id: 'stake',\n                children: 'Node Stake',\n                to: '/governance/portfolio/stake',\n              },\n              {\n                id: 'delegate',\n                children: 'Delegate',\n                to: '/governance/portfolio/delegate',\n              },\n              {\n                id: 'withdraw',\n                children: 'Withdraw',\n                to: '/governance/portfolio/withdraw',\n              },\n            ]}\n          />\n        </div>\n        <Switch>\n          <Route path=\"/governance/portfolio/deposit\" component={PortfolioDeposit} />\n          <Route path=\"/governance/portfolio/lock\" component={PortfolioLock} />\n          <Route path=\"/governance/portfolio/stake\" component={PortfolioStake} />\n          <Route path=\"/governance/portfolio/delegate\" component={PortfolioDelegate} />\n          <Route path=\"/governance/portfolio/withdraw\" component={PortfolioWithdraw} />\n        </Switch>\n      </div>\n    </div>\n  );\n};\n\nexport default PortfolioView;\n","import React from 'react';\nimport AntdInput, { TextAreaProps as AntdTextAreaProps } from 'antd/lib/input';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nexport type TextareaProps = AntdTextAreaProps;\n\nconst Textarea: React.FC<TextareaProps> = props => {\n  const { className, ...inputProps } = props;\n\n  return <AntdInput.TextArea className={cn(s.component, className)} {...inputProps} />;\n};\n\nexport default Textarea;\n","import { Fragment, FunctionFragment, Interface, JsonFragment, Result, defaultAbiCoder } from '@ethersproject/abi';\n\nexport type AbiInterfaceType = Interface;\nexport type AbiFragmentType = FunctionFragment;\nexport type AbiDecodeResult = Result;\nexport type AbiFunctionFragment = FunctionFragment;\n\nfunction parseValues(values: Array<any>): Array<any> {\n  return values.map(item => {\n    if (typeof item === 'string') {\n      try {\n        const value = JSON.parse(item);\n\n        if (typeof value === 'object') {\n          return value;\n        }\n      } catch {}\n    }\n\n    return item;\n  });\n}\n\nexport class AbiInterface {\n  abi: AbiInterfaceType;\n\n  constructor(fragments: string | Array<Fragment | JsonFragment | string>) {\n    this.abi = new Interface(fragments);\n  }\n\n  get writableFunctions(): AbiFragmentType[] {\n    return Object.values(this.abi.functions).filter(fn => !['view', 'pure'].includes(fn.stateMutability));\n  }\n\n  static encodeFunctionData(functionFragment: AbiFunctionFragment | string, values?: Array<any>): string | undefined {\n    try {\n      const fragment =\n        typeof functionFragment === 'string' ? FunctionFragment.fromString(functionFragment) : functionFragment;\n      return defaultAbiCoder.encode(fragment.inputs, parseValues(values ?? []));\n    } catch (e) {\n      console.error('AbiInterface::encodeFunctionData', e.message);\n    }\n\n    return undefined;\n  }\n\n  static decodeFunctionData(functionFragment: AbiFunctionFragment | string, data: string): AbiDecodeResult | undefined {\n    try {\n      const fragment =\n        typeof functionFragment === 'string' ? FunctionFragment.fromString(functionFragment) : functionFragment;\n      const hexData = data.indexOf('0x') !== 0 ? `0x${data}` : data;\n      return defaultAbiCoder.decode(fragment.inputs, hexData);\n    } catch (e) {\n      console.error('AbiInterface::decodeFunctionData', e.message);\n    }\n\n    return undefined;\n  }\n\n  static getFunctionFragmentFrom(signature: string): AbiFunctionFragment | undefined {\n    try {\n      return FunctionFragment.fromString(signature);\n    } catch (e) {\n      console.error('AbiInterface::getFunctionFragmentFrom', e.message);\n    }\n\n    return undefined;\n  }\n\n  static stringifyParamValue(param: Record<string, any>): string | undefined {\n    try {\n      if (Array.isArray(param)) {\n        return JSON.stringify(param, null, 2);\n      }\n      if (typeof param?.toString === 'function') {\n        return param.toString();\n      }\n\n      return JSON.stringify(param, null, 2);\n    } catch (e) {\n      console.error('AbiInterface::stringifyParamValue', e.message);\n    }\n\n    return undefined;\n  }\n\n  encodeFunctionData(functionFragment: AbiFunctionFragment | string, values?: Array<any>): string {\n    return this.abi.encodeFunctionData(functionFragment, parseValues(values ?? []));\n  }\n}\n","import React from 'react';\nimport { CheckboxOptionType } from 'antd/lib/checkbox/Group';\nimport AntdRadio, { RadioGroupProps as AntdRadioGroupProps } from 'antd/lib/radio';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nexport type YesNoSelectorProps = AntdRadioGroupProps;\n\nconst YesNoOptions: CheckboxOptionType[] = [\n  {\n    label: 'Yes',\n    value: true,\n  },\n  {\n    label: 'No',\n    value: false,\n  },\n];\n\nconst YesNoSelector: React.FC<YesNoSelectorProps> = props => {\n  const { className, ...groupProps } = props;\n\n  return (\n    <AntdRadio.Group\n      className={cn(s.component, className)}\n      options={YesNoOptions}\n      optionType=\"button\"\n      buttonStyle=\"outline\"\n      {...groupProps}\n    />\n  );\n};\n\nexport default YesNoSelector;\n","import React from 'react';\n\nimport Button from 'components/antd/button';\nimport Input from 'components/antd/input';\nimport Popover, { PopoverProps } from 'components/antd/popover';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\n\nexport type AddZerosPopupProps = {\n  max?: number;\n  onAdd: (value: number) => void;\n};\n\nconst AddZerosPopup: React.FC<PopoverProps & AddZerosPopupProps> = props => {\n  const { max, onAdd, ...popoverProps } = props;\n  const [visible, setVisible] = React.useState<boolean>(false);\n  const [value, setValue] = React.useState<string>('');\n\n  function handleChange(ev: React.ChangeEvent<HTMLInputElement>) {\n    setValue(ev.target.value);\n  }\n\n  function handleCancel() {\n    setVisible(false);\n    setValue('');\n  }\n\n  function handleAddZeros() {\n    setVisible(false);\n\n    const val = Number(value);\n\n    if (!Number.isNaN(val)) {\n      onAdd?.(val);\n    }\n\n    setValue('');\n  }\n\n  const content = (\n    <Grid flow=\"row\" gap={24}>\n      <Grid flow=\"row\" gap={8}>\n        <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n          Number of zeros\n        </Text>\n        <Grid flow=\"col\" gap={16}>\n          <Button type=\"ghost\" onClick={() => setValue('6')}>\n            6\n          </Button>\n          <Button type=\"ghost\" onClick={() => setValue('8')}>\n            8\n          </Button>\n          <Button type=\"ghost\" onClick={() => setValue('18')}>\n            18\n          </Button>\n          <Input type=\"number\" value={value} max={max} placeholder={`Max ${max}`} onChange={handleChange} />\n        </Grid>\n      </Grid>\n      <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n        Use the options above to add trailing zeros to the input amount.\n      </Text>\n      <Grid flow=\"col\" gap={16} justify=\"space-between\">\n        <Button type=\"ghost\" onClick={handleCancel}>\n          Cancel\n        </Button>\n        <Button type=\"primary\" onClick={handleAddZeros}>\n          Add zeros\n        </Button>\n      </Grid>\n    </Grid>\n  );\n\n  return (\n    <Popover\n      title=\"Add zeros\"\n      placement=\"bottomLeft\"\n      overlayStyle={{ width: 376 }}\n      content={content}\n      visible={visible}\n      onVisibleChange={setVisible}\n      {...popoverProps}>\n      <Button type=\"link\" icon={<Icon name=\"plus-square-outlined\" width={16} height={16} />} />\n    </Popover>\n  );\n};\n\nexport default AddZerosPopup;\n","import React from 'react';\nimport AntdMenu from 'antd/lib/menu';\nimport AntdPopover, { PopoverProps as AntdPopoverProps } from 'antd/lib/popover';\nimport { MenuInfo } from 'rc-menu/lib/interface';\n\nimport s from './s.module.scss';\n\nexport type PopoverMenuItem = {\n  key: string | number;\n  icon?: React.ReactNode;\n  title?: React.ReactNode;\n};\n\nexport type PopoverMenuProps = AntdPopoverProps & {\n  items: PopoverMenuItem[];\n  onClick: (key: string | number) => void;\n};\n\nconst PopoverMenu: React.FC<PopoverMenuProps> = props => {\n  const { children, items, onClick, ...popoverProps } = props;\n\n  const popoverRef = React.useRef<any>();\n\n  function handleMenuClick(info: MenuInfo) {\n    props.onClick?.(info.key);\n    (popoverRef.current as any)?.close();\n  }\n\n  return (\n    <AntdPopover\n      ref={popoverRef}\n      overlayClassName={s.component}\n      placement=\"bottom\"\n      trigger=\"click\"\n      content={\n        <AntdMenu onClick={handleMenuClick}>\n          {items?.map(item => (\n            <AntdMenu.Item key={item.key}>\n              {item.icon}\n              {item.title}\n            </AntdMenu.Item>\n          ))}\n        </AntdMenu>\n      }\n      {...popoverProps}>\n      {children}\n    </AntdPopover>\n  );\n};\n\nexport default PopoverMenu;\n","import React from 'react';\nimport AntdCard, { CardProps as AntdCardProps } from 'antd/lib/card';\nimport cn from 'classnames';\n\nimport s from './s.module.scss';\n\nexport type ExpandableCardProps = AntdCardProps & {\n  footer?: React.ReactNode;\n};\n\nconst ExpandableCard: React.FC<ExpandableCardProps> = props => {\n  const { className, children, footer, ...cardProps } = props;\n\n  return (\n    <AntdCard className={cn(s.component, className)} {...cardProps}>\n      <div className={s.content}>{children}</div>\n      {footer && <div className={s.footer}>{footer}</div>}\n    </AntdCard>\n  );\n};\nexport default ExpandableCard;\n","import React from 'react';\nimport AntdTypography from 'antd/lib/typography';\nimport cn from 'classnames';\nimport { AbiDecodeResult, AbiFunctionFragment, AbiInterface } from 'web3/abiInterface';\nimport { shortenAddr } from 'web3/utils';\n\nimport Button from 'components/antd/button';\nimport PopoverMenu, { PopoverMenuItem } from 'components/antd/popover-menu';\nimport { ExplorerAddressLink } from 'components/button';\nimport ExpandableCard, { ExpandableCardProps } from 'components/custom/expandable-card';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\n\nimport s from './s.module.scss';\n\nexport type ProposalActionCardProps = ExpandableCardProps & {\n  title: React.ReactNode;\n  target: string;\n  signature: string;\n  callData: string;\n  showSettings?: boolean;\n  onDeleteAction?: () => void;\n  onEditAction?: () => void;\n};\n\nconst ProposalActionCard: React.FC<ProposalActionCardProps> = props => {\n  const {\n    className,\n    title,\n    target,\n    signature,\n    callData,\n    showSettings,\n    onDeleteAction,\n    onEditAction,\n    children,\n    ...cardProps\n  } = props;\n\n  const [ellipsis, setEllipsis] = React.useState<boolean>(false);\n  const [expanded, setExpanded] = React.useState<boolean>(false);\n  const [isSignature, showSignature] = React.useState<boolean>(false);\n\n  const functionFragment = React.useMemo<AbiFunctionFragment | undefined>(() => {\n    return AbiInterface.getFunctionFragmentFrom(signature);\n  }, [signature]);\n\n  const functionParamValues = React.useMemo<AbiDecodeResult | undefined>(() => {\n    if (!functionFragment) {\n      return [];\n    }\n\n    return AbiInterface.decodeFunctionData(functionFragment, callData) ?? [];\n  }, [functionFragment, callData]);\n\n  const stringParams = React.useMemo<string>(() => {\n    const params = functionParamValues?.map(param => AbiInterface.stringifyParamValue(param));\n    return params?.join(',\\n') ?? '';\n  }, [functionParamValues]);\n\n  const ActionMenuItems: PopoverMenuItem[] = [\n    {\n      key: 'sig',\n      icon: <Icon name=\"chevron-right\" />,\n      title: (\n        <Text type=\"p1\" weight=\"semibold\">\n          {isSignature ? 'Show transaction' : 'Show function signature'}\n        </Text>\n      ),\n    },\n    {\n      key: 'edit',\n      icon: <Icon name=\"pencil-outlined\" />,\n      title: 'Edit action',\n    },\n    {\n      key: 'delete',\n      icon: <Icon name=\"bin-outlined\" color=\"red\" />,\n      title: (\n        <Text type=\"p1\" weight=\"semibold\" color=\"red\">\n          Delete action\n        </Text>\n      ),\n    },\n  ];\n\n  function handleEllipsis(isEllipsis: boolean) {\n    setEllipsis(isEllipsis);\n\n    if (isEllipsis) {\n      setExpanded(!isEllipsis);\n    }\n  }\n\n  function handleShowSignature() {\n    showSignature(prevState => !prevState);\n  }\n\n  function handleExpand() {\n    setExpanded(prevState => !prevState);\n  }\n\n  function handleActionMenu(key: string) {\n    if (key === 'sig') {\n      handleShowSignature();\n    } else if (key === 'edit') {\n      onEditAction?.();\n    } else if (key === 'delete') {\n      onDeleteAction?.();\n    }\n  }\n\n  return (\n    <ExpandableCard\n      className={className}\n      title={\n        <Text type=\"p2\" weight=\"semibold\" color=\"primary\">\n          {title}\n        </Text>\n      }\n      extra={\n        showSettings ? (\n          <PopoverMenu items={ActionMenuItems} placement=\"bottomLeft\" onClick={key => handleActionMenu(String(key))}>\n            <Button type=\"link\" icon={<Icon name=\"gear\" />} />\n          </PopoverMenu>\n        ) : (\n          <Button type=\"link\" onClick={handleShowSignature}>\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              {isSignature ? 'Show transaction' : 'Show function signature'}\n            </Text>\n          </Button>\n        )\n      }\n      footer={\n        ellipsis || expanded ? (\n          <Grid flow=\"col\" align=\"center\" justify=\"center\">\n            <Button type=\"link\" onClick={handleExpand}>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                {expanded ? 'Hide details' : 'Show more'}\n              </Text>\n            </Button>\n          </Grid>\n        ) : null\n      }\n      {...cardProps}>\n      <div className={s.content}>\n        <ExplorerAddressLink address={target} query=\"#writeContract\">\n          <Text type=\"p1\" weight=\"semibold\" className={s.address} color=\"blue\">\n            {shortenAddr(target)}\n          </Text>\n        </ExplorerAddressLink>\n        {signature && (\n          <AntdTypography.Paragraph\n            className={cn(s.paragraph, expanded && s.expanded)}\n            style={{ maxWidth: '514px', overflowWrap: 'anywhere' }}\n            ellipsis={{\n              rows: expanded ? 9999 : 2,\n              expandable: false,\n              onEllipsis: handleEllipsis,\n            }}>\n            .{isSignature ? signature : `${functionFragment?.name}(${stringParams})`}\n          </AntdTypography.Paragraph>\n        )}\n      </div>\n    </ExpandableCard>\n  );\n};\n\nexport default ProposalActionCard;\n","import React from 'react';\n\nimport Button from 'components/antd/button';\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\n\nimport ProposalActionCard from '../proposal-action-card';\n\nexport type SimulatedProposalActionModalProps = ModalProps & {\n  targetAddress: any;\n  functionSignature: any;\n  functionEncodedParams: any;\n};\n\nconst SimulatedProposalActionModal: React.FC<SimulatedProposalActionModalProps> = props => {\n  const { targetAddress, functionSignature, functionEncodedParams, ...modalProps } = props;\n\n  return (\n    <Modal width={560} {...modalProps}>\n      <Grid flow=\"row\" gap={32}>\n        <Grid flow=\"row\" gap={24}>\n          <Icon name=\"warning-outlined\" width={40} height={40} color=\"red\" />\n          <Grid flow=\"row\" gap={8}>\n            <Text type=\"h3\" weight=\"semibold\" color=\"primary\">\n              Action could not be simulated\n            </Text>\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n              We run a simulation for every action before adding it to the proposal. The following action failed to\n              simulate:\n            </Text>\n          </Grid>\n          <ProposalActionCard\n            title=\"\"\n            style={{ width: '496px' }}\n            target={targetAddress}\n            signature={functionSignature}\n            callData={functionEncodedParams}\n          />\n          <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n            If you think this is a mistake, you can still add this action to the proposal.\n          </Text>\n        </Grid>\n        <Grid flow=\"col\" justify=\"space-between\">\n          <Button type=\"default\" onClick={modalProps.onOk}>\n            Continue anyway\n          </Button>\n          <Button type=\"primary\" onClick={modalProps.onCancel}>\n            Go back\n          </Button>\n        </Grid>\n      </Grid>\n    </Modal>\n  );\n};\n\nexport default SimulatedProposalActionModal;\n","import React from 'react';\nimport AntdForm, { FormInstance } from 'antd/lib/form';\nimport AntdNotification from 'antd/lib/notification';\nimport AntdSpin from 'antd/lib/spin';\nimport AntdSwitch from 'antd/lib/switch';\nimport { AbiFunctionFragment, AbiInterface } from 'web3/abiInterface';\n\nimport Alert from 'components/antd/alert';\nimport Form from 'components/antd/form';\nimport Input from 'components/antd/input';\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport Select from 'components/antd/select';\nimport Textarea from 'components/antd/textarea';\nimport YesNoSelector from 'components/antd/yes-no-selector';\nimport Grid from 'components/custom/grid';\nimport { Hint, Text } from 'components/custom/typography';\nimport { useConfig } from 'components/providers/configProvider';\nimport { useNetwork } from 'components/providers/networkProvider';\nimport { useWeb3 } from 'components/providers/web3Provider';\nimport useMergeState from 'hooks/useMergeState';\n\nimport AddZerosPopup from '../add-zeros-popup';\nimport SimulatedProposalActionModal from '../simulated-proposal-action-modal';\n\nimport s from './s.module.scss';\n\nexport type CreateProposalActionForm = {\n  targetAddress: string;\n  isProxyAddress: boolean;\n  implementationAddress: string;\n  addValueAttribute?: boolean;\n  actionValue: string;\n  addFunctionCall?: boolean;\n  abiLoading: boolean;\n  abiInterface?: AbiInterface;\n  functionSignature?: string;\n  functionMeta?: AbiFunctionFragment;\n  functionParams: Record<string, any>;\n  functionStrParams: string;\n  functionEncodedParams: string;\n};\n\nconst InitialFormValues: CreateProposalActionForm = {\n  targetAddress: '',\n  isProxyAddress: false,\n  implementationAddress: '',\n  addValueAttribute: false,\n  actionValue: '',\n  addFunctionCall: false,\n  abiLoading: false,\n  abiInterface: undefined,\n  functionSignature: '',\n  functionMeta: undefined,\n  functionParams: {},\n  functionStrParams: '',\n  functionEncodedParams: '',\n};\n\nexport type CreateProposalActionModalProps = ModalProps & {\n  edit?: boolean;\n  actions: CreateProposalActionForm[];\n  initialValues?: CreateProposalActionForm;\n  onSubmit: (values: CreateProposalActionForm) => void;\n};\n\ntype CreateProposalActionModalState = {\n  showSimulatedActionModal: boolean;\n  simulatedAction?: CreateProposalActionForm;\n  simulationResolve?: () => void;\n  simulationReject?: () => void;\n  formDirty: boolean;\n  submitting: boolean;\n};\n\nconst InitialState: CreateProposalActionModalState = {\n  showSimulatedActionModal: false,\n  simulatedAction: undefined,\n  simulationResolve: undefined,\n  simulationReject: undefined,\n  formDirty: false,\n  submitting: false,\n};\n\nconst CreateProposalActionModal: React.FC<CreateProposalActionModalProps> = props => {\n  const { edit = false, initialValues = InitialFormValues } = props;\n\n  const { activeNetwork } = useNetwork();\n  const config = useConfig();\n  const web3 = useWeb3();\n  const [form] = AntdForm.useForm<CreateProposalActionForm>();\n  const [state, setState] = useMergeState<CreateProposalActionModalState>(InitialState);\n\n  function loadAbiInterface(address: string) {\n    form.setFieldsValue({\n      abiLoading: true,\n    });\n\n    const url = `${activeNetwork.explorer.apiUrl}/api?module=contract&action=getabi&address=${address}&apikey=${activeNetwork.explorer.key}`;\n\n    fetch(url)\n      .then(result => result.json())\n      .then(({ status, result }: { status: string; result: string }) => {\n        if (status === '1') {\n          return JSON.parse(result);\n        }\n\n        return Promise.reject(result);\n      })\n      .then((abi: any[]) => {\n        form.setFieldsValue({\n          abiInterface: new AbiInterface(abi),\n        });\n      })\n      .catch(Error)\n      .then(() => {\n        form.setFieldsValue({\n          abiLoading: false,\n        });\n      });\n  }\n\n  function handleFormValuesChange(values: Partial<CreateProposalActionForm>, allValues: CreateProposalActionForm) {\n    const {\n      targetAddress,\n      isProxyAddress,\n      implementationAddress,\n      addFunctionCall,\n      abiInterface,\n      functionSignature,\n      functionMeta,\n      functionParams,\n    } = allValues;\n\n    Object.keys(values).forEach((fieldName: string) => {\n      if (fieldName === 'targetAddress' || fieldName === 'implementationAddress') {\n        form.setFieldsValue({\n          abiLoading: false,\n          abiInterface: undefined,\n          functionSignature: '',\n          functionMeta: undefined,\n          functionParams: {},\n          functionStrParams: '',\n          functionEncodedParams: '',\n        });\n\n        const address = implementationAddress || targetAddress;\n\n        if (addFunctionCall === true && address) {\n          loadAbiInterface(address);\n        }\n      } else if (fieldName === 'isProxyAddress') {\n        if (!isProxyAddress && implementationAddress) {\n          form.setFieldsValue({\n            abiLoading: false,\n            abiInterface: undefined,\n            functionSignature: '',\n            functionMeta: undefined,\n            functionParams: {},\n            functionStrParams: '',\n            functionEncodedParams: '',\n          });\n\n          if (addFunctionCall === true && targetAddress) {\n            loadAbiInterface(targetAddress);\n          }\n        }\n      } else if (fieldName === 'addValueAttribute') {\n        form.setFieldsValue({\n          actionValue: '',\n        });\n      } else if (fieldName === 'addFunctionCall') {\n        form.setFieldsValue({\n          abiLoading: false,\n          abiInterface: undefined,\n          functionSignature: '',\n          functionMeta: undefined,\n          functionParams: {},\n          functionStrParams: '',\n          functionEncodedParams: '',\n        });\n\n        const address = implementationAddress || targetAddress;\n\n        if (addFunctionCall === true && address) {\n          loadAbiInterface(address);\n        }\n      } else if (fieldName === 'functionSignature') {\n        const selectedFunctionMeta = (abiInterface?.writableFunctions ?? []).find(\n          fn => fn.format() === functionSignature,\n        );\n        let functionStrParams = '';\n\n        if (selectedFunctionMeta) {\n          const params = selectedFunctionMeta.inputs.map(({ name, type }) => ({\n            name,\n            type,\n          }));\n          const paramsStr = JSON.stringify(params, null, 2);\n          functionStrParams = `Parameters:\\n${paramsStr}`;\n        }\n\n        form.setFieldsValue({\n          functionMeta: selectedFunctionMeta,\n          functionParams: {},\n          functionStrParams,\n          functionEncodedParams: '',\n        });\n      } else if (fieldName === 'functionParams') {\n        if (functionMeta) {\n          const paramsValues = Object.values(functionParams);\n          const encodedParams = AbiInterface.encodeFunctionData(functionMeta, paramsValues);\n\n          form.setFieldsValue({\n            functionEncodedParams: encodedParams,\n          });\n        }\n      }\n    });\n\n    setState({\n      formDirty: form.isFieldsTouched(),\n    });\n  }\n\n  async function handleSubmit(values: CreateProposalActionForm) {\n    const existsSimilar = props.actions.some(action => {\n      return (\n        action !== values &&\n        action.addFunctionCall &&\n        action.targetAddress === values.targetAddress &&\n        action.functionSignature === values.functionSignature &&\n        action.functionEncodedParams === values.functionEncodedParams\n      );\n    });\n\n    if (existsSimilar) {\n      AntdNotification.error({\n        message: 'Duplicate actions are disallowed!',\n      });\n      return;\n    }\n\n    setState({ submitting: true });\n\n    let cancel = false;\n\n    try {\n      await form.validateFields();\n\n      if (values.addFunctionCall) {\n        const encodedFunction = values.abiInterface?.encodeFunctionData(\n          values.functionMeta!,\n          Object.values(values.functionParams ?? {}),\n        );\n\n        try {\n          await web3.tryCall(\n            values.targetAddress,\n            config.contracts.dao?.governance!,\n            encodedFunction!,\n            values.actionValue,\n          );\n        } catch {\n          await new Promise<void>((resolve, reject) => {\n            setState({\n              showSimulatedActionModal: true,\n              simulatedAction: values,\n              simulationResolve: resolve,\n              simulationReject: reject,\n            });\n          });\n        }\n      }\n\n      await props.onSubmit(values);\n      form.resetFields();\n      cancel = true;\n    } catch (e) {\n      if (e?.message) {\n        AntdNotification.error({\n          message: e?.message,\n        });\n      }\n    }\n\n    setState({ submitting: false });\n\n    if (cancel) {\n      props.onCancel?.();\n    }\n  }\n\n  function handleSimulatedAction(answer: boolean) {\n    if (answer) {\n      state.simulationResolve?.();\n    } else {\n      state.simulationReject?.();\n    }\n\n    setState({\n      showSimulatedActionModal: false,\n      simulationResolve: undefined,\n      simulationReject: undefined,\n    });\n  }\n\n  React.useEffect(() => {\n    if (initialValues !== InitialFormValues) {\n      form.resetFields();\n      form.setFieldsValue(initialValues);\n    }\n  }, [initialValues]);\n\n  return (\n    <Modal\n      className={s.component}\n      confirmClose={state.formDirty}\n      confirmText=\"Are you sure you want to close this form?\"\n      {...props}>\n      <div className={s.wrap}>\n        <Text type=\"h2\" weight=\"semibold\" className={s.headerLabel} color=\"primary\">\n          {edit ? 'Edit action' : 'Add new action'}\n        </Text>\n\n        <Form\n          className={s.form}\n          form={form}\n          initialValues={{}}\n          validateTrigger={['onSubmit', 'onChange']}\n          onValuesChange={handleFormValuesChange}\n          onFinish={handleSubmit}>\n          <Form.Item\n            name=\"targetAddress\"\n            label=\"Target address\"\n            hint=\"This is the address to which the transaction will be sent.\"\n            rules={[{ required: true, message: 'Required' }]}>\n            <Input disabled={state.submitting} />\n          </Form.Item>\n\n          <Grid flow=\"col\" align=\"center\" justify=\"space-between\">\n            <Hint text=\"In case you are using a proxy address as the target, please specify the address where the function implementation is found.\">\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                Is this a proxy address?\n              </Text>\n            </Hint>\n            <Form.Item name=\"isProxyAddress\" noStyle>\n              <AntdSwitch disabled={state.submitting} />\n            </Form.Item>\n          </Grid>\n\n          <Form.Item dependencies={['isProxyAddress']} noStyle>\n            {({ getFieldsValue }) => {\n              const { isProxyAddress } = getFieldsValue();\n\n              return (\n                isProxyAddress === true && (\n                  <Form.Item\n                    name=\"implementationAddress\"\n                    hidden={!isProxyAddress}\n                    preserve={false}\n                    rules={[{ required: true, message: 'Required' }]}>\n                    <Input placeholder=\"Implementation address\" disabled={state.submitting} />\n                  </Form.Item>\n                )\n              );\n            }}\n          </Form.Item>\n\n          <Form.Item\n            name=\"addValueAttribute\"\n            label=\"Add a value attribute to your action?\"\n            hint=\"This field allows you to send some ETH along with your transaction.\"\n            rules={[{ required: true, message: 'Required' }]}>\n            <YesNoSelector disabled={state.submitting} />\n          </Form.Item>\n\n          <Form.Item shouldUpdate={prevValue => prevValue.addValueAttribute === true} noStyle>\n            {({ getFieldsValue }) => {\n              const { addValueAttribute, actionValue } = getFieldsValue();\n              const max = 78 - (actionValue?.length ?? 0);\n\n              return (\n                addValueAttribute === true && (\n                  <Form.Item\n                    name=\"actionValue\"\n                    label={\n                      <Grid flow=\"col\" gap={8}>\n                        <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                          Action Value\n                        </Text>\n                        <AddZerosPopup\n                          max={max}\n                          onAdd={value => {\n                            const { actionValue: prevActionValue } = getFieldsValue();\n\n                            if (prevActionValue) {\n                              const zeros = '0'.repeat(value);\n                              form.setFieldsValue({\n                                actionValue: `${prevActionValue}${zeros}`,\n                              });\n                            }\n                          }}\n                        />\n                      </Grid>\n                    }\n                    preserve={false}\n                    rules={[{ required: true, message: 'Required' }]}>\n                    <Input disabled={state.submitting} />\n                  </Form.Item>\n                )\n              );\n            }}\n          </Form.Item>\n\n          <Form.Item\n            name=\"addFunctionCall\"\n            label=\"Add a function call to your action?\"\n            hint=\"This field allows you to call a function on a smart contract.\"\n            rules={[{ required: true, message: 'Required' }]}>\n            <YesNoSelector disabled={state.submitting} />\n          </Form.Item>\n\n          <Form.Item name=\"abiLoading\" preserve={false} hidden noStyle />\n          <Form.Item name=\"abiInterface\" preserve={false} hidden noStyle />\n          <Form.Item name=\"functionMeta\" preserve={false} hidden noStyle />\n          <Form.Item name=\"functionStrParams\" preserve={false} hidden noStyle />\n          <Form.Item name=\"functionEncodedParams\" preserve={false} hidden noStyle />\n\n          <Form.Item\n            shouldUpdate={(prevValues: CreateProposalActionForm) => prevValues.addFunctionCall === true}\n            noStyle>\n            {({ getFieldsValue }: FormInstance<CreateProposalActionForm>) => {\n              const {\n                targetAddress,\n                addFunctionCall,\n                abiLoading,\n                abiInterface,\n                functionMeta,\n                functionParams,\n                functionStrParams,\n                functionEncodedParams,\n              } = getFieldsValue();\n\n              if (addFunctionCall !== true) {\n                return null;\n              }\n\n              const functionOptions =\n                abiInterface?.writableFunctions.map(fn => ({\n                  label: fn.format(),\n                  value: fn.format(),\n                })) ?? [];\n\n              return (\n                <Grid flow=\"row\" gap={32}>\n                  <Form.Item\n                    name=\"functionSignature\"\n                    label=\"Select function\"\n                    preserve={false}\n                    rules={[{ required: true, message: 'Required' }]}>\n                    <Select loading={abiLoading} disabled={state.submitting} options={functionOptions} fixScroll />\n                  </Form.Item>\n\n                  {functionMeta && (\n                    <Grid flow=\"row\" gap={32}>\n                      {functionMeta.inputs.map(input => (\n                        <Form.Item\n                          key={`${functionMeta?.format()}:${input.name}`}\n                          name={['functionParams', input.name]}\n                          label={\n                            <Grid flow=\"col\" gap={8}>\n                              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                                {input.name} ({input.type})\n                              </Text>\n                              {/(u?int\\d+)/g.test(input.type) && (\n                                <AddZerosPopup\n                                  onAdd={value => {\n                                    const prevActionValue = functionParams[input.name];\n\n                                    if (prevActionValue) {\n                                      const zeros = '0'.repeat(value);\n                                      functionParams[input.name] = `${prevActionValue}${zeros}`;\n\n                                      const paramsValues = Object.values(functionParams);\n                                      const encodedParams = AbiInterface.encodeFunctionData(functionMeta, paramsValues);\n\n                                      form.setFieldsValue({\n                                        functionParams,\n                                        functionEncodedParams: encodedParams,\n                                      });\n                                    }\n                                  }}\n                                />\n                              )}\n                            </Grid>\n                          }\n                          preserve={false}\n                          rules={[{ required: true, message: 'Required' }]}>\n                          <Input disabled={state.submitting} placeholder={`${input.name} (${input.type})`} />\n                        </Form.Item>\n                      ))}\n\n                      <Form.Item label={`Function type: ${functionMeta.name}`}>\n                        <Textarea className={s.textarea} rows={5} value={functionStrParams} disabled />\n                      </Form.Item>\n\n                      <Form.Item label=\"Hex data\">\n                        <Textarea\n                          className={s.textarea}\n                          rows={5}\n                          placeholder=\"Fill in the arguments above\"\n                          value={functionEncodedParams}\n                          disabled\n                        />\n                      </Form.Item>\n                    </Grid>\n                  )}\n\n                  {targetAddress && addFunctionCall && !abiLoading && !abiInterface && (\n                    <Alert\n                      type=\"error\"\n                      message=\"The target address you entered is not a validated contract address. Please check the information you entered and try again\"\n                    />\n                  )}\n                </Grid>\n              );\n            }}\n          </Form.Item>\n\n          <Form.Item dependencies={['addValueAttribute', 'addFunctionCall']} noStyle>\n            {({ getFieldsValue }) => {\n              const { addValueAttribute, addFunctionCall } = getFieldsValue();\n\n              return (\n                addValueAttribute === false &&\n                addFunctionCall === false && (\n                  <Alert\n                    type=\"error\"\n                    message=\"You need to provide at least one: a value attribute or a function call to your action\"\n                  />\n                )\n              );\n            }}\n          </Form.Item>\n\n          <div className={s.actions}>\n            <button\n              type=\"button\"\n              disabled={state.submitting}\n              onClick={props.onCancel}\n              className=\"button-ghost-monochrome\">\n              {edit ? 'Cancel Changes' : 'Cancel'}\n            </button>\n            <button className=\"button-primary\" type=\"submit\">\n              {state.submitting && <AntdSpin spinning />}\n              {edit ? 'Save Changes' : 'Add Action'}\n            </button>\n          </div>\n        </Form>\n\n        {state.showSimulatedActionModal && state.simulatedAction && (\n          <SimulatedProposalActionModal\n            targetAddress={state.simulatedAction.targetAddress}\n            functionSignature={state.simulatedAction.functionSignature}\n            functionEncodedParams={state.simulatedAction.functionEncodedParams}\n            onOk={() => handleSimulatedAction(true)}\n            onCancel={() => handleSimulatedAction(false)}\n          />\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default CreateProposalActionModal;\n","import React from 'react';\n\nimport Button from 'components/antd/button';\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\n\nexport type DeleteProposalActionModalProps = ModalProps;\n\nconst DeleteProposalActionModal: React.FC<DeleteProposalActionModalProps> = props => {\n  const { ...modalProps } = props;\n\n  return (\n    <Modal width={560} {...modalProps}>\n      <div className=\"flex flow-row row-gap-32\">\n        <div className=\"flex col-gap-16 align-center\">\n          <Icon name=\"warning-outlined\" width={40} height={40} color=\"red\" />\n          <Text type=\"h3\" weight=\"semibold\" color=\"primary\">\n            Are you sure you want to delete the action?\n          </Text>\n        </div>\n        <div className=\"flex justify-space-between\">\n          <Button type=\"default\" onClick={modalProps.onCancel}>\n            Cancel\n          </Button>\n          <Button type=\"primary\" onClick={modalProps.onOk}>\n            Delete Action\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default DeleteProposalActionModal;\n","import React from 'react';\nimport { Redirect, useHistory } from 'react-router-dom';\nimport AntdForm from 'antd/lib/form';\nimport { waitUntil } from 'async-wait-until';\nimport cn from 'classnames';\nimport { StoreValue } from 'rc-field-form/lib/interface';\n\nimport Alert from 'components/antd/alert';\nimport Button from 'components/antd/button';\nimport Form from 'components/antd/form';\nimport Input from 'components/antd/input';\nimport Textarea from 'components/antd/textarea';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\nimport useMergeState from 'hooks/useMergeState';\nimport { useDaoAPI } from 'modules/governance/api';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport CreateProposalActionModal, { CreateProposalActionForm } from '../../components/create-proposal-action-modal';\nimport { useDAO } from '../../components/dao-provider';\nimport DeleteProposalActionModal from '../../components/delete-proposal-action-modal';\nimport ProposalActionCard from '../../components/proposal-action-card';\n\nimport s from './s.module.scss';\n\ntype NewProposalForm = {\n  title: string;\n  description: string;\n  actions: CreateProposalActionForm[];\n};\n\ntype ProposalCreateViewState = {\n  hasActiveProposal?: boolean;\n  showCreateActionModal: boolean;\n  showDeleteActionModal: boolean;\n  selectedAction?: CreateProposalActionForm;\n  submitting: boolean;\n};\n\nconst InitialState: ProposalCreateViewState = {\n  hasActiveProposal: undefined,\n  showCreateActionModal: false,\n  showDeleteActionModal: false,\n  selectedAction: undefined,\n  submitting: false,\n};\n\nconst ProposalCreateView: React.FC = () => {\n  const history = useHistory();\n  const daoAPI = useDaoAPI();\n  const daoCtx = useDAO();\n  const wallet = useWallet();\n\n  const [form] = AntdForm.useForm<NewProposalForm>();\n  const [state, setState] = useMergeState<ProposalCreateViewState>(InitialState);\n\n  function handleBackClick() {\n    history.push('/governance/proposals');\n  }\n\n  function handleCreateAction(payload: CreateProposalActionForm) {\n    let actions = form.getFieldValue('actions');\n\n    if (state.selectedAction) {\n      actions = actions.map((action: CreateProposalActionForm) => (action === state.selectedAction ? payload : action));\n    } else {\n      actions.push(payload);\n    }\n\n    form.setFieldsValue({\n      actions,\n    });\n  }\n\n  function handleActionDelete() {\n    const { selectedAction } = state;\n\n    if (selectedAction) {\n      form.setFieldsValue({\n        actions: form.getFieldValue('actions').filter((action: CreateProposalActionForm) => action !== selectedAction),\n      });\n    }\n\n    setState({\n      showDeleteActionModal: false,\n      selectedAction: undefined,\n    });\n  }\n\n  async function handleSubmit(values: NewProposalForm) {\n    setState({ submitting: true });\n\n    try {\n      await form.validateFields();\n\n      const payload = {\n        title: values.title,\n        description: values.description,\n        ...values.actions.reduce(\n          (a, c) => {\n            if (!c.targetAddress) {\n              return a;\n            }\n\n            a.targets.push(c.targetAddress);\n\n            if (c.addFunctionCall) {\n              a.signatures.push(c.functionSignature!);\n              a.calldatas.push(c.functionEncodedParams || '0x');\n            } else {\n              a.signatures.push('');\n              a.calldatas.push('0x');\n            }\n\n            if (c.addValueAttribute) {\n              a.values.push(c.actionValue!);\n            } else {\n              a.values.push('0');\n            }\n\n            return a;\n          },\n          {\n            targets: [] as string[],\n            signatures: [] as string[],\n            calldatas: [] as string[],\n            values: [] as string[],\n          },\n        ),\n      };\n\n      const proposalId = await daoCtx.daoGovernance.propose(\n        payload.title,\n        payload.description,\n        payload.targets,\n        payload.values,\n        payload.signatures,\n        payload.calldatas,\n        1,\n      ); /// TODO: GAS PRICE\n\n      await waitUntil(() => daoAPI.fetchProposal(proposalId), { intervalBetweenAttempts: 3_000, timeout: Infinity });\n\n      form.resetFields();\n      history.push(`/governance/proposals/${proposalId}`);\n    } catch (e) {\n      console.error(e);\n    }\n\n    setState({ submitting: false });\n  }\n\n  React.useEffect(() => {\n    daoCtx.actions.hasActiveProposal().then(hasActiveProposal => {\n      setState({ hasActiveProposal });\n    });\n  }, [wallet.account]);\n\n  if (!wallet.initialized) {\n    return null;\n  }\n\n  if (!wallet.isActive) {\n    return <Redirect to=\"/governance/proposals\" />;\n  }\n\n  const hasCreateRestrictions = state.hasActiveProposal !== undefined && daoCtx.actions.hasThreshold() !== undefined;\n\n  if (daoCtx.isActive === undefined || !hasCreateRestrictions) {\n    return null;\n  }\n\n  const canCreateProposal = state.hasActiveProposal === false && daoCtx.actions.hasThreshold() === true;\n\n  if (!daoCtx.isActive || !canCreateProposal) {\n    return <Redirect to=\"/governance/proposals\" />;\n  }\n\n  return (\n    <div className=\"container-limit\">\n      <div className=\"mb-16\">\n        <button type=\"button\" onClick={handleBackClick} className=\"button-text\">\n          <Icon name=\"arrow-back\" width={16} height={16} className=\"mr-8\" color=\"inherit\" />\n          Proposals\n        </button>\n      </div>\n\n      <Text type=\"h1\" weight=\"bold\" color=\"primary\" className=\"mb-16\">\n        Create Proposal\n      </Text>\n      <Form\n        form={form}\n        initialValues={{\n          title: '',\n          description: '',\n          actions: [],\n        }}\n        validateTrigger={['onSubmit', 'onChange']}\n        onFinish={handleSubmit}>\n        <div className={cn(s.cardsContainer, 'mb-40')}>\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                Proposal description\n              </Text>\n            </div>\n            <div className=\"flex flow-row row-gap-24 p-24\">\n              <Form.Item name=\"title\" label=\"Title\" rules={[{ required: true, message: 'Required' }]}>\n                <Input placeholder=\"Proposal title\" disabled={state.submitting} />\n              </Form.Item>\n              <Form.Item\n                name=\"description\"\n                label=\"Description\"\n                hint=\"Be careful with the length of the description, this will eventually have to be stored on chain and the gas needed might make the proposal creation transaction more expensive.\"\n                rules={[{ required: true, message: 'Required' }]}>\n                <Textarea\n                  placeholder=\"Please enter the goal of this proposal here\"\n                  rows={6}\n                  disabled={state.submitting}\n                />\n              </Form.Item>\n            </div>\n          </div>\n\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                Actions\n              </Text>\n            </div>\n            <div className=\"p-24\">\n              <Form.List\n                name=\"actions\"\n                rules={[\n                  {\n                    validator: (_, value: StoreValue) => {\n                      return value.length === 0 ? Promise.reject() : Promise.resolve();\n                    },\n                    message: 'At least one action is required!',\n                  },\n                  {\n                    validator: (_, value: StoreValue) => {\n                      return value.length > 10 ? Promise.reject() : Promise.resolve();\n                    },\n                    message: 'Maximum 10 actions are allowed!',\n                  },\n                ]}>\n                {(fields, _, { errors }) => (\n                  <>\n                    {fields.map((field, index) => {\n                      const fieldData: CreateProposalActionForm = form.getFieldValue(['actions', index]);\n                      const { targetAddress, functionSignature, functionEncodedParams } = fieldData;\n\n                      return (\n                        <Form.Item key={field.key} noStyle>\n                          <ProposalActionCard\n                            className=\"mb-24\"\n                            title={`Action ${index + 1}`}\n                            target={targetAddress}\n                            signature={functionSignature!}\n                            callData={functionEncodedParams!}\n                            showSettings\n                            onDeleteAction={() => {\n                              setState({\n                                showDeleteActionModal: true,\n                                selectedAction: fieldData,\n                              });\n                            }}\n                            onEditAction={() => {\n                              setState({\n                                showCreateActionModal: true,\n                                selectedAction: fieldData,\n                              });\n                            }}\n                          />\n                        </Form.Item>\n                      );\n                    })}\n\n                    {fields.length < 10 && (\n                      <Button\n                        type=\"ghost\"\n                        icon={<Icon name=\"plus-circle-outlined\" color=\"inherit\" />}\n                        disabled={state.submitting}\n                        className={s.addActionBtn}\n                        onClick={() => setState({ showCreateActionModal: true })}>\n                        Add new action\n                      </Button>\n                    )}\n\n                    {fields.length >= 10 && <Alert type=\"info\" message=\"Maximum 10 actions are allowed.\" />}\n\n                    <AntdForm.ErrorList errors={errors} />\n                  </>\n                )}\n              </Form.List>\n            </div>\n          </div>\n        </div>\n        <div>\n          <Button type=\"primary\" htmlType=\"submit\" size=\"large\" loading={state.submitting}>\n            Create proposal\n          </Button>\n        </div>\n      </Form>\n\n      {state.showCreateActionModal && (\n        <CreateProposalActionModal\n          edit={state.selectedAction !== undefined}\n          actions={form.getFieldValue('actions')}\n          initialValues={state.selectedAction}\n          onCancel={() =>\n            setState({\n              showCreateActionModal: false,\n              selectedAction: undefined,\n            })\n          }\n          onSubmit={handleCreateAction}\n        />\n      )}\n\n      {state.showDeleteActionModal && (\n        <DeleteProposalActionModal\n          onCancel={() =>\n            setState({\n              showDeleteActionModal: false,\n              selectedAction: undefined,\n            })\n          }\n          onOk={handleActionDelete}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ProposalCreateView;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport * as Antd from 'antd';\nimport BigNumber from 'bignumber.js';\n\nimport useMergeState from 'hooks/useMergeState';\nimport { useReload } from 'hooks/useReload';\nimport { APIProposalEntity, useDaoAPI } from 'modules/governance/api';\nimport { useDAO } from 'modules/governance/components/dao-provider';\nimport { ProposalReceipt } from 'modules/governance/contracts/daoGovernance';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport { InvariantContext } from 'utils/context';\n\nexport type ProposalProviderState = {\n  proposal?: APIProposalEntity;\n  forRate?: number;\n  againstRate?: number;\n  quorum?: number;\n  minThreshold: number;\n  thresholdRate?: number;\n  votingPower?: BigNumber;\n  receipt?: ProposalReceipt;\n  isCanceled?: boolean;\n};\n\nconst InitialState: ProposalProviderState = {\n  minThreshold: 1,\n};\n\nexport type ProposalContextType = ProposalProviderState & {\n  reload(): void;\n  cancelProposal(): Promise<void>;\n  queueProposalForExecution(gasPrice: number): Promise<void>;\n  executeProposal(): Promise<void>;\n  proposalCastVote(support: boolean, gasPrice: number): Promise<void>;\n  proposalCancelVote(gasPrice: number): Promise<void>;\n  startAbrogationProposal(description: string, gasPrice: number): Promise<void>;\n};\n\nconst Context = React.createContext<ProposalContextType>(InvariantContext('ProposalProvider'));\n\nexport function useProposal(): ProposalContextType {\n  return React.useContext(Context);\n}\n\nexport type ProposalProviderProps = {\n  proposalId?: number;\n};\n\nconst ProposalProvider: React.FC<ProposalProviderProps> = props => {\n  const { proposalId, children } = props;\n\n  const history = useHistory();\n  const wallet = useWallet();\n  const daoAPI = useDaoAPI();\n  const daoCtx = useDAO();\n  const [reload, version] = useReload();\n\n  const [state, setState] = useMergeState<ProposalProviderState>(InitialState);\n\n  React.useEffect(() => {\n    if (!proposalId) {\n      setState({ proposal: undefined });\n      return;\n    }\n\n    daoAPI\n      .fetchProposal(proposalId)\n      .then(proposal => {\n        setState({ proposal });\n      })\n      .catch((status: number) => {\n        if (status === 404) {\n          Antd.notification.error({\n            message: `Proposal with id=${proposalId} doesn't exist.`,\n          });\n        } else {\n          Antd.notification.error({\n            message: `Failed to fetch proposal with id=${proposalId}. (Status: ${status})`,\n          });\n        }\n\n        history.push('/governance/proposals');\n      });\n  }, [proposalId, version]);\n\n  React.useEffect(() => {\n    setState({\n      forRate: undefined,\n      againstRate: undefined,\n      quorum: undefined,\n      isCanceled: undefined,\n    });\n\n    if (!state.proposal) {\n      return;\n    }\n\n    const { forVotes, againstVotes, createTime, warmUpDuration } = state.proposal;\n    const total = forVotes.plus(againstVotes);\n\n    let forRate = 0;\n    let againstRate = 0;\n\n    if (total.gt(BigNumber.ZERO)) {\n      forRate = forVotes.multipliedBy(100).div(total).toNumber();\n      againstRate = againstVotes.multipliedBy(100).div(total).toNumber();\n    }\n\n    setState({\n      forRate,\n      againstRate,\n    });\n\n    daoCtx.daoBarn.getBondStakedAtTs(createTime + warmUpDuration).then(bondStakedAt => {\n      let quorum: number | undefined;\n\n      if (bondStakedAt?.gt(BigNumber.ZERO)) {\n        quorum = total.multipliedBy(100).div(bondStakedAt).toNumber();\n      }\n\n      setState({ quorum });\n    });\n\n    daoCtx.daoGovernance.getAbrogationProposals(state.proposal.proposalId).then(result => {\n      if (result) {\n        setState({ isCanceled: result.createTime > 0 });\n      }\n    });\n  }, [state.proposal]);\n\n  React.useEffect(() => {\n    setState({\n      thresholdRate: undefined,\n    });\n\n    const { bondStaked } = daoCtx.daoBarn;\n\n    if (!state.proposal || !bondStaked || bondStaked.isEqualTo(BigNumber.ZERO)) {\n      return;\n    }\n\n    const { proposer } = state.proposal;\n\n    daoCtx.daoBarn.getVotingPower(proposer).then(votingPower => {\n      if (votingPower) {\n        setState({\n          thresholdRate: votingPower.div(bondStaked).multipliedBy(100).toNumber(),\n        });\n      }\n    });\n  }, [state.proposal, daoCtx.daoBarn.bondStaked]);\n\n  React.useEffect(() => {\n    setState({\n      receipt: undefined,\n      votingPower: undefined,\n    });\n\n    if (!state.proposal || !wallet.isActive) {\n      return;\n    }\n\n    const { createTime, warmUpDuration } = state.proposal;\n\n    daoCtx.daoGovernance.getReceipt(state.proposal.proposalId, wallet.account!).then(receipt => {\n      setState({ receipt });\n    });\n\n    daoCtx.daoBarn.getVotingPowerAtTs(wallet.account!, createTime + warmUpDuration).then(votingPower => {\n      setState({ votingPower });\n    });\n  }, [state.proposal, wallet.account]);\n\n  function cancelProposal(): Promise<void> {\n    return proposalId ? daoCtx.daoGovernance.cancelProposal(proposalId).then(() => reload()) : Promise.reject();\n  }\n\n  function queueProposalForExecution(gasPrice: number): Promise<void> {\n    return proposalId ? daoCtx.daoGovernance.queue(proposalId, gasPrice).then(() => reload()) : Promise.reject();\n  }\n\n  function executeProposal(): Promise<void> {\n    return proposalId ? daoCtx.daoGovernance.execute(proposalId).then(() => reload()) : Promise.reject();\n  }\n\n  function proposalCastVote(support: boolean, gasPrice: number): Promise<void> {\n    return proposalId\n      ? daoCtx.daoGovernance.castVote(proposalId, support, gasPrice).then(() => reload())\n      : Promise.reject();\n  }\n\n  function proposalCancelVote(gasPrice: number): Promise<void> {\n    return proposalId ? daoCtx.daoGovernance.cancelVote(proposalId, gasPrice).then(() => reload()) : Promise.reject();\n  }\n\n  function startAbrogationProposal(description: string, gasPrice: number): Promise<void> {\n    return proposalId\n      ? daoCtx.daoGovernance.startAbrogationProposal(proposalId, description, gasPrice).then(() => reload())\n      : Promise.reject();\n  }\n\n  return (\n    <Context.Provider\n      value={{\n        ...state,\n        reload,\n        cancelProposal,\n        queueProposalForExecution,\n        executeProposal,\n        proposalCastVote,\n        proposalCancelVote,\n        startAbrogationProposal,\n      }}>\n      {children}\n    </Context.Provider>\n  );\n};\n\nexport default ProposalProvider;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport * as Antd from 'antd';\nimport BigNumber from 'bignumber.js';\n\nimport useMergeState from 'hooks/useMergeState';\nimport { useReload } from 'hooks/useReload';\nimport { APIAbrogationEntity, useDaoAPI } from 'modules/governance/api';\nimport { useDAO } from 'modules/governance/components/dao-provider';\nimport { AbrogationProposalReceipt } from 'modules/governance/contracts/daoGovernance';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport { useProposal } from '../ProposalProvider';\n\nimport { InvariantContext } from 'utils/context';\n\nexport type AbrogationProviderState = {\n  abrogation?: APIAbrogationEntity;\n  forRate?: number;\n  againstRate?: number;\n  acceptanceThreshold?: number;\n  approvalRate?: number;\n  votingPower?: BigNumber;\n  receipt?: AbrogationProposalReceipt;\n};\n\nconst InitialState: AbrogationProviderState = {\n  acceptanceThreshold: 50,\n};\n\nexport type AbrogationContextType = AbrogationProviderState & {\n  reload(): void;\n  abrogationProposalCastVote(support: boolean, gasPrice: number): Promise<void>;\n  abrogationProposalCancelVote(gasPrice: number): Promise<void>;\n};\n\nconst Context = React.createContext<AbrogationContextType>(InvariantContext('AbrogationProvider'));\n\nexport function useAbrogation(): AbrogationContextType {\n  return React.useContext(Context);\n}\n\nconst AbrogationProvider: React.FC = props => {\n  const { children } = props;\n\n  const history = useHistory();\n  const [reload, version] = useReload();\n  const wallet = useWallet();\n  const daoAPI = useDaoAPI();\n  const daoCtx = useDAO();\n  const { proposal } = useProposal();\n\n  const [state, setState] = useMergeState<AbrogationProviderState>(InitialState);\n\n  React.useEffect(() => {\n    if (!proposal) {\n      setState({\n        abrogation: undefined,\n      });\n      return;\n    }\n\n    daoAPI\n      .fetchAbrogation(proposal.proposalId)\n      .then(abrogation => {\n        setState({\n          abrogation,\n        });\n      })\n      .catch((status: number) => {\n        if (status === 404) {\n          Antd.notification.error({\n            message: `Proposal with id=${proposal.proposalId} doesn't exist.`,\n          });\n        } else {\n          Antd.notification.error({\n            message: `Failed to fetch proposal with id=${proposal.proposalId}. (Status: ${status})`,\n          });\n        }\n\n        history.push(`/governance/proposals/${proposal.proposalId}`);\n      });\n  }, [proposal, version]);\n\n  React.useEffect(() => {\n    setState({\n      forRate: undefined,\n      againstRate: undefined,\n    });\n\n    if (!state.abrogation) {\n      return;\n    }\n\n    const { forVotes, againstVotes, createTime } = state.abrogation;\n    const total = forVotes.plus(againstVotes);\n\n    let forRate = 0;\n    let againstRate = 0;\n\n    if (total.gt(BigNumber.ZERO)) {\n      forRate = forVotes.multipliedBy(100).div(total).toNumber();\n      againstRate = againstVotes.multipliedBy(100).div(total).toNumber();\n    }\n\n    setState({\n      forRate,\n      againstRate,\n    });\n\n    daoCtx.daoBarn.getBondStakedAtTs(createTime - 1).then(bondStakedAt => {\n      let approvalRate: number | undefined;\n\n      if (bondStakedAt?.gt(BigNumber.ZERO)) {\n        approvalRate = forVotes.multipliedBy(100).div(bondStakedAt).toNumber();\n        approvalRate = Math.min(approvalRate!, 100);\n      }\n\n      setState({\n        approvalRate,\n      });\n    });\n  }, [state.abrogation]);\n\n  React.useEffect(() => {\n    setState({\n      approvalRate: undefined,\n    });\n\n    if (!state.abrogation || !wallet.account) {\n      return;\n    }\n\n    const { proposalId, createTime } = state.abrogation;\n\n    daoCtx.daoBarn.getVotingPowerAtTs(wallet.account, createTime - 1).then(votingPower => {\n      setState({\n        votingPower,\n      });\n    });\n\n    daoCtx.daoGovernance.getAbrogationProposalReceipt(proposalId, wallet.account!).then(receipt => {\n      setState({\n        receipt,\n      });\n    });\n  }, [state.abrogation, wallet.account]);\n\n  function abrogationProposalCastVote(support: boolean, gasPrice: number): Promise<void> {\n    return proposal?.proposalId\n      ? daoCtx.daoGovernance.abrogationProposalCastVote(proposal?.proposalId, support, gasPrice).then(() => reload())\n      : Promise.reject();\n  }\n\n  function abrogationProposalCancelVote(gasPrice: number): Promise<void> {\n    return proposal?.proposalId\n      ? daoCtx.daoGovernance.abrogationProposalCancelVote(proposal?.proposalId, gasPrice).then(() => reload())\n      : Promise.reject();\n  }\n\n  return (\n    <Context.Provider\n      value={{\n        ...state,\n        reload,\n        abrogationProposalCastVote,\n        abrogationProposalCancelVote,\n      }}>\n      {children}\n    </Context.Provider>\n  );\n};\n\nexport default AbrogationProvider;\n","import React from 'react';\n\nimport Progress from 'components/antd/progress';\nimport Grid from 'components/custom/grid';\nimport { Hint, Text } from 'components/custom/typography';\n\nimport { useAbrogation } from '../../providers/AbrogationProvider';\n\nconst AbrogationApprovalCard: React.FC = () => {\n  const abrogationCtx = useAbrogation();\n\n  const passed = (abrogationCtx.approvalRate ?? 0) >= (abrogationCtx.acceptanceThreshold ?? 0);\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <Hint text=\"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if Approval is set to 51%, then more than 51% of the votes on a proposal must vote Yes for the proposal to pass.\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Abrogation proposal approval\n          </Text>\n        </Hint>\n      </div>\n      <Grid className=\"p-24\" flow=\"row\" gap={16}>\n        <Grid flow=\"col\" gap={8}>\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            {abrogationCtx.approvalRate?.toFixed(2)}%\n          </Text>\n          <Text type=\"p1\" color=\"secondary\">\n            (&gt; {abrogationCtx.acceptanceThreshold}% required)\n          </Text>\n        </Grid>\n        <Progress\n          percent={abrogationCtx.approvalRate}\n          acceptance={abrogationCtx.acceptanceThreshold}\n          strokeColor={passed ? 'var(--theme-green-color)' : 'var(--theme-red-color)'}\n          trailColor={passed ? 'rgba(var(--theme-green-color-rgb), .16)' : 'rgba(var(--theme-red-color-rgb), .16)'}\n        />\n      </Grid>\n    </div>\n  );\n};\n\nexport default AbrogationApprovalCard;\n","import React from 'react';\nimport { shortenAddr } from 'web3/utils';\n\nimport Divider from 'components/antd/divider';\nimport { ExplorerAddressLink } from 'components/button';\nimport Grid from 'components/custom/grid';\nimport Identicon from 'components/custom/identicon';\nimport { Text } from 'components/custom/typography';\n\nimport { useAbrogation } from '../../providers/AbrogationProvider';\n\nconst AbrogationDetailsCard: React.FC = () => {\n  const abrogationCtx = useAbrogation();\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n          Details\n        </Text>\n      </div>\n      <Grid flow=\"col\" gap={32} justify=\"space-between\" padding={24}>\n        <Grid flow=\"col\" gap={32}>\n          <Grid flow=\"row\" gap={4}>\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n              Created by\n            </Text>\n            <Grid flow=\"col\" gap={8}>\n              <Identicon address={abrogationCtx.abrogation?.caller} width={24} height={24} />\n              <ExplorerAddressLink address={abrogationCtx.abrogation?.caller}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"blue\">\n                  {shortenAddr(abrogationCtx.abrogation?.caller)}\n                </Text>\n              </ExplorerAddressLink>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Divider />\n      <Grid flow=\"row\" gap={16} padding={24}>\n        <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n          Description\n        </Text>\n        <Text type=\"p1\" color=\"primary\" wrap>\n          {abrogationCtx.abrogation?.description}\n        </Text>\n      </Grid>\n    </div>\n  );\n};\n\nexport default AbrogationDetailsCard;\n","import React from 'react';\n\nimport useMergeState from 'hooks/useMergeState';\nimport { APIVoteEntity, useDaoAPI } from 'modules/governance/api';\n\nimport { useAbrogation } from '../AbrogationProvider';\n\nimport { InvariantContext } from 'utils/context';\n\ntype AbrogationVotersProviderState = {\n  votes: APIVoteEntity[];\n  total: number;\n  page: number;\n  pageSize: number;\n  loading: boolean;\n  supportFilter?: boolean;\n};\n\nexport type AbrogationVotersContextType = AbrogationVotersProviderState & {\n  changeSupportFilter(supportFilter?: boolean): void;\n  changePage(page: number): void;\n};\n\nconst InitialState: AbrogationVotersProviderState = {\n  votes: [],\n  total: 0,\n  page: 1,\n  pageSize: 10,\n  loading: false,\n  supportFilter: undefined,\n};\n\nconst Context = React.createContext<AbrogationVotersContextType>(InvariantContext('AbrogationVotersProvider'));\n\nexport function useAbrogationVoters(): AbrogationVotersContextType {\n  return React.useContext(Context);\n}\n\nconst AbrogationVotersProvider: React.FC = props => {\n  const { children } = props;\n\n  const daoAPI = useDaoAPI();\n  const { abrogation } = useAbrogation();\n  const [state, setState] = useMergeState<AbrogationVotersProviderState>(InitialState);\n\n  React.useEffect(() => {\n    if (!abrogation) {\n      setState({\n        votes: [],\n        total: 0,\n      });\n      return;\n    }\n\n    setState({ loading: true });\n\n    daoAPI\n      .fetchAbrogationVoters(abrogation.proposalId, state.page, state.pageSize, state.supportFilter)\n      .then(data => {\n        setState({\n          loading: false,\n          votes: data.data,\n          total: data.meta.count,\n        });\n      })\n      .catch(() => {\n        setState({\n          loading: false,\n          votes: [],\n        });\n      });\n  }, [abrogation, state.page, state.supportFilter]);\n\n  function changeSupportFilter(supportFilter?: boolean) {\n    setState({\n      supportFilter,\n      page: 1,\n    });\n  }\n\n  function changePage(page: number) {\n    setState({ page });\n  }\n\n  return (\n    <Context.Provider\n      value={{\n        ...state,\n        changeSupportFilter,\n        changePage,\n      }}>\n      {children}\n    </Context.Provider>\n  );\n};\n\nexport default AbrogationVotersProvider;\n","import React from 'react';\nimport AntdForm from 'antd/lib/form';\nimport AntdRadio from 'antd/lib/radio';\nimport { formatBigValue } from 'web3/utils';\n\nimport Button from 'components/antd/button';\nimport Divider from 'components/antd/divider';\nimport Form from 'components/antd/form';\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport RadioButton from 'components/antd/radio-button';\nimport Textarea from 'components/antd/textarea';\nimport GasFeeList from 'components/custom/gas-fee-list';\nimport Grid from 'components/custom/grid';\nimport { Text } from 'components/custom/typography';\nimport useMergeState from 'hooks/useMergeState';\n\nimport { useAbrogation } from '../../providers/AbrogationProvider';\nimport { useProposal } from '../../providers/ProposalProvider';\n\nimport s from './s.module.scss';\n\nexport enum VoteAbrogationState {\n  None,\n  VoteInitiate,\n  VoteFor,\n  VoteAgainst,\n  VoteChange,\n  VoteCancel,\n}\n\ntype FormState = {\n  changeOption?: boolean;\n  description?: string;\n  gasPrice?: {\n    value: number;\n  };\n};\n\nconst InitialFormValues: FormState = {\n  changeOption: undefined,\n  description: undefined,\n  gasPrice: undefined,\n};\n\nexport type AbrogationVoteModalProps = ModalProps & {\n  voteState: VoteAbrogationState;\n};\n\ntype AbrogationVoteModalState = {\n  submitting: boolean;\n};\n\nconst InitialState: AbrogationVoteModalState = {\n  submitting: false,\n};\n\nconst AbrogationVoteModal: React.FC<AbrogationVoteModalProps> = props => {\n  const { voteState, ...modalProps } = props;\n\n  const proposalCtx = useProposal();\n  const abrogationCtx = useAbrogation();\n\n  const [state, setState] = useMergeState<AbrogationVoteModalState>(InitialState);\n  const [form] = AntdForm.useForm<FormState>();\n\n  async function handleSubmit(values: FormState) {\n    if (voteState !== VoteAbrogationState.VoteInitiate && !abrogationCtx.abrogation) {\n      return;\n    }\n\n    const { gasPrice } = values;\n\n    if (!gasPrice) {\n      return;\n    }\n\n    setState({ submitting: true });\n\n    try {\n      await form.validateFields();\n\n      if (voteState === VoteAbrogationState.VoteInitiate) {\n        await proposalCtx.startAbrogationProposal(values.description ?? '', gasPrice.value);\n      } else if (voteState === VoteAbrogationState.VoteFor) {\n        await abrogationCtx.abrogationProposalCastVote(true, gasPrice.value);\n      } else if (voteState === VoteAbrogationState.VoteAgainst) {\n        await abrogationCtx.abrogationProposalCastVote(false, gasPrice.value);\n      } else if (voteState === VoteAbrogationState.VoteChange) {\n        await abrogationCtx.abrogationProposalCastVote(values.changeOption === true, gasPrice.value);\n      } else if (voteState === VoteAbrogationState.VoteCancel) {\n        await abrogationCtx.abrogationProposalCancelVote(gasPrice.value);\n      }\n\n      props.onCancel?.();\n    } catch {}\n\n    setState({ submitting: false });\n  }\n\n  React.useEffect(() => {\n    if (voteState === VoteAbrogationState.VoteChange) {\n      form.setFieldsValue({\n        changeOption: abrogationCtx.receipt?.support,\n      });\n    }\n  }, [voteState, abrogationCtx.receipt]); /// TODO\n\n  return (\n    <Modal\n      className={s.component}\n      width={560}\n      title={\n        <>\n          {voteState === VoteAbrogationState.VoteInitiate && 'Initiate abrogation proposal'}\n          {voteState === VoteAbrogationState.VoteFor && 'Confirm your vote'}\n          {voteState === VoteAbrogationState.VoteAgainst && 'Confirm your vote'}\n          {voteState === VoteAbrogationState.VoteChange && 'Change your vote'}\n          {voteState === VoteAbrogationState.VoteCancel && 'Cancel your vote'}\n        </>\n      }\n      {...modalProps}>\n      <Form\n        form={form}\n        initialValues={InitialFormValues}\n        validateTrigger={['onSubmit', 'onChange']}\n        onFinish={handleSubmit}>\n        {voteState === VoteAbrogationState.VoteInitiate && (\n          <Grid flow=\"row\" gap={16} padding={32}>\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n              {proposalCtx.proposal?.title}\n            </Text>\n          </Grid>\n        )}\n        {voteState !== VoteAbrogationState.VoteInitiate && (\n          <Grid flow=\"row\" gap={16} className={s.row}>\n            <Grid flow=\"col\" gap={8} align=\"center\">\n              <Text type=\"h2\" weight=\"bold\" color=\"primary\">\n                {formatBigValue(proposalCtx.votingPower, 2)}\n              </Text>\n              <Text type=\"p1\" weight=\"semibold\" color=\"secondary\">\n                Votes\n              </Text>\n            </Grid>\n            {(voteState === VoteAbrogationState.VoteFor || voteState === VoteAbrogationState.VoteAgainst) && (\n              <Grid flow=\"row\" gap={8}>\n                <Text type=\"p2\" color=\"secondary\">\n                  You are about to vote {voteState === VoteAbrogationState.VoteFor ? 'FOR' : 'AGAINST'} the abrogation\n                  proposal for\n                </Text>\n                <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n                  &ldquo;{proposalCtx.proposal?.title}&rdquo;\n                </Text>\n                <Text type=\"p2\" color=\"secondary\">\n                  You can change your vote later.\n                </Text>\n              </Grid>\n            )}\n            {voteState === VoteAbrogationState.VoteChange && (\n              <Grid flow=\"row\" gap={8}>\n                <Text type=\"p2\" color=\"secondary\">\n                  You are about to change your vote on the abrogation proposal for\n                </Text>\n                <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n                  &ldquo;{proposalCtx.proposal?.title}&rdquo;\n                </Text>\n                <Text type=\"p2\" color=\"secondary\">\n                  Are you sure you want to continue? You can change your vote again later.\n                </Text>\n              </Grid>\n            )}\n            {voteState === VoteAbrogationState.VoteCancel && (\n              <Grid flow=\"row\" gap={8}>\n                <Text type=\"p2\" color=\"secondary\">\n                  You are about to cancel your vote on the abrogation proposal for\n                </Text>\n                <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n                  &ldquo;{proposalCtx.proposal?.title}&dquo;\n                </Text>\n                <Text type=\"p2\" color=\"secondary\">\n                  Are you sure you want to continue? You can change your vote again later.\n                </Text>\n              </Grid>\n            )}\n          </Grid>\n        )}\n        <Divider />\n        <Grid flow=\"row\" gap={32} className={s.row}>\n          {voteState === VoteAbrogationState.VoteInitiate && (\n            <Form.Item name=\"description\" label=\"Description\" rules={[{ required: true, message: 'Required' }]}>\n              <Textarea placeholder=\"Placeholder\" rows={4} disabled={state.submitting} />\n            </Form.Item>\n          )}\n          {voteState === VoteAbrogationState.VoteChange && (\n            <Form.Item name=\"changeOption\" label=\"Vote\" rules={[{ required: true, message: 'Required' }]}>\n              <AntdRadio.Group className={s.changeGroup} disabled={state.submitting}>\n                <Grid gap={16} colsTemplate=\"1fr 1fr\">\n                  <RadioButton\n                    label={\n                      <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                        For\n                      </Text>\n                    }\n                    value\n                  />\n                  <RadioButton\n                    label={\n                      <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                        Against\n                      </Text>\n                    }\n                    value={false}\n                  />\n                </Grid>\n              </AntdRadio.Group>\n            </Form.Item>\n          )}\n          <Form.Item name=\"gasPrice\" label=\"Gas Fee (Gwei)\" rules={[{ required: true, message: 'Required' }]}>\n            <GasFeeList disabled={state.submitting} />\n          </Form.Item>\n\n          <Form.Item shouldUpdate>\n            {({ getFieldsValue }) => {\n              const { changeOption } = getFieldsValue();\n\n              let isDisabled = false;\n\n              if (voteState === VoteAbrogationState.VoteChange) {\n                if (abrogationCtx.receipt?.support === changeOption) {\n                  isDisabled = true;\n                }\n              }\n\n              return (\n                <Button\n                  htmlType=\"submit\"\n                  type=\"primary\"\n                  loading={state.submitting}\n                  disabled={isDisabled}\n                  className={s.actionBtn}>\n                  {voteState === VoteAbrogationState.VoteInitiate && 'Initiate abrogation proposal'}\n                  {voteState === VoteAbrogationState.VoteFor && 'Vote for abrogation proposal'}\n                  {voteState === VoteAbrogationState.VoteAgainst && 'Vote against abrogation proposal'}\n                  {voteState === VoteAbrogationState.VoteChange &&\n                    changeOption === true &&\n                    'Vote for abrogation proposal'}\n                  {voteState === VoteAbrogationState.VoteChange &&\n                    changeOption === false &&\n                    'Vote against abrogation proposal'}\n                  {voteState === VoteAbrogationState.VoteCancel && 'Cancel abrogation vote'}\n                </Button>\n              );\n            }}\n          </Form.Item>\n        </Grid>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default AbrogationVoteModal;\n","import React from 'react';\nimport { ColumnsType } from 'antd/lib/table/interface';\nimport BigNumber from 'bignumber.js';\nimport { formatBigValue, shortenAddr } from 'web3/utils';\n\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport Table from 'components/antd/table';\nimport Tabs from 'components/antd/tabs';\nimport { ExplorerAddressLink } from 'components/button';\nimport Grid from 'components/custom/grid';\nimport Identicon from 'components/custom/identicon';\nimport { Text } from 'components/custom/typography';\nimport { APIVoteEntity } from 'modules/governance/api';\n\nimport AbrogationVotersProvider, { useAbrogationVoters } from '../../providers/AbrogationVotersProvider';\n\nimport s from './s.module.scss';\n\nconst Columns: ColumnsType<APIVoteEntity> = [\n  {\n    title: 'Address',\n    dataIndex: 'address',\n    width: '35%',\n    render: function Render(address: string) {\n      return (\n        <Grid flow=\"col\" gap={8} align=\"center\">\n          <Identicon address={address} width={32} height={32} />\n          <ExplorerAddressLink address={address}>\n            <Text type=\"p1\" weight=\"semibold\" color=\"blue\">\n              {shortenAddr(address)}\n            </Text>\n          </ExplorerAddressLink>\n        </Grid>\n      );\n    },\n  },\n  {\n    title: 'Votes',\n    dataIndex: 'power',\n    width: '38%',\n    align: 'right',\n    render: (power: BigNumber) => (\n      <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className={s.powerCell}>\n        {formatBigValue(power, 0)}\n      </Text>\n    ),\n  },\n  {\n    title: 'Vote type',\n    dataIndex: 'support',\n    width: '27%',\n    render: (support: boolean) =>\n      support ? (\n        <Text type=\"lb2\" weight=\"semibold\" className={s.forTag}>\n          For\n        </Text>\n      ) : (\n        <Text type=\"lb2\" weight=\"semibold\" className={s.againstTag}>\n          Against\n        </Text>\n      ),\n  },\n];\n\nexport type AbrogationVotersModalProps = ModalProps;\n\nconst AbrogationVotersModalInner: React.FC<AbrogationVotersModalProps> = props => {\n  const { ...modalProps } = props;\n\n  const abrogationVotesCtx = useAbrogationVoters();\n\n  function handleStateChange(stateFilter: string) {\n    if (stateFilter === 'for') {\n      abrogationVotesCtx.changeSupportFilter(true);\n    } else if (stateFilter === 'against') {\n      abrogationVotesCtx.changeSupportFilter(false);\n    } else {\n      abrogationVotesCtx.changeSupportFilter(undefined);\n    }\n  }\n\n  function handlePaginationChange(page: number) {\n    abrogationVotesCtx.changePage(page);\n  }\n\n  return (\n    <Modal className={s.component} width={620} {...modalProps}>\n      <Tabs className={s.tabs} defaultActiveKey=\"all\" onChange={handleStateChange}>\n        <Tabs.Tab key=\"all\" tab=\"All Votes\" />\n        <Tabs.Tab key=\"for\" tab=\"For\" />\n        <Tabs.Tab key=\"against\" tab=\"Against\" />\n      </Tabs>\n      <Table<APIVoteEntity>\n        className={s.table}\n        columns={Columns}\n        dataSource={abrogationVotesCtx.votes}\n        rowKey=\"address\"\n        loading={abrogationVotesCtx.loading}\n        locale={{\n          emptyText: 'No votes',\n        }}\n        pagination={{\n          total: abrogationVotesCtx.total,\n          current: abrogationVotesCtx.page,\n          pageSize: abrogationVotesCtx.pageSize,\n          position: ['bottomRight'],\n          showTotal: (total: number, [from, to]: [number, number]) => (\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n              Showing {from} to {to} out of {total} votes\n            </Text>\n          ),\n          onChange: handlePaginationChange,\n        }}\n      />\n    </Modal>\n  );\n};\n\nconst AbrogationVotersModal: React.FC<AbrogationVotersModalProps> = props => (\n  <AbrogationVotersProvider>\n    <AbrogationVotersModalInner {...props} />\n  </AbrogationVotersProvider>\n);\nexport default AbrogationVotersModal;\n","import React from 'react';\n\nimport Button from 'components/antd/button';\nimport Progress from 'components/antd/progress';\nimport Grid from 'components/custom/grid';\nimport { Hint, Text } from 'components/custom/typography';\n\nimport { useAbrogation } from '../../providers/AbrogationProvider';\nimport AbrogationVotersModal from '../abrogation-voters-modal';\n\nconst AbrogationVoteResultsCard: React.FC = () => {\n  const abrogationCtx = useAbrogation();\n  const [votersModal, showVotersModal] = React.useState<boolean>(false);\n\n  return (\n    <>\n      <div className=\"card\">\n        <div className=\"card-header flex justify-space-between\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Vote results\n          </Text>\n          <Button type=\"link\" onClick={() => showVotersModal(true)}>\n            View voters\n          </Button>\n        </div>\n        <Grid className=\"card-row p-24\" flow=\"row\">\n          <Grid flow=\"col\" justify=\"space-between\">\n            <Grid flow=\"row\" gap={4}>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                For\n              </Text>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {abrogationCtx.abrogation?.forVotes.toFormat(2)}\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  ({abrogationCtx.forRate?.toFixed(2)}%)\n                </Text>\n              </Grid>\n            </Grid>\n            <Grid flow=\"row\" gap={4} align=\"end\">\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\" align=\"right\">\n                Against\n              </Text>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {abrogationCtx.abrogation?.againstVotes.toFormat(2)}\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  ({abrogationCtx.againstRate?.toFixed(2)}%)\n                </Text>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Progress\n            percent={abrogationCtx.forRate}\n            strokeColor=\"var(--theme-green-color)\"\n            trailColor=\"var(--theme-red-color)\"\n          />\n        </Grid>\n        <Grid className=\"card-row p-24\" flow=\"row\">\n          <Grid flow=\"col\" justify=\"space-between\">\n            <div />\n            <Grid flow=\"row\" gap={4} align=\"end\">\n              <Hint text=\"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if Approval is set to 51%, then more than 51% of the votes on a proposal must vote Yes for the proposal to pass.\">\n                <Text type=\"small\" weight=\"semibold\" color=\"secondary\" align=\"right\">\n                  Approval\n                </Text>\n              </Hint>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {abrogationCtx.forRate?.toFixed(2)}%\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  (&gt; {abrogationCtx.acceptanceThreshold}% required)\n                </Text>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </div>\n      {votersModal && <AbrogationVotersModal onCancel={() => showVotersModal(false)} />}\n    </>\n  );\n};\n\nexport default AbrogationVoteResultsCard;\n","import React from 'react';\nimport { formatBigValue } from 'web3/utils';\n\nimport Alert from 'components/antd/alert';\nimport Button from 'components/antd/button';\nimport Progress from 'components/antd/progress';\nimport Grid from 'components/custom/grid';\nimport { Text } from 'components/custom/typography';\nimport useMergeState from 'hooks/useMergeState';\n\nimport { useAbrogation } from '../../providers/AbrogationProvider';\nimport AbrogationVoteModal, { VoteAbrogationState } from '../abrogation-vote-modal';\nimport AbrogationVotersModal from '../abrogation-voters-modal';\n\ntype AbrogationVotesCardState = {\n  showVotersModal: boolean;\n  showVoteModal: boolean;\n  voteState: VoteAbrogationState;\n};\n\nconst InitialState: AbrogationVotesCardState = {\n  showVotersModal: false,\n  showVoteModal: false,\n  voteState: VoteAbrogationState.None,\n};\n\nconst AbrogationVotesCard: React.FC = () => {\n  const abrogationCtx = useAbrogation();\n\n  const [state, setState] = useMergeState<AbrogationVotesCardState>(InitialState);\n\n  function handleShowVotersModal() {\n    setState({ showVotersModal: true });\n  }\n\n  function handleHideVotersModal() {\n    setState({ showVotersModal: false });\n  }\n\n  function handleVoteForModal() {\n    setState({\n      showVoteModal: true,\n      voteState: VoteAbrogationState.VoteFor,\n    });\n  }\n\n  function handleVoteAgainstModal() {\n    setState({\n      showVoteModal: true,\n      voteState: VoteAbrogationState.VoteAgainst,\n    });\n  }\n\n  function handleVoteChangeModal() {\n    setState({\n      showVoteModal: true,\n      voteState: VoteAbrogationState.VoteChange,\n    });\n  }\n\n  function handleVoteCancelModal() {\n    setState({\n      showVoteModal: true,\n      voteState: VoteAbrogationState.VoteCancel,\n    });\n  }\n\n  function handleHideVoteModal() {\n    setState({\n      showVoteModal: false,\n      voteState: VoteAbrogationState.None,\n    });\n  }\n\n  return (\n    <>\n      <div className=\"card\">\n        <div className=\"card-header flex justify-space-between\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Abrogation proposal votes\n          </Text>\n          <Button type=\"link\" onClick={handleShowVotersModal}>\n            View voters\n          </Button>\n        </div>\n        <Grid className=\"card-row p-24\" flow=\"row\" gap={32}>\n          <Grid flow=\"row\" gap={16}>\n            <Grid flow=\"col\" justify=\"space-between\">\n              <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                For\n              </Text>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {abrogationCtx.abrogation?.forVotes.toFormat(2)}\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  ({abrogationCtx.forRate?.toFixed(2)}%)\n                </Text>\n              </Grid>\n            </Grid>\n            <Progress\n              percent={abrogationCtx.forRate}\n              strokeColor=\"var(--theme-green-color)\"\n              trailColor=\"rgba(var(--theme-green-color-rgb), .16)\"\n            />\n          </Grid>\n          <Grid flow=\"row\" gap={16}>\n            <Grid flow=\"col\" justify=\"space-between\">\n              <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                Against\n              </Text>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {abrogationCtx.abrogation?.againstVotes.toFormat(2)}\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  ({abrogationCtx.againstRate?.toFixed(2)}%)\n                </Text>\n              </Grid>\n            </Grid>\n            <Progress\n              percent={abrogationCtx.againstRate}\n              strokeColor=\"var(--theme-red-color)\"\n              trailColor=\"rgba(var(--theme-red-color-rgb), .16)\"\n            />\n          </Grid>\n        </Grid>\n        <Grid className=\"card-row p-24\" flow=\"row\" gap={24}>\n          <Grid flow=\"row\" gap={8}>\n            <Text type=\"p1\" color=\"secondary\">\n              Your voting power for this proposal\n            </Text>\n            <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n              {formatBigValue(abrogationCtx.votingPower, 2)}\n            </Text>\n          </Grid>\n          <Grid flow=\"row\" gap={24}>\n            {!abrogationCtx.receipt?.hasVoted ? (\n              <Grid gap={24} colsTemplate=\"1fr 1fr\">\n                <Button type=\"primary\" onClick={handleVoteForModal}>\n                  Vote for\n                </Button>\n                <Button type=\"default\" onClick={handleVoteAgainstModal}>\n                  Vote against\n                </Button>\n              </Grid>\n            ) : (\n              <>\n                <Alert\n                  message={`You already voted ${\n                    abrogationCtx.receipt?.support ? 'FOR' : 'AGAINST'\n                  } the proposal abrogation`}\n                />\n                <Grid flow=\"col\" gap={24} colsTemplate=\"1fr 1fr\">\n                  <Button type=\"primary\" onClick={handleVoteChangeModal}>\n                    Change vote\n                  </Button>\n                  <Button type=\"default\" onClick={handleVoteCancelModal}>\n                    Cancel vote\n                  </Button>\n                </Grid>\n              </>\n            )}\n          </Grid>\n        </Grid>\n      </div>\n\n      {state.showVotersModal && <AbrogationVotersModal onCancel={handleHideVotersModal} />}\n      {state.showVoteModal && <AbrogationVoteModal voteState={state.voteState} onCancel={handleHideVoteModal} />}\n    </>\n  );\n};\n\nexport default AbrogationVotesCard;\n","import React from 'react';\n\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\nimport { APIProposalState } from 'modules/governance/api';\n\nimport AbrogationProvider from '../../providers/AbrogationProvider';\nimport { useProposal } from '../../providers/ProposalProvider';\nimport AbrogationApprovalCard from '../abrogation-approval-card';\nimport AbrogationDetailsCard from '../abrogation-details-card';\nimport AbrogationVoteResultsCard from '../abrogation-vote-results-card';\nimport AbrogationVotesCard from '../abrogation-votes-card';\n\nimport s from './s.module.scss';\n\nexport type AbrogationProposalModalProps = ModalProps;\n\nconst AbrogationProposalModalInner: React.FC<AbrogationProposalModalProps> = props => {\n  const proposalCtx = useProposal();\n\n  return (\n    <Modal className={s.component} {...props}>\n      <Grid flow=\"row\" gap={16} align=\"center\">\n        <Grid flow=\"col\" gap={8} align=\"start\" width={1070}>\n          <Icon name=\"warning-outlined\" />\n          <Text type=\"p1\" weight=\"semibold\" color=\"red\">\n            Abrogation proposal\n          </Text>\n        </Grid>\n\n        <Grid flow=\"row\" gap={64} align=\"center\">\n          <Grid flow=\"col\" gap={32} colsTemplate=\"1fr 1fr\" width={1070}>\n            <Text type=\"h2\" weight=\"semibold\" color=\"primary\">\n              PID-{proposalCtx.proposal?.proposalId}: {proposalCtx.proposal?.title}\n            </Text>\n          </Grid>\n\n          <Grid flow=\"col\" gap={32} colsTemplate=\"minmax(0, 610px) minmax(0, 428px)\" width={1070}>\n            <Grid flow=\"row\" gap={32}>\n              {proposalCtx.proposal?.state !== APIProposalState.QUEUED && <AbrogationVoteResultsCard />}\n              <AbrogationDetailsCard />\n            </Grid>\n            <Grid flow=\"row\" gap={32}>\n              {proposalCtx.proposal?.state === APIProposalState.QUEUED && (\n                <>\n                  <AbrogationVotesCard />\n                  <AbrogationApprovalCard />\n                </>\n              )}\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Modal>\n  );\n};\n\nconst AbrogationProposalModal: React.FC<AbrogationProposalModalProps> = props => {\n  return (\n    <AbrogationProvider>\n      <AbrogationProposalModalInner {...props} />\n    </AbrogationProvider>\n  );\n};\n\nexport default AbrogationProposalModal;\n","import React from 'react';\nimport AntdSpin from 'antd/lib/spin';\n\nimport Button from 'components/antd/button';\nimport Popover from 'components/antd/popover';\nimport Grid from 'components/custom/grid';\nimport { Text } from 'components/custom/typography';\nimport useMergeState from 'hooks/useMergeState';\nimport { APIProposalState } from 'modules/governance/api';\n\nimport { useDAO } from '../../../../components/dao-provider';\nimport { useProposal } from '../../providers/ProposalProvider';\nimport AbrogationProposalModal from '../abrogation-proposal-modal';\nimport AbrogationVoteModal, { VoteAbrogationState } from '../abrogation-vote-modal';\n\ntype ProposalAbrogationCardState = {\n  abrogationVoteModal: boolean;\n  abrogationViewModal: boolean;\n  showWhyReason: boolean;\n  cancelling: boolean;\n};\n\nconst InitialState: ProposalAbrogationCardState = {\n  abrogationVoteModal: false,\n  abrogationViewModal: false,\n  showWhyReason: false,\n  cancelling: false,\n};\n\nconst ProposalAbrogationCard: React.FC = () => {\n  const daoCtx = useDAO();\n  const proposalCtx = useProposal();\n\n  const [state, setState] = useMergeState<ProposalAbrogationCardState>(InitialState);\n\n  const hasThreshold = !!daoCtx.thresholdRate && daoCtx.thresholdRate >= daoCtx.minThreshold;\n\n  return (\n    <>\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Abrogation proposal\n          </Text>\n        </div>\n        <div className=\"p-24\">\n          {proposalCtx.isCanceled === undefined && (\n            <Grid flow=\"col\" justify=\"center\">\n              <AntdSpin spinning />\n            </Grid>\n          )}\n          {proposalCtx.isCanceled === false && (\n            <Grid flow=\"row\" gap={24}>\n              <Text type=\"p1\" color=\"primary\">\n                This is a special type of proposal, with the following thresholds:\n              </Text>\n              <ul>\n                <li>\n                  <Text type=\"p1\" color=\"primary\">\n                    Acceptance criteria: 50% of staked BOND\n                  </Text>\n                </li>\n                <li>\n                  <Text type=\"p1\" color=\"primary\">\n                    A proposal can only have one associated abrogation proposal at any given time\n                  </Text>\n                </li>\n                <li>\n                  <Text type=\"p1\" color=\"primary\">\n                    Anyone can vote on these proposals\n                  </Text>\n                </li>\n                <li>\n                  <Text type=\"p1\" color=\"primary\">\n                    There is a new snapshot for voter balances - taken at Abrogation Proposals start time\n                  </Text>\n                </li>\n                <li>\n                  <Text type=\"p1\" color=\"primary\">\n                    Abrogation Proposals duration is never greater than the Initial Proposals queue period\n                  </Text>\n                </li>\n                <li>\n                  <Text type=\"p1\" color=\"primary\">\n                    When someone goes to execute the Initial Proposal - there is a check if an Abrogation Proposal that\n                    met its acceptance criteria exists\n                  </Text>\n                </li>\n              </ul>\n\n              <Grid flow=\"row\" gap={8} align=\"center\" justify=\"end\">\n                <Button\n                  type=\"default\"\n                  loading={state.cancelling}\n                  disabled={!hasThreshold}\n                  onClick={() => setState({ abrogationVoteModal: true })}>\n                  Initiate abrogation proposal\n                </Button>\n\n                {!hasThreshold && (\n                  <Grid flow=\"col\" gap={8} align=\"center\">\n                    <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                      You are not able to abrogate proposal.\n                    </Text>\n                    <Popover\n                      title=\"Why you cant abrogate proposal\"\n                      placement=\"bottomLeft\"\n                      overlayStyle={{ width: 520 }}\n                      content={\n                        <Text type=\"p2\" weight=\"semibold\">\n                          You dont have enough voting power to create an abrogation proposal. The creator of an\n                          abrogation proposal needs to have a voting power of at least {daoCtx.minThreshold}% of the\n                          amount of $BOND staked in the DAO.\n                        </Text>\n                      }\n                      visible={state.showWhyReason}\n                      onVisibleChange={visible => setState({ showWhyReason: visible })}>\n                      <Button type=\"link\">See why</Button>\n                    </Popover>\n                  </Grid>\n                )}\n              </Grid>\n            </Grid>\n          )}\n          {proposalCtx.isCanceled === true && (\n            <Grid flow=\"row\" gap={24}>\n              {proposalCtx.proposal?.state === APIProposalState.QUEUED && (\n                <Text type=\"p1\" color=\"primary\">\n                  Abrogation proposal currently in progress.\n                </Text>\n              )}\n              <Button type=\"primary\" onClick={() => setState({ abrogationViewModal: true })}>\n                View abrogation proposal\n              </Button>\n            </Grid>\n          )}\n        </div>\n      </div>\n\n      {state.abrogationVoteModal && (\n        <AbrogationVoteModal\n          voteState={VoteAbrogationState.VoteInitiate}\n          onCancel={() => setState({ abrogationVoteModal: false })}\n        />\n      )}\n      {state.abrogationViewModal && (\n        <AbrogationProposalModal onCancel={() => setState({ abrogationViewModal: false })} />\n      )}\n    </>\n  );\n};\n\nexport default ProposalAbrogationCard;\n","import React from 'react';\n\nimport Progress from 'components/antd/progress';\nimport Grid from 'components/custom/grid';\nimport { Hint, Text } from 'components/custom/typography';\n\nimport { useProposal } from '../../providers/ProposalProvider';\n\nconst ProposalApprovalCard: React.FC = () => {\n  const proposalCtx = useProposal();\n\n  const passed = (proposalCtx.forRate ?? 0) >= (proposalCtx.proposal?.acceptanceThreshold ?? 0);\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <Hint text=\"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if Approval is set to 51%, then more than 51% of the votes on a proposal must vote Yes for the proposal to pass.\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Approval\n          </Text>\n        </Hint>\n      </div>\n      <Grid className=\"p-24\" flow=\"row\" gap={16}>\n        <Grid flow=\"col\" gap={8}>\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            {proposalCtx.forRate?.toFixed(2)}%\n          </Text>\n          <Text type=\"p1\" color=\"secondary\">\n            (&gt; {proposalCtx.proposal?.acceptanceThreshold}% required)\n          </Text>\n        </Grid>\n        <Progress\n          percent={proposalCtx.forRate}\n          acceptance={proposalCtx.proposal?.acceptanceThreshold}\n          strokeColor={passed ? 'var(--theme-green-color)' : 'var(--theme-red-color)'}\n          trailColor={passed ? 'rgba(var(--theme-green-color-rgb), .16)' : 'rgba(var(--theme-red-color-rgb), .16)'}\n        />\n      </Grid>\n    </div>\n  );\n};\n\nexport default ProposalApprovalCard;\n","import React from 'react';\nimport { shortenAddr } from 'web3/utils';\n\nimport Button from 'components/antd/button';\nimport Skeleton from 'components/antd/skeleton';\nimport { ExplorerAddressLink } from 'components/button';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport Identicon from 'components/custom/identicon';\nimport { Hint, Text } from 'components/custom/typography';\nimport { APIProposalState } from 'modules/governance/api';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport ProposalActionCard from '../../../../components/proposal-action-card';\nimport { useProposal } from '../../providers/ProposalProvider';\n\ntype ProposalDetailsCardState = {\n  cancelling: boolean;\n};\n\nconst InitialState: ProposalDetailsCardState = {\n  cancelling: false,\n};\n\nconst ProposalDetailsCard: React.FC = () => {\n  const wallet = useWallet();\n  const proposalCtx = useProposal();\n  const { proposal, thresholdRate, minThreshold } = proposalCtx;\n\n  const [state, setState] = React.useState<ProposalDetailsCardState>(InitialState);\n\n  const ownProposal = proposal?.proposer === wallet.account;\n  const isThresholdBelow = thresholdRate !== undefined && thresholdRate < minThreshold;\n  const isValidStateForCancel = [APIProposalState.WARMUP, APIProposalState.ACTIVE].includes(proposal?.state as any);\n  const canBeCancelled = isValidStateForCancel && (ownProposal || isThresholdBelow);\n\n  function handleProposalCancel() {\n    setState(prevState => ({\n      ...prevState,\n      cancelling: true,\n    }));\n\n    proposalCtx\n      .cancelProposal()\n      .then(() => {\n        setState(prevState => ({\n          ...prevState,\n          cancelling: false,\n        }));\n      })\n      .catch(() => {\n        setState(prevState => ({\n          ...prevState,\n          cancelling: false,\n        }));\n      });\n  }\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n          Details\n        </Text>\n      </div>\n      <div className=\"card-row flexbox-list p-24\" style={{ '--gap': '32px' } as React.CSSProperties}>\n        <div>\n          <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"mb-4\">\n            Created by\n          </Text>\n          <Grid flow=\"col\" gap={8}>\n            <Identicon address={proposalCtx.proposal?.proposer} width={24} height={24} />\n            <ExplorerAddressLink address={proposalCtx.proposal?.proposer}>\n              <Text type=\"p1\" weight=\"semibold\" color=\"blue\">\n                {shortenAddr(proposalCtx.proposal?.proposer)}\n              </Text>\n            </ExplorerAddressLink>\n          </Grid>\n        </div>\n        <div>\n          <Hint\n            text={`If the creators vBOND balance falls below ${minThreshold}% of the total amount of $BOND staked in the DAO the proposal can be cancelled by anyone.`}>\n            <Text type=\"small\" weight=\"semibold\" color=\"secondary\" className=\"mb-4\">\n              Creator threshold\n            </Text>\n          </Hint>\n          <Grid flow=\"col\" gap={8}>\n            {thresholdRate !== undefined && (\n              <>\n                <Icon name={isThresholdBelow ? 'close-circle-outlined' : 'check-circle-outlined'} />\n                <Skeleton loading={proposal === undefined}>\n                  <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                    {isThresholdBelow ? 'Below 1%' : 'Above 1%'}\n                  </Text>\n                </Skeleton>\n              </>\n            )}\n          </Grid>\n        </div>\n        <div>\n          {canBeCancelled && (\n            <Button type=\"default\" loading={state.cancelling} onClick={handleProposalCancel}>\n              Cancel proposal\n            </Button>\n          )}\n        </div>\n      </div>\n      <Grid className=\"card-row p-24\" flow=\"row\" gap={16}>\n        <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n          Description\n        </Text>\n        <Text type=\"p1\" color=\"primary\" wrap>\n          {proposal?.description}\n        </Text>\n      </Grid>\n      <Grid className=\"card-row p-24\" flow=\"row\" gap={16}>\n        <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n          Actions\n        </Text>\n        {proposal?.targets.map((target: string, index: number) => (\n          <ProposalActionCard\n            key={index}\n            title={`Action ${index + 1}`}\n            target={proposal?.targets[index]}\n            signature={proposal?.signatures[index]}\n            callData={proposal?.calldatas[index]}\n          />\n        ))}\n      </Grid>\n    </div>\n  );\n};\n\nexport default ProposalDetailsCard;\n","import React from 'react';\n\nimport Progress from 'components/antd/progress';\nimport Grid from 'components/custom/grid';\nimport { Hint, Text } from 'components/custom/typography';\n\nimport { useProposal } from '../../providers/ProposalProvider';\n\nconst ProposalQuorumCard: React.FC = () => {\n  const proposalCtx = useProposal();\n\n  const passed = (proposalCtx.quorum ?? 0) >= (proposalCtx.proposal?.minQuorum ?? 0);\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <Hint text=\"Quorum is the percentage of the amount of tokens staked in the DAO that support for a proposal must be greater than for the proposal to be considered valid. For example, if the Quorum % is set to 20%, then more than 20% of the amount of tokens staked in the DAO must vote to approve a proposal for the vote to be considered valid.\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Quorum\n          </Text>\n        </Hint>\n      </div>\n      <Grid className=\"p-24\" flow=\"row\" gap={16}>\n        <Grid flow=\"col\" gap={8}>\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            {proposalCtx.quorum?.toFixed(2)}%\n          </Text>\n          <Text type=\"p1\" color=\"secondary\">\n            (&gt; {proposalCtx.proposal?.minQuorum}% required)\n          </Text>\n        </Grid>\n        <Progress\n          percent={proposalCtx.quorum}\n          acceptance={proposalCtx.proposal?.minQuorum}\n          strokeColor={passed ? 'var(--theme-green-color)' : 'var(--theme-red-color)'}\n          trailColor={passed ? 'rgba(var(--theme-green-color-rgb), .16)' : 'rgba(var(--theme-red-color-rgb), .16)'}\n        />\n      </Grid>\n    </div>\n  );\n};\n\nexport default ProposalQuorumCard;\n","import React from 'react';\nimport format from 'date-fns/format';\nimport formatDistance from 'date-fns/formatDistance';\n\nimport { ExplorerTxLink } from 'components/button';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\nimport { UseLeftTime } from 'hooks/useLeftTime';\nimport { APIProposalState, APIProposalStateMap } from 'modules/governance/api';\n\nimport { useProposal } from '../../providers/ProposalProvider';\n\nfunction getEventIcon(index: number, name: string): React.ReactNode {\n  if (\n    [APIProposalState.EXPIRED, APIProposalState.FAILED, APIProposalState.CANCELED, APIProposalState.ABROGATED].includes(\n      name as any,\n    )\n  ) {\n    return <Icon name=\"close-circle-outlined\" width={40} height={40} color=\"red\" />;\n  }\n\n  if ([APIProposalState.CREATED, APIProposalState.ACCEPTED, APIProposalState.EXECUTED].includes(name as any)) {\n    return <Icon name=\"check-circle-outlined\" width={40} height={40} color=\"green\" />;\n  }\n\n  if (index === 0) {\n    return <Icon name=\"history-circle-outlined\" width={40} height={40} color=\"blue\" />;\n  }\n\n  return <Icon name=\"check-circle-outlined\" width={40} height={40} color=\"green\" />;\n}\n\nfunction formatEventTime(name: string, start: number, end: number): string {\n  const mStart = new Date(start * 1_000);\n  const now = new Date();\n\n  if (\n    [\n      APIProposalState.CREATED,\n      APIProposalState.EXPIRED,\n      APIProposalState.FAILED,\n      APIProposalState.CANCELED,\n      APIProposalState.EXECUTED,\n      APIProposalState.QUEUED,\n      APIProposalState.ACCEPTED,\n      APIProposalState.ABROGATED,\n    ].includes(name as any)\n  ) {\n    return format(mStart, 'dd MMM yyyy - HH:mm');\n  }\n\n  if (end > 0) {\n    const mEnd = new Date(end * 1_000);\n\n    if (mEnd <= now) {\n      return `Ended at ${format(mEnd, 'dd MMM yyyy - HH:mm')}`;\n    }\n\n    const dist = formatDistance(mEnd, now, {\n      addSuffix: true,\n      includeSeconds: true,\n    });\n\n    return `Ends ${dist}`;\n  }\n\n  const dist = formatDistance(mStart, now, {\n    addSuffix: true,\n    includeSeconds: true,\n  });\n\n  return `Started ${dist}`;\n}\n\nconst ProposalStatusCard: React.FC = () => {\n  const { proposal, reload } = useProposal();\n\n  if (!proposal) {\n    return null;\n  }\n\n  return (\n    <div className=\"card p-24\">\n      <Grid flow=\"row\" gap={24}>\n        {proposal.history.map((event, index: number) => (\n          <div key={event.name} className=\"flex col-gap-12 align-center\">\n            {getEventIcon(index, event.name)}\n            <div className=\"flex flow-row\">\n              <div className=\"flex align-center\">\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className=\"mr-8\">\n                  {APIProposalStateMap.get(event.name as APIProposalState)}\n                </Text>\n\n                {event.txHash && (\n                  <ExplorerTxLink address={event.txHash} style={{ height: '16px' }}>\n                    <Icon name=\"link-outlined\" width={16} height={16} />\n                  </ExplorerTxLink>\n                )}\n              </div>\n\n              <UseLeftTime end={event.endTimestamp * 1_000} delay={5_000} onEnd={() => reload()}>\n                {() => (\n                  <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n                    {formatEventTime(event.name, event.startTimestamp, event.endTimestamp)}\n                  </Text>\n                )}\n              </UseLeftTime>\n            </div>\n          </div>\n        ))}\n      </Grid>\n    </div>\n  );\n};\n\nexport default ProposalStatusCard;\n","import React from 'react';\n\nimport useMergeState from 'hooks/useMergeState';\nimport { APIVoteEntity, useDaoAPI } from 'modules/governance/api';\n\nimport { useProposal } from '../ProposalProvider';\n\nimport { InvariantContext } from 'utils/context';\n\nexport type ProposalVotersProviderState = {\n  votes: APIVoteEntity[];\n  total: number;\n  page: number;\n  pageSize: number;\n  loading: boolean;\n  supportFilter?: boolean;\n};\n\nexport type ProposalVotersContextType = ProposalVotersProviderState & {\n  changeSupportFilter(supportFilter?: boolean): void;\n  changePage(page: number): void;\n};\n\nconst InitialState: ProposalVotersProviderState = {\n  votes: [],\n  total: 0,\n  page: 1,\n  pageSize: 10,\n  loading: false,\n  supportFilter: undefined,\n};\n\nconst Context = React.createContext<ProposalVotersContextType>(InvariantContext('ProposalVotersProvider'));\n\nexport function useProposalVoters(): ProposalVotersContextType {\n  return React.useContext(Context);\n}\n\nconst ProposalVotersProvider: React.FC = props => {\n  const { children } = props;\n\n  const daoAPI = useDaoAPI();\n  const { proposal } = useProposal();\n  const [state, setState] = useMergeState<ProposalVotersProviderState>(InitialState);\n\n  React.useEffect(() => {\n    if (!proposal?.proposalId) {\n      setState({\n        votes: [],\n        total: 0,\n      });\n      return;\n    }\n\n    setState({ loading: true });\n\n    daoAPI\n      .fetchProposalVoters(proposal.proposalId, state.page, state.pageSize, state.supportFilter)\n      .then(data => {\n        setState({\n          loading: false,\n          votes: data.data,\n          total: data.meta.count,\n        });\n      })\n      .catch(() => {\n        setState({\n          loading: false,\n          votes: [],\n        });\n      });\n  }, [proposal, state.page, state.supportFilter]);\n\n  function changeSupportFilter(supportFilter?: boolean) {\n    setState({\n      supportFilter,\n      page: 1,\n    });\n  }\n\n  function changePage(page: number) {\n    setState({ page });\n  }\n\n  return (\n    <Context.Provider\n      value={{\n        ...state,\n        changeSupportFilter,\n        changePage,\n      }}>\n      {children}\n    </Context.Provider>\n  );\n};\n\nexport default ProposalVotersProvider;\n","import React from 'react';\nimport AntdForm from 'antd/lib/form';\nimport AntdRadio from 'antd/lib/radio';\nimport { formatBigValue } from 'web3/utils';\n\nimport Button from 'components/antd/button';\nimport Divider from 'components/antd/divider';\nimport Form from 'components/antd/form';\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport RadioButton from 'components/antd/radio-button';\nimport GasFeeList from 'components/custom/gas-fee-list';\nimport Grid from 'components/custom/grid';\nimport { Text } from 'components/custom/typography';\nimport useMergeState from 'hooks/useMergeState';\n\nimport { useProposal } from '../../providers/ProposalProvider';\n\nimport s from './s.module.scss';\n\nexport enum VoteState {\n  None,\n  VoteFor,\n  VoteAgainst,\n  VoteChange,\n  VoteCancel,\n}\n\ntype FormState = {\n  changeOption?: boolean;\n  gasPrice?: {\n    value: number;\n  };\n};\n\nconst InitialFormValues: FormState = {\n  changeOption: undefined,\n  gasPrice: undefined,\n};\n\nexport type ProposalVoteModalProps = {\n  voteState: VoteState;\n};\n\ntype ProposalVoteModalState = {\n  submitting: boolean;\n};\n\nconst InitialState: ProposalVoteModalState = {\n  submitting: false,\n};\n\nconst ProposalVoteModal: React.FC<ModalProps & ProposalVoteModalProps> = props => {\n  const { voteState, ...modalProps } = props;\n\n  const [form] = AntdForm.useForm<FormState>();\n  const proposalCtx = useProposal();\n\n  const [state, setState] = useMergeState<ProposalVoteModalState>(InitialState);\n\n  async function handleSubmit(values: FormState) {\n    const { gasPrice } = values;\n\n    if (!proposalCtx.proposal || !gasPrice) {\n      return;\n    }\n\n    setState({ submitting: true });\n\n    try {\n      await form.validateFields();\n\n      if (voteState === VoteState.VoteFor) {\n        await proposalCtx.proposalCastVote(true, gasPrice.value);\n      } else if (voteState === VoteState.VoteAgainst) {\n        await proposalCtx.proposalCastVote(false, gasPrice.value);\n      } else if (voteState === VoteState.VoteChange) {\n        await proposalCtx.proposalCastVote(values.changeOption === true, gasPrice.value);\n      } else if (voteState === VoteState.VoteCancel) {\n        await proposalCtx.proposalCancelVote(gasPrice.value);\n      }\n\n      props.onCancel?.();\n    } catch {}\n\n    setState({ submitting: false });\n  }\n\n  React.useEffect(() => {\n    if (voteState === VoteState.VoteChange) {\n      form.setFieldsValue({\n        changeOption: proposalCtx.receipt?.support,\n      });\n    }\n  }, [voteState]);\n\n  return (\n    <Modal\n      className={s.component}\n      width={560}\n      title={\n        <>\n          {voteState === VoteState.VoteFor && 'Confirm your vote'}\n          {voteState === VoteState.VoteAgainst && 'Confirm your vote'}\n          {voteState === VoteState.VoteChange && 'Change your vote'}\n          {voteState === VoteState.VoteCancel && 'Cancel your vote'}\n        </>\n      }\n      {...modalProps}>\n      <Form\n        form={form}\n        initialValues={InitialFormValues}\n        validateTrigger={['onSubmit', 'onChange']}\n        onFinish={handleSubmit}>\n        <Grid flow=\"row\" gap={16} className={s.row}>\n          <Grid flow=\"col\" gap={8} align=\"center\">\n            <Text type=\"h2\" weight=\"bold\" color=\"primary\">\n              {formatBigValue(proposalCtx.votingPower, 2)}\n            </Text>\n            <Text type=\"p1\" weight=\"semibold\" color=\"secondary\">\n              Votes\n            </Text>\n          </Grid>\n          {(voteState === VoteState.VoteFor || voteState === VoteState.VoteAgainst) && (\n            <Grid flow=\"row\" gap={8}>\n              <Text type=\"p2\" color=\"secondary\">\n                You are about to vote on proposal\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n                &ldquo;{proposalCtx.proposal?.title}&rdquo;\n              </Text>\n              <Text type=\"p2\" color=\"secondary\">\n                Are you sure you want to continue? You can change your vote later.\n              </Text>\n            </Grid>\n          )}\n          {voteState === VoteState.VoteChange && (\n            <Grid flow=\"row\" gap={8}>\n              <Text type=\"p2\" color=\"secondary\">\n                You are about to change your vote on proposal\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n                &ldquo;{proposalCtx.proposal?.title}&rdquo;\n              </Text>\n              <Text type=\"p2\" color=\"secondary\">\n                Are you sure you want to continue? You can change your vote again later.\n              </Text>\n            </Grid>\n          )}\n          {voteState === VoteState.VoteCancel && (\n            <Grid flow=\"row\" gap={8}>\n              <Text type=\"p2\" color=\"secondary\">\n                You are about to cancel your vote on proposal\n              </Text>\n              <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n                &ldquo;{proposalCtx.proposal?.title}&rdquo;\n              </Text>\n              <Text type=\"p2\" color=\"secondary\">\n                Are you sure you want to continue? You can change your vote again later.\n              </Text>\n            </Grid>\n          )}\n        </Grid>\n        <Divider />\n        <Grid flow=\"row\" gap={32} className={s.row}>\n          {voteState === VoteState.VoteChange && (\n            <Form.Item name=\"changeOption\" label=\"Vote\" rules={[{ required: true, message: 'Required' }]}>\n              <AntdRadio.Group className={s.changeGroup} disabled={state.submitting}>\n                <Grid gap={16} colsTemplate=\"1fr 1fr\">\n                  <RadioButton\n                    label={\n                      <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                        For\n                      </Text>\n                    }\n                    value\n                  />\n                  <RadioButton\n                    label={\n                      <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                        Against\n                      </Text>\n                    }\n                    value={false}\n                  />\n                </Grid>\n              </AntdRadio.Group>\n            </Form.Item>\n          )}\n          <Form.Item name=\"gasPrice\" label=\"Gas Fee (Gwei)\" rules={[{ required: true, message: 'Required' }]}>\n            <GasFeeList disabled={state.submitting} />\n          </Form.Item>\n\n          <Form.Item shouldUpdate>\n            {({ getFieldsValue }) => {\n              const { changeOption } = getFieldsValue();\n\n              let isDisabled = false;\n\n              if (voteState === VoteState.VoteChange) {\n                if (proposalCtx.receipt?.support === changeOption) {\n                  isDisabled = true;\n                }\n              }\n\n              return (\n                <Button\n                  htmlType=\"submit\"\n                  type=\"primary\"\n                  loading={state.submitting}\n                  disabled={isDisabled}\n                  className={s.actionBtn}>\n                  {voteState === VoteState.VoteFor && 'Vote for proposal'}\n                  {voteState === VoteState.VoteAgainst && 'Vote against proposal'}\n                  {voteState === VoteState.VoteCancel && 'Cancel vote'}\n                  {voteState === VoteState.VoteChange && changeOption === true && 'Vote for proposal'}\n                  {voteState === VoteState.VoteChange && changeOption === false && 'Vote against proposal'}\n                </Button>\n              );\n            }}\n          </Form.Item>\n        </Grid>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default ProposalVoteModal;\n","import React from 'react';\nimport { ColumnsType } from 'antd/lib/table/interface';\nimport BigNumber from 'bignumber.js';\nimport { formatBigValue, shortenAddr } from 'web3/utils';\n\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport Table from 'components/antd/table';\nimport Tabs from 'components/antd/tabs';\nimport { ExplorerAddressLink } from 'components/button';\nimport Grid from 'components/custom/grid';\nimport Identicon from 'components/custom/identicon';\nimport { Text } from 'components/custom/typography';\nimport { APIVoteEntity } from 'modules/governance/api';\n\nimport ProposalVotersProvider, { useProposalVoters } from '../../providers/ProposalVotersProvider';\n\nimport s from './s.module.scss';\n\nconst Columns: ColumnsType<APIVoteEntity> = [\n  {\n    title: 'Address',\n    dataIndex: 'address',\n    width: '35%',\n    render: function Render(address: string) {\n      return (\n        <Grid flow=\"col\" gap={8} align=\"center\">\n          <Identicon address={address} width={32} height={32} />\n          <ExplorerAddressLink address={address}>\n            <Text type=\"p1\" weight=\"semibold\" color=\"blue\">\n              {shortenAddr(address)}\n            </Text>\n          </ExplorerAddressLink>\n        </Grid>\n      );\n    },\n  },\n  {\n    title: 'Votes',\n    dataIndex: 'power',\n    width: '38%',\n    align: 'right',\n    render: (power: BigNumber) => (\n      <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className={s.powerCell}>\n        {formatBigValue(power, 2, '-', 2)}\n      </Text>\n    ),\n  },\n  {\n    title: 'Vote type',\n    dataIndex: 'support',\n    width: '27%',\n    render: (support: boolean) =>\n      support ? (\n        <Text type=\"lb2\" weight=\"semibold\" className={s.forTag}>\n          For\n        </Text>\n      ) : (\n        <Text type=\"lb2\" weight=\"semibold\" className={s.againstTag}>\n          Against\n        </Text>\n      ),\n  },\n];\n\nexport type ProposalVotersModalProps = ModalProps;\n\nconst ProposalVotersModalInner: React.FC<ProposalVotersModalProps> = props => {\n  const { ...modalProps } = props;\n\n  const proposalVotesCtx = useProposalVoters();\n\n  function handleStateChange(stateFilter: string) {\n    if (stateFilter === 'for') {\n      proposalVotesCtx.changeSupportFilter(true);\n    } else if (stateFilter === 'against') {\n      proposalVotesCtx.changeSupportFilter(false);\n    } else {\n      proposalVotesCtx.changeSupportFilter(undefined);\n    }\n  }\n\n  function handlePaginationChange(page: number) {\n    proposalVotesCtx.changePage(page);\n  }\n\n  return (\n    <Modal className={s.component} width={620} {...modalProps}>\n      <Tabs className={s.tabs} defaultActiveKey=\"all\" onChange={handleStateChange}>\n        <Tabs.Tab key=\"all\" tab=\"All Votes\" />\n        <Tabs.Tab key=\"for\" tab=\"For\" />\n        <Tabs.Tab key=\"against\" tab=\"Against\" />\n      </Tabs>\n      <Table<APIVoteEntity>\n        className={s.table}\n        columns={Columns}\n        dataSource={proposalVotesCtx.votes}\n        rowKey=\"address\"\n        loading={proposalVotesCtx.loading}\n        locale={{\n          emptyText: 'No votes',\n        }}\n        pagination={{\n          total: proposalVotesCtx.total,\n          current: proposalVotesCtx.page,\n          pageSize: proposalVotesCtx.pageSize,\n          position: ['bottomRight'],\n          showTotal: (total: number, [from, to]: [number, number]) => (\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n              Showing {from} to {to} out of {total} votes\n            </Text>\n          ),\n          onChange: handlePaginationChange,\n        }}\n      />\n    </Modal>\n  );\n};\n\nconst ProposalVotersModal: React.FC<ProposalVotersModalProps> = props => (\n  <ProposalVotersProvider>\n    <ProposalVotersModalInner {...props} />\n  </ProposalVotersProvider>\n);\nexport default ProposalVotersModal;\n","import React from 'react';\n\nimport Button from 'components/antd/button';\nimport Progress from 'components/antd/progress';\nimport Grid from 'components/custom/grid';\nimport { Hint, Text } from 'components/custom/typography';\n\nimport { useProposal } from '../../providers/ProposalProvider';\nimport ProposalVotersModal from '../proposal-voters-modal';\n\nconst ProposalVoteResultsCard: React.FC = () => {\n  const proposalCtx = useProposal();\n  const [votersModal, showVotersModal] = React.useState<boolean>(false);\n\n  return (\n    <>\n      <div className=\"card\">\n        <div className=\"card-header flex justify-space-between\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Vote results\n          </Text>\n          <Button type=\"link\" onClick={() => showVotersModal(true)}>\n            View voters\n          </Button>\n        </div>\n        <Grid flow=\"row\" className=\"card-row p-24\">\n          <Grid flow=\"col\" justify=\"space-between\">\n            <Grid flow=\"row\" gap={4}>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                For\n              </Text>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {proposalCtx.proposal?.forVotes.toFormat(2)}\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  ({proposalCtx.forRate?.toFixed(2)}%)\n                </Text>\n              </Grid>\n            </Grid>\n            <Grid flow=\"row\" gap={4} align=\"end\">\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\" align=\"right\">\n                Against\n              </Text>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {proposalCtx.proposal?.againstVotes.toFormat(2)}\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  ({proposalCtx.againstRate?.toFixed()}%)\n                </Text>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Progress\n            percent={proposalCtx.forRate}\n            strokeColor=\"var(--theme-green-color)\"\n            trailColor=\"var(--theme-red-color)\"\n          />\n        </Grid>\n        <Grid flow=\"row\" className=\"card-row p-24\">\n          <Grid flow=\"col\" justify=\"space-between\">\n            <Grid flow=\"row\" gap={4}>\n              <Hint text=\"Quorum is the percentage of the amount of tokens staked in the DAO that support for a proposal must be greater than for the proposal to be considered valid. For example, if the Quorum % is set to 20%, then more than 20% of the amount of tokens staked in the DAO must vote to approve a proposal for the vote to be considered valid.\">\n                <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                  Quorum\n                </Text>\n              </Hint>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {proposalCtx.quorum?.toFixed(2)}%\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  (&gt; {proposalCtx.proposal?.minQuorum}% required)\n                </Text>\n              </Grid>\n            </Grid>\n            <Grid flow=\"row\" gap={4} align=\"end\">\n              <Hint text=\"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if Approval is set to 51%, then more than 51% of the votes on a proposal must vote Yes for the proposal to pass.\">\n                <Text type=\"small\" weight=\"semibold\" color=\"secondary\" align=\"right\">\n                  Approval\n                </Text>\n              </Hint>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {proposalCtx.forRate?.toFixed(2)}%\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  (&gt; {proposalCtx.proposal?.acceptanceThreshold}% required)\n                </Text>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </div>\n      {votersModal && <ProposalVotersModal onCancel={() => showVotersModal(false)} />}\n    </>\n  );\n};\n\nexport default ProposalVoteResultsCard;\n","import React from 'react';\nimport { formatBigValue } from 'web3/utils';\n\nimport Alert from 'components/antd/alert';\nimport Button from 'components/antd/button';\nimport Progress from 'components/antd/progress';\nimport Grid from 'components/custom/grid';\nimport { Text } from 'components/custom/typography';\nimport { APIProposalState } from 'modules/governance/api';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport { useProposal } from '../../providers/ProposalProvider';\nimport ProposalVoteModal, { VoteState } from '../proposal-vote-modal';\nimport ProposalVotersModal from '../proposal-voters-modal';\n\ntype ProposalVotesCardState = {\n  showVotersModal: boolean;\n  showVoteModal: boolean;\n  voteState: VoteState;\n};\n\nconst InitialState: ProposalVotesCardState = {\n  showVotersModal: false,\n  showVoteModal: false,\n  voteState: VoteState.None,\n};\n\nconst ProposalVotesCard: React.FC = () => {\n  const wallet = useWallet();\n  const proposalCtx = useProposal();\n\n  const [state, setState] = React.useState<ProposalVotesCardState>(InitialState);\n\n  function handleShowVotersModal() {\n    setState(prevState => ({\n      ...prevState,\n      showVotersModal: true,\n    }));\n  }\n\n  function handleHideVotersModal() {\n    setState(prevState => ({\n      ...prevState,\n      showVotersModal: false,\n    }));\n  }\n\n  function handleVoteForModal() {\n    setState(prevState => ({\n      ...prevState,\n      showVoteModal: true,\n      voteState: VoteState.VoteFor,\n    }));\n  }\n\n  function handleVoteAgainstModal() {\n    setState(prevState => ({\n      ...prevState,\n      showVoteModal: true,\n      voteState: VoteState.VoteAgainst,\n    }));\n  }\n\n  function handleVoteChangeModal() {\n    setState(prevState => ({\n      ...prevState,\n      showVoteModal: true,\n      voteState: VoteState.VoteChange,\n    }));\n  }\n\n  function handleVoteCancelModal() {\n    setState(prevState => ({\n      ...prevState,\n      showVoteModal: true,\n      voteState: VoteState.VoteCancel,\n    }));\n  }\n\n  function handleHideVoteModal() {\n    setState(prevState => ({\n      ...prevState,\n      showVoteModal: false,\n      voteState: VoteState.None,\n    }));\n  }\n\n  if (proposalCtx.proposal?.state === APIProposalState.WARMUP) {\n    return (\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Votes\n          </Text>\n        </div>\n        <div className=\"p-24\">\n          <Alert type=\"info\" message=\"Voting on this proposal will start after the Warm-Up period ends.\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"card\">\n        <div className=\"card-header flex justify-space-between\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Votes\n          </Text>\n          <Button type=\"link\" onClick={handleShowVotersModal}>\n            View voters\n          </Button>\n        </div>\n        <Grid className=\"card-row p-24\" flow=\"row\" gap={32}>\n          <Grid flow=\"row\" gap={16}>\n            <Grid flow=\"col\" justify=\"space-between\">\n              <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                For\n              </Text>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {proposalCtx.proposal?.forVotes.toFormat(2)}\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  ({proposalCtx.forRate?.toFixed(2)}%)\n                </Text>\n              </Grid>\n            </Grid>\n            <Progress\n              percent={proposalCtx.forRate}\n              strokeColor=\"var(--theme-green-color)\"\n              trailColor=\"rgba(var(--theme-green-color-rgb), .16)\"\n            />\n          </Grid>\n          <Grid flow=\"row\" gap={16}>\n            <Grid flow=\"col\" justify=\"space-between\">\n              <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                Against\n              </Text>\n              <Grid flow=\"col\" gap={8}>\n                <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                  {proposalCtx.proposal?.againstVotes.toFormat(2)}\n                </Text>\n                <Text type=\"p1\" color=\"secondary\">\n                  ({proposalCtx.againstRate?.toFixed(2)}%)\n                </Text>\n              </Grid>\n            </Grid>\n            <Progress\n              percent={proposalCtx.againstRate}\n              strokeColor=\"var(--theme-red-color)\"\n              trailColor=\"rgba(var(--theme-red-color-rgb), .16)\"\n            />\n          </Grid>\n        </Grid>\n        {wallet.isActive && (\n          <Grid className=\"card-row p-24\" flow=\"row\" gap={24}>\n            <Grid flow=\"row\" gap={8}>\n              <Text type=\"p1\" color=\"secondary\">\n                Your voting power for this proposal\n              </Text>\n              <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                {formatBigValue(proposalCtx.votingPower, 2)}\n              </Text>\n            </Grid>\n            <Grid flow=\"row\" gap={24}>\n              {!proposalCtx.receipt?.hasVoted ? (\n                <Grid gap={24} colsTemplate=\"1fr 1fr\">\n                  <Button type=\"primary\" onClick={handleVoteForModal}>\n                    Vote for\n                  </Button>\n                  <Button type=\"default\" onClick={handleVoteAgainstModal}>\n                    Vote against\n                  </Button>\n                </Grid>\n              ) : (\n                <>\n                  <Alert\n                    message={`You already voted ${proposalCtx.receipt?.support ? 'FOR' : 'AGAINST'} the proposal`}\n                  />\n                  <Grid flow=\"col\" gap={24} colsTemplate=\"1fr 1fr\">\n                    <Button type=\"primary\" onClick={handleVoteChangeModal}>\n                      Change vote\n                    </Button>\n                    <Button type=\"default\" onClick={handleVoteCancelModal}>\n                      Cancel vote\n                    </Button>\n                  </Grid>\n                </>\n              )}\n            </Grid>\n          </Grid>\n        )}\n      </div>\n\n      {state.showVotersModal && <ProposalVotersModal onCancel={handleHideVotersModal} />}\n      {state.showVoteModal && <ProposalVoteModal voteState={state.voteState} onCancel={handleHideVoteModal} />}\n    </>\n  );\n};\n\nexport default ProposalVotesCard;\n","import React from 'react';\nimport * as Antd from 'antd';\n\nimport Button from 'components/antd/button';\nimport Divider from 'components/antd/divider';\nimport Form from 'components/antd/form';\nimport Modal, { ModalProps } from 'components/antd/modal';\nimport GasFeeList from 'components/custom/gas-fee-list';\nimport Grid from 'components/custom/grid';\nimport { Text } from 'components/custom/typography';\nimport useMergeState from 'hooks/useMergeState';\n\nimport { useProposal } from '../../providers/ProposalProvider';\n\nimport s from './s.module.scss';\n\ntype FormState = {\n  gasPrice?: {\n    value: number;\n  };\n};\n\nconst InitialFormValues: FormState = {\n  gasPrice: undefined,\n};\n\nexport type QueueForExecutionModalProps = ModalProps;\n\ntype QueueForExecutionModalState = {\n  submitting: boolean;\n};\n\nconst InitialState: QueueForExecutionModalState = {\n  submitting: false,\n};\n\nconst QueueForExecutionModal: React.FC<QueueForExecutionModalProps> = props => {\n  const { ...modalProps } = props;\n\n  const [form] = Antd.Form.useForm<FormState>();\n  const proposalCtx = useProposal();\n\n  const [state, setState] = useMergeState<QueueForExecutionModalState>(InitialState);\n\n  async function handleSubmit(values: FormState) {\n    const { gasPrice } = values;\n\n    if (!proposalCtx.proposal || !gasPrice) {\n      return;\n    }\n\n    setState({ submitting: true });\n\n    try {\n      await form.validateFields();\n      await proposalCtx.queueProposalForExecution(gasPrice.value);\n\n      props.onCancel?.();\n    } catch {}\n\n    setState({ submitting: false });\n  }\n\n  return (\n    <Modal className={s.component} width={560} title=\"Queue for execution\" {...modalProps}>\n      <Form\n        form={form}\n        initialValues={InitialFormValues}\n        validateTrigger={['onSubmit', 'onChange']}\n        onFinish={handleSubmit}>\n        <Grid flow=\"row\" gap={16} className={s.row}>\n          <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n            Once a proposal is accepted, it will have to wait in the queue before it can be executed. During this time\n            it can only be cancelled by an abrogation proposal.\n          </Text>\n        </Grid>\n        <Divider />\n        <Grid flow=\"row\" gap={32} className={s.row}>\n          <Form.Item name=\"gasPrice\" label=\"Gas Fee (Gwei)\" rules={[{ required: true, message: 'Required' }]}>\n            <GasFeeList disabled={state.submitting} />\n          </Form.Item>\n\n          <Button htmlType=\"submit\" type=\"primary\" loading={state.submitting} className={s.actionBtn}>\n            Queue proposal for execution\n          </Button>\n        </Grid>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default QueueForExecutionModal;\n","import React from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\n\nimport Button from 'components/antd/button';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\nimport useMergeState from 'hooks/useMergeState';\nimport { APIProposalState } from 'modules/governance/api';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport ProposalAbrogationCard from './components/proposal-abrogation-card';\nimport ProposalApprovalCard from './components/proposal-approval-card';\nimport ProposalDetailsCard from './components/proposal-details-card';\nimport ProposalQuorumCard from './components/proposal-quorum-card';\nimport ProposalStatusCard from './components/proposal-status-card';\nimport ProposalVoteResultsCard from './components/proposal-vote-results-card';\nimport ProposalVotesCard from './components/proposal-votes-card';\nimport QueueForExecutionModal from './components/queue-for-execution-modal';\nimport ProposalProvider, { useProposal } from './providers/ProposalProvider';\n\nimport s from './s.module.scss';\n\ntype ProposalDetailViewInnerState = {\n  showQueueForExecution: boolean;\n  executing: boolean;\n};\n\nconst InitialState: ProposalDetailViewInnerState = {\n  showQueueForExecution: false,\n  executing: false,\n};\n\nconst ProposalDetailViewInner: React.FC = () => {\n  const history = useHistory();\n  const wallet = useWallet();\n  const proposalCtx = useProposal();\n\n  const proposalState = proposalCtx.proposal?.state;\n  const [state, setState] = useMergeState<ProposalDetailViewInnerState>(InitialState);\n\n  function handleBackClick() {\n    history.push('/governance/proposals');\n  }\n\n  function handleExecuteProposal() {\n    setState(prevState => ({\n      ...prevState,\n      executing: true,\n    }));\n\n    proposalCtx\n      .executeProposal()\n      .catch(Error)\n      .then(() => {\n        setState(prevState => ({\n          ...prevState,\n          executing: false,\n        }));\n      });\n  }\n\n  return (\n    <div className=\"container-limit\">\n      <div className=\"mb-32\">\n        <button type=\"button\" onClick={handleBackClick} className=\"button-text\">\n          <Icon name=\"arrow-back\" width={16} height={16} className=\"mr-8\" color=\"inherit\" />\n          Proposals\n        </button>\n      </div>\n\n      <Grid flow=\"col\" gap={32} colsTemplate=\"1fr 1fr\" className=\"mb-32\">\n        <Text type=\"h2\" weight=\"semibold\" color=\"primary\">\n          PID-{proposalCtx.proposal?.proposalId}: {proposalCtx.proposal?.title}\n        </Text>\n\n        <Grid flow=\"col\" justify=\"end\">\n          {wallet.account && (\n            <>\n              {APIProposalState.ACCEPTED === proposalState && (\n                <Button\n                  type=\"primary\"\n                  loading={state.executing}\n                  onClick={() => setState({ showQueueForExecution: true })}>\n                  Queue for execution\n                </Button>\n              )}\n              {APIProposalState.GRACE === proposalState && (\n                <Button type=\"primary\" loading={state.executing} onClick={handleExecuteProposal}>\n                  Execute proposal\n                </Button>\n              )}\n            </>\n          )}\n        </Grid>\n      </Grid>\n\n      <div className={s.cardsAndSidebarContainer}>\n        <Grid flow=\"row\" gap={32} className={s.cardsContainer}>\n          {![APIProposalState.WARMUP, APIProposalState.ACTIVE].includes(proposalState as any) && (\n            <ProposalVoteResultsCard />\n          )}\n          <ProposalDetailsCard />\n        </Grid>\n        <Grid flow=\"row\" gap={32} className={s.sidebarContainer}>\n          <ProposalStatusCard />\n          {(APIProposalState.QUEUED === proposalState || proposalCtx.isCanceled) && <ProposalAbrogationCard />}\n          {[APIProposalState.WARMUP, APIProposalState.ACTIVE].includes(proposalState!) && <ProposalVotesCard />}\n          {APIProposalState.ACTIVE === proposalState && (\n            <>\n              <ProposalQuorumCard />\n              <ProposalApprovalCard />\n            </>\n          )}\n        </Grid>\n      </div>\n\n      {state.showQueueForExecution && (\n        <QueueForExecutionModal onCancel={() => setState({ showQueueForExecution: false })} />\n      )}\n    </div>\n  );\n};\n\nconst ProposalDetailView: React.FC = () => {\n  const { params } = useRouteMatch<{ id: string }>();\n\n  return (\n    <ProposalProvider proposalId={Number(params.id)}>\n      <ProposalDetailViewInner />\n    </ProposalProvider>\n  );\n};\n\nexport default ProposalDetailView;\n","import React from 'react';\n\nimport useMergeState from 'hooks/useMergeState';\nimport { APILiteProposalEntity, useDaoAPI } from 'modules/governance/api';\n\nimport { InvariantContext } from 'utils/context';\n\nexport type LiteProposalEntity = APILiteProposalEntity & {\n  stateTimeLeftTs: number;\n};\n\nexport type ProposalsProviderState = {\n  proposals: LiteProposalEntity[];\n  total: number;\n  page: number;\n  pageSize: number;\n  loading: boolean;\n  stateFilter?: string;\n  searchFilter?: string;\n};\n\nconst InitialState: ProposalsProviderState = {\n  proposals: [],\n  total: 0,\n  page: 1,\n  pageSize: 10,\n  loading: false,\n  stateFilter: undefined,\n  searchFilter: undefined,\n};\n\nexport type ProposalsContextType = ProposalsProviderState & {\n  changeStateFilter(stateFilter: string): void;\n  changeSearchFilter(searchFilter: string): void;\n  changePage(page: number): void;\n};\n\nconst Context = React.createContext<ProposalsContextType>(InvariantContext('ProposalsProvider'));\n\nexport function useProposals(): ProposalsContextType {\n  return React.useContext(Context);\n}\n\nexport type ProposalsProviderProps = {\n  stateFilter?: string;\n  searchFilter?: string;\n};\n\nconst ProposalsProvider: React.FC<ProposalsProviderProps> = props => {\n  const { stateFilter, searchFilter, children } = props;\n\n  const daoAPI = useDaoAPI();\n  const [state, setState] = useMergeState<ProposalsProviderState>(InitialState);\n\n  React.useEffect(() => {\n    setState({\n      stateFilter,\n      searchFilter,\n      page: 1,\n    });\n  }, [stateFilter, searchFilter]);\n\n  React.useEffect(() => {\n    setState({\n      loading: true,\n    });\n\n    daoAPI\n      .fetchProposals(state.page, state.pageSize, state.stateFilter, state.searchFilter)\n      .then(data => {\n        setState({\n          loading: false,\n          proposals: data.data.map(item => ({\n            ...item,\n            stateTimeLeftTs: Date.now() + (item.stateTimeLeft ?? 0) * 1_000,\n          })),\n          total: data.meta.count,\n        });\n      })\n      .catch(() => {\n        setState({\n          loading: false,\n          proposals: [],\n        });\n      });\n  }, [state.page, state.stateFilter, state.searchFilter]);\n\n  function changeStateFilter(value: string) {\n    setState({ stateFilter: value });\n  }\n\n  function changeSearchFilter(value: string) {\n    setState({ searchFilter: value });\n  }\n\n  function changePage(page: number) {\n    setState({ page });\n  }\n\n  return (\n    <Context.Provider\n      value={{\n        ...state,\n        changeStateFilter,\n        changeSearchFilter,\n        changePage,\n      }}>\n      {children}\n    </Context.Provider>\n  );\n};\n\nexport default ProposalsProvider;\n","import { Badge, BadgeProps } from 'components/custom/badge';\nimport { APIProposalState, APIProposalStateMap } from 'modules/governance/api';\n\nexport type ProposalStatusTagProps = {\n  className?: string;\n  state: APIProposalState;\n};\n\nconst ProposalStatusTag: React.FC<ProposalStatusTagProps> = ({ state, className }) => {\n  let color: BadgeProps['color'] = 'grey';\n  switch (state) {\n    case 'ACCEPTED':\n    case 'EXECUTED':\n      color = 'green';\n      break;\n    case 'WARMUP':\n    case 'ACTIVE':\n    case 'QUEUED':\n    case 'GRACE':\n      color = 'blue';\n      break;\n    case 'EXPIRED':\n    case 'FAILED':\n    case 'CANCELED':\n    case 'ABROGATED':\n      color = 'red';\n      break;\n  }\n\n  return (\n    <Badge color={color} size=\"large\">\n      {APIProposalStateMap.get(state)}\n    </Badge>\n  );\n};\n\nexport default ProposalStatusTag;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { ColumnsType } from 'antd/lib/table/interface';\nimport BigNumber from 'bignumber.js';\n\nimport Progress from 'components/antd/progress';\nimport Table from 'components/antd/table';\nimport Grid from 'components/custom/grid';\nimport { Text } from 'components/custom/typography';\nimport { UseLeftTime } from 'hooks/useLeftTime';\n\nimport { LiteProposalEntity, useProposals } from '../../providers/ProposalsProvider';\nimport ProposalStatusTag from '../proposal-status-tag';\n\nimport { getFormattedDuration } from 'utils';\n\nconst Columns: ColumnsType<LiteProposalEntity> = [\n  {\n    title: 'Proposal',\n    width: '70%',\n    render: (_, data: LiteProposalEntity) => (\n      <Grid flow=\"row\" gap={8}>\n        <Link to={`proposals/${data.proposalId}`}>\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            PID-{data.proposalId}: {data.title}\n          </Text>\n        </Link>\n        <Grid flow=\"col\" gap={16} align=\"center\">\n          <ProposalStatusTag state={data.state} />\n          <UseLeftTime end={data.stateTimeLeftTs} delay={1_000}>\n            {leftTime => (\n              <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n                {leftTime > 0 ? getFormattedDuration(0, data.stateTimeLeftTs) : ''}\n              </Text>\n            )}\n          </UseLeftTime>\n        </Grid>\n      </Grid>\n    ),\n  },\n  {\n    title: 'Votes',\n    width: '30%',\n    render: (_, data: LiteProposalEntity) => {\n      const total = data.forVotes.plus(data.againstVotes);\n\n      let forRate = BigNumber.ZERO;\n      let againstRate = BigNumber.ZERO;\n\n      if (total.gt(BigNumber.ZERO)) {\n        forRate = data.forVotes.multipliedBy(100).div(total);\n        againstRate = data.againstVotes.multipliedBy(100).div(total);\n      }\n\n      return (\n        <Grid flow=\"row\" gap={8}>\n          <Grid gap={24} colsTemplate=\"minmax(0, 196px) 65px\">\n            <Progress\n              percent={forRate.toNumber()}\n              strokeColor=\"var(--theme-green-color)\"\n              trailColor=\"rgba(var(--theme-green-color-rgb), .16)\"\n            />\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" align=\"right\">\n              {forRate.toFormat(2)}%\n            </Text>\n          </Grid>\n          <Grid gap={24} colsTemplate=\"minmax(0, 196px) 65px\">\n            <Progress\n              percent={againstRate.toNumber()}\n              strokeColor=\"var(--theme-red-color)\"\n              trailColor=\"rgba(var(--theme-red-color-rgb), .16)\"\n            />\n            <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" align=\"right\">\n              {againstRate.toFormat(2)}%\n            </Text>\n          </Grid>\n        </Grid>\n      );\n    },\n  },\n];\n\nconst ProposalsTable: React.FC = () => {\n  const proposalsCtx = useProposals();\n\n  function handlePaginationChange(page: number) {\n    proposalsCtx.changePage(page);\n  }\n\n  return (\n    <Table<LiteProposalEntity>\n      columns={Columns}\n      dataSource={proposalsCtx.proposals}\n      rowKey=\"proposalId\"\n      loading={proposalsCtx.loading}\n      locale={{\n        emptyText: 'No proposals',\n      }}\n      pagination={{\n        total: proposalsCtx.total,\n        current: proposalsCtx.page,\n        pageSize: proposalsCtx.pageSize,\n        position: ['bottomRight'],\n        showTotal: (total: number, [from, to]: [number, number]) => (\n          <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n            Showing {from} to {to} out of {total} proposals\n          </Text>\n        ),\n        onChange: handlePaginationChange,\n      }}\n    />\n  );\n};\n\nexport default ProposalsTable;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport useDebounce from '@rooks/use-debounce';\nimport AntdSpin from 'antd/lib/spin';\n\nimport Button from 'components/antd/button';\nimport Input from 'components/antd/input';\nimport Popover from 'components/antd/popover';\nimport Tabs from 'components/antd/tabs';\nimport { ExternalLink } from 'components/button';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\nimport useMergeState from 'hooks/useMergeState';\nimport ProposalsProvider, { useProposals } from 'modules/governance/views/proposals-view/providers/ProposalsProvider';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport { useDAO } from '../../components/dao-provider';\nimport ActivationThreshold from '../overview-view/components/activation-threshold';\nimport ProposalsTable from './components/proposals-table';\n\nimport s from './s.module.scss';\n\ntype ProposalsViewState = {\n  hasActiveProposal?: boolean;\n  showWhyReason: boolean;\n};\n\nconst InitialState: ProposalsViewState = {\n  hasActiveProposal: undefined,\n  showWhyReason: false,\n};\n\nconst ProposalsViewInner: React.FC = () => {\n  const history = useHistory();\n  const wallet = useWallet();\n  const daoCtx = useDAO();\n  const proposalsCtx = useProposals();\n\n  const [state, setState] = useMergeState<ProposalsViewState>(InitialState);\n\n  function handleStateChange(stateFilter: string) {\n    proposalsCtx.changeStateFilter(stateFilter);\n  }\n\n  const handleSearchChange = useDebounce((ev: React.ChangeEvent<HTMLInputElement>) => {\n    proposalsCtx.changeSearchFilter(ev.target.value);\n  }, 400);\n\n  React.useEffect(() => {\n    daoCtx.actions.hasActiveProposal().then(hasActiveProposal => {\n      setState({ hasActiveProposal });\n    });\n  }, [wallet.account]);\n\n  const hasCreateRestrictions = state.hasActiveProposal !== undefined && daoCtx.actions.hasThreshold() !== undefined;\n  const canCreateProposal = state.hasActiveProposal === false && daoCtx.actions.hasThreshold() === true;\n\n  return (\n    <Grid flow=\"row\" gap={32}>\n      <Grid flow=\"col\" align=\"center\" justify=\"space-between\">\n        <Text type=\"h1\" weight=\"bold\" color=\"primary\">\n          Proposals\n        </Text>\n        {wallet.isActive && (\n          <Grid flow=\"row\" gap={8} align=\"end\" justify=\"end\">\n            <Button type=\"primary\" disabled={!canCreateProposal} onClick={() => history.push('proposals/create')}>\n              Create proposal\n            </Button>\n\n            {hasCreateRestrictions && !canCreateProposal && (\n              <Grid flow=\"col\" gap={8} align=\"center\">\n                <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                  You are not able to create a proposal.\n                </Text>\n                <Popover\n                  title=\"Why you cant create a proposal\"\n                  placement=\"bottomLeft\"\n                  overlayStyle={{ width: 520 }}\n                  content={\n                    <Grid flow=\"row\" gap={8}>\n                      <Text type=\"p2\" weight=\"semibold\">\n                        There are 2 possible reasons for why you cant create a proposal:\n                      </Text>\n\n                      <ul>\n                        <li>\n                          <Text type=\"p2\" weight=\"semibold\">\n                            You already are the creator of an ongoing proposal\n                          </Text>\n                        </li>\n                        <li>\n                          <Text type=\"p2\" weight=\"semibold\">\n                            You dont have enough voting power to create a proposal. The creator of a proposal needs to\n                            have a voting power of at least {daoCtx.minThreshold}% of the amount of $BOND staked in the\n                            DAO.\n                          </Text>\n                        </li>\n                      </ul>\n\n                      <ExternalLink href=\"https://integrations.barnbridge.com/specs/dao-specifications#proposals-and-voting\">\n                        Learn more\n                      </ExternalLink>\n                    </Grid>\n                  }\n                  visible={state.showWhyReason}\n                  onVisibleChange={visible => setState({ showWhyReason: visible })}>\n                  <Button type=\"link\">See why</Button>\n                </Popover>\n              </Grid>\n            )}\n          </Grid>\n        )}\n      </Grid>\n\n      <div className=\"card\">\n        <div className=\"card-header flex justify-space-between\" style={{ padding: 0 }}>\n          <Tabs className={s.tabs} simple activeKey={proposalsCtx.stateFilter} onChange={handleStateChange}>\n            <Tabs.Tab key=\"all\" tab=\"All proposals\" />\n            <Tabs.Tab key=\"active\" tab=\"Active\" />\n            <Tabs.Tab key=\"executed\" tab=\"Executed\" />\n            <Tabs.Tab key=\"failed\" tab=\"Failed\" />\n          </Tabs>\n          <Input\n            className={s.search}\n            prefix={<Icon name=\"search-outlined\" width={16} height={16} />}\n            placeholder=\"Search proposal\"\n            onChange={ev => handleSearchChange(ev)}\n          />\n        </div>\n        <ProposalsTable />\n      </div>\n    </Grid>\n  );\n};\n\nconst ProposalsView: React.FC = () => {\n  const history = useHistory();\n  const daoCtx = useDAO();\n\n  function handleBackClick() {\n    history.push('/governance/overview');\n  }\n\n  if (daoCtx.isActive === undefined) {\n    return <AntdSpin />;\n  }\n\n  if (!daoCtx.isActive) {\n    return (\n      <Grid flow=\"row\" gap={24} align=\"start\">\n        <button type=\"button\" onClick={handleBackClick} className=\"button-text\">\n          <Icon name=\"arrow-back\" width={16} height={16} className=\"mr-8\" color=\"inherit\" />\n          Overview\n        </button>\n        <ActivationThreshold className=\"full-width\" />\n      </Grid>\n    );\n  }\n\n  return (\n    <ProposalsProvider>\n      <ProposalsViewInner />\n    </ProposalsProvider>\n  );\n};\n\nexport default ProposalsView;\n","import { useMemo } from 'react';\nimport cn from 'classnames';\n\nimport { Icon } from 'components/icon';\n\nimport s from './s.module.scss';\n\n/**\n * @param {number} current\n * @param {number} last\n * @param {number} [delta=2]\n */\nfunction pagination(current: number, last: number, delta: number = 2) {\n  const left = current - delta;\n  const right = current + delta + 1;\n  const range: number[] = [];\n  const rangeWithDots: (number | null)[] = [];\n  let l: number;\n\n  if (last < 2) {\n    return [1];\n  }\n\n  range.push(1);\n  for (let i = current - delta; i <= current + delta; i++) {\n    if (i >= left && i < right && i < last && i > 1) {\n      range.push(i);\n    }\n  }\n  range.push(last);\n\n  range.forEach(i => {\n    if (l) {\n      if (i - l === 2) {\n        rangeWithDots.push(l + 1);\n      } else if (i - l !== 1) {\n        rangeWithDots.push(null);\n      }\n    }\n    rangeWithDots.push(i);\n    l = i;\n  });\n\n  return rangeWithDots;\n}\n\ntype Props = {\n  className?: string;\n  total: number;\n  current: number;\n  pageSize: number;\n  onChange: (page: number) => void;\n};\n\nexport const Pagination: React.FC<Props> = ({ className, total, current, pageSize, onChange }) => {\n  const pages = Math.ceil(total / pageSize);\n  const paginationList = useMemo(() => pagination(current, pages), [current, pages]);\n\n  if (pages < 2) {\n    return null;\n  }\n\n  return (\n    <div className={cn(s.pagination, className)}>\n      <button\n        className={cn(s.page, s.prev)}\n        type=\"button\"\n        onClick={() => onChange(current - 1)}\n        disabled={current <= 1}>\n        <Icon name=\"chevron\" rotate={180} size={24} />\n      </button>\n      {paginationList.map((page, idx) =>\n        page ? (\n          <button\n            key={idx}\n            onClick={() => onChange(page)}\n            className={cn(s.page, {\n              [s.active]: page === current,\n            })}\n            type=\"button\"\n            disabled={page === current}>\n            {page}\n          </button>\n        ) : (\n          <div key={idx} className={s.separator}>\n            ...\n          </div>\n        ),\n      )}\n      <button\n        className={cn(s.page, s.next)}\n        type=\"button\"\n        onClick={() => onChange(current + 1)}\n        disabled={current >= pages}>\n        <Icon name=\"chevron\" size={24} />\n      </button>\n    </div>\n  );\n};\n","import { useHistory } from 'react-router-dom';\nimport classNames from 'classnames';\n\nimport { Pagination } from 'components/custom/pagination';\nimport { Spinner } from 'components/custom/spinner';\nimport { Text } from 'components/custom/typography';\nimport { Icon } from 'components/icon';\n\nimport s from './s.module.scss';\n\nexport type ColumnType<T> = {\n  heading: React.ReactNode;\n  render: (item: T) => React.ReactElement;\n  align?: 'center' | 'right';\n};\n\ntype Props<T> = {\n  columns: ColumnType<T>[];\n  data: T[];\n  loading?: boolean;\n  rowKey?: (item: T) => string;\n  variation?: 'standard' | 'separated';\n  link?: (item: T) => string;\n};\n\nexport const Table = <T extends Record<string, any>>({\n  columns,\n  data,\n  loading,\n  rowKey,\n  variation = 'standard',\n  link,\n}: Props<T>) => {\n  const history = useHistory();\n\n  return (\n    <div\n      className={classNames('table-container', s.tableContainer, {\n        [s.loading]: loading,\n      })}>\n      <table\n        className={classNames(s.table, {\n          table: variation === 'standard',\n          'table-separated': variation === 'separated',\n          [s.clickable]: link,\n          [s.loading]: loading,\n        })}>\n        <thead>\n          <tr>\n            {columns.map(({ heading, align }, dataIdx) => (\n              <th key={dataIdx} className={align ? `text-${align}` : undefined}>\n                {heading}\n              </th>\n            ))}\n            {link ? <th /> : null}\n          </tr>\n        </thead>\n        <tbody>\n          {data.map((item, itemIdx) => (\n            <tr key={rowKey?.(item) ?? itemIdx} onClick={link ? () => history.push(link(item)) : undefined}>\n              {columns.map(({ render: Render, align }, dataIdx) => (\n                <td key={dataIdx} className={align ? `text-${align}` : undefined}>\n                  <Render {...item} />\n                </td>\n              ))}\n              {link ? (\n                <td>\n                  <Icon name=\"arrow\" color=\"red\" className={s.arrowIcon} />\n                </td>\n              ) : null}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      {loading && (\n        <Spinner\n          className={s.spinner}\n          style={{\n            width: 40,\n            height: 40,\n            position: 'absolute',\n            marginTop: -20,\n            marginLeft: -20,\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\ntype TableFooterType = {\n  total: number;\n  current: number;\n  pageSize: number;\n  children?: JSX.Element | (({ total, from, to }: { total: number; from: number; to: number }) => JSX.Element);\n  onChange: (page: number) => void;\n  text?: boolean | (({ total, from, to }) => React.ReactNode);\n};\n\nexport const TableFooter: React.FC<TableFooterType> = ({ children, text, total, current, pageSize, onChange }) => {\n  const generatedText = generateText({ text, total, current, pageSize });\n  return (\n    <div className={classNames(s.tableFooter, 'p-24')}>\n      {generatedText ? (\n        <Text type=\"p2\" weight=\"semibold\" color=\"secondary\">\n          {generatedText}\n        </Text>\n      ) : null}\n      <Pagination total={total} current={current} pageSize={pageSize} onChange={onChange} />\n    </div>\n  );\n};\n\nfunction generateText({ text, total, current, pageSize }) {\n  let generatedText: React.ReactNode;\n  if (text) {\n    const from = total ? (current - 1) * pageSize + 1 : 0;\n    const to = current * pageSize > total ? total : current * pageSize;\n\n    if (typeof text === 'function') {\n      generatedText = text({\n        total,\n        from,\n        to,\n      });\n    }\n\n    if (text === true) {\n      generatedText = (\n        <>\n          Showing {from} to {to} out of {total} entries\n        </>\n      );\n    }\n  }\n\n  return generatedText;\n}\n","import { ReactNode, useEffect, useMemo, useState } from 'react';\nimport AntdForm from 'antd/lib/form';\nimport classNames from 'classnames';\n\nimport Form from 'components/antd/form';\nimport Popover from 'components/antd/popover';\nimport { SquareBadge } from 'components/custom/badge';\nimport { Icon } from 'components/icon';\nimport { CP } from 'components/types.tx';\n\ntype RecordType = Record<string, any>;\n\nexport type TableFilterType<T extends RecordType = RecordType, K extends keyof T = string> = {\n  name: K;\n  label: ReactNode;\n  itemRender: () => ReactNode;\n  defaultValue: any;\n};\n\ntype Props<T extends RecordType = RecordType> = {\n  className?: string;\n  filters: TableFilterType<T>[];\n  value?: T;\n  onChange: (values: T) => void;\n};\n\nfunction TableFilter<T extends RecordType = RecordType>(props: CP<Props<T>>) {\n  const { filters, value, onChange, className } = props;\n\n  const [form] = AntdForm.useForm<Record<string, any>>();\n  const [visible, setVisible] = useState<boolean>(false);\n\n  const initialValues = useMemo(\n    () =>\n      filters.reduce((a, c) => {\n        return {\n          ...a,\n          [c.name]: c.defaultValue,\n        };\n      }, {}),\n    [filters],\n  );\n\n  const countApplied = useMemo(() => {\n    let count = 0;\n\n    if (value) {\n      filters.forEach(filter => {\n        if (value[filter.name] !== filter.defaultValue) {\n          count++;\n        }\n      });\n    }\n\n    return count;\n  }, [filters, value]);\n\n  useEffect(() => {\n    if (value) {\n      form.setFieldsValue(value);\n    }\n  }, [value]);\n\n  function handleSubmit(values: T) {\n    setVisible(false);\n    onChange(values);\n  }\n\n  const Content = (\n    <Form form={form} initialValues={initialValues} validateTrigger={['onSubmit']} onFinish={handleSubmit}>\n      {filters.map(filter => (\n        <Form.Item key={filter.name} name={filter.name} label={filter.label} className=\"mb-32\">\n          {filter.itemRender()}\n        </Form.Item>\n      ))}\n      <div className=\"grid flow-col align-center justify-space-between\">\n        <button type=\"button\" onClick={() => form.resetFields()} className=\"button-text\">\n          Reset filters\n        </button>\n        <button type=\"submit\" className=\"button-primary\">\n          Apply filters\n        </button>\n      </div>\n    </Form>\n  );\n\n  return (\n    <Popover\n      title=\"Filters\"\n      overlayStyle={{ width: 348 }}\n      content={Content}\n      visible={visible}\n      onVisibleChange={setVisible}\n      placement=\"bottomRight\">\n      <button type=\"button\" className={classNames('button-ghost-monochrome pv-16', className)}>\n        <Icon name=\"filter\" className=\"mr-8\" />\n        <span className=\"mr-8\">Filters</span>\n        <SquareBadge>{countApplied}</SquareBadge>\n      </button>\n    </Popover>\n  );\n}\n\nexport default TableFilter;\n","import React, { ReactElement, useCallback, useEffect, useMemo, useRef } from 'react';\nimport useDebounce from '@rooks/use-debounce';\nimport isEqual from 'lodash/isEqual';\nimport ContractListener from 'web3/components/contract-listener';\nimport Erc20Contract from 'web3/erc20Contract';\nimport Web3Contract from 'web3/web3Contract';\n\nimport { useWeb3 } from 'components/providers/web3Provider';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport { useContractManager } from '../web3/components/contractManagerProvider';\nimport { useReload } from './useReload';\n\nfunction useDeepCompareMemoize(value: any): typeof value {\n  const ref = useRef();\n\n  if (!isEqual(value, ref.current)) {\n    ref.current = value;\n  }\n\n  return ref.current;\n}\n\nexport const useContract = (\n  address: string | undefined,\n  {\n    loadBalance,\n    loadCommon,\n    loadAllowance,\n  }: { loadBalance?: boolean; loadCommon?: boolean; loadAllowance?: string[] } = {},\n): Erc20Contract | null => {\n  const { provider, account } = useWallet();\n  const [reload] = useReload();\n  const { getContract } = useContractManager();\n\n  const contract = useMemo(() => {\n    if (!address) {\n      return null;\n    }\n\n    const contract: Erc20Contract = getContract<Erc20Contract>(address, () => {\n      return new Erc20Contract([], address);\n    }); // (getTokenByAddress(address)?.contract as Erc20Contract) ?? new Erc20Contract([], address);\n    contract.on(Web3Contract.UPDATE_DATA, reload);\n\n    return contract;\n  }, [address, provider, reload]);\n\n  useEffect(() => {\n    if (contract && loadBalance) {\n      contract.setAccount(account);\n      contract.loadBalance();\n    }\n  }, [contract, loadBalance, account]);\n\n  useEffect(() => {\n    if (contract && loadCommon) {\n      contract\n        .loadCommon()\n        .then(() => reload())\n        .catch(Error);\n    }\n  }, [contract, loadCommon, reload]);\n\n  const memoisedAllowance = useDeepCompareMemoize(loadAllowance);\n\n  useEffect(() => {\n    if (contract && memoisedAllowance) {\n      if (Array.isArray(memoisedAllowance)) {\n        memoisedAllowance.forEach(i => contract.loadAllowance(i));\n      } else {\n        contract.loadAllowance(memoisedAllowance);\n      }\n    }\n  }, [contract, memoisedAllowance]);\n\n  return contract;\n};\n\nexport type UseContractOptions<T extends Web3Contract> = {\n  afterInit?: (contract: T) => void;\n  onDestroy?: (contract: T) => void;\n};\n\nexport type UseContractFactoryType = {\n  getOrCreateContract<T extends Web3Contract>(address: string, factory?: () => T, options?: UseContractOptions<T>): T;\n  getContract<T extends Web3Contract>(address: string): T | undefined;\n  Listeners: ReactElement | null;\n};\n\ntype CachedContractType = {\n  address: string;\n  factory: () => Web3Contract;\n  options?: UseContractOptions<Web3Contract>;\n  instance: Web3Contract;\n};\n\nexport type UseContractFactoryOptions = {\n  listeners?: boolean;\n};\n\nexport function useContractFactory(options?: UseContractFactoryOptions): UseContractFactoryType {\n  const { listeners = true } = options ?? {};\n  const { account, provider: walletProvider } = useWallet();\n  const { activeProvider } = useWeb3();\n  const [reload, version] = useReload();\n\n  const activeProviderRef = useRef(activeProvider);\n  const walletProviderRef = useRef(walletProvider);\n  const accountRef = useRef(account);\n\n  const contractsRef = useRef<Map<string, CachedContractType>>(new Map());\n\n  const createContract = useCallback(\n    (address: string, factory: () => Web3Contract, options?: UseContractOptions<Web3Contract>): Web3Contract => {\n      const contract = factory();\n      contract.setCallProvider(activeProviderRef.current);\n      contract.setProvider(walletProviderRef.current);\n      contract.setAccount(accountRef.current);\n\n      contractsRef.current.set(address, {\n        address,\n        factory,\n        options,\n        instance: contract,\n      });\n\n      options?.afterInit?.(contract);\n      reload();\n\n      return contract;\n    },\n    [activeProvider, account, reload],\n  );\n\n  const updateContracts = useDebounce(() => {\n    contractsRef.current.forEach(meta => {\n      meta.options?.onDestroy?.(meta.instance);\n      createContract(meta.address, () => meta.instance, meta.options);\n    });\n  }, 250);\n\n  if (activeProviderRef.current !== activeProvider) {\n    activeProviderRef.current = activeProvider;\n    updateContracts();\n  }\n\n  if (walletProviderRef.current !== walletProvider) {\n    walletProviderRef.current = walletProvider;\n    updateContracts();\n  }\n\n  if (accountRef.current !== account) {\n    accountRef.current = account;\n    updateContracts();\n  }\n\n  const getOrCreateContract = useCallback(\n    (address: string, factory: () => Web3Contract, options?: UseContractOptions<Web3Contract>): Web3Contract => {\n      let contract: Web3Contract;\n\n      if (contractsRef.current.has(address)) {\n        contract = contractsRef.current.get(address)!.instance;\n      } else {\n        contract = createContract(address, factory, options);\n      }\n\n      return contract;\n    },\n    [createContract],\n  );\n\n  const getContract = useCallback(\n    (address: string): Web3Contract | undefined => {\n      if (!contractsRef.current.has(address)) {\n        return undefined;\n      }\n\n      return contractsRef.current.get(address)!.instance;\n    },\n    [createContract],\n  );\n\n  const Listeners = useMemo(\n    () =>\n      listeners ? (\n        <>\n          {Array.from(contractsRef.current).map(([key, value]) => (\n            <ContractListener key={key} contract={value.instance} />\n          ))}\n        </>\n      ) : null,\n    [version, listeners],\n  );\n\n  return {\n    getOrCreateContract: getOrCreateContract as any,\n    getContract: getContract as any,\n    Listeners,\n  };\n}\n\nexport function useWeb3Contract<T extends Web3Contract>(factory: () => T, options?: UseContractOptions<T>): T {\n  return useContractFactory({ listeners: false }).getOrCreateContract<T>('$address', factory, options);\n}\n","import { CSSProperties, FC, useEffect, useMemo, useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport format from 'date-fns/format';\nimport Erc20Contract from 'web3/erc20Contract';\nimport { formatToken, formatUSD, shortenAddr } from 'web3/utils';\nimport Web3Contract from 'web3/web3Contract';\n\nimport Select from 'components/antd/select';\nimport Tooltip from 'components/antd/tooltip';\nimport { ExplorerAddressLink, ExplorerTxLink } from 'components/button';\nimport { ColumnType, Table, TableFooter } from 'components/custom/table';\nimport TableFilter, { TableFilterType } from 'components/custom/table-filter';\nimport { Text } from 'components/custom/typography';\nimport { useConfig } from 'components/providers/configProvider';\nimport { TokenType, useTokens } from 'components/providers/tokensProvider';\nimport { TokenIcon } from 'components/token-icon';\nimport { useContractFactory } from 'hooks/useContract';\nimport { useReload } from 'hooks/useReload';\nimport {\n  APITreasuryHistory,\n  APITreasuryToken,\n  useFetchTreasuryHistory,\n  useFetchTreasuryTokens,\n} from 'modules/governance/api';\n\ntype ExtendedAPITreasuryToken = APITreasuryToken & {\n  balanceAmount: BigNumber | undefined;\n  balanceAmountUSD: BigNumber | undefined;\n  token: TokenType | undefined;\n};\n\ntype ExtendedAPITreasuryHistory = APITreasuryHistory & {\n  token: TokenType | undefined;\n  amount: BigNumber | undefined;\n  amountUSD: BigNumber | undefined;\n};\n\ntype HistoryFilterType = {\n  token: string;\n  direction: string;\n};\n\nconst Columns: ColumnType<ExtendedAPITreasuryHistory>[] = [\n  {\n    heading: 'Token Name',\n    render: entity => (\n      <div className=\"flex flow-col col-gap-12 align-center\">\n        <TokenIcon name={entity.token?.icon} className=\"mr-16\" size={32} />\n        <div className=\"flex flow-row row-gap-4\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            {entity.tokenSymbol ?? '-'}\n          </Text>\n          <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n            {entity.token?.name ?? '-'}\n          </Text>\n        </div>\n      </div>\n    ),\n  },\n  {\n    heading: 'Transaction Hash',\n    render: entity => (\n      <ExplorerTxLink address={entity.transactionHash}>\n        <Text type=\"p1\" weight=\"semibold\" color=\"blue\">\n          {shortenAddr(entity.transactionHash)}\n        </Text>\n      </ExplorerTxLink>\n    ),\n  },\n  {\n    heading: 'Date',\n    render: entity => (\n      <>\n        <Text type=\"p1\" weight=\"semibold\" color=\"primary\" className=\"mb-4\">\n          {format(entity.blockTimestamp * 1_000, 'MM.dd.yyyy')}\n        </Text>\n        <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n          {format(entity.blockTimestamp * 1_000, 'HH:mm')}\n        </Text>\n      </>\n    ),\n  },\n  {\n    heading: <div className=\"text-right\">Amount</div>,\n    render: entity => (\n      <Tooltip\n        placement=\"bottomRight\"\n        title={formatToken(entity.amount, {\n          decimals: entity.tokenDecimals,\n          tokenName: entity.tokenSymbol,\n        })}>\n        <div className=\"text-right\">\n          <Text type=\"p1\" weight=\"semibold\" color={entity.transactionDirection === 'IN' ? 'green' : 'red'}>\n            {entity.transactionDirection === 'IN' ? '+' : '-'} {formatToken(entity.amount) ?? '-'}\n          </Text>\n          <Text type=\"small\" weight=\"semibold\">\n            {formatUSD(entity.amountUSD) ?? '-'}\n          </Text>\n        </div>\n      </Tooltip>\n    ),\n  },\n  {\n    heading: 'From',\n    render: entity => (\n      <ExplorerAddressLink\n        address={entity.transactionDirection === 'IN' ? entity.counterpartyAddress : entity.accountAddress}>\n        <Text type=\"p1\" weight=\"semibold\" color=\"blue\">\n          {entity.transactionDirection === 'IN'\n            ? entity.counterpartyLabel || shortenAddr(entity.counterpartyAddress)\n            : entity.accountLabel || shortenAddr(entity.accountAddress)}\n        </Text>\n      </ExplorerAddressLink>\n    ),\n  },\n  {\n    heading: 'To',\n    render: entity => (\n      <ExplorerAddressLink\n        address={entity.transactionDirection === 'OUT' ? entity.counterpartyAddress : entity.accountAddress}>\n        <Text type=\"p1\" weight=\"semibold\" color=\"blue\">\n          {entity.transactionDirection === 'OUT'\n            ? entity.counterpartyLabel || shortenAddr(entity.counterpartyAddress)\n            : entity.accountLabel || shortenAddr(entity.accountAddress)}\n        </Text>\n      </ExplorerAddressLink>\n    ),\n  },\n];\n\nconst TreasuryHoldings: FC = () => {\n  const config = useConfig();\n  const [reload, version] = useReload();\n  const { getAmountInUSD, getToken } = useTokens();\n  const { getOrCreateContract, getContract } = useContractFactory();\n\n  const [historyPage, setHistoryPage] = useState(1);\n  const historyPageSize = 10;\n  const [tokenFilter, setTokenFilter] = useState('all');\n  const [directionFilter, setDirectionFilter] = useState('all');\n  const filterValue = useMemo<HistoryFilterType>(\n    () => ({\n      token: tokenFilter,\n      direction: directionFilter,\n    }),\n    [tokenFilter, directionFilter],\n  );\n\n  const { data: treasuryTokens = [] } = useFetchTreasuryTokens();\n  const { data: historyResult, loading: historyLoading } = useFetchTreasuryHistory(\n    historyPage,\n    tokenFilter,\n    directionFilter,\n  );\n  const historyItems = historyResult?.data ?? [];\n  const historyItemsCount = historyResult?.meta.count ?? 0;\n\n  const tokensSource = useMemo(() => {\n    const tokens = (treasuryTokens ?? [])\n      .map<ExtendedAPITreasuryToken | undefined>(treasuryToken => {\n        const token = getToken(treasuryToken.symbol);\n\n        if (!token) {\n          return undefined;\n        }\n\n        const tokenContract = getContract<Erc20Contract>(treasuryToken.address);\n        const balanceAmount = tokenContract\n          ?.getBalanceOf(config.contracts.dao?.governance)\n          ?.unscaleBy(treasuryToken.decimals);\n        const balanceAmountUSD = getAmountInUSD(balanceAmount, treasuryToken.symbol);\n\n        return {\n          ...treasuryToken,\n          balanceAmount,\n          balanceAmountUSD,\n          token,\n        } as ExtendedAPITreasuryToken;\n      })\n      .filter(Boolean) as ExtendedAPITreasuryToken[];\n\n    tokens.sort((a, b) =>\n      a.balanceAmountUSD && b.balanceAmountUSD ? b.balanceAmountUSD.minus(a.balanceAmountUSD).toNumber() : 0,\n    );\n\n    return tokens;\n  }, [getAmountInUSD, getContract, treasuryTokens, version]);\n\n  const totalHoldingsUSD = useMemo(() => {\n    return BigNumber.sumEach(tokensSource, item => item.balanceAmountUSD ?? BigNumber.ZERO);\n  }, [tokensSource]);\n\n  const historySource = useMemo(() => {\n    return (historyItems?.map(item => {\n      const token = getToken(item.tokenSymbol);\n      const amount = BigNumber.from(item.amount);\n      const amountUSD = getAmountInUSD(amount, item.tokenSymbol);\n\n      return {\n        ...item,\n        token,\n        amount,\n        amountUSD,\n      };\n    }) ?? []) as ExtendedAPITreasuryHistory[];\n  }, [historyItems]);\n\n  const historyFilters = useMemo(() => {\n    return [\n      {\n        name: 'token',\n        label: 'Token address',\n        defaultValue: 'all',\n        itemRender: () => {\n          const tokenOpts = [\n            {\n              value: 'all',\n              label: 'All tokens',\n            },\n            ...tokensSource.map(token => ({\n              value: token.address,\n              label: token.token?.name ?? token.symbol,\n            })),\n          ];\n\n          return <Select options={tokenOpts} className=\"full-width\" />;\n        },\n      },\n      {\n        name: 'direction',\n        label: 'Transaction direction',\n        defaultValue: 'all',\n        itemRender: () => {\n          const options = [\n            {\n              value: 'all',\n              label: 'All pool transactions',\n            },\n            {\n              value: 'in',\n              label: 'In',\n            },\n            {\n              value: 'out',\n              label: 'Out',\n            },\n          ];\n\n          return <Select options={options} className=\"full-width\" />;\n        },\n      },\n    ] as TableFilterType<HistoryFilterType>[];\n  }, [tokensSource]);\n\n  useEffect(() => {\n    treasuryTokens?.forEach(token => {\n      getOrCreateContract(token.address, () => new Erc20Contract([], token.address), {\n        afterInit: contract => {\n          contract.on(Web3Contract.UPDATE_DATA, reload);\n          contract.loadCommon().catch(Error);\n          contract.loadBalance(config.contracts.dao?.governance).catch(Error);\n        },\n      });\n    });\n  }, [treasuryTokens]);\n\n  function handleFilterChange(filters: HistoryFilterType) {\n    setHistoryPage(1);\n    setTokenFilter(filters.token);\n    setDirectionFilter(filters.direction);\n  }\n\n  return (\n    <>\n      <Text type=\"h2\" weight=\"bold\" color=\"primary\" className=\"mb-4\">\n        {formatUSD(totalHoldingsUSD) ?? '-'}\n      </Text>\n      <Text type=\"p2\" weight=\"semibold\" color=\"secondary\" className=\"mb-32\">\n        Total holdings balance\n      </Text>\n      <div className=\"grid gap-16 mb-32\" style={{ gridTemplateColumns: 'repeat(3, 1fr)' } as CSSProperties}>\n        {tokensSource.map(item => (\n          <div key={item.address} className=\"card flex flow-col col-gap-12 align-center p-24\">\n            <TokenIcon name={item.token?.icon} className=\"mr-8\" size={32} />\n            <div className=\"flex flow-row row-gap-4\">\n              <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                {item.symbol ?? '-'}\n              </Text>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                {item.token?.name ?? '-'}\n              </Text>\n            </div>\n            <div className=\"flex flow-row row-gap-4 align-end ml-auto\">\n              <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n                {formatToken(item.balanceAmount) ?? '-'}\n              </Text>\n              <Text type=\"small\" weight=\"semibold\" color=\"secondary\">\n                {formatUSD(item.balanceAmountUSD) ?? '-'}\n              </Text>\n            </div>\n          </div>\n        ))}\n      </div>\n      <div className=\"card\">\n        <div className=\"card-header flex flow-col align-center justify-space-between pv-12\">\n          <Text type=\"p1\" weight=\"semibold\" color=\"primary\">\n            Transaction history\n          </Text>\n          <TableFilter<HistoryFilterType> filters={historyFilters} value={filterValue} onChange={handleFilterChange} />\n        </div>\n        <Table<ExtendedAPITreasuryHistory>\n          columns={Columns}\n          data={historySource}\n          rowKey={row => `${row.transactionHash}_${row.tokenSymbol}`}\n          loading={historyLoading}\n          // locale={{\n          //   emptyText: 'No entries', // TODO: Add support of empty result to Table component\n          // }}\n        />\n        <TableFooter\n          total={historyItemsCount}\n          current={historyPage}\n          pageSize={historyPageSize}\n          onChange={setHistoryPage}\n          text={({ total, from, to }) => (\n            <>\n              Showing {from} to {to} out of {total} transactions\n            </>\n          )}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default TreasuryHoldings;\n","import { FC, useEffect, useState } from 'react';\nimport { Route, Switch, useHistory, useRouteMatch } from 'react-router-dom';\n\nimport { Tabs } from 'components/custom/tabs';\n\nimport TreasuryHoldings from './treasury-holdings';\n\ntype RouteParams = {\n  tab: string;\n};\n\nconst TreasuryView: FC = () => {\n  const {\n    params: { tab = 'holdings' },\n  } = useRouteMatch<RouteParams>();\n  const history = useHistory();\n\n  const [activeTab, setActiveTab] = useState(tab);\n\n  function handleTabChange(tabKey: string) {\n    history.push(`/governance/treasury/${tabKey}`);\n  }\n\n  useEffect(() => {\n    if (tab !== activeTab) {\n      setActiveTab(tab);\n    }\n  }, [tab]);\n\n  return (\n    <div className=\"container-limit\">\n      <div className=\"card mb-32\">\n        <div className=\"card-header pv-0\">\n          <Tabs\n            tabs={[\n              {\n                id: 'holdings',\n                children: 'Holdings',\n                onClick: () => {\n                  handleTabChange('holdings');\n                },\n              },\n            ]}\n            size=\"small\"\n            activeKey={activeTab}\n            onClick={setActiveTab}\n          />\n        </div>\n      </div>\n      <Switch>\n        <Route path=\"/governance/treasury/holdings\" exact component={TreasuryHoldings} />\n      </Switch>\n    </div>\n  );\n};\n\nexport default TreasuryView;\n","import React from 'react';\nimport { Redirect, Route, Switch, useHistory, useRouteMatch } from 'react-router-dom';\n\nimport Tabs from 'components/antd/tabs';\nimport { ExternalLink } from 'components/button';\nimport Grid from 'components/custom/grid';\nimport Icon from 'components/custom/icon';\nimport { Text } from 'components/custom/typography';\nimport DaoAPIProvider from 'modules/governance/api';\nimport { useWallet } from 'wallets/walletProvider';\n\nimport DAOProvider from './components/dao-provider';\nimport VotingHeader from './components/voting-header';\nimport OverviewView from './views/overview-view';\nimport PortfolioView from './views/portfolio-view';\nimport ProposalCreateView from './views/proposal-create-view';\nimport ProposalDetailView from './views/proposal-detail-view';\nimport ProposalsView from './views/proposals-view';\nimport TreasuryView from './views/treasury-view';\n\nimport s from './s.module.scss';\n\ntype GovernanceViewParams = {\n  vt: string;\n};\n\nconst GovernanceViewInternal: React.FC = () => {\n  const history = useHistory();\n  const {\n    params: { vt = 'overview' },\n  } = useRouteMatch<GovernanceViewParams>();\n\n  const wallet = useWallet();\n\n  const [activeTab, setActiveTab] = React.useState<string>(vt);\n\n  function handleTabChange(tabKey: string) {\n    if (tabKey) {\n      setActiveTab(tabKey);\n      history.push(`/governance/${tabKey}`);\n    }\n  }\n\n  React.useEffect(() => {\n    if (vt !== activeTab) {\n      setActiveTab(vt);\n    }\n  }, [vt]);\n\n  return (\n    <Grid flow=\"row\">\n      {wallet.account && <VotingHeader />}\n\n      <Tabs className={s.tabs} activeKey={activeTab} onChange={handleTabChange}>\n        <Tabs.Tab\n          key=\"overview\"\n          tab={\n            <>\n              <Icon name=\"bar-charts-outlined\" /> Overview\n            </>\n          }\n        />\n        <Tabs.Tab\n          key=\"portfolio\"\n          disabled={!wallet.account}\n          tab={\n            <>\n              <Icon name=\"wallet-outlined\" /> Portfolio\n            </>\n          }\n        />\n        <Tabs.Tab\n          key=\"proposals\"\n          tab={\n            <>\n              <Icon name=\"proposal-outlined\" /> Proposals\n            </>\n          }\n        />\n        <Tabs.Tab\n          key=\"treasury\"\n          tab={\n            <>\n              <Icon name=\"treasury-outlined\" /> Treasury\n            </>\n          }\n        />\n        <Tabs.Tab\n          key=\"signal\"\n          tab={\n            <ExternalLink href=\"https://signal.barnbridge.com/\" style={{ color: 'inherit' }}>\n              <Grid flow=\"col\" gap={8} align=\"center\">\n                <Icon name=\"chats-outlined\" />\n                <Text type=\"p1\" weight=\"semibold\">\n                  Signal\n                </Text>\n                <Icon\n                  name=\"arrow-top-right\"\n                  width={8}\n                  height={8}\n                  style={{\n                    alignSelf: 'start',\n                    color: 'inherit',\n                  }}\n                />\n              </Grid>\n            </ExternalLink>\n          }\n        />\n        <Tabs.Tab\n          key=\"forum\"\n          tab={\n            <ExternalLink href=\"https://forum.barnbridge.com/\" style={{ color: 'inherit' }}>\n              <Grid flow=\"col\" gap={8} align=\"center\">\n                <Icon name=\"forum-outlined\" />\n                <Text type=\"p1\" weight=\"semibold\">\n                  Forum\n                </Text>\n                <Icon\n                  name=\"arrow-top-right\"\n                  width={8}\n                  height={8}\n                  style={{\n                    alignSelf: 'start',\n                    color: 'inherit',\n                  }}\n                />\n              </Grid>\n            </ExternalLink>\n          }\n        />\n      </Tabs>\n      <div className=\"content-container-fix content-container\">\n        <Switch>\n          <Route path=\"/governance/overview\" exact component={OverviewView} />\n          <Redirect exact from=\"/governance/portfolio\" to=\"/governance/portfolio/deposit\" />\n          <Route path=\"/governance/portfolio/:action(\\w+)\" component={PortfolioView} />\n          <Redirect exact from=\"/governance/treasury\" to=\"/governance/treasury/holdings\" />\n          <Route path=\"/governance/treasury/:tab(\\w+)\" exact component={TreasuryView} />\n          <Route path=\"/governance/proposals/create\" exact component={ProposalCreateView} />\n          <Route path=\"/governance/proposals/:id(\\d+)\" exact component={ProposalDetailView} />\n          <Route path=\"/governance/proposals\" exact component={ProposalsView} />\n          <Redirect from=\"/governance\" to=\"/governance/overview\" />\n        </Switch>\n      </div>\n    </Grid>\n  );\n};\n\nconst GovernanceView: React.FC = props => {\n  return (\n    <DaoAPIProvider>\n      <DAOProvider>\n        <GovernanceViewInternal>{props.children}</GovernanceViewInternal>\n      </DAOProvider>\n    </DaoAPIProvider>\n  );\n};\n\nexport default GovernanceView;\n"],"sourceRoot":""}