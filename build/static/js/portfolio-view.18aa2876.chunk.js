(this["webpackJsonpbarnbridge-frontend"]=this["webpackJsonpbarnbridge-frontend"]||[]).push([[14],{1361:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(4),c=n(17),r=n(8),s=n.n(r),o=n(33),i=n(1429),l=n.n(i),d=n(1),b=["className","children","spinning"],j=function(e){var t=e.className,n=e.children,r=e.spinning,i=Object(c.a)(e,b);return n?r?Object(d.jsxs)("div",{className:l.a.container,children:[Object(d.jsx)("div",{className:l.a.children,children:n}),Object(d.jsx)(o.a,Object(a.a)({name:"loader",className:s()(l.a.spinner,t)},i))]}):Object(d.jsx)(d.Fragment,{children:n}):Object(d.jsx)(o.a,Object(a.a)({name:"loader",className:s()(l.a.spinner,t)},i))}},1429:function(e,t,n){e.exports={spinner:"s_spinner__2lxg5",rotate:"s_rotate__K9I_G",container:"s_container__2DwVy",children:"s_children__1ZC_G"}},1619:function(e,t,n){"use strict";var a=n(4),c=n(0),r={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},s=n(117),o=function(e,t){return c.createElement(s.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:r}))};o.displayName="LoadingOutlined";t.a=c.forwardRef(o)},1811:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(15),c=n(4),r=n(5),s=n(0),o=n(19),i=n.n(o),l=n(141),d=n(65),b=n(38),j=n(1399),u=n(12),m=n(183),O=n(415),p=n(1437),h=n(1),f=function(e){var t=e.transactionType,n=e.accountAddress,o=e.poolAddress,f=e.eTokenAddress,y=Object(m.c)().getTokenIconBySymbol,x=Object(p.c)(),g=Object(s.useState)([]),v=Object(r.a)(g,2),T=v[0],k=v[1],A=Object(s.useState)(!1),w=Object(r.a)(A,2),N=w[0],S=w[1],B=Object(s.useState)({total:0,page:1,pageSize:10,accountAddress:n,poolAddress:o,eTokenAddress:f,transactionType:t}),E=Object(r.a)(B,2),D=E[0],P=E[1];Object(s.useEffect)((function(){P((function(e){return Object(c.a)(Object(c.a)({},e),{},{page:1,accountAddress:n,poolAddress:o,eTokenAddress:f,transactionType:t})}))}),[n,o,t]),Object(s.useEffect)((function(){S(!0),x.fetchTransactions({page:D.page,limit:D.pageSize,accountAddress:D.accountAddress,poolAddress:D.poolAddress,eTokenAddress:D.eTokenAddress,transactionType:D.transactionType}).then((function(e){Array.isArray(e.data)?(k(e.data),P((function(t){return Object(c.a)(Object(c.a)({},t),{},{total:e.meta.count})}))):(k([]),P((function(e){return Object(c.a)(Object(c.a)({},e),{},{total:0})})))})).catch((function(e){k([]),console.error(e)})).finally((function(){return S(!1)}))}),[D.page,D.pageSize,D.accountAddress,D.poolAddress,D.transactionType]);var z=Object(s.useMemo)((function(){return[{heading:"Tranche / Transaction",render:function(e){return Object(h.jsxs)("div",{className:"flex align-center",style:{whiteSpace:"nowrap"},children:[Object(h.jsx)(O.b,{name1:y(e.tokenA.symbol),name2:y(e.tokenB.symbol),size:32,className:"mr-16"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(u.b,{type:"p1",weight:"semibold",color:"primary",className:"mb-4",children:e.eTokenSymbol}),Object(h.jsxs)(u.b,{type:"small",weight:"semibold",color:"secondary",children:["WITHDRAW"===e.transactionType?"Withdraw":"Deposit"," \u2013 multiple tokens"]})]})]})}},{heading:"Token 1 amount",render:function(e){var t,n,a;return Object(h.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[Object(h.jsxs)("div",{className:"flex align-center mb-4",children:[Object(h.jsx)(O.a,{name:y(e.tokenA.symbol),size:16,className:"mr-4"}),Object(h.jsxs)(u.b,{type:"p1",weight:"semibold",color:"DEPOSIT"===e.transactionType?"red":"green",children:["DEPOSIT"===e.transactionType?"-":"+",Object(d.d)(null===(t=i.a.from(e.amountA))||void 0===t?void 0:t.unscaleBy(e.tokenA.decimals))]})]}),Object(h.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",children:Object(d.e)(null===(n=i.a.from(e.amountA))||void 0===n||null===(a=n.unscaleBy(e.tokenA.decimals))||void 0===a?void 0:a.multipliedBy(e.tokenAPrice))})]})}},{heading:"Token 2 amount",render:function(e){var t,n,a;return Object(h.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[Object(h.jsxs)("div",{className:"flex align-center mb-4",children:[Object(h.jsx)(O.a,{name:y(e.tokenB.symbol),size:16,className:"mr-4"}),Object(h.jsxs)(u.b,{type:"p1",weight:"semibold",color:"DEPOSIT"===e.transactionType?"red":"green",children:["DEPOSIT"===e.transactionType?"-":"+",Object(d.d)(null===(t=i.a.from(e.amountB))||void 0===t?void 0:t.unscaleBy(e.tokenB.decimals))]})]}),Object(h.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",children:Object(d.e)(null===(n=i.a.from(e.amountB))||void 0===n||null===(a=n.unscaleBy(e.tokenB.decimals))||void 0===a?void 0:a.multipliedBy(e.tokenBPrice))})]})}},{heading:"Pool token amount",render:function(e){var t;return Object(h.jsxs)(u.b,{type:"p1",weight:"semibold",color:"DEPOSIT"===e.transactionType?"green":"red",children:["DEPOSIT"===e.transactionType?"+":"-",Object(d.d)(null===(t=i.a.from(e.amountEToken))||void 0===t?void 0:t.dividedBy(e.sFactorE))]})}}].concat(Object(a.a)(n?[]:[{heading:"Address",render:function(e){return Object(h.jsx)(b.b,{address:e.accountAddress,variation:"link",children:Object(d.j)(e.accountAddress,6,4)})}}]),[{heading:"Transaction Hash",render:function(e){return Object(h.jsx)(b.c,{address:e.transactionHash,variation:"link",children:Object(d.j)(e.transactionHash,6,4)})}},{heading:"Date",render:function(e){var t=new Date(1e3*e.blockTimestamp);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.b,{type:"p1",weight:"semibold",color:"primary",className:"mb-4",children:Object(l.a)(t,"dd.MM.yyyy")}),Object(h.jsx)(u.b,{type:"small",weight:"semibold",color:"secondary",children:Object(l.a)(t,"HH:mm")})]})}}])}),[n]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{columns:z,data:T,loading:N}),Object(h.jsx)(j.b,{total:D.total,current:D.page,pageSize:D.pageSize,onChange:function(e){return P((function(t){return Object(c.a)(Object(c.a)({},t),{},{page:e})}))},text:!0})]})}},2290:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n(0),r=n(8),s=n.n(r),o=n(12),i=n(183),l=n(415),d=n(1437),b=n(4),j=n(420),u=n(1435),m=n(1368),O=n(1811),p=n(73),h=n(58),f=n(65),y=n(1399),x=n(1365),g=n(1),v=[{heading:"Tranche / Transaction",render:function(e){var t=Object(i.c)().getTokenIconBySymbol;return Object(g.jsxs)("div",{className:"flex align-center",children:[Object(g.jsx)(l.b,{name1:t(e.tokenA.symbol),name2:t(e.tokenB.symbol),size:40,className:"mr-16",style:{flexShrink:0}}),Object(g.jsx)("div",{className:"text-p1 fw-semibold color-primary mr-4",children:e.eTokenSymbol})]})}},{heading:"Pool token amount",render:function(e){var t,n,a,c=Object(x.a)(e.eTokenAddress,{loadBalance:!0,loadCommon:!0}),r=null===c||void 0===c||null===(t=c.balance)||void 0===t?void 0:t.unscaleBy(null===c||void 0===c?void 0:c.decimals);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"text-p1 fw-semibold color-primary mb-4",children:null!==(n=Object(f.d)(r))&&void 0!==n?n:"\u2013"}),Object(g.jsx)("div",{className:"text-sm fw-semibold color-secondary",children:null!==(a=Object(f.e)(null===r||void 0===r?void 0:r.multipliedBy(e.state.eTokenPrice)))&&void 0!==a?a:"\u2013"})]})}},{heading:"Actions",render:function(e){return Object(g.jsx)("div",{className:"flex align-center col-gap-24",children:Object(g.jsx)(h.b,{to:"/smart-exposure/pools/".concat(e.poolAddress,"/").concat(e.eTokenAddress,"/withdraw"),className:"button-primary",children:"Withdraw"})})}}],T=function(e){var t=e.poolAddress,n=Object(c.useState)([]),r=Object(a.a)(n,2),s=r[0],o=r[1],i=Object(d.c)();return Object(c.useEffect)((function(){i.fetchTranches(t).then(o)}),[t]),Object(g.jsx)(y.a,{columns:v,data:s,rowKey:function(e){return e.eTokenAddress}})},k=[{id:"positions",children:"Positions"},{id:"transactionHistory",children:"Transaction history"}],A={transactionType:""},w=[{name:"transactionType",label:"Transaction type",defaultValue:"",itemRender:function(){return Object(g.jsx)(j.a,{options:[{value:"",label:"All types"},{value:"DEPOSIT",label:"Deposit"},{value:"WITHDRAW",label:"Withdraw"}],className:"full-width"})}}],N=function(e){var t=e.poolAddress,n=e.className,r=Object(c.useState)(k[0].id),o=Object(a.a)(r,2),i=o[0],l=o[1],d=Object(p.c)().account,j=Object(c.useState)(A),h=Object(a.a)(j,2),f=h[0],y=h[1];return Object(g.jsxs)("section",{className:s()("card",n),children:[Object(g.jsxs)("header",{className:"card-header flex align-center p-0",style:{borderBottom:"1px solid var(--theme-border-color)",overflowX:"auto",paddingRight:16,paddingLeft:24},children:[Object(g.jsx)(m.g,{tabs:k,activeKey:i,onClick:l,variation:"normal",size:"small"}),"transactionHistory"===i&&Object(g.jsx)(u.a,{filters:w,value:f,onChange:function(e){y((function(t){return Object(b.a)(Object(b.a)({},t),e)}))},className:"ml-auto"})]}),"positions"===i?Object(g.jsx)(T,{poolAddress:t}):Object(g.jsx)(O.a,{poolAddress:t,accountAddress:d,transactionType:f.transactionType||void 0})]})},S=n(338),B=n.n(S),E=n(141),D=n(2275),P=n(1719),z=n(2280),_=n(1612),C=n(1613),I=n(2267),H=n(1578),F=n(1366),M=n(1630),W=n(60),K=n(1632),V=function(e){var t=e.poolAddress,n=e.className,r=Object(p.c)().account,i=Object(c.useState)(m.d.day),l=Object(a.a)(i,2),b=l[0],j=l[1],u=Object(c.useState)(!1),O=Object(a.a)(u,2),h=O[0],f=O[1],y=Object(c.useState)([]),x=Object(a.a)(y,2),v=x[0],T=x[1],k=Object(d.c)();Object(c.useEffect)((function(){r&&(f(!0),k.fetchPortfolioValue({accountAddress:r,window:b,poolAddress:t}).then((function(e){return T(e.data)})).catch((function(e){T([]),console.error(e),B.a.error({message:e.data})})).finally((function(){return f(!1)})))}),[r,t,b]);var A=Object(c.useMemo)((function(){return Object(K.b)(v,b)}),[v,b]);return Object(g.jsxs)("section",{className:s()("card",n),children:[Object(g.jsxs)("header",{className:"card-header flex align-center",style:{padding:"16px 16px 16px 24px"},children:[Object(g.jsx)(o.b,{type:"p1",weight:"semibold",children:"Portfolio value"}),Object(g.jsx)(m.c,{activeKey:b,onClick:j,size:"small",className:"ml-auto"})]}),Object(g.jsx)("div",{className:"p-24",children:Object(g.jsx)(F.a,{spinning:h,children:0===v.length?Object(g.jsxs)("div",{className:"flex flow-row row-gap-24 align-center justify-center pv-48",children:[Object(g.jsx)(M.a,{}),Object(g.jsx)(o.b,{type:"p1",color:"secondary",children:"Not enough data to plot a graph"})]}):Object(g.jsx)(D.a,{width:"100%",height:300,className:"mb-24",children:Object(g.jsxs)(P.a,{data:v,margin:{left:25},children:[Object(g.jsx)("defs",{children:Object(g.jsxs)("linearGradient",{id:"chart-red-gradient",gradientTransform:"rotate(180)",children:[Object(g.jsx)("stop",{offset:"0%",stopColor:"rgba(var(--theme-red-color-rgb), 0.08)"}),Object(g.jsx)("stop",{offset:"100%",stopColor:"rgba(var(--theme-red-color-rgb), 0)"})]})}),Object(g.jsx)(z.a,{vertical:!1,strokeDasharray:"3 0",stroke:"var(--theme-border-color)"}),Object(g.jsx)(_.a,{dataKey:"point",ticks:A,tickMargin:12,minTickGap:0,tickFormatter:function(e){return Object(K.a)(e,b)}}),Object(g.jsx)(C.a,{axisLine:!1,tickLine:!1,tickFormatter:function(e){var t;return null!==(t=Object(W.i)(e,{notation:"compact"}))&&void 0!==t?t:""}}),Object(g.jsx)(I.a,{separator:"",labelFormatter:function(e){return Object(g.jsx)(o.b,{type:"p2",tag:"span",weight:"semibold",color:"primary",children:"string"===typeof e?Object(E.a)(new Date(e),"MM.dd.yyyy HH:mm"):""})},formatter:function(e,t,n){var a=n.dataKey;n.payload;return Object(g.jsx)(o.b,{type:"p2",tag:"span",weight:"semibold",color:"portfolioValueSE"===a?"red":"blue",children:e})}}),Object(g.jsx)(H.a,{name:"Value: ",dataKey:"portfolioValueSE",type:"monotone",fill:"url(#chart-red-gradient)",stroke:"var(--theme-red-color)",strokeWidth:2})]})})})})]})};t.default=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],b=Object(c.useState)(null),j=Object(a.a)(b,2),u=j[0],m=j[1],O=Object(i.c)().getTokenBySymbol,p=Object(d.c)();return Object(c.useEffect)((function(){p.fetchPools().then((function(e){r(e)}))}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"tab-cards mb-40",children:[Object(g.jsxs)("button",{type:"button",className:s()("tab-card",{active:!u}),onClick:function(){return m(null)},children:[Object(g.jsx)(l.a,{name:"all",size:40,className:"mr-16"}),Object(g.jsx)("div",{children:Object(g.jsx)(o.b,{type:"p1",weight:"semibold",color:"primary",children:"All pairs"})})]}),n.map((function(e){var t=O(e.tokenA.symbol),n=O(e.tokenB.symbol);return Object(g.jsxs)("button",{type:"button",className:s()("tab-card",u===e&&"active"),disabled:!1,onClick:function(){return m(e)},children:[Object(g.jsx)(l.b,{name1:null===t||void 0===t?void 0:t.icon,name2:null===n||void 0===n?void 0:n.icon,size:40,className:"mr-16"}),Object(g.jsx)("div",{children:Object(g.jsx)(o.b,{type:"p1",weight:"semibold",color:"primary",children:e.poolName})})]},e.poolName)}))]}),Object(g.jsx)(V,{poolAddress:null===u||void 0===u?void 0:u.poolAddress,className:"mb-32"}),Object(g.jsx)(N,{poolAddress:null===u||void 0===u?void 0:u.poolAddress})]})}}}]);
//# sourceMappingURL=portfolio-view.18aa2876.chunk.js.map